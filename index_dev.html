<!-- The old HTML that still has all the JS links, etc. These were removed from the new version because that ends up getting sent to the user -->
<!DOCTYPE html>
<html>
<head>
    <title>Impulse</title>
    <meta property="og:title"
        content="Impulse" />
    <meta property="og:description"
        content="A fast-paced browser-based shooter with strategic depth, groundbreaking gameplay, and a high skill cap." />
    <meta property="og:image"
        content="art/logo_fb.png"/>

    <script type="text/javascript">
        var fileref = document.createElement("link");
        fileref.setAttribute("rel", "stylesheet");
        fileref.setAttribute("type", "text/css");
        fileref.setAttribute("href", "css/style.css");
        document.getElementsByTagName("head")[0].insertBefore(fileref,document.getElementsByTagName("head")[0].firstChild);
    </script>

    <!-- RavenJS -->
    <script src="//cdn.ravenjs.com/1.1.15/jquery,native/raven.min.js"></script>
    <script>
        Raven.config('https://6a20852ac459407e960a0700456cea2e@app.getsentry.com/37097', {
        }).install();
        Raven.setUser({
            email: 'porcelaingames@gmail.com',
            id: 'porcelaingames'
        });
    </script>
    <!-- END RavenJS -->
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-41419006-2', 'play-impulse.com');
      ga('send', 'pageview');

    </script>
    <!-- box2djs -->
    	<!-- box2djs -->

        <!--<link href='http://fonts.googleapis.com/css?family=Muli:300' rel='stylesheet' type='text/css'>-->
    <!--    <link href="css/style.css" type="text/css">-->


    <!--<script src="js/c100514.js"></script>-->

    <!--<script src="js/impulse.min.js"></script>-->
    <!--<script src="js/temp.js"> </script>-->

    <script src="js/game_vars.js"></script>
    <script src="js/draw.js"></script>
    <script src="js/util.js"></script>
    <script src="js/music_player.js"></script>
    <script src="js/hive_numbers.js"></script>
    <script src="js/quest_data.js"></script>
    <script src="js/vendor/Box2dWeb-2.1.a.3.min.js"></script>
    <script src="js/vendor/buzz.js"></script>
    <script src='js/player/player.js'></script>

    <script src='js/enemy/_enemy.js'></script>
    <script src='js/enemy/stunner.js'></script>
    <script src='js/enemy/dumb_stunner.js'></script>
    <script src='js/enemy/dark_one.js'></script>
    <script src='js/enemy/spear.js'></script>
    <script src='js/enemy/tank.js'></script>
    <script src='js/enemy/mote.js'></script>
    <script src='js/enemy/goo.js'></script>
    <script src='js/enemy/z_disabler.js'></script>
    <script src='js/enemy/troll.js'></script>
    <script src='js/enemy/fighter.js'></script>
    <script src='js/enemy/fighter_bullet.js'></script>
    <script src='js/enemy/piercing_fighter_bullet.js'></script>
    <script src='js/enemy/death_ray.js'></script>
    <script src='js/enemy/slingshot.js'></script>
    <script src='js/enemy/orbiter.js'></script>
    <script src='js/enemy/z_harpoon.js'></script>
    <script src='js/enemy/harpoon_head.js'></script>
    <script src='js/enemy/boss.js'></script>
    <script src='js/enemy/boss_one.js'></script>
    <script src='js/enemy/boss_two.js'></script>
    <script src='js/enemy/boss_two_spawner.js'></script>
    <script src='js/enemy/boss_three.js'></script>
    <script src='js/enemy/boss_four.js'></script>
    <script src='js/enemy/boss_four_spawner.js'></script>
    <script src='js/enemy/boss_four_attacker.js'></script>


    <script src='js/enemy/zz_enemy_data.js'></script>
    <script src='js/obstacle/basic_obstacle.js'></script>
    <script src='js/lib/visibility_graph.js'></script>

    <script src="js/level/enemy_spawner.js"></script>
    <script src="js/level/level.js"></script>
    <script src="js/level/level_data.js"></script>

    <script src="js/impulse_main.js"></script>
    <script src="js/game_states/_game_state.js"></script>
    <script src="js/game_states/a_loader_game_state.js"></script>
    <script src="js/game_states/fader_util.js"></script>
    <script src="js/game_states/main_game_transition_state.js"></script>
    <script src="js/game_states/main_game_summary_state.js"></script>
    <script src="js/game_states/world_map_state.js"></script>
    <script src="js/game_states/title_state.js"></script>
    <script src="js/game_states/game_over_state.js"></script>
    <script src="js/game_states/reward_game_state.js"></script>
    <script src="js/game_states/impulse_game_state.js"></script>
    <script src="js/game_states/credits_state.js"></script>
    <script src="js/game_states/classic_select_state.js"></script>
    <script src="js/game_states/enemies_info_state.js"></script>
    <script src="js/game_states/zz_how_to_play_state.js"></script>
    <script src="js/game_states/level_editor_state.js"></script>
    <script src="js/game_states/level_intro_state.js"></script>
    <script src="js/game_states/challenge_mode_intro_state.js"></script>
    <script src="js/game_states/music_player_state.js"></script>
    <script src="js/game_states/quest_game_state.js"></script>

    <script src="js/ui/background_animation.js"></script>
    <script src="js/ui/dialog_boxes.js"></script>
    <script src='js/ui/fragmentgroup.js'></script>
    <script src='js/ui/message_box.js'></script>
    <script src="js/ui/_impulse_button.js"></script>
    <script src="js/ui/level_button.js"></script>
    <script src="js/ui/small_enemy_button.js"></script>
    <script src="js/ui/slider.js"></script>
    <script src="js/ui/enemy_button.js"></script>
    <script src="js/ui/icon_button.js"></script>
    <script src="js/ui/small_button.js"></script>
    <script src="js/ui/world_button.js"></script>
    <script src="js/ui/quest_button.js"></script>
    <script src="js/ui/select_difficulty_button.js"></script>
    <script src="js/ui/checkbox_option_button.js"></script>
    <script src="js/ui/slider_option_button.js"></script>
    <script src="js/ui/tutorial_overlay.js"></script>

    <script type="text/javascript">
        window.onload = function() {
            var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;
            if(is_chrome) {
                window.impulse_main();
            } else {
                centerMessage()
            }

        }
        function centerMessage() {
            var message = document.getElementById("message");
          var dim = getWindowDimensions()

            message.setAttribute("style", "display: block" )
            if(message.clientWidth < dim.w)
            {
              offset_left = (dim.w-message.clientWidth)/2
              message.style.left =  Math.round(offset_left) + 'px'
            }
            else
            {
              offset_left = 0
            }
            if(message.clientHeight < dim.h)
            {
              offset_top = (dim.h-message.clientHeight )/2
              message.style.top = Math.round(offset_top) + 'px'
            }
            else
            {
              offset_top = 0
            }

        }
        function redirect_to_chrome() {
            window.location = "https://www.google.com/intl/en/chrome/browser/";
        }
        function start_game() {
            message.setAttribute("style", "display: none" )
            setTimeout(function(){window.impulse_main()}, 50)
        }

    </script>

</head>
<!-- Html -->
<body>
    <div id ="canvas_container">

        <!-- AddThis Button BEGIN -->
        <!--<div id = "addthis-inline">
            <div class="addthis_toolbox addthis_default_style addthis_32x32_style">
                <a class="addthis_button_facebook"></a>
                <a class="addthis_button_twitter"></a>
                <a class="addthis_button_google_plusone_share"></a>
                <a class="addthis_button_tumblr"></a>
                <a class="addthis_button_compact"></a>
            </div>
        </div>-->
        <canvas id="canvas" tabindex='1'>
        </canvas>
    </div>
    <div id ="bg_canvas_container">
        <canvas id="bg_canvas"></canvas>
    </div>
    <div id = "message">
        <div id = "banner">
            IMPULSE
        </div>
        <div id="warning">
            Impulse is best played with the Chrome web browser.
        </div>
        <br />
        <div id = "continue" class="button" onclick="start_game()">
            Continue Anyway
        </div>
        <br />
        <div id = "download" class="button" onclick="redirect_to_chrome()">
            Download Chrome
        </div>
    </div>
    <div id = "fb-root">
    </div>

</body>
</html>

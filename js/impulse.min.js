var l,n={};
(function(a,b){function c(){}!(Object.prototype.defineProperty instanceof Function)&&Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function&&(Object.defineProperty=function(a,b,c){c.get instanceof Function&&a.__defineGetter__(b,c.get);c.set instanceof Function&&a.__defineSetter__(b,c.set)});a.Fb=function(a,b){c.prototype=b.prototype;a.prototype=new c;a.prototype.constructor=a};a.XB=function(a,b){return function(){b.apply(a,arguments)}};a.NA=function(a){a===
b&&(a=0);for(var c=Array(a||0),g=0;g<a;++g)c[g]=0;return c};a.is=function(a,c){return null===a?!1:c instanceof Function&&a instanceof c||a.constructor.Os!=b&&a.constructor.Os[c]?!0:!1};a.Cg=function(a){return Math.abs(parseInt(a))}})(n);var ba=Array,da=n.NA;"undefined"===typeof n&&(n={});"undefined"===typeof n.v&&(n.v={});"undefined"===typeof n.v.Sa&&(n.v.Sa={});"undefined"===typeof n.aa&&(n.aa={});"undefined"===typeof n.aa.Math&&(n.aa.Math={});"undefined"===typeof n.l&&(n.l={});
"undefined"===typeof n.l.ka&&(n.l.ka={});"undefined"===typeof n.l.Tb&&(n.l.Tb={});"undefined"===typeof n.l.J&&(n.l.J={});
(function(){function a(){a.Dn.apply(this,arguments)}function b(){b.Us.apply(this,arguments)}function c(){c.En.apply(this,arguments);this.constructor===c&&this.En.apply(this,arguments)}function d(){d.Bd.apply(this,arguments)}function f(){f.Al.apply(this,arguments);this.constructor===f&&this.Al.apply(this,arguments)}function g(){g.wq.apply(this,arguments)}function h(){h.kk.apply(this,arguments)}function k(){k.xq.apply(this,arguments)}function m(){m.yq.apply(this,arguments)}function q(){q.zq.apply(this,
arguments)}function p(){p.Jn.apply(this,arguments);this.constructor===p&&this.Jn.apply(this,arguments)}function t(){t.Aq.apply(this,arguments)}function z(){z.ft.apply(this,arguments)}function s(){s.gt.apply(this,arguments)}function x(){x.ii.apply(this,arguments);this.constructor===x&&this.ii.apply(this,arguments)}function K(){K.Sn.apply(this,arguments);this.constructor===K&&this.Sn.apply(this,arguments)}function M(){M.mt.apply(this,arguments)}function ca(){ca.Zn.apply(this,arguments);this.constructor===
ca&&this.Zn.apply(this,arguments)}function T(){T.qt.apply(this,arguments)}function D(){D.rt.apply(this,arguments)}function V(){V.Kl.apply(this,arguments)}function ga(){ga.$n.apply(this,arguments);this.constructor===ga&&this.$n.apply(this,arguments)}function W(){W.Bq.apply(this,arguments)}function E(){E.st.apply(this,arguments)}function $(){$.Te.apply(this,arguments)}function Ba(){Ba.Cq.apply(this,arguments)}function qa(){qa.Ml.apply(this,arguments);this.constructor===qa&&this.Ml.apply(this,arguments)}
function Ca(){Ca.xs.apply(this,arguments)}function v(){v.Bs.apply(this,arguments)}function u(){u.cj.apply(this,arguments);this.constructor===u&&this.cj.apply(this,arguments)}function y(){y.Kn.apply(this,arguments);this.constructor===y&&this.Kn.apply(this,arguments)}function C(){C.Ln.apply(this,arguments);this.constructor===C&&this.Ln.apply(this,arguments)}function I(){I.Tn.apply(this,arguments)}function U(){U.ki.apply(this,arguments);this.constructor===U&&this.ki.apply(this,arguments)}function H(){H.Ub.apply(this,
arguments);this.constructor===H&&this.Ub.apply(this,arguments)}function aa(){aa.yl.apply(this,arguments);this.constructor===aa&&this.yl.apply(this,arguments)}function B(){B.Jb.apply(this,arguments)}function $a(){$a.ji.apply(this,arguments);this.constructor===$a&&this.ji.apply(this,arguments)}function pd(){pd.Fl.apply(this,arguments);this.constructor===pd&&this.Fl.apply(this,arguments)}function Ae(){Ae.Lf.apply(this,arguments)}function Be(){Be.ao.apply(this,arguments)}function qd(){qd.ej.apply(this,
arguments);this.constructor===qd&&this.ej.apply(this,arguments)}function rd(){rd.mg.apply(this,arguments);this.constructor===rd&&this.mg.apply(this,arguments)}function hb(){hb.Ll.apply(this,arguments);this.constructor===hb&&this.Ll.apply(this,arguments)}function sd(){sd.ie.apply(this,arguments);this.constructor===sd&&this.ie.apply(this,arguments)}function td(){td.xl.apply(this,arguments);this.constructor===td&&this.xl.apply(this,arguments)}function Ce(){Ce.vq.apply(this,arguments)}function De(){De.at.apply(this,
arguments)}function Ee(){Ee.Gn.apply(this,arguments)}function ud(){ud.Bl.apply(this,arguments);this.constructor===ud&&this.Bl.apply(this,arguments)}function vd(){vd.Se.apply(this,arguments);this.constructor===vd&&this.Se.apply(this,arguments)}function Fe(){Fe.et.apply(this,arguments)}function Ge(){Ge.it.apply(this,arguments)}function wd(){wd.Cl.apply(this,arguments);this.constructor===wd&&this.Cl.apply(this,arguments)}function xd(){xd.Dl.apply(this,arguments);this.constructor===xd&&this.Dl.apply(this,
arguments)}function yd(){yd.El.apply(this,arguments);this.constructor===yd&&this.El.apply(this,arguments)}function He(){He.Dq.apply(this,arguments)}function zd(){zd.Ue.apply(this,arguments);this.constructor===zd&&this.Ue.apply(this,arguments)}function Ie(){Ie.Ws.apply(this,arguments)}function Ad(){Ad.Za.apply(this,arguments);this.constructor===Ad&&this.Za.apply(this,arguments)}function Bd(){Bd.Fn.apply(this,arguments);this.constructor===Bd&&this.Fn.apply(this,arguments)}function Je(){Je.Zs.apply(this,
arguments)}function Ke(){Ke.$s.apply(this,arguments)}function Cd(){Cd.zl.apply(this,arguments);this.constructor===Cd&&this.zl.apply(this,arguments)}function Le(){Le.bt.apply(this,arguments)}function Me(){Me.ct.apply(this,arguments)}function Dd(){Dd.dj.apply(this,arguments);this.constructor===Dd&&this.dj.apply(this,arguments)}function Ne(){Ne.ht.apply(this,arguments)}function Ed(){Ed.Vn.apply(this,arguments);this.constructor===Ed&&this.Vn.apply(this,arguments)}function Oe(){Oe.nt.apply(this,arguments)}
function Pe(){Pe.ot.apply(this,arguments)}function Qe(){Qe.pt.apply(this,arguments)}function Fd(){Fd.lk.apply(this,arguments);this.constructor===Fd&&this.lk.apply(this,arguments)}function Re(){Re.Vs.apply(this,arguments)}function Se(){Se.Xs.apply(this,arguments)}function Te(){Te.Ys.apply(this,arguments)}function Ue(){Ue.Fc.apply(this,arguments)}function Ve(){Ve.dt.apply(this,arguments)}function We(){We.jt.apply(this,arguments)}function Xe(){Xe.tt.apply(this,arguments)}function Gd(){Gd.Hn.apply(this,
arguments);this.constructor===Gd&&this.Hn.apply(this,arguments)}function Hd(){Hd.In.apply(this,arguments);this.constructor===Hd&&this.In.apply(this,arguments)}function Id(){Id.Mn.apply(this,arguments);this.constructor===Id&&this.Mn.apply(this,arguments)}function Jd(){Jd.Nn.apply(this,arguments);this.constructor===Jd&&this.Nn.apply(this,arguments)}function Kd(){Kd.On.apply(this,arguments);this.constructor===Kd&&this.On.apply(this,arguments)}function Ld(){Ld.Pn.apply(this,arguments);this.constructor===
Ld&&this.Pn.apply(this,arguments)}function Ye(){Ye.kt.apply(this,arguments)}function Md(){Md.ia.apply(this,arguments);this.constructor===Md&&this.ia.apply(this,arguments)}function Nd(){Nd.ua.apply(this,arguments);this.constructor===Nd&&this.ua.apply(this,arguments)}function Ze(){Ze.lt.apply(this,arguments)}function Od(){Od.Qn.apply(this,arguments);this.constructor===Od&&this.Qn.apply(this,arguments)}function Pd(){Pd.Rn.apply(this,arguments);this.constructor===Pd&&this.Rn.apply(this,arguments)}function Qd(){Qd.Un.apply(this,
arguments);this.constructor===Qd&&this.Un.apply(this,arguments)}function Rd(){Rd.Gl.apply(this,arguments);this.constructor===Rd&&this.Gl.apply(this,arguments)}function Sd(){Sd.Wn.apply(this,arguments);this.constructor===Sd&&this.Wn.apply(this,arguments)}function Td(){Td.Xn.apply(this,arguments);this.constructor===Td&&this.Xn.apply(this,arguments)}function Ud(){Ud.Hl.apply(this,arguments);this.constructor===Ud&&this.Hl.apply(this,arguments)}function Vd(){Vd.Yn.apply(this,arguments);this.constructor===
Vd&&this.Yn.apply(this,arguments)}function Wd(){Wd.Il.apply(this,arguments);this.constructor===Wd&&this.Il.apply(this,arguments)}function Xd(){Xd.Jl.apply(this,arguments);this.constructor===Xd&&this.Jl.apply(this,arguments)}function Yd(){Yd.bo.apply(this,arguments);this.constructor===Yd&&this.bo.apply(this,arguments)}function Zd(){Zd.co.apply(this,arguments);this.constructor===Zd&&this.co.apply(this,arguments)}n.v.IA="Box2D.Collision.IBroadPhase";n.v.Dn=a;n.v.Us=b;n.v.En=c;n.v.Bd=d;n.v.Al=f;n.v.wq=
g;n.v.kk=h;n.v.xq=k;n.v.yq=m;n.v.zq=q;n.v.Jn=p;n.v.Aq=t;n.v.ft=z;n.v.gt=s;n.v.ii=x;n.v.Sn=K;n.v.mt=M;n.v.Zn=ca;n.v.qt=T;n.v.rt=D;n.v.Kl=V;n.v.$n=ga;n.v.Bq=W;n.v.st=E;n.v.Te=$;n.v.Cq=Ba;n.v.Ml=qa;n.v.xs=Ca;n.v.Bs=v;n.v.Sa.cj=u;n.v.Sa.Kn=y;n.v.Sa.Ln=C;n.v.Sa.Tn=I;n.v.Sa.ki=U;n.v.Sa.Ub=H;n.aa.SE="Box2D.Common.b2internal";n.aa.yl=aa;n.aa.Jb=B;n.aa.Math.ji=$a;n.aa.Math.Fl=pd;n.aa.Math.Lf=Ae;n.aa.Math.ao=Be;n.aa.Math.ej=qd;n.aa.Math.mg=rd;n.aa.Math.Ll=hb;n.l.ie=sd;n.l.xl=td;n.l.vq=Ce;n.l.at=De;n.l.Gn=Ee;
n.l.Bl=ud;n.l.Se=vd;n.l.et=Fe;n.l.it=Ge;n.l.Cl=wd;n.l.Dl=xd;n.l.El=yd;n.l.Dq=He;n.l.Ue=zd;n.l.ka.Ws=Ie;n.l.ka.Za=Ad;n.l.ka.Fn=Bd;n.l.ka.Zs=Je;n.l.ka.$s=Ke;n.l.ka.zl=Cd;n.l.ka.bt=Le;n.l.ka.ct=Me;n.l.ka.dj=Dd;n.l.ka.ht=Ne;n.l.ka.Vn=Ed;n.l.ka.nt=Oe;n.l.ka.ot=Pe;n.l.ka.pt=Qe;n.l.ka.lk=Fd;n.l.Tb.Vs=Re;n.l.Tb.Xs=Se;n.l.Tb.Ys=Te;n.l.Tb.Fc=Ue;n.l.Tb.dt=Ve;n.l.Tb.jt=We;n.l.Tb.tt=Xe;n.l.J.Hn=Gd;n.l.J.In=Hd;n.l.J.Mn=Id;n.l.J.Nn=Jd;n.l.J.On=Kd;n.l.J.Pn=Ld;n.l.J.kt=Ye;n.l.J.ia=Md;n.l.J.ua=Nd;n.l.J.lt=Ze;n.l.J.Qn=
Od;n.l.J.Rn=Pd;n.l.J.Un=Qd;n.l.J.Gl=Rd;n.l.J.Wn=Sd;n.l.J.Xn=Td;n.l.J.Hl=Ud;n.l.J.Yn=Vd;n.l.J.Il=Wd;n.l.J.Jl=Xd;n.l.J.bo=Yd;n.l.J.co=Zd})();n.wc=[];
(function(){var a=n.v.Sa.cj,b=n.v.Sa.ki,c=n.v.Sa.Ub,d=n.aa.Jb,f=n.aa.Math.Lf,g=n.aa.Math.ao,h=n.aa.Math.ej,k=n.aa.Math.mg,m=n.v.Dn,q=n.v.Us,p=n.v.En,t=n.v.Bd,z=n.v.Al,s=n.v.wq,x=n.v.kk,K=n.v.xq,M=n.v.yq,ca=n.v.zq,T=n.v.Jn,D=n.v.Aq,V=n.v.ft,ga=n.v.gt,W=n.v.ii,E=n.v.Sn,$=n.v.mt,Ba=n.v.Zn,qa=n.v.qt,Ca=n.v.rt,v=n.v.Kl,u=n.v.$n,y=n.v.Bq,C=n.v.st,I=n.v.Te,U=n.v.Cq,H=n.v.Ml,aa=n.v.xs,B=n.v.Bs,$a=n.v.IA;m.Dn=function(){this.lowerBound=new k;this.upperBound=new k};m.prototype.tl=function(){var a=this.upperBound.y-
this.lowerBound.y;return 0<=this.upperBound.x-this.lowerBound.x&&0<=a&&this.lowerBound.tl()&&this.upperBound.tl()};m.prototype.EA=function(){return new k((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)};m.prototype.ys=function(a){return this.lowerBound.x<=a.lowerBound.x&&this.lowerBound.y<=a.lowerBound.y&&a.upperBound.x<=this.upperBound.x&&a.upperBound.y<=this.upperBound.y};m.prototype.Xi=function(a){var b=a.lowerBound.y-this.upperBound.y,c=this.lowerBound.y-a.upperBound.y;
return 0<a.lowerBound.x-this.upperBound.x||0<b||0<this.lowerBound.x-a.upperBound.x||0<c?!1:!0};m.ol=function(a,b){var c=new m;c.ol(a,b);return c};m.prototype.ol=function(a,b){this.lowerBound.x=Math.min(a.lowerBound.x,b.lowerBound.x);this.lowerBound.y=Math.min(a.lowerBound.y,b.lowerBound.y);this.upperBound.x=Math.max(a.upperBound.x,b.upperBound.x);this.upperBound.y=Math.max(a.upperBound.y,b.upperBound.y)};q.Us=function(){};q.prototype.VA=function(a){var b=this.value,c=this.Ii,d=this.Ev;this.value=
a.value;this.Ii=a.Ii;this.Ev=a.Ev;a.value=b;a.Ii=c;a.Ev=d};p.En=function(){};p.prototype.En=function(){this.My=new da;this.My[0]=0;this.My[1]=0;this.kA=new da;this.kA[0]=0;this.kA[1]=0};t.Bd=function(){};t.bw=function(a,b,c,d){void 0===d&&(d=0);var f,v=0;f=b[0];var y=f.$b;f=b[1];var u=f.$b,g=c.x*y.x+c.y*y.y-d;f=c.x*u.x+c.y*u.y-d;0>=g&&a[v++].R(b[0]);0>=f&&a[v++].R(b[1]);0>g*f&&(c=g/(g-f),f=a[v],f=f.$b,f.x=y.x+c*(u.x-y.x),f.y=y.y+c*(u.y-y.y),f=a[v],f.id=(0<g?b[0]:b[1]).id,++v);return v};t.Zp=function(a,
b,c,d,f){void 0===c&&(c=0);parseInt(a.Ib);var v=a.Y;a=a.mc;var y=parseInt(d.Ib),u=d.Y,g,C;g=b.G;C=a[c];a=g.j.x*C.x+g.k.x*C.y;d=g.j.y*C.x+g.k.y*C.y;g=f.G;var k=g.j.x*a+g.j.y*d;g=g.k.x*a+g.k.y*d;for(var I=0,h=Number.MAX_VALUE,H=0;H<y;++H)C=u[H],C=C.x*k+C.y*g,C<h&&(h=C,I=H);C=v[c];g=b.G;c=b.position.x+(g.j.x*C.x+g.k.x*C.y);b=b.position.y+(g.j.y*C.x+g.k.y*C.y);C=u[I];g=f.G;v=f.position.x+(g.j.x*C.x+g.k.x*C.y);f=f.position.y+(g.j.y*C.x+g.k.y*C.y);return(v-c)*a+(f-b)*d};t.iw=function(a,b,c,d,f){var v=parseInt(b.Ib),
y=b.mc,u,g;g=f.G;u=d.zi;var C=f.position.x+(g.j.x*u.x+g.k.x*u.y),k=f.position.y+(g.j.y*u.x+g.k.y*u.y);g=c.G;u=b.zi;C-=c.position.x+(g.j.x*u.x+g.k.x*u.y);k-=c.position.y+(g.j.y*u.x+g.k.y*u.y);g=C*c.G.j.x+k*c.G.j.y;for(var k=C*c.G.k.x+k*c.G.k.y,C=0,I=-Number.MAX_VALUE,h=0;h<v;++h)u=y[h],u=u.x*g+u.y*k,u>I&&(I=u,C=h);y=t.Zp(b,c,C,d,f);u=parseInt(0<=C-1?C-1:v-1);g=t.Zp(b,c,u,d,f);var k=parseInt(C+1<v?C+1:0),I=t.Zp(b,c,k,d,f),H=0,U=0;if(g>y&&g>I)U=-1,h=u,H=g;else if(I>y)U=1,h=k,H=I;else return a[0]=C,y;
for(;;)if(C=-1==U?0<=h-1?h-1:v-1:h+1<v?h+1:0,y=t.Zp(b,c,C,d,f),y>H)h=C,H=y;else break;a[0]=h;return H};t.DA=function(a,b,c,d,f,v){void 0===d&&(d=0);parseInt(b.Ib);var y=b.mc,u=parseInt(f.Ib);b=f.Y;f=f.mc;var g;g=c.G;c=y[d];var y=g.j.x*c.x+g.k.x*c.y,C=g.j.y*c.x+g.k.y*c.y;g=v.G;c=g.j.x*y+g.j.y*C;C=g.k.x*y+g.k.y*C;y=c;g=0;for(var k=Number.MAX_VALUE,I=0;I<u;++I)c=f[I],c=y*c.x+C*c.y,c<k&&(k=c,g=I);f=parseInt(g);y=parseInt(f+1<u?f+1:0);u=a[0];c=b[f];g=v.G;u.$b.x=v.position.x+(g.j.x*c.x+g.k.x*c.y);u.$b.y=
v.position.y+(g.j.y*c.x+g.k.y*c.y);u.id.qg.lD=d;u.id.qg.fC=f;u.id.qg.gC=0;u=a[1];c=b[y];g=v.G;u.$b.x=v.position.x+(g.j.x*c.x+g.k.x*c.y);u.$b.y=v.position.y+(g.j.y*c.x+g.k.y*c.y);u.id.qg.lD=d;u.id.qg.fC=y;u.id.qg.gC=1};t.Is=function(){var a=new ba(2);a[0]=new aa;a[1]=new aa;return a};t.wA=function(a,b,c,f,v){var u;a.Dc=0;var y=b.Ia+f.Ia;t.qv[0]=0;var g=t.iw(t.qv,b,c,f,v);u=t.qv[0];if(!(g>y)){var C;t.rv[0]=0;var k=t.iw(t.rv,f,v,b,c);C=t.rv[0];if(!(k>y)){var I=0,h=0;k>.98*g+.001?(g=f,f=b,b=v,I=C,a.hb=
W.tk,h=1):(g=b,b=c,c=v,I=u,a.hb=W.Tg,h=0);u=t.qD;t.DA(u,g,b,I,f,c);C=parseInt(g.Ib);v=g.Y;var g=v[I],H;H=I+1<C?v[parseInt(I+1)]:v[0];I=t.sD;I.R(H.x-g.x,H.y-g.y);I.xb();v=t.rD;v.x=I.y;v.y=-I.x;f=t.uD;f.R(.5*(g.x+H.x),.5*(g.y+H.y));k=t.AD;C=b.G;k.x=C.j.x*I.x+C.k.x*I.y;k.y=C.j.y*I.x+C.k.y*I.y;var U=t.BD;U.x=-k.x;U.y=-k.y;I=t.tD;I.x=k.y;I.y=-k.x;var m=t.ED,aa=t.FD;m.x=b.position.x+(C.j.x*g.x+C.k.x*g.y);m.y=b.position.y+(C.j.y*g.x+C.k.y*g.y);aa.x=b.position.x+(C.j.x*H.x+C.k.x*H.y);aa.y=b.position.y+(C.j.y*
H.x+C.k.y*H.y);b=I.x*m.x+I.y*m.y;C=k.x*aa.x+k.y*aa.y+y;H=t.oD;g=t.pD;aa=t.bw(H,u,U,-k.x*m.x-k.y*m.y+y);if(!(2>aa||(aa=t.bw(g,H,k,C),2>aa))){a.Jd.K(v);a.eb.K(f);for(f=v=0;f<d.sf;++f)u=g[f],I.x*u.$b.x+I.y*u.$b.y-b<=y&&(k=a.fb[v],C=c.G,U=u.$b.x-c.position.x,m=u.$b.y-c.position.y,k.eb.x=U*C.j.x+m*C.j.y,k.eb.y=U*C.k.x+m*C.k.y,k.Ci.R(u.id),k.Ci.qg.fF=h,++v);a.Dc=v}}}};t.uA=function(a,b,c,d,f){a.Dc=0;var v,u;v=c.G;u=b.pd;var g=c.position.x+(v.j.x*u.x+v.k.x*u.y);c=c.position.y+(v.j.y*u.x+v.k.y*u.y);v=f.G;
u=d.pd;g=f.position.x+(v.j.x*u.x+v.k.x*u.y)-g;f=f.position.y+(v.j.y*u.x+v.k.y*u.y)-c;v=b.Ia+d.Ia;g*g+f*f>v*v||(a.hb=W.St,a.eb.K(b.pd),a.Jd.La(),a.Dc=1,a.fb[0].eb.K(d.pd),a.fb[0].Ci.key=0)};t.vA=function(a,b,c,d,f){var v=a.Dc=0,u=0,g,y;y=f.G;g=d.pd;var C=f.position.y+(y.j.y*g.x+y.k.y*g.y),v=f.position.x+(y.j.x*g.x+y.k.x*g.y)-c.position.x,u=C-c.position.y;y=c.G;c=v*y.j.x+u*y.j.y;y=v*y.k.x+u*y.k.y;var k=0,C=-Number.MAX_VALUE;f=b.Ia+d.Ia;var I=parseInt(b.Ib),h=b.Y;b=b.mc;for(var H=0;H<I;++H){g=h[H];v=
c-g.x;u=y-g.y;g=b[H];v=g.x*v+g.y*u;if(v>f)return;v>C&&(C=v,k=H)}v=parseInt(k);u=parseInt(v+1<I?v+1:0);g=h[v];h=h[u];if(C<Number.MIN_VALUE)a.Dc=1,a.hb=W.Tg,a.Jd.K(b[k]),a.eb.x=.5*(g.x+h.x),a.eb.y=.5*(g.y+h.y);else if(C=(c-h.x)*(g.x-h.x)+(y-h.y)*(g.y-h.y),0>=(c-g.x)*(h.x-g.x)+(y-g.y)*(h.y-g.y)){if((c-g.x)*(c-g.x)+(y-g.y)*(y-g.y)>f*f)return;a.Dc=1;a.hb=W.Tg;a.Jd.x=c-g.x;a.Jd.y=y-g.y;a.Jd.xb();a.eb.K(g)}else if(0>=C){if((c-h.x)*(c-h.x)+(y-h.y)*(y-h.y)>f*f)return;a.Dc=1;a.hb=W.Tg;a.Jd.x=c-h.x;a.Jd.y=y-
h.y;a.Jd.xb();a.eb.K(h)}else{k=.5*(g.x+h.x);g=.5*(g.y+h.y);C=(c-k)*b[v].x+(y-g)*b[v].y;if(C>f)return;a.Dc=1;a.hb=W.Tg;a.Jd.x=b[v].x;a.Jd.y=b[v].y;a.Jd.xb();a.eb.R(k,g)}a.fb[0].eb.K(d.pd);a.fb[0].Ci.key=0};t.Xi=function(a,b){var c=b.lowerBound,d=a.upperBound,f=c.x-d.x,v=c.y-d.y,c=a.lowerBound,d=b.upperBound,g=c.y-d.y;return 0<f||0<v||0<c.x-d.x||0<g?!1:!0};n.wc.push(function(){n.v.Bd.qD=t.Is();n.v.Bd.oD=t.Is();n.v.Bd.pD=t.Is();n.v.Bd.qv=new da(1);n.v.Bd.rv=new da(1);n.v.Bd.sD=new k;n.v.Bd.rD=new k;
n.v.Bd.uD=new k;n.v.Bd.tD=new k;n.v.Bd.AD=new k;n.v.Bd.BD=new k;n.v.Bd.ED=new k;n.v.Bd.FD=new k;n.v.Bd.ME=new k;n.v.Bd.QE=255});z.Al=function(){this.qg=new B};z.prototype.Al=function(){this.qg.Yi=this};z.prototype.R=function(a){this.key=a.pf};z.prototype.wb=function(){var a=new z;a.key=this.key;return a};Object.defineProperty(z.prototype,"key",{enumerable:!1,configurable:!0,get:function(){return this.pf}});Object.defineProperty(z.prototype,"key",{enumerable:!1,configurable:!0,set:function(a){void 0===
a&&(a=0);this.pf=a;this.qg.Ss=this.pf&255;this.qg.Qs=(this.pf&65280)>>8&255;this.qg.Rs=(this.pf&16711680)>>16&255;this.qg.Ps=(this.pf&4278190080)>>24&255}});s.wq=function(){this.position=new k;this.fg=new k;this.Zf=new k;this.id=new z};x.kk=function(){};x.zs=function(a,b,c){++x.OE;var v=c.Sh,g=c.Th,u=c.$z,y=c.aA,C=x.yD;C.OA(b,v,u,g,y);var I=C.Y,h=x.wD,H=x.xD,U=0;C.lw();for(var m=0,aa,B=0;20>B;){U=C.Nb;for(m=0;m<U;m++)h[m]=I[m].nd,H[m]=I[m].od;switch(C.Nb){case 1:break;case 2:C.TA();break;case 3:C.UA();
break;default:d.dc(!1)}if(3==C.Nb)break;C.lw();m=C.GA();if(m.iq()<Number.MIN_VALUE*Number.MIN_VALUE)break;aa=I[C.Nb];aa.nd=v.Gs(f.Ui(u.G,m.Ti()));aa.be=f.Xc(u,v.Od(aa.nd));aa.od=g.Gs(f.Ui(y.G,m));aa.Jg=f.Xc(y,g.Od(aa.od));aa.M=f.oc(aa.Jg,aa.be);++B;++x.PE;for(var p=!1,m=0;m<U;m++)if(aa.nd==h[m]&&aa.od==H[m]){p=!0;break}if(p)break;++C.Nb}x.nB=f.fe(x.nB,B);C.HA(a.dh,a.eh);a.qk=f.oc(a.dh,a.eh).ig();a.iF=B;C.$A(b);c.lA&&(b=v.Ia,g=g.Ia,a.qk>b+g&&a.qk>Number.MIN_VALUE?(a.qk-=b+g,c=f.oc(a.eh,a.dh),c.xb(),
a.dh.x+=b*c.x,a.dh.y+=b*c.y,a.eh.x-=g*c.x,a.eh.y-=g*c.y):(aa=new k,aa.x=.5*(a.dh.x+a.eh.x),aa.y=.5*(a.dh.y+a.eh.y),a.dh.x=a.eh.x=aa.x,a.dh.y=a.eh.y=aa.y,a.qk=0))};n.wc.push(function(){n.v.kk.yD=new u;n.v.kk.wD=new da(3);n.v.kk.xD=new da(3)});K.xq=function(){};M.yq=function(){this.dh=new k;this.eh=new k};ca.zq=function(){};ca.prototype.R=function(f){switch(f.Db()){case c.sk:f=f instanceof a?f:null;this.Y=new ba(1,!0);this.Y[0]=f.pd;this.Nb=1;this.Ia=f.Ia;break;case c.jj:f=f instanceof b?f:null;this.Y=
f.Y;this.Nb=f.Ib;this.Ia=f.Ia;break;default:d.dc(!1)}};ca.prototype.Gs=function(a){for(var b=0,c=this.Y[0].x*a.x+this.Y[0].y*a.y,d=1;d<this.Nb;++d){var f=this.Y[d].x*a.x+this.Y[d].y*a.y;f>c&&(b=d,c=f)}return b};ca.prototype.rn=function(a){for(var b=0,c=this.Y[0].x*a.x+this.Y[0].y*a.y,d=1;d<this.Nb;++d){var f=this.Y[d].x*a.x+this.Y[d].y*a.y;f>c&&(b=d,c=f)}return this.Y[b]};ca.prototype.Od=function(a){void 0===a&&(a=0);d.dc(0<=a&&a<this.Nb);return this.Y[a]};T.Jn=function(){};T.prototype.Jn=function(){this.Yo=
this.Nh=null};T.prototype.mn=function(a,b){var c=this.$v(),f=d.Eq,v=d.Eq;c.yb.lowerBound.x=a.lowerBound.x-f;c.yb.lowerBound.y=a.lowerBound.y-v;c.yb.upperBound.x=a.upperBound.x+f;c.yb.upperBound.y=a.upperBound.y+v;c.Yj=b;this.tw(c);return c};T.prototype.nn=function(a){this.Cw(a);this.Ds(a)};T.prototype.Js=function(a,b,c){d.dc(a.eq());if(a.yb.ys(b))return!1;this.Cw(a);var f=d.Eq+d.bx*(0<c.x?c.x:-c.x);c=d.Eq+d.bx*(0<c.y?c.y:-c.y);a.yb.lowerBound.x=b.lowerBound.x-f;a.yb.lowerBound.y=b.lowerBound.y-c;
a.yb.upperBound.x=b.upperBound.x+f;a.yb.upperBound.y=b.upperBound.y+c;this.tw(a);return!0};T.prototype.pn=function(a){return a.yb};T.prototype.Jf=function(a){return a.Yj};T.prototype.Ls=function(a,b){if(null!=this.Nh){var c=new ba,d=0;for(c[d++]=this.Nh;0<d;){var f=c[--d];if(f.yb.Xi(b))if(f.eq()){if(!a(f))break}else c[d++]=f.Nf,c[d++]=f.mi}}};T.prototype.$v=function(){if(this.Yo){var a=this.Yo;this.Yo=a.parent;a.parent=null;a.Nf=null;a.mi=null;return a}return new V};T.prototype.Ds=function(a){a.parent=
this.Yo;this.Yo=a};T.prototype.tw=function(a){if(null==this.Nh)this.Nh=a,this.Nh.parent=null;else{var b=a.yb.EA(),c=this.Nh;if(0==c.eq()){do var d=c.Nf,c=c.mi,c=Math.abs((d.yb.lowerBound.x+d.yb.upperBound.x)/2-b.x)+Math.abs((d.yb.lowerBound.y+d.yb.upperBound.y)/2-b.y)<Math.abs((c.yb.lowerBound.x+c.yb.upperBound.x)/2-b.x)+Math.abs((c.yb.lowerBound.y+c.yb.upperBound.y)/2-b.y)?d:c;while(0==c.eq())}b=c.parent;d=this.$v();d.parent=b;d.Yj=null;d.yb.ol(a.yb,c.yb);if(b){c.parent.Nf==c?b.Nf=d:b.mi=d;d.Nf=
c;d.mi=a;c.parent=d;a.parent=d;do{if(b.yb.ys(d.yb))break;b.yb.ol(b.Nf.yb,b.mi.yb);d=b;b=b.parent}while(b)}else d.Nf=c,d.mi=a,c.parent=d,this.Nh=a.parent=d}};T.prototype.Cw=function(a){if(a==this.Nh)this.Nh=null;else{var b=a.parent,c=b.parent;a=b.Nf==a?b.mi:b.Nf;if(c)for(c.Nf==b?c.Nf=a:c.mi=a,a.parent=c,this.Ds(b);c;){b=c.yb;c.yb=m.ol(c.Nf.yb,c.mi.yb);if(b.ys(c.yb))break;c=c.parent}else this.Nh=a,a.parent=null,this.Ds(b)}};D.Aq=function(){this.xg=new T;this.Kk=new ba;this.ep=new ba;this.Mk=0};D.prototype.mn=
function(a,b){var c=this.xg.mn(a,b);this.aw(c);return c};D.prototype.nn=function(a){this.YA(a);this.xg.nn(a)};D.prototype.Js=function(a,b,c){this.xg.Js(a,b,c)&&this.aw(a)};D.prototype.Xi=function(a,b){return this.xg.pn(a).Xi(this.xg.pn(b))};D.prototype.Jf=function(a){return this.xg.Jf(a)};D.prototype.pn=function(a){return this.xg.pn(a)};D.prototype.ZA=function(a){for(var b=this,c=b.Mk=0,d,c=0;c<b.Kk.length;++c){d=b.Kk[c];var f=b.xg.pn(d);b.xg.Ls(function(a){if(a==d)return!0;b.Mk==b.ep.length&&(b.ep[b.Mk]=
new ga);var c=b.ep[b.Mk];c.Sh=a<d?a:d;c.Th=a>=d?a:d;++b.Mk;return!0},f)}for(c=b.Kk.length=0;c<b.Mk;){var f=b.ep[c],v=b.xg.Jf(f.Sh);a(v,b.xg.Jf(f.Th));for(++c;c<b.Mk;){v=b.ep[c];if(v.Sh!=f.Sh||v.Th!=f.Th)break;++c}}};D.prototype.Ls=function(a,b){this.xg.Ls(a,b)};D.prototype.aw=function(a){this.Kk[this.Kk.length]=a};D.prototype.YA=function(a){this.Kk.splice(parseInt(this.Kk.indexOf(a)),1)};D.Os={};D.Os[$a]=!0;V.ft=function(){this.yb=new m};V.prototype.eq=function(){return null==this.Nf};ga.gt=function(){};
W.ii=function(){this.Dc=0};W.prototype.ii=function(){this.fb=new ba(d.sf);for(var a=0;a<d.sf;a++)this.fb[a]=new E;this.Jd=new k;this.eb=new k};W.prototype.ge=function(){for(var a=0;a<d.sf;a++)(this.fb[a]instanceof E?this.fb[a]:null).ge();this.Jd.La();this.eb.La();this.Dc=this.hb=0};W.prototype.R=function(a){this.Dc=a.Dc;for(var b=0;b<d.sf;b++)(this.fb[b]instanceof E?this.fb[b]:null).R(a.fb[b]);this.Jd.K(a.Jd);this.eb.K(a.eb);this.hb=a.hb};W.prototype.wb=function(){var a=new W;a.R(this);return a};
n.wc.push(function(){n.v.ii.St=1;n.v.ii.Tg=2;n.v.ii.tk=4});E.Sn=function(){this.eb=new k;this.Ci=new z};E.prototype.Sn=function(){this.ge()};E.prototype.ge=function(){this.eb.La();this.Rk=this.Lk=0;this.Ci.key=0};E.prototype.R=function(a){this.eb.K(a.eb);this.Lk=a.Lk;this.Rk=a.Rk;this.Ci.R(a.Ci)};$.mt=function(){new k};Ba.Zn=function(){this.Hm=new k;this.Im=new k};Ba.prototype.Zn=function(a,b){void 0===a&&(a=null);void 0===b&&(b=null);a&&this.Hm.K(a);b&&this.Im.K(b)};qa.qt=function(){this.Zf=new k};
Ca.rt=function(){this.Hm=new k;this.Im=new k};v.Kl=function(){this.eb=new k;this.da=new k};v.prototype.kd=function(a,b,c,g,u){this.Fj=b;this.Gj=g;var y=parseInt(a.count);d.dc(0<y&&3>y);var C,I,h,H,U=0,m=0;1==y?(this.hb=v.Mx,C=this.Fj.Od(a.nd[0]),I=this.Gj.Od(a.od[0]),y=C,a=c.G,b=c.position.x+(a.j.x*y.x+a.k.x*y.y),g=c.position.y+(a.j.y*y.x+a.k.y*y.y),y=I,a=u.G,h=u.position.x+(a.j.x*y.x+a.k.x*y.y),H=u.position.y+(a.j.y*y.x+a.k.y*y.y),this.da.x=h-b,this.da.y=H-g,this.da.xb()):(a.od[0]==a.od[1]?(this.hb=
v.Tg,b=this.Fj.Od(a.nd[0]),g=this.Fj.Od(a.nd[1]),I=this.Gj.Od(a.od[0]),this.eb.x=.5*(b.x+g.x),this.eb.y=.5*(b.y+g.y),this.da=f.Si(f.oc(g,b),1),this.da.xb(),y=this.da,a=c.G,U=a.j.x*y.x+a.k.x*y.y,m=a.j.y*y.x+a.k.y*y.y,y=this.eb,a=c.G,b=c.position.x+(a.j.x*y.x+a.k.x*y.y),g=c.position.y+(a.j.y*y.x+a.k.y*y.y),y=I,a=u.G,h=u.position.x+(a.j.x*y.x+a.k.x*y.y),H=u.position.y+(a.j.y*y.x+a.k.y*y.y),U=(h-b)*U+(H-g)*m):a.nd[0]==a.nd[0]?(this.hb=v.tk,h=this.Gj.Od(a.od[0]),H=this.Gj.Od(a.od[1]),C=this.Fj.Od(a.nd[0]),
this.eb.x=.5*(h.x+H.x),this.eb.y=.5*(h.y+H.y),this.da=f.Si(f.oc(H,h),1),this.da.xb(),y=this.da,a=u.G,U=a.j.x*y.x+a.k.x*y.y,m=a.j.y*y.x+a.k.y*y.y,y=this.eb,a=u.G,h=u.position.x+(a.j.x*y.x+a.k.x*y.y),H=u.position.y+(a.j.y*y.x+a.k.y*y.y),y=C,a=c.G,b=c.position.x+(a.j.x*y.x+a.k.x*y.y),g=c.position.y+(a.j.y*y.x+a.k.y*y.y),U=(b-h)*U+(g-H)*m):(b=this.Fj.Od(a.nd[0]),g=this.Fj.Od(a.nd[1]),h=this.Gj.Od(a.od[0]),H=this.Gj.Od(a.od[1]),f.Xc(c,C),C=f.yd(c.G,f.oc(g,b)),f.Xc(u,I),U=f.yd(u.G,f.oc(H,h)),u=C.x*C.x+
C.y*C.y,I=U.x*U.x+U.y*U.y,a=f.oc(U,C),c=C.x*a.x+C.y*a.y,a=U.x*a.x+U.y*a.y,C=C.x*U.x+C.y*U.y,m=u*I-C*C,U=0,0!=m&&(U=f.Cb((C*a-c*I)/m,0,1)),0>(C*U+a)/I&&(U=f.Cb((C-c)/u,0,1)),C=new k,C.x=b.x+U*(g.x-b.x),C.y=b.y+U*(g.y-b.y),I=new k,I.x=h.x+U*(H.x-h.x),I.y=h.y+U*(H.y-h.y),0==U||1==U?(this.hb=v.tk,this.da=f.Si(f.oc(H,h),1),this.da.xb(),this.eb=I):(this.hb=v.Tg,this.da=f.Si(f.oc(g,b),1),this.eb=C)),0>U&&this.da.yw())};v.prototype.Mg=function(a,b){var c,g,y=0;switch(this.hb){case v.Mx:return c=f.Ui(a.G,
this.da),g=f.Ui(b.G,this.da.Ti()),c=this.Fj.rn(c),g=this.Gj.rn(g),c=f.Xc(a,c),g=f.Xc(b,g),(g.x-c.x)*this.da.x+(g.y-c.y)*this.da.y;case v.Tg:return y=f.yd(a.G,this.da),c=f.Xc(a,this.eb),g=f.Ui(b.G,y.Ti()),g=this.Gj.rn(g),g=f.Xc(b,g),(g.x-c.x)*y.x+(g.y-c.y)*y.y;case v.tk:return y=f.yd(b.G,this.da),g=f.Xc(b,this.eb),c=f.Ui(a.G,y.Ti()),c=this.Fj.rn(c),c=f.Xc(a,c),(c.x-g.x)*y.x+(c.y-g.y)*y.y;default:return d.dc(!1),0}};n.wc.push(function(){n.v.Kl.Mx=1;n.v.Kl.Tg=2;n.v.Kl.tk=4});u.$n=function(){this.ya=
new C;this.Ra=new C;this.Bf=new C;this.Y=new ba(3)};u.prototype.$n=function(){this.Y[0]=this.ya;this.Y[1]=this.Ra;this.Y[2]=this.Bf};u.prototype.OA=function(a,b,c,v,g){d.dc(0<=a.count&&3>=a.count);var y,u;this.Nb=a.count;for(var C=this.Y,k=0;k<this.Nb;k++){var I=C[k];I.nd=a.nd[k];I.od=a.od[k];y=b.Od(I.nd);u=v.Od(I.od);I.be=f.Xc(c,y);I.Jg=f.Xc(g,u);I.M=f.oc(I.Jg,I.be);I.T=0}1<this.Nb&&(a=a.RC,y=this.ow(),y<.5*a||2*a<y||y<Number.MIN_VALUE)&&(this.Nb=0);0==this.Nb&&(I=C[0],I.nd=0,I.od=0,y=b.Od(0),u=
v.Od(0),I.be=f.Xc(c,y),I.Jg=f.Xc(g,u),I.M=f.oc(I.Jg,I.be),this.Nb=1)};u.prototype.$A=function(a){a.RC=this.ow();a.count=n.Cg(this.Nb);for(var b=this.Y,c=0;c<this.Nb;c++)a.nd[c]=n.Cg(b[c].nd),a.od[c]=n.Cg(b[c].od)};u.prototype.GA=function(){switch(this.Nb){case 1:return this.ya.M.Ti();case 2:var a=f.oc(this.Ra.M,this.ya.M);return 0<f.ql(a,this.ya.M.Ti())?f.cw(1,a):f.Si(a,1);default:return d.dc(!1),new k}};u.prototype.lw=function(){switch(this.Nb){case 0:d.dc(!1);new k;break;case 1:break;case 2:new k(this.ya.T*
this.ya.M.x+this.Ra.T*this.Ra.M.x,this.ya.T*this.ya.M.y+this.Ra.T*this.Ra.M.y);break;default:d.dc(!1),new k}};u.prototype.HA=function(a,b){switch(this.Nb){case 0:d.dc(!1);break;case 1:a.K(this.ya.be);b.K(this.ya.Jg);break;case 2:a.x=this.ya.T*this.ya.be.x+this.Ra.T*this.Ra.be.x;a.y=this.ya.T*this.ya.be.y+this.Ra.T*this.Ra.be.y;b.x=this.ya.T*this.ya.Jg.x+this.Ra.T*this.Ra.Jg.x;b.y=this.ya.T*this.ya.Jg.y+this.Ra.T*this.Ra.Jg.y;break;case 3:b.x=a.x=this.ya.T*this.ya.be.x+this.Ra.T*this.Ra.be.x+this.Bf.T*
this.Bf.be.x;b.y=a.y=this.ya.T*this.ya.be.y+this.Ra.T*this.Ra.be.y+this.Bf.T*this.Bf.be.y;break;default:d.dc(!1)}};u.prototype.ow=function(){switch(this.Nb){case 0:return d.dc(!1),0;case 1:return 0;case 2:return f.oc(this.ya.M,this.Ra.M).ig();case 3:return f.ql(f.oc(this.Ra.M,this.ya.M),f.oc(this.Bf.M,this.ya.M));default:return d.dc(!1),0}};u.prototype.TA=function(){var a=this.ya.M,b=this.Ra.M,c=f.oc(b,a),a=-(a.x*c.x+a.y*c.y);0>=a?this.Nb=this.ya.T=1:(b=b.x*c.x+b.y*c.y,0>=b?(this.Nb=this.Ra.T=1,this.ya.R(this.Ra)):
(c=1/(b+a),this.ya.T=b*c,this.Ra.T=a*c,this.Nb=2))};u.prototype.UA=function(){var a=this.ya.M,b=this.Ra.M,c=this.Bf.M,d=f.oc(b,a),v=f.Nd(a,d),g=f.Nd(b,d),v=-v,y=f.oc(c,a),u=f.Nd(a,y),C=f.Nd(c,y),u=-u,k=f.oc(c,b),I=f.Nd(b,k),k=f.Nd(c,k),I=-I,y=f.ql(d,y),d=y*f.ql(b,c),c=y*f.ql(c,a),a=y*f.ql(a,b);0>=v&&0>=u?this.Nb=this.ya.T=1:0<g&&0<v&&0>=a?(C=1/(g+v),this.ya.T=g*C,this.Ra.T=v*C,this.Nb=2):0<C&&0<u&&0>=c?(g=1/(C+u),this.ya.T=C*g,this.Bf.T=u*g,this.Nb=2,this.Ra.R(this.Bf)):0>=g&&0>=I?(this.Nb=this.Ra.T=
1,this.ya.R(this.Ra)):0>=C&&0>=k?(this.Nb=this.Bf.T=1,this.ya.R(this.Bf)):0<k&&0<I&&0>=d?(g=1/(k+I),this.Ra.T=k*g,this.Bf.T=I*g,this.Nb=2,this.ya.R(this.Bf)):(g=1/(d+c+a),this.ya.T=d*g,this.Ra.T=c*g,this.Bf.T=a*g,this.Nb=3)};y.Bq=function(){this.nd=new da(3);this.od=new da(3)};C.st=function(){};C.prototype.R=function(a){this.be.K(a.be);this.Jg.K(a.Jg);this.M.K(a.M);this.T=a.T;this.nd=a.nd;this.od=a.od};I.Te=function(){};I.XA=function(a){++I.sB;var b=a.Sh,c=a.Th,v=a.Vz,g=a.Wz;d.dc(v.vd==g.vd);d.dc(1-
v.vd>Number.MIN_VALUE);var y=b.Ia+c.Ia;a=a.jE;var u=0,C=0,k=0;I.pv.count=0;for(I.Rm.lA=!1;;){v.mf(I.Oj,u);g.mf(I.Pj,u);I.Rm.Sh=b;I.Rm.Th=c;I.Rm.$z=I.Oj;I.Rm.aA=I.Pj;x.zs(I.Az,I.pv,I.Rm);if(0>=I.Az.qk){u=1;break}I.Tr.kd(I.pv,b,I.Oj,c,I.Pj);var h=I.Tr.Mg(I.Oj,I.Pj);if(0>=h){u=1;break}0==C&&(k=h>y?f.fe(y-a,.75*y):f.fe(h-a,.02*y));if(h-k<.5*a){if(0==C){u=1;break}break}var H=u,U=u,m=1;v.mf(I.Oj,m);g.mf(I.Pj,m);var aa=I.Tr.Mg(I.Oj,I.Pj);if(aa>=k){u=1;break}for(var B=0;;){var p=0,p=B&1?U+(k-h)*(m-U)/(aa-
h):.5*(U+m);v.mf(I.Oj,p);g.mf(I.Pj,p);var $a=I.Tr.Mg(I.Oj,I.Pj);if(f.hd($a-k)<.025*a){H=p;break}$a>k?(U=p,h=$a):(m=p,aa=$a);++B;++I.uB;if(50==B)break}I.hx=f.fe(I.hx,B);if(H<(1+100*Number.MIN_VALUE)*u)break;u=H;C++;++I.tB;if(1E3==C)break}I.gx=f.fe(I.gx,C);return u};n.wc.push(function(){n.v.Te.sB=0;n.v.Te.tB=0;n.v.Te.gx=0;n.v.Te.uB=0;n.v.Te.hx=0;n.v.Te.pv=new y;n.v.Te.Rm=new K;n.v.Te.Oj=new h;n.v.Te.Pj=new h;n.v.Te.Tr=new v;n.v.Te.Az=new M});U.Cq=function(){this.Sh=new ca;this.Th=new ca;this.Vz=new g;
this.Wz=new g};H.Ml=function(){this.Qa=new k};H.prototype.Ml=function(){this.fb=new ba(d.sf);for(var a=0;a<d.sf;a++)this.fb[a]=new k};H.prototype.kd=function(a,b,c,d,f){void 0===c&&(c=0);void 0===f&&(f=0);if(0!=a.Dc){var v=0,g,y,u=0,C=0,k=0,I=0,h=0;switch(a.hb){case W.St:y=b.G;g=a.eb;v=b.position.x+y.j.x*g.x+y.k.x*g.y;b=b.position.y+y.j.y*g.x+y.k.y*g.y;y=d.G;g=a.fb[0].eb;a=d.position.x+y.j.x*g.x+y.k.x*g.y;d=d.position.y+y.j.y*g.x+y.k.y*g.y;g=a-v;y=d-b;u=g*g+y*y;u>Number.MIN_VALUE*Number.MIN_VALUE?
(u=Math.sqrt(u),this.Qa.x=g/u,this.Qa.y=y/u):(this.Qa.x=1,this.Qa.y=0);g=b+c*this.Qa.y;d-=f*this.Qa.y;this.fb[0].x=.5*(v+c*this.Qa.x+(a-f*this.Qa.x));this.fb[0].y=.5*(g+d);break;case W.Tg:y=b.G;g=a.Jd;u=y.j.x*g.x+y.k.x*g.y;C=y.j.y*g.x+y.k.y*g.y;y=b.G;g=a.eb;k=b.position.x+y.j.x*g.x+y.k.x*g.y;I=b.position.y+y.j.y*g.x+y.k.y*g.y;this.Qa.x=u;this.Qa.y=C;for(v=0;v<a.Dc;v++)y=d.G,g=a.fb[v].eb,h=d.position.x+y.j.x*g.x+y.k.x*g.y,g=d.position.y+y.j.y*g.x+y.k.y*g.y,this.fb[v].x=h+.5*(c-(h-k)*u-(g-I)*C-f)*u,
this.fb[v].y=g+.5*(c-(h-k)*u-(g-I)*C-f)*C;break;case W.tk:for(y=d.G,g=a.Jd,u=y.j.x*g.x+y.k.x*g.y,C=y.j.y*g.x+y.k.y*g.y,y=d.G,g=a.eb,k=d.position.x+y.j.x*g.x+y.k.x*g.y,I=d.position.y+y.j.y*g.x+y.k.y*g.y,this.Qa.x=-u,this.Qa.y=-C,v=0;v<a.Dc;v++)y=b.G,g=a.fb[v].eb,h=b.position.x+y.j.x*g.x+y.k.x*g.y,g=b.position.y+y.j.y*g.x+y.k.y*g.y,this.fb[v].x=h+.5*(f-(h-k)*u-(g-I)*C-c)*u,this.fb[v].y=g+.5*(f-(h-k)*u-(g-I)*C-c)*C}}};aa.xs=function(){this.$b=new k;this.id=new z};aa.prototype.R=function(a){this.$b.K(a.$b);
this.id.R(a.id)};B.Bs=function(){};Object.defineProperty(B.prototype,"referenceEdge",{enumerable:!1,configurable:!0,get:function(){return this.Ss}});Object.defineProperty(B.prototype,"referenceEdge",{enumerable:!1,configurable:!0,set:function(a){void 0===a&&(a=0);this.Ss=a;this.Yi.pf=this.Yi.pf&4294967040|this.Ss&255}});Object.defineProperty(B.prototype,"incidentEdge",{enumerable:!1,configurable:!0,get:function(){return this.Qs}});Object.defineProperty(B.prototype,"incidentEdge",{enumerable:!1,configurable:!0,
set:function(a){void 0===a&&(a=0);this.Qs=a;this.Yi.pf=this.Yi.pf&4294902015|this.Qs<<8&65280}});Object.defineProperty(B.prototype,"incidentVertex",{enumerable:!1,configurable:!0,get:function(){return this.Rs}});Object.defineProperty(B.prototype,"incidentVertex",{enumerable:!1,configurable:!0,set:function(a){void 0===a&&(a=0);this.Rs=a;this.Yi.pf=this.Yi.pf&4278255615|this.Rs<<16&16711680}});Object.defineProperty(B.prototype,"flip",{enumerable:!1,configurable:!0,get:function(){return this.Ps}});Object.defineProperty(B.prototype,
"flip",{enumerable:!1,configurable:!0,set:function(a){void 0===a&&(a=0);this.Ps=a;this.Yi.pf=this.Yi.pf&16777215|this.Ps<<24&4278190080}})})();
(function(){var a=n.aa.Jb,b=n.v.Sa.cj,c=n.v.Sa.Kn,d=n.v.Sa.Ln,f=n.v.Sa.Tn,g=n.v.Sa.ki,h=n.v.Sa.Ub,k=n.aa.Math.ji,m=n.aa.Math.Lf,q=n.aa.Math.ej,p=n.aa.Math.mg,t=n.v.kk,z=n.v.xq,s=n.v.yq,x=n.v.zq,K=n.v.Bq;n.Fb(b,n.v.Sa.Ub);b.prototype.la=n.v.Sa.Ub.prototype;b.cj=function(){n.v.Sa.Ub.Ub.apply(this,arguments);this.pd=new p};b.prototype.wb=function(){var a=new b;a.R(this);return a};b.prototype.R=function(a){this.la.R.call(this,a);n.is(a,b)&&this.pd.K((a instanceof b?a:null).pd)};b.prototype.pl=function(a,
b){var c=b.G,d=b.position.x+(c.j.x*this.pd.x+c.k.x*this.pd.y),c=b.position.y+(c.j.y*this.pd.x+c.k.y*this.pd.y);a.lowerBound.R(d-this.Ia,c-this.Ia);a.upperBound.R(d+this.Ia,c+this.Ia)};b.prototype.kn=function(b,c){void 0===c&&(c=0);b.Oh=c*a.eo*this.Ia*this.Ia;b.Be.K(this.pd);b.sl=b.Oh*(.5*this.Ia*this.Ia+(this.pd.x*this.pd.x+this.pd.y*this.pd.y))};b.prototype.Wp=function(a,b,c,d){void 0===b&&(b=0);c=m.Xc(c,this.pd);var f=-(m.Nd(a,c)-b);if(f<-this.Ia+Number.MIN_VALUE)return 0;if(f>this.Ia)return d.K(c),
Math.PI*this.Ia*this.Ia;b=this.Ia*this.Ia;var g=f*f,f=b*(Math.asin(f/this.Ia)+Math.PI/2)+f*Math.sqrt(b-g);b=-2/3*Math.pow(b-g,1.5)/f;d.x=c.x+a.x*b;d.y=c.y+a.y*b;return f};b.prototype.Kw=function(a){this.pd.K(a)};b.prototype.cj=function(a){void 0===a&&(a=0);this.la.Ub.call(this);this.hb=h.sk;this.Ia=a};c.Kn=function(){};c.prototype.Kn=function(){this.ga=[]};n.Fb(d,n.v.Sa.Ub);d.prototype.la=n.v.Sa.Ub.prototype;d.Ln=function(){n.v.Sa.Ub.Ub.apply(this,arguments);new p;this.ya=new p;this.Ra=new p;this.vC=
new p;this.wC=new p;this.Qa=new p;this.Cj=new p;new p;this.xC=new p};d.prototype.pl=function(a,b){var c=b.G,d=b.position.x+(c.j.x*this.ya.x+c.k.x*this.ya.y),f=b.position.y+(c.j.y*this.ya.x+c.k.y*this.ya.y),g=b.position.x+(c.j.x*this.Ra.x+c.k.x*this.Ra.y),c=b.position.y+(c.j.y*this.Ra.x+c.k.y*this.Ra.y);d<g?(a.lowerBound.x=d,a.upperBound.x=g):(a.lowerBound.x=g,a.upperBound.x=d);f<c?(a.lowerBound.y=f,a.upperBound.y=c):(a.lowerBound.y=c,a.upperBound.y=f)};d.prototype.kn=function(a){a.Oh=0;a.Be.K(this.ya);
a.sl=0};d.prototype.Wp=function(a,b,c,d){void 0===b&&(b=0);var f=new p(a.x*b,a.y*b),g=m.Xc(c,this.ya);c=m.Xc(c,this.Ra);var k=m.Nd(a,g)-b;a=m.Nd(a,c)-b;if(0<k){if(0<a)return 0;g.x=-a/(k-a)*g.x+k/(k-a)*c.x;g.y=-a/(k-a)*g.y+k/(k-a)*c.y}else 0<a&&(c.x=-a/(k-a)*g.x+k/(k-a)*c.x,c.y=-a/(k-a)*g.y+k/(k-a)*c.y);d.x=(f.x+g.x+c.x)/3;d.y=(f.y+g.y+c.y)/3;return.5*((g.x-f.x)*(c.y-f.y)-(g.y-f.y)*(c.x-f.x))};d.prototype.Ln=function(b,c){this.la.Ub.call(this);this.hb=h.Xq;this.ya=b;this.Ra=c;this.Cj.R(this.Ra.x-this.ya.x,
this.Ra.y-this.ya.y);this.Lu=this.Cj.xb();this.Qa.R(this.Cj.y,-this.Cj.x);this.vC.R(-a.Hq*(this.Qa.x-this.Cj.x)+this.ya.x,-a.Hq*(this.Qa.y-this.Cj.y)+this.ya.y);this.wC.R(-a.Hq*(this.Qa.x+this.Cj.x)+this.Ra.x,-a.Hq*(this.Qa.y+this.Cj.y)+this.Ra.y);this.xC.R(-this.Qa.x,-this.Qa.y)};f.Tn=function(){this.Oh=0;this.Be=new p(0,0);this.sl=0};n.Fb(g,n.v.Sa.Ub);g.prototype.la=n.v.Sa.Ub.prototype;g.ki=function(){n.v.Sa.Ub.Ub.apply(this,arguments)};g.prototype.wb=function(){var a=new g;a.R(this);return a};
g.prototype.R=function(a){this.la.R.call(this,a);if(n.is(a,g)){a=a instanceof g?a:null;this.zi.K(a.zi);this.Ib=a.Ib;this.tn(this.Ib);for(var b=0;b<this.Ib;b++)this.Y[b].K(a.Y[b]),this.mc[b].K(a.mc[b])}};g.prototype.Ms=function(a,b){void 0===b&&(b=0);for(var c=new ba,d=0,f,d=0;d<a.length;++d)f=a[d],c.push(f);this.Gw(c,b)};g.wE=function(a,b){void 0===b&&(b=0);var c=new g;c.Ms(a,b);return c};g.prototype.Gw=function(b,c){void 0===c&&(c=0);0==c&&(c=b.length);a.dc(2<=c);this.Ib=c;this.tn(c);for(var d=0,
d=0;d<this.Ib;d++)this.Y[d].K(b[d]);for(d=0;d<this.Ib;++d){var f=parseInt(d),f=m.oc(this.Y[parseInt(d+1<this.Ib?d+1:0)],this.Y[f]);a.dc(f.iq()>Number.MIN_VALUE);this.mc[d].K(m.Si(f,1));this.mc[d].xb()}this.zi=g.yA(this.Y,this.Ib)};g.AE=function(a,b){void 0===b&&(b=0);var c=new g;c.Gw(a,b);return c};g.prototype.Fw=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.Ib=4;this.tn(4);this.Y[0].R(-a,-b);this.Y[1].R(a,-b);this.Y[2].R(a,b);this.Y[3].R(-a,b);this.mc[0].R(0,-1);this.mc[1].R(1,0);this.mc[2].R(0,
1);this.mc[3].R(-1,0);this.zi.La()};g.xE=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);var c=new g;c.Fw(a,b);return c};g.prototype.QA=function(a,b,c,d){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=null);void 0===d&&(d=0);this.Ib=4;this.tn(4);this.Y[0].R(-a,-b);this.Y[1].R(a,-b);this.Y[2].R(a,b);this.Y[3].R(-a,b);this.mc[0].R(0,-1);this.mc[1].R(1,0);this.mc[2].R(0,1);this.mc[3].R(-1,0);this.zi=c;a=new q;a.position=c;a.G.R(d);for(c=0;c<this.Ib;++c)this.Y[c]=m.Xc(a,this.Y[c]),this.mc[c]=m.yd(a.G,
this.mc[c])};g.zE=function(a,b,c,d){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=null);void 0===d&&(d=0);var f=new g;f.QA(a,b,c,d);return f};g.prototype.PA=function(a,b){this.Ib=2;this.tn(2);this.Y[0].K(a);this.Y[1].K(b);this.zi.x=.5*(a.x+b.x);this.zi.y=.5*(a.y+b.y);this.mc[0]=m.Si(m.oc(b,a),1);this.mc[0].xb();this.mc[1].x=-this.mc[0].x;this.mc[1].y=-this.mc[0].y};g.yE=function(a,b){var c=new g;c.PA(a,b);return c};g.prototype.pl=function(a,b){for(var c=b.G,d=this.Y[0],f=b.position.x+(c.j.x*
d.x+c.k.x*d.y),g=b.position.y+(c.j.y*d.x+c.k.y*d.y),k=f,h=g,m=1;m<this.Ib;++m)var d=this.Y[m],p=b.position.x+(c.j.x*d.x+c.k.x*d.y),d=b.position.y+(c.j.y*d.x+c.k.y*d.y),f=f<p?f:p,g=g<d?g:d,k=k>p?k:p,h=h>d?h:d;a.lowerBound.x=f-this.Ia;a.lowerBound.y=g-this.Ia;a.upperBound.x=k+this.Ia;a.upperBound.y=h+this.Ia};g.prototype.kn=function(a,b){void 0===b&&(b=0);if(2==this.Ib)a.Be.x=.5*(this.Y[0].x+this.Y[1].x),a.Be.y=.5*(this.Y[0].y+this.Y[1].y),a.Oh=0,a.sl=0;else{for(var c=0,d=0,f=0,g=0,k=1/3,h=0;h<this.Ib;++h)var m=
this.Y[h],p=h+1<this.Ib?this.Y[parseInt(h+1)]:this.Y[0],t=m.x-0,q=m.y-0,v=p.x-0,u=p.y-0,y=t*u-q*v,C=.5*y,f=f+C,c=c+C*k*(0+m.x+p.x),d=d+C*k*(0+m.y+p.y),m=t,g=g+y*(k*(.25*(m*m+v*m+v*v)+(0*m+0*v))+0+(k*(.25*(q*q+u*q+u*u)+(0*q+0*u))+0));a.Oh=b*f;a.Be.R(1/f*c,1/f*d);a.sl=b*g}};g.prototype.Wp=function(a,b,c,d){void 0===b&&(b=0);var g=m.Ui(c.G,a),k=b-m.Nd(a,c.position),h=new da,q=0,t=-1;b=-1;var s=!1;for(a=a=0;a<this.Ib;++a){h[a]=m.Nd(g,this.Y[a])-k;var z=h[a]<-Number.MIN_VALUE;0<a&&(z?s||(t=a-1,q++):s&&
(b=a-1,q++));s=z}switch(q){case 0:return s?(a=new f,this.kn(a,1),d.K(m.Xc(c,a.Be)),a.Oh):0;case 1:-1==t?t=this.Ib-1:b=this.Ib-1}a=parseInt((t+1)%this.Ib);g=parseInt((b+1)%this.Ib);k=(0-h[t])/(h[a]-h[t]);h=(0-h[b])/(h[g]-h[b]);t=new p(this.Y[t].x*(1-k)+this.Y[a].x*k,this.Y[t].y*(1-k)+this.Y[a].y*k);b=new p(this.Y[b].x*(1-h)+this.Y[g].x*h,this.Y[b].y*(1-h)+this.Y[g].y*h);h=0;k=new p;for(q=this.Y[a];a!=g;)a=(a+1)%this.Ib,s=a==g?b:this.Y[a],z=.5*((q.x-t.x)*(s.y-t.y)-(q.y-t.y)*(s.x-t.x)),h+=z,k.x+=z*(t.x+
q.x+s.x)/3,k.y+=z*(t.y+q.y+s.y)/3,q=s;k.fa(1/h);d.K(m.Xc(c,k));return h};g.prototype.Gs=function(a){for(var b=0,c=this.Y[0].x*a.x+this.Y[0].y*a.y,d=1;d<this.Ib;++d){var f=this.Y[d].x*a.x+this.Y[d].y*a.y;f>c&&(b=d,c=f)}return b};g.prototype.rn=function(a){for(var b=0,c=this.Y[0].x*a.x+this.Y[0].y*a.y,d=1;d<this.Ib;++d){var f=this.Y[d].x*a.x+this.Y[d].y*a.y;f>c&&(b=d,c=f)}return this.Y[b]};g.prototype.ki=function(){this.la.Ub.call(this);this.hb=h.jj;this.zi=new p;this.Y=new ba;this.mc=new ba};g.prototype.tn=
function(a){void 0===a&&(a=0);for(var b=parseInt(this.Y.length);b<a;b++)this.Y[b]=new p,this.mc[b]=new p};g.yA=function(a,b){void 0===b&&(b=0);for(var c=new p,d=0,f=1/3,g=0;g<b;++g){var k=a[g],h=g+1<b?a[parseInt(g+1)]:a[0],m=.5*((k.x-0)*(h.y-0)-(k.y-0)*(h.x-0)),d=d+m;c.x+=m*f*(0+k.x+h.x);c.y+=m*f*(0+k.y+h.y)}c.x*=1/d;c.y*=1/d;return c};g.CE=function(a,b,c){void 0===c&&(c=0);for(var d=0,f=new ba(c+1),d=0;d<c;++d)f[d]=b[d];f[c]=f[0];b=Number.MAX_VALUE;for(d=1;d<=c;++d){for(var g=f[parseInt(d-1)],k=
f[d].x-g.x,h=f[d].y-g.y,m=Math.sqrt(k*k+h*h),k=k/m,h=h/m,p=-h,t=k,q=m=Number.MAX_VALUE,v=-Number.MAX_VALUE,u=-Number.MAX_VALUE,y=0;y<c;++y){var C=f[y].x-g.x,I=f[y].y-g.y,U=k*C+h*I,C=p*C+t*I;U<m&&(m=U);C<q&&(q=C);U>v&&(v=U);C>u&&(u=C)}y=(v-m)*(u-q);y<.95*b&&(b=y,a.G.j.x=k,a.G.j.y=h,a.G.k.x=p,a.G.k.y=t,k=.5*(m+v),h=.5*(q+u),p=a.G,a.Be.x=g.x+(p.j.x*k+p.k.x*h),a.Be.y=g.y+(p.j.y*k+p.k.y*h),a.SB.x=.5*(v-m),a.SB.y=.5*(u-q))}};n.wc.push(function(){n.v.Sa.ki.oF=new k});h.Ub=function(){};h.prototype.wb=function(){return null};
h.prototype.R=function(a){this.Ia=a.Ia};h.prototype.Db=function(){return this.hb};h.prototype.pl=function(){};h.prototype.kn=function(){};h.prototype.Wp=function(){return 0};h.Xi=function(a,b,c,d){var f=new z;f.Sh=new x;f.Sh.R(a);f.Th=new x;f.Th.R(c);f.$z=b;f.aA=d;f.lA=!0;a=new K;a.count=0;b=new s;t.zs(b,a,f);return b.qk<10*Number.MIN_VALUE};h.prototype.Ub=function(){this.hb=h.LB;this.Ia=a.zb};n.wc.push(function(){n.v.Sa.Ub.LB=-1;n.v.Sa.Ub.sk=0;n.v.Sa.Ub.jj=1;n.v.Sa.Ub.Xq=2;n.v.Sa.Ub.Zq=3;n.v.Sa.Ub.$E=
1;n.v.Sa.Ub.bF=0;n.v.Sa.Ub.eF=-1})})();
(function(){var a=n.aa.yl,b=n.aa.Jb,c=n.aa.Math.Lf;a.yl=function(){this.nq=this.oq=this.pq=0};a.prototype.yl=function(a,b,g){void 0===a&&(a=0);void 0===b&&(b=0);void 0===g&&(g=0);this.pq=n.Cg(255*c.Cb(a,0,1));this.oq=n.Cg(255*c.Cb(b,0,1));this.nq=n.Cg(255*c.Cb(g,0,1))};a.prototype.R=function(a,b,g){void 0===a&&(a=0);void 0===b&&(b=0);void 0===g&&(g=0);this.pq=n.Cg(255*c.Cb(a,0,1));this.oq=n.Cg(255*c.Cb(b,0,1));this.nq=n.Cg(255*c.Cb(g,0,1))};Object.defineProperty(a.prototype,"r",{enumerable:!1,configurable:!0,
set:function(a){void 0===a&&(a=0);this.pq=n.Cg(255*c.Cb(a,0,1))}});Object.defineProperty(a.prototype,"g",{enumerable:!1,configurable:!0,set:function(a){void 0===a&&(a=0);this.oq=n.Cg(255*c.Cb(a,0,1))}});Object.defineProperty(a.prototype,"b",{enumerable:!1,configurable:!0,set:function(a){void 0===a&&(a=0);this.nq=n.Cg(255*c.Cb(a,0,1))}});Object.defineProperty(a.prototype,"color",{enumerable:!1,configurable:!0,get:function(){return this.pq<<16|this.oq<<8|this.nq}});b.Jb=function(){};b.iB=function(a,
b){void 0===a&&(a=0);void 0===b&&(b=0);return Math.sqrt(a*b)};b.jB=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return a>b?a:b};b.dc=function(a){if(!a)throw"Assertion Failed";};n.wc.push(function(){n.aa.Jb.VERSION="2.1alpha";n.aa.Jb.LE=65535;n.aa.Jb.eo=Math.PI;n.aa.Jb.sf=2;n.aa.Jb.Eq=.1;n.aa.Jb.bx=2;n.aa.Jb.RE=2*b.zb;n.aa.Jb.zb=.005;n.aa.Jb.mk=2/180*b.eo;n.aa.Jb.Hq=8*b.zb;n.aa.Jb.pB=32;n.aa.Jb.qB=32;n.aa.Jb.vB=1;n.aa.Jb.rf=.2;n.aa.Jb.Fq=8/180*b.eo;n.aa.Jb.Ol=2;n.aa.Jb.fx=b.Ol*b.Ol;n.aa.Jb.Nl=
.5*b.eo;n.aa.Jb.ex=b.Nl*b.Nl;n.aa.Jb.ut=.2;n.aa.Jb.rB=.5;n.aa.Jb.dx=.01;n.aa.Jb.cx=2/180*b.eo})})();
(function(){var a=n.aa.Math.ji,b=n.aa.Math.Fl,c=n.aa.Math.Lf,d=n.aa.Math.ao,f=n.aa.Math.ej,g=n.aa.Math.mg,h=n.aa.Math.Ll;a.ji=function(){this.j=new g;this.k=new g};a.prototype.ji=function(){this.lq()};a.aq=function(b){void 0===b&&(b=0);var c=new a;c.R(b);return c};a.on=function(b,c){var d=new a;d.SA(b,c);return d};a.prototype.R=function(a){void 0===a&&(a=0);var b=Math.cos(a);a=Math.sin(a);this.j.x=b;this.k.x=-a;this.j.y=a;this.k.y=b};a.prototype.SA=function(a,b){this.j.K(a);this.k.K(b)};a.prototype.wb=
function(){var b=new a;b.gk(this);return b};a.prototype.gk=function(a){this.j.K(a.j);this.k.K(a.k)};a.prototype.Vp=function(a){this.j.x+=a.j.x;this.j.y+=a.j.y;this.k.x+=a.k.x;this.k.y+=a.k.y};a.prototype.lq=function(){this.j.x=1;this.k.x=0;this.j.y=0;this.k.y=1};a.prototype.La=function(){this.j.x=0;this.k.x=0;this.j.y=0;this.k.y=0};a.prototype.ha=function(){return Math.atan2(this.j.y,this.j.x)};a.prototype.Es=function(a){var b=this.j.x,c=this.k.x,d=this.j.y,f=this.k.y,g=b*f-c*d;0!=g&&(g=1/g);a.j.x=
g*f;a.k.x=-g*c;a.j.y=-g*d;a.k.y=g*b};a.prototype.hk=function(a,b,c){void 0===b&&(b=0);void 0===c&&(c=0);var d=this.j.x,f=this.k.x,g=this.j.y,h=this.k.y,x=d*h-f*g;0!=x&&(x=1/x);a.x=x*(h*b-f*c);a.y=x*(d*c-g*b);return a};a.prototype.hd=function(){this.j.hd();this.k.hd()};b.Fl=function(){this.j=new h;this.k=new h;this.Fa=new h};b.prototype.Fl=function(a,b,c){void 0===a&&(a=null);void 0===b&&(b=null);void 0===c&&(c=null);a||b||c?(this.j.K(a),this.k.K(b),this.Fa.K(c)):(this.j.La(),this.k.La(),this.Fa.La())};
b.prototype.wb=function(){return new b(this.j,this.k,this.Fa)};b.prototype.gk=function(a){this.j.K(a.j);this.k.K(a.k);this.Fa.K(a.Fa)};b.prototype.Vp=function(a){this.j.x+=a.j.x;this.j.y+=a.j.y;this.j.z+=a.j.z;this.k.x+=a.k.x;this.k.y+=a.k.y;this.k.z+=a.k.z;this.Fa.x+=a.Fa.x;this.Fa.y+=a.Fa.y;this.Fa.z+=a.Fa.z};b.prototype.lq=function(){this.j.x=1;this.k.x=0;this.Fa.x=0;this.j.y=0;this.k.y=1;this.Fa.y=0;this.j.z=0;this.k.z=0;this.Fa.z=1};b.prototype.La=function(){this.j.x=0;this.k.x=0;this.Fa.x=0;
this.j.y=0;this.k.y=0;this.Fa.y=0;this.j.z=0;this.k.z=0;this.Fa.z=0};b.prototype.vl=function(a,b,c){void 0===b&&(b=0);void 0===c&&(c=0);var d=this.j.x,f=this.k.x,g=this.j.y,h=this.k.y,x=d*h-f*g;0!=x&&(x=1/x);a.x=x*(h*b-f*c);a.y=x*(d*c-g*b);return a};b.prototype.wn=function(a,b,c,d){void 0===b&&(b=0);void 0===c&&(c=0);void 0===d&&(d=0);var f=this.j.x,g=this.j.y,h=this.j.z,x=this.k.x,K=this.k.y,M=this.k.z,ca=this.Fa.x,T=this.Fa.y,D=this.Fa.z,V=f*(K*D-M*T)+g*(M*ca-x*D)+h*(x*T-K*ca);0!=V&&(V=1/V);a.x=
V*(b*(K*D-M*T)+c*(M*ca-x*D)+d*(x*T-K*ca));a.y=V*(f*(c*D-d*T)+g*(d*ca-b*D)+h*(b*T-c*ca));a.z=V*(f*(K*d-M*c)+g*(M*b-x*d)+h*(x*c-K*b));return a};c.Lf=function(){};c.tl=function(a){void 0===a&&(a=0);return isFinite(a)};c.Nd=function(a,b){return a.x*b.x+a.y*b.y};c.ql=function(a,b){return a.x*b.y-a.y*b.x};c.Si=function(a,b){void 0===b&&(b=0);return new g(b*a.y,-b*a.x)};c.cw=function(a,b){void 0===a&&(a=0);return new g(-a*b.y,a*b.x)};c.yd=function(a,b){return new g(a.j.x*b.x+a.k.x*b.y,a.j.y*b.x+a.k.y*b.y)};
c.Ui=function(a,b){return new g(c.Nd(b,a.j),c.Nd(b,a.k))};c.Xc=function(a,b){var d=c.yd(a.G,b);d.x+=a.position.x;d.y+=a.position.y;return d};c.MA=function(a,b){var d=c.oc(b,a.position),f=d.x*a.G.j.x+d.y*a.G.j.y;d.y=d.x*a.G.k.x+d.y*a.G.k.y;d.x=f;return d};c.Zv=function(a,b){return new g(a.x+b.x,a.y+b.y)};c.oc=function(a,b){return new g(a.x-b.x,a.y-b.y)};c.zs=function(a,b){var c=a.x-b.x,d=a.y-b.y;return Math.sqrt(c*c+d*d)};c.DE=function(a,b){var c=a.x-b.x,d=a.y-b.y;return c*c+d*d};c.FE=function(a,b){void 0===
a&&(a=0);return new g(a*b.x,a*b.y)};c.vE=function(b,d){return a.on(c.Zv(b.j,d.j),c.Zv(b.k,d.k))};c.GE=function(b,d){return a.on(c.yd(b,d.j),c.yd(b,d.k))};c.HE=function(b,d){var f=new g(c.Nd(b.j,d.j),c.Nd(b.k,d.j)),h=new g(c.Nd(b.j,d.k),c.Nd(b.k,d.k));return a.on(f,h)};c.hd=function(a){void 0===a&&(a=0);return 0<a?a:-a};c.Wv=function(a){return new g(c.hd(a.x),c.hd(a.y))};c.uE=function(b){return a.on(c.Wv(b.j),c.Wv(b.k))};c.ek=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return a<b?a:b};c.ww=function(a,
b){return new g(c.ek(a.x,b.x),c.ek(a.y,b.y))};c.fe=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return a>b?a:b};c.vw=function(a,b){return new g(c.fe(a.x,b.x),c.fe(a.y,b.y))};c.Cb=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);return a<b?b:a>c?c:a};c.BE=function(a,b,d){return c.vw(b,c.ww(a,d))};c.VA=function(a,b){var c=a[0];a[0]=b[0];b[0]=c};c.JE=function(){return 2*Math.random()-1};c.KE=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);return(b-a)*Math.random()+a};c.IE=
function(a){void 0===a&&(a=0);a|=a>>1&2147483647;a|=a>>2&1073741823;a|=a>>4&268435455;a|=a>>8&16777215;return(a|a>>16&65535)+1};c.EE=function(a){void 0===a&&(a=0);return 0<a&&0==(a&a-1)};n.wc.push(function(){n.aa.Math.Lf.kB=new g(0,0);n.aa.Math.Lf.hB=a.on(new g(1,0),new g(0,1));n.aa.Math.Lf.NE=new f(c.kB,c.hB)});d.ao=function(){this.W=new g;this.Ed=new g;this.m=new g};d.prototype.R=function(a){this.W.K(a.W);this.Ed.K(a.Ed);this.m.K(a.m);this.kg=a.kg;this.T=a.T;this.vd=a.vd};d.prototype.wb=function(){var a=
new d;a.W.K(this.W);a.Ed.K(this.Ed);a.m.K(this.m);a.kg=this.kg;a.T=this.T;a.vd=this.vd;return a};d.prototype.mf=function(a,b){void 0===b&&(b=0);a.position.x=(1-b)*this.Ed.x+b*this.m.x;a.position.y=(1-b)*this.Ed.y+b*this.m.y;a.G.R((1-b)*this.kg+b*this.T);var c=a.G;a.position.x-=c.j.x*this.W.x+c.k.x*this.W.y;a.position.y-=c.j.y*this.W.x+c.k.y*this.W.y};d.prototype.Ri=function(a){void 0===a&&(a=0);if(this.vd<a&&1-this.vd>Number.MIN_VALUE){var b=(a-this.vd)/(1-this.vd);this.Ed.x=(1-b)*this.Ed.x+b*this.m.x;
this.Ed.y=(1-b)*this.Ed.y+b*this.m.y;this.kg=(1-b)*this.kg+b*this.T;this.vd=a}};f.ej=function(){this.position=new g;this.G=new a};f.prototype.ej=function(a,b){void 0===a&&(a=null);void 0===b&&(b=null);a&&(this.position.K(a),this.G.gk(b))};f.prototype.kd=function(a,b){this.position.K(a);this.G.gk(b)};f.prototype.lq=function(){this.position.La();this.G.lq()};f.prototype.R=function(a){this.position.K(a.position);this.G.gk(a.G)};f.prototype.ha=function(){return Math.atan2(this.G.j.y,this.G.j.x)};g.mg=
function(){};g.prototype.mg=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.x=a;this.y=b};g.prototype.La=function(){this.y=this.x=0};g.prototype.R=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.x=a;this.y=b};g.prototype.K=function(a){this.x=a.x;this.y=a.y};g.prototype.Ti=function(){return new g(-this.x,-this.y)};g.prototype.yw=function(){this.x=-this.x;this.y=-this.y};g.LA=function(){var a=0,b=0;void 0===a&&(a=0);void 0===b&&(b=0);return new g(a,b)};g.prototype.wb=function(){return new g(this.x,
this.y)};g.prototype.Lg=function(a){this.x+=a.x;this.y+=a.y};g.prototype.xn=function(a){this.x-=a.x;this.y-=a.y};g.prototype.fa=function(a){void 0===a&&(a=0);this.x*=a;this.y*=a};g.prototype.Si=function(a){void 0===a&&(a=0);var b=this.x;this.x=a*this.y;this.y=-a*b};g.prototype.cw=function(a){void 0===a&&(a=0);var b=this.x;this.x=-a*this.y;this.y=a*b};g.prototype.ww=function(a){this.x=this.x<a.x?this.x:a.x;this.y=this.y<a.y?this.y:a.y};g.prototype.vw=function(a){this.x=this.x>a.x?this.x:a.x;this.y=
this.y>a.y?this.y:a.y};g.prototype.hd=function(){0>this.x&&(this.x=-this.x);0>this.y&&(this.y=-this.y)};g.prototype.ig=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};g.prototype.iq=function(){return this.x*this.x+this.y*this.y};g.prototype.xb=function(){var a=Math.sqrt(this.x*this.x+this.y*this.y);if(a<Number.MIN_VALUE)return 0;var b=1/a;this.x*=b;this.y*=b;return a};g.prototype.tl=function(){return c.tl(this.x)&&c.tl(this.y)};h.Ll=function(){};h.prototype.Ll=function(a,b,c){void 0===a&&
(a=0);void 0===b&&(b=0);void 0===c&&(c=0);this.x=a;this.y=b;this.z=c};h.prototype.La=function(){this.x=this.y=this.z=0};h.prototype.R=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);this.x=a;this.y=b;this.z=c};h.prototype.K=function(a){this.x=a.x;this.y=a.y;this.z=a.z};h.prototype.Ti=function(){return new h(-this.x,-this.y,-this.z)};h.prototype.yw=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z};h.prototype.wb=function(){return new h(this.x,this.y,this.z)};h.prototype.Lg=
function(a){this.x+=a.x;this.y+=a.y;this.z+=a.z};h.prototype.xn=function(a){this.x-=a.x;this.y-=a.y;this.z-=a.z};h.prototype.fa=function(a){void 0===a&&(a=0);this.x*=a;this.y*=a;this.z*=a}})();
(function(){var a=n.aa.Math.Lf,b=n.aa.Math.ao,c=n.aa.Math.ej,d=n.aa.Math.mg,f=n.aa.yl,g=n.aa.Jb,h=n.v.Dn,k=n.v.wq,m=n.v.Aq,q=n.v.Sa.Tn,p=n.l.ie,t=n.l.xl,z=n.l.vq,s=n.l.at,x=n.l.Gn,K=n.l.Bl,M=n.l.Se,ca=n.l.et,T=n.l.it,D=n.l.Cl,V=n.l.Dl,ga=n.l.El,W=n.l.Dq,E=n.l.Ue,$=n.l.ka.Za,Ba=n.l.ka.zl,qa=n.l.ka.dj,Ca=n.l.J.ia;p.ie=function(){this.g=new c;this.h=new b;this.o=new d;this.Ej=new d};p.prototype.Xp=function(a){if(1==this.rd.fq())return null;var b=new D;b.Qe(this,this.g,a);this.P&p.Vq&&b.mn(this.rd.cf.vm,
this.g);b.Ha=this.Cc;this.Cc=b;++this.Sy;b.bc=this;0<b.Xo&&this.jg();this.rd.P|=E.Vt;return b};p.prototype.Lw=function(a,b){void 0===b&&(b=0);var c;if(1!=this.rd.fq()){this.g.G.R(b);this.g.position.K(a);c=this.g.G;var d=this.h.W;this.h.m.x=c.j.x*d.x+c.k.x*d.y;this.h.m.y=c.j.y*d.x+c.k.y*d.y;this.h.m.x+=this.g.position.x;this.h.m.y+=this.g.position.y;this.h.Ed.K(this.h.m);this.h.kg=this.h.T=b;d=this.rd.cf.vm;for(c=this.Cc;c;c=c.Ha)c.Mw(d,this.g,this.g);this.rd.cf.$p()}};p.prototype.mf=function(){return this.g};
p.prototype.ei=function(a){this.Lw(a,this.ha())};p.prototype.ha=function(){return this.h.T};p.prototype.pb=function(a){void 0===a&&(a=0);this.Lw(this.g.position,a)};p.prototype.ul=function(a){this.hb!=p.tf&&this.o.K(a)};p.prototype.bk=function(a,b){this.hb==p.Cd&&(0==this.ld()&&this.Pd(!0),this.Ej.x+=a.x,this.Ej.y+=a.y,this.Dm+=(b.x-this.h.m.x)*a.y-(b.y-this.h.m.y)*a.x)};p.prototype.sA=function(a){void 0===a&&(a=0);this.hb==p.Cd&&(0==this.ld()&&this.Pd(!0),this.Dm+=a)};p.prototype.ja=function(a,b){this.hb==
p.Cd&&(0==this.ld()&&this.Pd(!0),this.o.x+=this.U*a.x,this.o.y+=this.U*a.y,this.I+=this.ea*((b.x-this.h.m.x)*a.y-(b.y-this.h.m.y)*a.x))};p.prototype.nw=function(a){a.Oh=this.X;a.sl=this.Vf;a.Be.K(this.h.W)};p.prototype.jg=function(){this.ea=this.Vf=this.U=this.X=0;this.h.W.La();if(this.hb!=p.tf&&this.hb!=p.oB){for(var b=d.LA(),c=this.Cc;c;c=c.Ha)if(0!=c.Xo){var f=c.nw();this.X+=f.Oh;b.x+=f.Be.x*f.Oh;b.y+=f.Be.y*f.Oh;this.Vf+=f.sl}0<this.X?(this.U=1/this.X,b.x*=this.U,b.y*=this.U):this.U=this.X=1;
0<this.Vf&&0==(this.P&p.Hx)?(this.Vf-=this.X*(b.x*b.x+b.y*b.y),this.Vf*=this.BC,g.dc(0<this.Vf),this.ea=1/this.Vf):this.ea=this.Vf=0;c=this.h.m.wb();this.h.W.K(b);this.h.Ed.K(a.Xc(this.g,this.h.W));this.h.m.K(this.h.Ed);this.o.x+=this.I*-(this.h.m.y-c.y);this.o.y+=this.I*+(this.h.m.x-c.x)}};p.prototype.hg=function(a){var b=this.g.G;a=new d(b.j.x*a.x+b.k.x*a.y,b.j.y*a.x+b.k.y*a.y);a.x+=this.g.position.x;a.y+=this.g.position.y;return a};p.prototype.Hs=function(b){return a.yd(this.g.G,b)};p.prototype.lf=
function(b){return a.MA(this.g,b)};p.prototype.Fs=function(b){return a.Ui(this.g.G,b)};p.prototype.FA=function(a){return new d(this.o.x-this.I*(a.y-this.h.m.y),this.o.y+this.I*(a.x-this.h.m.x))};p.prototype.ze=function(a){void 0===a&&(a=0);this.Wy=a};p.prototype.Db=function(){return this.hb};p.prototype.Hw=function(){this.P|=p.Wq};p.prototype.cq=function(){return(this.P&p.Wq)==p.Wq};p.prototype.Pd=function(a){a?(this.P|=p.yo,this.Qk=0):(this.P&=~p.yo,this.Qk=0,this.o.La(),this.I=0,this.Ej.La(),this.Dm=
0)};p.prototype.ld=function(){return(this.P&p.yo)==p.yo};p.prototype.ck=function(){return(this.P&p.Vq)==p.Vq};p.prototype.Jf=function(){return this.Ei};p.prototype.un=function(a){this.Ei=a};p.prototype.ie=function(a,b){this.P=0;a.AB&&(this.P|=p.Wq);a.bu&&(this.P|=p.Hx);a.bB&&(this.P|=p.Rt);a.gB&&(this.P|=p.yo);a.Nc&&(this.P|=p.Vq);this.rd=b;this.g.position.K(a.position);this.g.G.R(a.Sw);this.h.W.La();this.h.vd=1;this.h.kg=this.h.T=a.Sw;var c=this.g.G,d=this.h.W;this.h.m.x=c.j.x*d.x+c.k.x*d.y;this.h.m.y=
c.j.y*d.x+c.k.y*d.y;this.h.m.x+=this.g.position.x;this.h.m.y+=this.g.position.y;this.h.Ed.K(this.h.m);this.Mb=this.Bj=this.Sc=null;this.Iu=0;this.Ha=this.qd=null;this.o.K(a.Hy);this.I=a.dB;this.Wy=a.xr;this.sC=a.Tw;this.Ej.R(0,0);this.Qk=this.Dm=0;this.hb=a.type;this.U=this.hb==p.Cd?this.X=1:this.X=0;this.ea=this.Vf=0;this.BC=a.hC;this.Ei=a.Yj;this.Cc=null;this.Sy=0};p.prototype.Nw=function(){var a=p.GD;a.G.R(this.h.kg);var b=a.G,c=this.h.W;a.position.x=this.h.Ed.x-(b.j.x*c.x+b.k.x*c.y);a.position.y=
this.h.Ed.y-(b.j.y*c.x+b.k.y*c.y);c=this.rd.cf.vm;for(b=this.Cc;b;b=b.Ha)b.Mw(c,a,this.g)};p.prototype.pc=function(){this.g.G.R(this.h.T);var a=this.g.G,b=this.h.W;this.g.position.x=this.h.m.x-(a.j.x*b.x+a.k.x*b.y);this.g.position.y=this.h.m.y-(a.j.y*b.x+a.k.y*b.y)};p.prototype.vn=function(a){if(this.hb!=p.Cd&&a.hb!=p.Cd)return!1;for(var b=this.Sc;b;b=b.next)if(b.$f==a&&0==b.wi.Oy)return!1;return!0};p.prototype.Ri=function(a){void 0===a&&(a=0);this.h.Ri(a);this.h.m.K(this.h.Ed);this.h.T=this.h.kg;
this.pc()};n.wc.push(function(){n.l.ie.GD=new c;n.l.ie.Ic=1;n.l.ie.yo=2;n.l.ie.Rt=4;n.l.ie.Wq=8;n.l.ie.Hx=16;n.l.ie.Vq=32;n.l.ie.tf=0;n.l.ie.oB=1;n.l.ie.Cd=2});t.xl=function(){this.position=new d;this.Hy=new d};t.prototype.xl=function(){this.Yj=null;this.position.R(0,0);this.Sw=0;this.Hy.R(0,0);this.Tw=this.xr=this.dB=0;this.gB=this.bB=!0;this.AB=this.bu=!1;this.type=p.tf;this.Nc=!0;this.hC=1};z.vq=function(){};z.prototype.vn=function(a,b){var c=a.mw(),d=b.mw();return c.Bk==d.Bk&&0!=c.Bk?0<c.Bk:0!=
(c.Cf&d.uf)&&0!=(c.uf&d.Cf)};n.wc.push(function(){n.l.vq.lB=new z});s.at=function(){this.WC=new da(g.sf);this.eE=new da(g.sf)};x.Gn=function(){};x.prototype.vs=function(){};x.prototype.As=function(){};x.prototype.Ks=function(){};n.wc.push(function(){n.l.Gn.mB=new x});K.Bl=function(){};K.prototype.Bl=function(){this.rd=null;this.vg=0;this.Qy=z.lB;this.xm=x.mB;this.Py=new Ba(this.Aj);this.vm=new m};K.prototype.rA=function(a,b){var c=a instanceof D?a:null,d=b instanceof D?b:null,f=c.bc,g=d.bc;if(f!=
g){for(var h=g.Mb;h;){if(h.$f==f){var k=h.yc.kc,B=h.yc.lc;if(k==c&&B==d||k==d&&B==c)return}h=h.next}0!=g.vn(f)&&0!=this.Qy.vn(c,d)&&(h=this.Py.Qe(c,d),c=h.kc,d=h.lc,f=c.bc,g=d.bc,h.qd=null,h.Ha=this.rd.Mb,null!=this.rd.Mb&&(this.rd.Mb.qd=h),this.rd.Mb=h,h.Wd.yc=h,h.Wd.$f=g,h.Wd.fc=null,h.Wd.next=f.Mb,null!=f.Mb&&(f.Mb.fc=h.Wd),f.Mb=h.Wd,h.Xd.yc=h,h.Xd.$f=f,h.Xd.fc=null,h.Xd.next=g.Mb,null!=g.Mb&&(g.Mb.fc=h.Xd),g.Mb=h.Xd,++this.rd.vg)}};K.prototype.$p=function(){this.vm.ZA(n.XB(this,this.rA))};K.prototype.jd=
function(a){var b=a.kc,c=a.lc,b=b.bc,c=c.bc;a.gq()&&this.xm.As(a);a.qd&&(a.qd.Ha=a.Ha);a.Ha&&(a.Ha.qd=a.qd);a==this.rd.Mb&&(this.rd.Mb=a.Ha);a.Wd.fc&&(a.Wd.fc.next=a.Wd.next);a.Wd.next&&(a.Wd.next.fc=a.Wd.fc);a.Wd==b.Mb&&(b.Mb=a.Wd.next);a.Xd.fc&&(a.Xd.fc.next=a.Xd.next);a.Xd.next&&(a.Xd.next.fc=a.Xd.fc);a.Xd==c.Mb&&(c.Mb=a.Xd.next);this.Py.jd(a);--this.vg};K.prototype.tA=function(){for(var a=this.rd.Mb;a;){var b=a.kc,c=a.lc,d=b.bc,f=c.bc;if(0==d.ld()&&0==f.ld())a=a.Ha;else{if(a.P&$.Tt){if(0==f.vn(d)){b=
a;a=b.Ha;this.jd(b);continue}if(0==this.Qy.vn(b,c)){b=a;a=b.Ha;this.jd(b);continue}a.P&=~$.Tt}0==this.vm.Xi(b.Nk,c.Nk)?(b=a,a=b.Ha,this.jd(b)):(a.Pw(this.xm),a=a.Ha)}}};n.wc.push(function(){n.l.Bl.mF=new k});M.Se=function(){};M.prototype.Se=function(){};n.wc.push(function(){n.l.Se.dF=1;n.l.Se.aF=2;n.l.Se.XE=4;n.l.Se.cF=8;n.l.Se.YE=16;n.l.Se.ZE=32});ca.et=function(){};T.it=function(){this.uf=1;this.Cf=65535;this.Bk=0};T.prototype.wb=function(){var a=new T;a.uf=this.uf;a.Cf=this.Cf;a.Bk=this.Bk;return a};
D.Cl=function(){this.Ry=new T};D.prototype.Db=function(){return this.bb.Db()};D.prototype.dk=function(){return this.CC};D.prototype.mw=function(){return this.Ry.wb()};D.prototype.Jf=function(){return this.Ei};D.prototype.un=function(a){this.Ei=a};D.prototype.nw=function(a){void 0===a&&(a=null);null==a&&(a=new q);this.bb.kn(a,this.Xo);return a};D.prototype.Jw=function(a){void 0===a&&(a=0);this.Xo=a};D.prototype.Cl=function(){this.um=new h;this.bb=this.Ha=this.bc=this.Ei=null;this.Ru=this.Ku=this.Xo=
0};D.prototype.Qe=function(a,b,c){this.Ei=c.Yj;this.Ku=c.mm;this.Ru=c.Pm;this.bc=a;this.Ha=null;this.Ry=c.filter.wb();this.CC=c.lC;this.bb=c.shape.wb();this.Xo=c.rb};D.prototype.jd=function(){this.bb=null};D.prototype.mn=function(a,b){this.bb.pl(this.um,b);this.Nk=a.mn(this.um,this)};D.prototype.nn=function(a){null!=this.Nk&&(a.nn(this.Nk),this.Nk=null)};D.prototype.Mw=function(b,c,d){if(this.Nk){var f=new h,g=new h;this.bb.pl(f,c);this.bb.pl(g,d);this.um.ol(f,g);c=a.oc(d.position,c.position);b.Js(this.Nk,
this.um,c)}};V.Dl=function(){this.filter=new T};V.prototype.Dl=function(){this.Yj=this.shape=null;this.mm=.2;this.rb=this.Pm=0;this.filter.uf=1;this.filter.Cf=65535;this.filter.Bk=0;this.lC=!1};ga.El=function(){};ga.prototype.El=function(){this.Gh=new ba;this.ym=new ba;this.$g=new ba};ga.prototype.kd=function(a,b,c,d,f,g){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);var h=0;this.tC=b;this.DC=c;this.df=this.vg=this.Vd=0;this.Aj=d;this.EC=f;this.Ik=g;for(h=this.Gh.length;h<a;h++)this.Gh[h]=
null;for(h=this.ym.length;h<b;h++)this.ym[h]=null;for(h=this.$g.length;h<c;h++)this.$g[h]=null};ga.prototype.ws=function(){this.df=this.vg=this.Vd=0};ga.prototype.hk=function(b,c,d){for(var f=0,h=0,U,f=0;f<this.Vd;++f)h=this.Gh[f],h.Db()==p.Cd&&(h.o.x+=b.Ta*(c.x+h.U*h.Ej.x),h.o.y+=b.Ta*(c.y+h.U*h.Ej.y),h.I+=b.Ta*h.ea*h.Dm,h.o.fa(a.Cb(1-b.Ta*h.Wy,0,1)),h.I*=a.Cb(1-b.Ta*h.sC,0,1));this.Ik.kd(b,this.ym,this.vg,this.Aj);c=this.Ik;c.Kf(b);for(f=0;f<this.df;++f)U=this.$g[f],U.Kf(b);for(f=0;f<b.cn;++f){for(h=
0;h<this.df;++h)U=this.$g[h],U.of(b);c.of()}for(f=0;f<this.df;++f)U=this.$g[f],U.Cs();c.Cs();for(f=0;f<this.Vd;++f)if(h=this.Gh[f],h.Db()!=p.tf){var H=b.Ta*h.o.x,k=b.Ta*h.o.y;H*H+k*k>g.fx&&(h.o.xb(),h.o.x=h.o.x*g.Ol*b.tg,h.o.y=h.o.y*g.Ol*b.tg);H=b.Ta*h.I;H*H>g.ex&&(h.I=0>h.I?-g.Nl*b.tg:g.Nl*b.tg);h.h.Ed.K(h.h.m);h.h.kg=h.h.T;h.h.m.x+=b.Ta*h.o.x;h.h.m.y+=b.Ta*h.o.y;h.h.T+=b.Ta*h.I;h.pc()}for(f=0;f<b.Km;++f){H=c.nf(g.ut);k=!0;for(h=0;h<this.df;++h)U=this.$g[h],U=U.nf(g.ut),k=k&&U;if(H&&k)break}this.Dw(c.Hh);
if(d){d=Number.MAX_VALUE;c=g.dx*g.dx;H=g.cx*g.cx;for(f=0;f<this.Vd;++f)h=this.Gh[f],h.Db()!=p.tf&&(0==(h.P&p.Rt)&&(d=h.Qk=0),0==(h.P&p.Rt)||h.I*h.I>H||a.Nd(h.o,h.o)>c?d=h.Qk=0:(h.Qk+=b.Ta,d=a.ek(d,h.Qk)));if(d>=g.rB)for(f=0;f<this.Vd;++f)h=this.Gh[f],h.Pd(!1)}};ga.prototype.Ns=function(a){var b=0,c=0;this.Ik.kd(a,this.ym,this.vg,this.Aj);for(var d=this.Ik,b=0;b<this.df;++b)this.$g[b].Kf(a);for(b=0;b<a.cn;++b)for(d.of(),c=0;c<this.df;++c)this.$g[c].of(a);for(b=0;b<this.Vd;++b)if(c=this.Gh[b],c.Db()!=
p.tf){var f=a.Ta*c.o.x,h=a.Ta*c.o.y;f*f+h*h>g.fx&&(c.o.xb(),c.o.x=c.o.x*g.Ol*a.tg,c.o.y=c.o.y*g.Ol*a.tg);f=a.Ta*c.I;f*f>g.ex&&(c.I=0>c.I?-g.Nl*a.tg:g.Nl*a.tg);c.h.Ed.K(c.h.m);c.h.kg=c.h.T;c.h.m.x+=a.Ta*c.o.x;c.h.m.y+=a.Ta*c.o.y;c.h.T+=a.Ta*c.I;c.pc()}for(b=0;b<a.Km;++b){f=d.nf(.75);h=!0;for(c=0;c<this.df;++c)var H=this.$g[c].nf(g.ut),h=h&&H;if(f&&h)break}this.Dw(d.Hh)};ga.prototype.Dw=function(a){if(null!=this.EC)for(var b=0;b<this.vg;++b)for(var c=a[b],d=0;d<c.Ff;++d)ga.Bz.WC[d]=c.ve[d].bd,ga.Bz.eE[d]=
c.ve[d].bi};ga.prototype.us=function(a){a.jF=this.Vd;this.Gh[this.Vd++]=a};ga.prototype.Xv=function(a){this.ym[this.vg++]=a};ga.prototype.Yv=function(a){this.$g[this.df++]=a};n.wc.push(function(){n.l.El.Bz=new s});W.Dq=function(){};W.prototype.R=function(a){this.Ta=a.Ta;this.tg=a.tg;this.Km=a.Km;this.cn=a.cn;this.Kg=a.Kg};E.Ue=function(){this.zD=new ba;this.cf=new K;this.Ik=new qa;this.Vy=new ga};E.prototype.Ue=function(a,b){this.Bj=this.Sc=this.Mb=this.Bc=null;this.Iu=this.df=this.vg=this.Vd=0;E.KC=
!0;E.uC=!0;this.rC=b;this.Ty=a;this.Uy=0;this.cf.rd=this;this.AC=this.ln(new t)};E.prototype.Iw=function(a){this.cf.xm=a};E.prototype.ln=function(a){if(1==this.fq())return null;a=new p(a,this);a.qd=null;if(a.Ha=this.Bc)this.Bc.qd=a;this.Bc=a;++this.Vd;return a};E.prototype.ew=function(a){if(1!=this.fq()){for(var b=a.Sc;b;){var c=b,b=b.next;this.BA(c.wi)}for(b=a.Bj;b;)c=b,b=b.Hi,c.tx.Bw(a);for(b=a.Mb;b;)c=b,b=b.next,this.cf.jd(c.yc);a.Mb=null;for(b=a.Cc;b;)c=b,b=b.Ha,c.nn(this.cf.vm),c.jd();a.Cc=null;
a.Sy=0;a.qd&&(a.qd.Ha=a.Ha);a.Ha&&(a.Ha.qd=a.qd);a==this.Bc&&(this.Bc=a.Ha);--this.Vd}};E.prototype.AA=function(a){var b=Ca.Qe(a,null);b.qd=null;if(b.Ha=this.Sc)this.Sc.qd=b;this.Sc=b;++this.df;b.Ke.wi=b;b.Ke.$f=b.Pa;b.Ke.fc=null;if(b.Ke.next=b.Ga.Sc)b.Ga.Sc.fc=b.Ke;b.Ga.Sc=b.Ke;b.Le.wi=b;b.Le.$f=b.Ga;b.Le.fc=null;if(b.Le.next=b.Pa.Sc)b.Pa.Sc.fc=b.Le;b.Pa.Sc=b.Le;var c=a.ib,d=a.qb;if(0==a.Oq)for(a=d.Mb;a;)a.$f==c&&a.yc.jw(),a=a.next;return b};E.prototype.BA=function(a){var b=a.Oy;a.qd&&(a.qd.Ha=a.Ha);
a.Ha&&(a.Ha.qd=a.qd);a==this.Sc&&(this.Sc=a.Ha);var c=a.Ga,d=a.Pa;c.Pd(!0);d.Pd(!0);a.Ke.fc&&(a.Ke.fc.next=a.Ke.next);a.Ke.next&&(a.Ke.next.fc=a.Ke.fc);a.Ke==c.Sc&&(c.Sc=a.Ke.next);a.Ke.fc=null;a.Ke.next=null;a.Le.fc&&(a.Le.fc.next=a.Le.next);a.Le.next&&(a.Le.next.fc=a.Le.fc);a.Le==d.Sc&&(d.Sc=a.Le.next);a.Le.fc=null;a.Le.next=null;Ca.jd(a,null);--this.df;if(0==b)for(a=d.Mb;a;)a.$f==c&&a.yc.jw(),a=a.next};E.prototype.Wi=function(a,b,c){void 0===a&&(a=0);void 0===b&&(b=0);void 0===c&&(c=0);this.P&
E.Vt&&(this.cf.$p(),this.P&=~E.Vt);this.P|=E.Ut;var d=E.DD;d.Ta=a;d.cn=b;d.Km=c;d.tg=0<a?1/a:0;d.zc=this.Uy*a;d.Kg=E.KC;this.cf.tA();0<d.Ta&&this.hk(d);E.uC&&0<d.Ta&&this.Ns(d);0<d.Ta&&(this.Uy=d.tg);this.P&=~E.Ut};E.prototype.fq=function(){return 0<(this.P&E.Ut)};E.prototype.hk=function(a){for(var b,c=this.Bj;c;c=c.Ha)c.Wi(a);c=this.Vy;c.kd(this.Vd,this.vg,this.df,null,this.cf.xm,this.Ik);for(b=this.Bc;b;b=b.Ha)b.P&=~p.Ic;for(var d=this.Mb;d;d=d.Ha)d.P&=~$.Ic;for(d=this.Sc;d;d=d.Ha)d.Jk=!1;parseInt(this.Vd);
for(var d=this.zD,f=this.Bc;f;f=f.Ha)if(!(f.P&p.Ic)&&0!=f.ld()&&0!=f.ck()&&f.Db()!=p.tf){c.ws();var g=0;d[g++]=f;for(f.P|=p.Ic;0<g;)if(b=d[--g],c.us(b),0==b.ld()&&b.Pd(!0),b.Db()!=p.tf){for(var h,k=b.Mb;k;k=k.next)k.yc.P&$.Ic||1==k.yc.dk()||0==k.yc.dq()||0==k.yc.gq()||(c.Xv(k.yc),k.yc.P|=$.Ic,h=k.$f,h.P&p.Ic||(d[g++]=h,h.P|=p.Ic));for(b=b.Sc;b;b=b.next)1!=b.wi.Jk&&(h=b.$f,0!=h.ck()&&(c.Yv(b.wi),b.wi.Jk=!0,h.P&p.Ic||(d[g++]=h,h.P|=p.Ic)))}c.hk(a,this.Ty,this.rC);for(g=0;g<c.Vd;++g)b=c.Gh[g],b.Db()==
p.tf&&(b.P&=~p.Ic)}for(g=0;g<d.length&&d[g];++g)d[g]=null;for(b=this.Bc;b;b=b.Ha)0==b.ld()||0==b.ck()||b.Db()!=p.tf&&b.Nw();this.cf.$p()};E.prototype.Ns=function(a){var b,c,d,f=this.Vy;f.kd(this.Vd,g.pB,g.qB,null,this.cf.xm,this.Ik);var h=E.vD;for(b=this.Bc;b;b=b.Ha)b.P&=~p.Ic,b.h.vd=0;for(d=this.Mb;d;d=d.Ha)d.P&=~($.bm|$.Ic);for(d=this.Sc;d;d=d.Ha)d.Jk=!1;for(;;){var H=null,k=1;for(d=this.Mb;d;d=d.Ha)if(1!=d.dk()&&0!=d.dq()&&0!=d.KA()){if(d.P&$.bm)b=d.JC;else{b=d.kc;c=d.lc;b=b.bc;c=c.bc;if(!(b.Db()==
p.Cd&&0!=b.ld()||c.Db()==p.Cd&&0!=c.ld()))continue;var B=b.h.vd;b.h.vd<c.h.vd?(B=c.h.vd,b.h.Ri(B)):c.h.vd<b.h.vd&&(B=b.h.vd,c.h.Ri(B));b=d.zA(b.h,c.h);g.dc(0<=b&&1>=b);0<b&&1>b&&(b=(1-b)*B+b,1<b&&(b=1));d.JC=b;d.P|=$.bm}Number.MIN_VALUE<b&&b<k&&(H=d,k=b)}if(null==H||1-100*Number.MIN_VALUE<k)break;b=H.kc;c=H.lc;b=b.bc;c=c.bc;E.yz.R(b.h);E.zz.R(c.h);b.Ri(k);c.Ri(k);H.Pw(this.cf.xm);H.P&=~$.bm;if(1==H.dk()||0==H.dq())b.h.R(E.yz),c.h.R(E.zz),b.pc(),c.pc();else if(0!=H.gq()){b.Db()!=p.Cd&&(b=c);f.ws();
H=d=0;h[d+H++]=b;for(b.P|=p.Ic;0<H;)if(b=h[d++],--H,f.us(b),0==b.ld()&&b.Pd(!0),b.Db()==p.Cd){for(c=b.Mb;c&&f.vg!=f.tC;c=c.next)c.yc.P&$.Ic||1==c.yc.dk()||0==c.yc.dq()||0==c.yc.gq()||(f.Xv(c.yc),c.yc.P|=$.Ic,B=c.$f,B.P&p.Ic||(B.Db()!=p.tf&&(B.Ri(k),B.Pd(!0)),h[d+H]=B,++H,B.P|=p.Ic));for(b=b.Sc;b;b=b.next)f.df!=f.DC&&1!=b.wi.Jk&&(B=b.$f,0!=B.ck()&&(f.Yv(b.wi),b.wi.Jk=!0,B.P&p.Ic||(B.Db()!=p.tf&&(B.Ri(k),B.Pd(!0)),h[d+H]=B,++H,B.P|=p.Ic)))}d=E.CD;d.Kg=!1;d.Ta=(1-k)*a.Ta;d.tg=1/d.Ta;d.zc=0;d.cn=a.cn;
d.Km=a.Km;f.Ns(d);for(k=k=0;k<f.Vd;++k)if(b=f.Gh[k],b.P&=~p.Ic,0!=b.ld()&&b.Db()==p.Cd)for(b.Nw(),c=b.Mb;c;c=c.next)c.yc.P&=~$.bm;for(k=0;k<f.vg;++k)d=f.ym[k],d.P&=~($.bm|$.Ic);for(k=0;k<f.df;++k)d=f.$g[k],d.Jk=!1;this.cf.$p()}}};n.wc.push(function(){n.l.Ue.DD=new W;n.l.Ue.pF=new c;n.l.Ue.yz=new b;n.l.Ue.zz=new b;n.l.Ue.CD=new W;n.l.Ue.vD=new ba;n.l.Ue.nF=new f(.5,.8,.8);n.l.Ue.Vt=1;n.l.Ue.Ut=2})})();
(function(){var a=n.v.Sa.cj,b=n.v.Sa.ki,c=n.v.Sa.Ub,d=n.l.ka.Ws,f=n.l.ka.Za,g=n.l.ka.Fn,h=n.l.ka.Zs,k=n.l.ka.$s,m=n.l.ka.zl,q=n.l.ka.bt,p=n.l.ka.ct,t=n.l.ka.dj,z=n.l.ka.ht,s=n.l.ka.Vn,x=n.l.ka.nt,K=n.l.ka.ot,M=n.l.ka.pt,ca=n.l.ka.lk,T=n.l.ie,D=n.l.Dq,V=n.aa.Jb,ga=n.aa.Math.ji,W=n.aa.Math.Lf,E=n.aa.Math.mg,$=n.v.Bd,Ba=n.v.Al,qa=n.v.ii,Ca=n.v.Te,v=n.v.Cq,u=n.v.Ml;n.Fb(d,n.l.ka.Za);d.prototype.la=n.l.ka.Za.prototype;d.Ws=function(){n.l.ka.Za.Za.apply(this,arguments)};d.Qe=function(){return new d};d.jd=
function(){};d.prototype.ge=function(a,b){this.la.ge.call(this,a,b)};d.prototype.Mg=function(){$.uA(this.Yf,this.kc.bb instanceof a?this.kc.bb:null,this.kc.bc.g,this.lc.bb instanceof a?this.lc.bb:null,this.lc.bc.g)};f.Za=function(){this.Wd=new k;this.Xd=new k;this.Yf=new qa;this.dp=new qa};f.prototype.gq=function(){return(this.P&f.cm)==f.cm};f.prototype.KA=function(){return(this.P&f.zo)==f.zo};f.prototype.dk=function(){return(this.P&f.Bo)==f.Bo};f.prototype.RA=function(){this.P&=~f.Ao};f.prototype.dq=
function(){return(this.P&f.Ao)==f.Ao};f.prototype.jw=function(){this.P|=f.Tt};f.prototype.Za=function(){};f.prototype.ge=function(a,b){void 0===a&&(a=null);void 0===b&&(b=null);this.P=f.Ao;if(a&&b){if(a.dk()||b.dk())this.P|=f.Bo;var c=a.bc,d=b.bc;if(c.Db()!=T.Cd||c.cq()||d.Db()!=T.Cd||d.cq())this.P|=f.zo;this.kc=a;this.lc=b;this.Yf.Dc=0;this.Ha=this.qd=null;this.Wd.yc=null;this.Wd.fc=null;this.Wd.next=null;this.Wd.$f=null;this.Xd.yc=null;this.Xd.fc=null;this.Xd.next=null;this.Xd.$f=null}else this.lc=
this.kc=null};f.prototype.Pw=function(a){var b=this.dp;this.dp=this.Yf;this.Yf=b;this.P|=f.Ao;var d=!1,b=(this.P&f.cm)==f.cm,g=this.kc.bc,h=this.lc.bc,v=this.kc.um.Xi(this.lc.um);if(this.P&f.Bo)v&&(d=this.kc.bb,v=this.lc.bb,g=g.mf(),h=h.mf(),d=c.Xi(d,g,v,h)),this.Yf.Dc=0;else{this.P=g.Db()!=T.Cd||g.cq()||h.Db()!=T.Cd||h.cq()?this.P|f.zo:this.P&~f.zo;if(v)for(this.Mg(),d=0<this.Yf.Dc,v=0;v<this.Yf.Dc;++v){var u=this.Yf.fb[v];u.Lk=0;u.Rk=0;for(var k=u.Ci,m=0;m<this.dp.Dc;++m){var p=this.dp.fb[m];if(p.Ci.key==
k.key){u.Lk=p.Lk;u.Rk=p.Rk;break}}}else this.Yf.Dc=0;d!=b&&(g.Pd(!0),h.Pd(!0))}this.P=d?this.P|f.cm:this.P&~f.cm;0==b&&1==d&&a.vs(this);1==b&&0==d&&a.As(this);0==(this.P&f.Bo)&&a.Ks(this,this.dp)};f.prototype.Mg=function(){};f.prototype.zA=function(a,b){f.Sm.Sh.R(this.kc.bb);f.Sm.Th.R(this.lc.bb);f.Sm.Vz=a;f.Sm.Wz=b;f.Sm.jE=V.zb;return Ca.XA(f.Sm)};n.wc.push(function(){n.l.ka.Za.Bo=1;n.l.ka.Za.zo=2;n.l.ka.Za.Ic=4;n.l.ka.Za.bm=8;n.l.ka.Za.cm=16;n.l.ka.Za.Ao=32;n.l.ka.Za.Tt=64;n.l.ka.Za.Sm=new v});
g.Fn=function(){this.Ar=new E;this.Fh=new E;this.Zf=new E;this.Gm=new ga;this.xd=new ga};g.prototype.Fn=function(){this.ve=new ba(V.sf);for(var a=0;a<V.sf;a++)this.ve[a]=new h};h.Zs=function(){this.Fh=new E;this.lb=new E;this.mb=new E};k.$s=function(){};m.zl=function(){};m.prototype.zl=function(a){this.Aj=a;this.JA()};m.prototype.jn=function(a,b,c,d){void 0===c&&(c=0);void 0===d&&(d=0);this.Mh[c][d].ux=a;this.Mh[c][d].zx=b;this.Mh[c][d].oz=!0;c!=d&&(this.Mh[d][c].ux=a,this.Mh[d][c].zx=b,this.Mh[d][c].oz=
!1)};m.prototype.JA=function(){this.Mh=new ba(c.Zq);for(var a=0;a<c.Zq;a++){this.Mh[a]=new ba(c.Zq);for(var b=0;b<c.Zq;b++)this.Mh[a][b]=new q}this.jn(d.Qe,d.jd,c.sk,c.sk);this.jn(x.Qe,x.jd,c.jj,c.sk);this.jn(M.Qe,M.jd,c.jj,c.jj);this.jn(z.Qe,z.jd,c.Xq,c.sk);this.jn(K.Qe,K.jd,c.jj,c.Xq)};m.prototype.Qe=function(a,b){var c=parseInt(a.Db()),d=parseInt(b.Db()),c=this.Mh[c][d];if(c.Lr)return d=c.Lr,c.Lr=d.Ha,c.fD--,d.ge(a,b),d;d=c.ux;return null!=d?(c.oz?(d=d(this.Aj),d.ge(a,b)):(d=d(this.Aj),d.ge(b,
a)),d):null};m.prototype.jd=function(a){0<a.Yf.Dc&&(a.kc.bc.Pd(!0),a.lc.bc.Pd(!0));var b=parseInt(a.kc.Db()),b=this.Mh[b][parseInt(a.lc.Db())];b.fD++;a.Ha=b.Lr;b.Lr=a;b=b.zx;b(a,this.Aj)};q.bt=function(){};p.ct=function(){this.position=new E;this.Zf=new E;this.id=new Ba};t.dj=function(){this.IC=new D;this.Hh=new ba};t.prototype.dj=function(){};t.prototype.kd=function(a,b,c,d){void 0===c&&(c=0);var f;this.IC.R(a);this.Aj=d;for(this.Wo=c;this.Hh.length<this.Wo;)this.Hh[this.Hh.length]=new g;for(a=0;a<
c;++a){f=b[a];d=f.kc;var h=f.lc,v=d.bb.Ia,u=h.bb.Ia,k=d.bc,m=h.bc,p=f.Yf,s=V.iB(d.Ku,h.Ku),q=V.jB(d.Ru,h.Ru),hb=k.o.x,z=k.o.y,x=m.o.x,D=m.o.y,T=k.I,K=m.I;V.dc(0<p.Dc);t.dl.kd(p,k.g,v,m.g,u);h=t.dl.Qa.x;f=t.dl.Qa.y;d=this.Hh[a];d.ib=k;d.qb=m;d.LC=p;d.Zf.x=h;d.Zf.y=f;d.Ff=p.Dc;d.mm=s;d.Pm=q;d.Ar.x=p.Jd.x;d.Ar.y=p.Jd.y;d.Fh.x=p.eb.x;d.Fh.y=p.eb.y;d.hh=v+u;d.type=p.hb;for(v=0;v<d.Ff;++v){s=p.fb[v];u=d.ve[v];u.bd=s.Lk;u.bi=s.Rk;u.Fh.K(s.eb);var s=u.lb.x=t.dl.fb[v].x-k.h.m.x,q=u.lb.y=t.dl.fb[v].y-k.h.m.y,
E=u.mb.x=t.dl.fb[v].x-m.h.m.x,ca=u.mb.y=t.dl.fb[v].y-m.h.m.y,M=s*f-q*h,W=E*f-ca*h,M=M*M,W=W*W;u.Gm=1/(k.U+m.U+k.ea*M+m.ea*W);var $=k.X*k.U+m.X*m.U,$=$+(k.X*k.ea*M+m.X*m.ea*W);u.RB=1/$;W=f;$=-h;M=s*$-q*W;W=E*$-ca*W;M*=M;W*=W;u.fE=1/(k.U+m.U+k.ea*M+m.ea*W);u.Qp=0;s=d.Zf.x*(x+-K*ca-hb- -T*q)+d.Zf.y*(D+K*E-z-T*s);s<-V.vB&&(u.Qp+=-d.Pm*s)}2==d.Ff&&(D=d.ve[0],x=d.ve[1],p=k.U,k=k.ea,hb=m.U,m=m.ea,z=D.lb.x*f-D.lb.y*h,D=D.mb.x*f-D.mb.y*h,T=x.lb.x*f-x.lb.y*h,x=x.mb.x*f-x.mb.y*h,h=p+hb+k*z*z+m*D*D,f=p+hb+k*
T*T+m*x*x,m=p+hb+k*z*T+m*D*x,h*h<100*(h*f-m*m)?(d.xd.j.R(h,m),d.xd.k.R(m,f),d.xd.Es(d.Gm)):d.Ff=1)}};t.prototype.Kf=function(a){for(var b=0;b<this.Wo;++b){var c=this.Hh[b],d=c.ib,f=c.qb,g=d.U,h=d.ea,v=f.U,u=f.ea,k=c.Zf.x,m=c.Zf.y,p=m,t=-k,s=0,q=0;if(a.Kg)for(q=c.Ff,s=0;s<q;++s){var z=c.ve[s];z.bd*=a.zc;z.bi*=a.zc;var x=z.bd*k+z.bi*p,D=z.bd*m+z.bi*t;d.I-=h*(z.lb.x*D-z.lb.y*x);d.o.x-=g*x;d.o.y-=g*D;f.I+=u*(z.mb.x*D-z.mb.y*x);f.o.x+=v*x;f.o.y+=v*D}else for(q=c.Ff,s=0;s<q;++s)d=c.ve[s],d.bd=0,d.bi=0}};
t.prototype.of=function(){for(var a=0,b,c=0,d=0,f=0,g=0,h=0,v=0,u=0,k,m=0;m<this.Wo;++m){var f=this.Hh[m],p=f.ib,t=f.qb,s=p.I,q=t.I,z=p.o,x=t.o,D=p.U,T=p.ea,M=t.U,E=t.ea,v=f.Zf.x,K=u=f.Zf.y;k=-v;h=f.mm;for(a=0;a<f.Ff;a++)b=f.ve[a],c=x.x-q*b.mb.y-z.x+s*b.lb.y,d=x.y+q*b.mb.x-z.y-s*b.lb.x,c=c*K+d*k,c=b.fE*-c,d=h*b.bd,d=W.Cb(b.bi+c,-d,d),c=d-b.bi,g=c*K,c*=k,z.x-=D*g,z.y-=D*c,s-=T*(b.lb.x*c-b.lb.y*g),x.x+=M*g,x.y+=M*c,q+=E*(b.mb.x*c-b.mb.y*g),b.bi=d;parseInt(f.Ff);if(1==f.Ff)b=f.ve[0],c=x.x+-q*b.mb.y-
z.x- -s*b.lb.y,d=x.y+q*b.mb.x-z.y-s*b.lb.x,f=c*v+d*u,c=-b.Gm*(f-b.Qp),d=b.bd+c,d=0<d?d:0,c=d-b.bd,g=c*v,c*=u,z.x-=D*g,z.y-=D*c,s-=T*(b.lb.x*c-b.lb.y*g),x.x+=M*g,x.y+=M*c,q+=E*(b.mb.x*c-b.mb.y*g),b.bd=d;else{b=f.ve[0];var a=f.ve[1],c=b.bd,h=a.bd,ca=(x.x-q*b.mb.y-z.x+s*b.lb.y)*v+(x.y+q*b.mb.x-z.y-s*b.lb.x)*u,V=(x.x-q*a.mb.y-z.x+s*a.lb.y)*v+(x.y+q*a.mb.x-z.y-s*a.lb.x)*u,d=ca-b.Qp,g=V-a.Qp;k=f.xd;d-=k.j.x*c+k.k.x*h;for(g-=k.j.y*c+k.k.y*h;;){k=f.Gm;K=-(k.j.x*d+k.k.x*g);k=-(k.j.y*d+k.k.y*g);if(0<=K&&0<=
k){c=K-c;h=k-h;f=c*v;c*=u;v*=h;u*=h;z.x-=D*(f+v);z.y-=D*(c+u);s-=T*(b.lb.x*c-b.lb.y*f+a.lb.x*u-a.lb.y*v);x.x+=M*(f+v);x.y+=M*(c+u);q+=E*(b.mb.x*c-b.mb.y*f+a.mb.x*u-a.mb.y*v);b.bd=K;a.bd=k;break}K=-b.Gm*d;k=0;V=f.xd.j.y*K+g;if(0<=K&&0<=V){c=K-c;h=k-h;f=c*v;c*=u;v*=h;u*=h;z.x-=D*(f+v);z.y-=D*(c+u);s-=T*(b.lb.x*c-b.lb.y*f+a.lb.x*u-a.lb.y*v);x.x+=M*(f+v);x.y+=M*(c+u);q+=E*(b.mb.x*c-b.mb.y*f+a.mb.x*u-a.mb.y*v);b.bd=K;a.bd=k;break}K=0;k=-a.Gm*g;ca=f.xd.k.x*k+d;if(0<=k&&0<=ca){c=K-c;h=k-h;f=c*v;c*=u;v*=
h;u*=h;z.x-=D*(f+v);z.y-=D*(c+u);s-=T*(b.lb.x*c-b.lb.y*f+a.lb.x*u-a.lb.y*v);x.x+=M*(f+v);x.y+=M*(c+u);q+=E*(b.mb.x*c-b.mb.y*f+a.mb.x*u-a.mb.y*v);b.bd=K;a.bd=k;break}k=K=0;ca=d;V=g;if(0<=ca&&0<=V){c=K-c;h=k-h;f=c*v;c*=u;v*=h;u*=h;z.x-=D*(f+v);z.y-=D*(c+u);s-=T*(b.lb.x*c-b.lb.y*f+a.lb.x*u-a.lb.y*v);x.x+=M*(f+v);x.y+=M*(c+u);q+=E*(b.mb.x*c-b.mb.y*f+a.mb.x*u-a.mb.y*v);b.bd=K;a.bd=k;break}break}}p.I=s;t.I=q}};t.prototype.Cs=function(){for(var a=0;a<this.Wo;++a)for(var b=this.Hh[a],c=b.LC,d=0;d<b.Ff;++d){var f=
c.fb[d],g=b.ve[d];f.Lk=g.bd;f.Rk=g.bi}};t.prototype.nf=function(a){void 0===a&&(a=0);for(var b=0,c=0;c<this.Wo;c++){var d=this.Hh[c],f=d.ib,g=d.qb,h=f.X*f.U,v=f.X*f.ea,u=g.X*g.U,k=g.X*g.ea;t.Ur.kd(d);for(var m=t.Ur.Qa,p=0;p<d.Ff;p++){var s=d.ve[p],q=t.Ur.fb[p],z=t.Ur.Dr[p],x=q.x-f.h.m.x,D=q.y-f.h.m.y,K=q.x-g.h.m.x,q=q.y-g.h.m.y,b=b<z?b:z,z=W.Cb(a*(z+V.zb),-V.rf,0),z=-s.RB*z,s=z*m.x,z=z*m.y;f.h.m.x-=h*s;f.h.m.y-=h*z;f.h.T-=v*(x*z-D*s);f.pc();g.h.m.x+=u*s;g.h.m.y+=u*z;g.h.T+=k*(K*z-q*s);g.pc()}}return b>
-1.5*V.zb};n.wc.push(function(){n.l.ka.dj.dl=new u;n.l.ka.dj.Ur=new ca});n.Fb(z,n.l.ka.Za);z.prototype.la=n.l.ka.Za.prototype;z.ht=function(){n.l.ka.Za.Za.apply(this,arguments)};z.Qe=function(){return new z};z.jd=function(){};z.prototype.ge=function(a,b){this.la.ge.call(this,a,b)};z.prototype.Mg=function(){};n.Fb(s,n.l.ka.Za);s.prototype.la=n.l.ka.Za.prototype;s.Vn=function(){n.l.ka.Za.Za.apply(this,arguments)};s.prototype.Vn=function(){this.la.Za.call(this)};s.prototype.Mg=function(){};n.Fb(x,n.l.ka.Za);
x.prototype.la=n.l.ka.Za.prototype;x.nt=function(){n.l.ka.Za.Za.apply(this,arguments)};x.Qe=function(){return new x};x.jd=function(){};x.prototype.ge=function(a,b){this.la.ge.call(this,a,b);V.dc(a.Db()==c.jj);V.dc(b.Db()==c.sk)};x.prototype.Mg=function(){$.vA(this.Yf,this.kc.bb instanceof b?this.kc.bb:null,this.kc.bc.g,this.lc.bb instanceof a?this.lc.bb:null,this.lc.bc.g)};n.Fb(K,n.l.ka.Za);K.prototype.la=n.l.ka.Za.prototype;K.ot=function(){n.l.ka.Za.Za.apply(this,arguments)};K.Qe=function(){return new K};
K.jd=function(){};K.prototype.ge=function(a,b){this.la.ge.call(this,a,b);V.dc(a.Db()==c.jj);V.dc(b.Db()==c.Xq)};K.prototype.Mg=function(){};n.Fb(M,n.l.ka.Za);M.prototype.la=n.l.ka.Za.prototype;M.pt=function(){n.l.ka.Za.Za.apply(this,arguments)};M.Qe=function(){return new M};M.jd=function(){};M.prototype.ge=function(a,b){this.la.ge.call(this,a,b)};M.prototype.Mg=function(){$.wA(this.Yf,this.kc.bb instanceof b?this.kc.bb:null,this.kc.bc.g,this.lc.bb instanceof b?this.lc.bb:null,this.lc.bc.g)};ca.lk=
function(){};ca.prototype.lk=function(){this.Qa=new E;this.Dr=new da(V.sf);this.fb=new ba(V.sf);for(var a=0;a<V.sf;a++)this.fb[a]=new E};ca.prototype.kd=function(a){V.dc(0<a.Ff);var b=0,c=0,d=0,f,g=0,h=0;switch(a.type){case qa.St:f=a.ib.g.G;d=a.Fh;b=a.ib.g.position.x+(f.j.x*d.x+f.k.x*d.y);c=a.ib.g.position.y+(f.j.y*d.x+f.k.y*d.y);f=a.qb.g.G;d=a.ve[0].Fh;g=a.qb.g.position.x+(f.j.x*d.x+f.k.x*d.y);f=a.qb.g.position.y+(f.j.y*d.x+f.k.y*d.y);var d=g-b,h=f-c,v=d*d+h*h;v>Number.MIN_VALUE*Number.MIN_VALUE?
(v=Math.sqrt(v),this.Qa.x=d/v,this.Qa.y=h/v):(this.Qa.x=1,this.Qa.y=0);this.fb[0].x=.5*(b+g);this.fb[0].y=.5*(c+f);this.Dr[0]=d*this.Qa.x+h*this.Qa.y-a.hh;break;case qa.Tg:f=a.ib.g.G;d=a.Ar;this.Qa.x=f.j.x*d.x+f.k.x*d.y;this.Qa.y=f.j.y*d.x+f.k.y*d.y;f=a.ib.g.G;d=a.Fh;g=a.ib.g.position.x+(f.j.x*d.x+f.k.x*d.y);h=a.ib.g.position.y+(f.j.y*d.x+f.k.y*d.y);f=a.qb.g.G;for(b=0;b<a.Ff;++b)d=a.ve[b].Fh,c=a.qb.g.position.x+(f.j.x*d.x+f.k.x*d.y),d=a.qb.g.position.y+(f.j.y*d.x+f.k.y*d.y),this.Dr[b]=(c-g)*this.Qa.x+
(d-h)*this.Qa.y-a.hh,this.fb[b].x=c,this.fb[b].y=d;break;case qa.tk:f=a.qb.g.G;d=a.Ar;this.Qa.x=f.j.x*d.x+f.k.x*d.y;this.Qa.y=f.j.y*d.x+f.k.y*d.y;f=a.qb.g.G;d=a.Fh;g=a.qb.g.position.x+(f.j.x*d.x+f.k.x*d.y);h=a.qb.g.position.y+(f.j.y*d.x+f.k.y*d.y);f=a.ib.g.G;for(b=0;b<a.Ff;++b)d=a.ve[b].Fh,c=a.ib.g.position.x+(f.j.x*d.x+f.k.x*d.y),d=a.ib.g.position.y+(f.j.y*d.x+f.k.y*d.y),this.Dr[b]=(c-g)*this.Qa.x+(d-h)*this.Qa.y-a.hh,this.fb[b].R(c,d);this.Qa.x*=-1;this.Qa.y*=-1}};n.wc.push(function(){n.l.ka.lk.UE=
new E;n.l.ka.lk.VE=new E})})();
(function(){var a=n.aa.Math.ji,b=n.aa.Math.Lf,c=n.aa.Math.mg,d=n.l.Tb.Vs,f=n.l.Tb.Xs,g=n.l.Tb.Ys,h=n.l.Tb.Fc,k=n.l.Tb.dt,m=n.l.Tb.jt,q=n.l.Tb.tt;n.Fb(d,n.l.Tb.Fc);d.prototype.la=n.l.Tb.Fc.prototype;d.Vs=function(){n.l.Tb.Fc.Fc.apply(this,arguments);this.Zf=new c(0,-1);this.rb=this.offset=0;this.fg=new c(0,0);this.pC=2;this.cB=1;this.mE=!0;this.jy=null};d.prototype.Wi=function(){if(this.Bc){this.mE&&(this.jy=this.rd.Ty.wb());for(var a=this.Bc;a;a=a.jf){var b=a.body;if(0!=b.ld()){for(var d=new c,f=
new c,g=0,h=0,k=b.Cc;k;k=k.Ha){var m=new c,q=k.bb.Wp(this.Zf,this.offset,b.mf(),m),g=g+q;d.x+=q*m.x;d.y+=q*m.y;var D=0,D=1,h=h+q*D;f.x+=q*m.x*D;f.y+=q*m.y*D}d.x/=g;d.y/=g;f.x/=h;f.y/=h;g<Number.MIN_VALUE||(h=this.jy.Ti(),h.fa(this.rb*g),b.bk(h,f),f=b.FA(d),f.xn(this.fg),f.fa(-this.pC*g),b.bk(f,d),b.sA(-b.Vf/b.X*g*b.I*this.cB))}}}};n.Fb(f,n.l.Tb.Fc);f.prototype.la=n.l.Tb.Fc.prototype;f.Xs=function(){n.l.Tb.Fc.Fc.apply(this,arguments);this.Vv=new c(0,0)};f.prototype.Wi=function(a){a=new c(this.Vv.x*
a.Ta,this.Vv.y*a.Ta);for(var b=this.Bc;b;b=b.jf){var d=b.body;d.ld()&&d.ul(new c(d.o.x+a.x,d.o.y+a.y))}};n.Fb(g,n.l.Tb.Fc);g.prototype.la=n.l.Tb.Fc.prototype;g.Ys=function(){n.l.Tb.Fc.Fc.apply(this,arguments);this.CA=new c(0,0)};g.prototype.Wi=function(){for(var a=this.Bc;a;a=a.jf){var b=a.body;b.ld()&&b.bk(this.CA,b.h.m)}};h.Fc=function(){};h.prototype.Wi=function(){};h.prototype.us=function(a){var b=new k;b.tx=this;b.body=a;b.jf=this.Bc;b.tp=null;this.Bc=b;b.jf&&(b.jf.tp=b);this.Vd++;b.Hi=a.Bj;
b.up=null;a.Bj=b;b.Hi&&(b.Hi.up=b);a.Iu++};h.prototype.Bw=function(a){for(var b=a.Bj;b&&b.tx!=this;)b=b.Hi;b.tp&&(b.tp.jf=b.jf);b.jf&&(b.jf.tp=b.tp);b.Hi&&(b.Hi.up=b.up);b.up&&(b.up.Hi=b.Hi);this.Bc==b&&(this.Bc=b.jf);a.Bj==b&&(a.Bj=b.Hi);a.Iu--;this.Vd--};h.prototype.ws=function(){for(;this.Bc;)this.Bw(this.Bc.body)};k.dt=function(){};n.Fb(m,n.l.Tb.Fc);m.prototype.la=n.l.Tb.Fc.prototype;m.jt=function(){n.l.Tb.Fc.Fc.apply(this,arguments);this.kw=1;this.jC=!0};m.prototype.Wi=function(){var a=null,
b=null,d=null,f=0,g=null,h=null,k=null,m=0,q=0,D=0;if(this.jC)for(a=this.Bc;a;a=a.jf)for(b=a.body,d=b.h.m,f=b.X,g=this.Bc;g!=a;g=g.jf)h=g.body,k=h.h.m,m=k.x-d.x,q=k.y-d.y,D=m*m+q*q,D<Number.MIN_VALUE||(m=new c(m,q),m.fa(this.kw/D/Math.sqrt(D)*f*h.X),b.ld()&&b.bk(m,d),m.fa(-1),h.ld()&&h.bk(m,k));else for(a=this.Bc;a;a=a.jf)for(b=a.body,d=b.h.m,f=b.X,g=this.Bc;g!=a;g=g.jf)h=g.body,k=h.h.m,m=k.x-d.x,q=k.y-d.y,D=m*m+q*q,D<Number.MIN_VALUE||(m=new c(m,q),m.fa(this.kw/D*f*h.X),b.ld()&&b.bk(m,d),m.fa(-1),
h.ld()&&h.bk(m,k))};n.Fb(q,n.l.Tb.Fc);q.prototype.la=n.l.Tb.Fc.prototype;q.tt=function(){n.l.Tb.Fc.Fc.apply(this,arguments);this.WA=new a;this.Vu=0};q.prototype.Wi=function(a){a=a.Ta;if(!(a<=Number.MIN_VALUE)){a>this.Vu&&0<this.Vu&&(a=this.Vu);for(var d=this.Bc;d;d=d.jf){var f=d.body;if(f.ld()){var g=f.Hs(b.yd(this.WA,f.Fs(f.o)));f.ul(new c(f.o.x+g.x*a,f.o.y+g.y*a))}}}}})();
(function(){var a=n.aa.Jb,b=n.aa.Math.ji,c=n.aa.Math.Fl,d=n.aa.Math.Lf,f=n.aa.Math.mg,g=n.aa.Math.Ll,h=n.l.J.Hn,k=n.l.J.In,m=n.l.J.Mn,q=n.l.J.Nn,p=n.l.J.On,t=n.l.J.Pn,z=n.l.J.kt,s=n.l.J.ia,x=n.l.J.ua,K=n.l.J.lt,M=n.l.J.Qn,ca=n.l.J.Rn,T=n.l.J.Un,D=n.l.J.Gl,V=n.l.J.Wn,ga=n.l.J.Xn,W=n.l.J.Hl,E=n.l.J.Yn,$=n.l.J.Il,Ba=n.l.J.Jl,qa=n.l.J.bo,Ca=n.l.J.co;n.Fb(h,n.l.J.ia);h.prototype.la=n.l.J.ia.prototype;h.Hn=function(){n.l.J.ia.ia.apply(this,arguments);this.na=new f;this.va=new f;this.ad=new f};h.prototype.wd=
function(){return this.Ga.hg(this.na)};h.prototype.Hn=function(a){this.la.ia.call(this,a);this.na.K(a.Qc);this.va.K(a.Rc);this.Lu=a.length;this.Zo=a.hr;this.Ju=a.Rq;this.Ny=this.qe=this.t=0};h.prototype.Kf=function(b){var c,d=0,f=this.Ga,g=this.Pa;c=f.g.G;var h=this.na.x-f.h.W.x,k=this.na.y-f.h.W.y,d=c.j.x*h+c.k.x*k,k=c.j.y*h+c.k.y*k,h=d;c=g.g.G;var m=this.va.x-g.h.W.x,B=this.va.y-g.h.W.y,d=c.j.x*m+c.k.x*B,B=c.j.y*m+c.k.y*B,m=d;this.ad.x=g.h.m.x+m-f.h.m.x-h;this.ad.y=g.h.m.y+B-f.h.m.y-k;d=Math.sqrt(this.ad.x*
this.ad.x+this.ad.y*this.ad.y);d>a.zb?this.ad.fa(1/d):this.ad.La();c=h*this.ad.y-k*this.ad.x;var p=m*this.ad.y-B*this.ad.x;c=f.U+f.ea*c*c+g.U+g.ea*p*p;this.X=0!=c?1/c:0;if(0<this.Zo){var d=d-this.Lu,p=2*Math.PI*this.Zo,q=this.X*p*p;this.qe=b.Ta*(2*this.X*this.Ju*p+b.Ta*q);this.qe=0!=this.qe?1/this.qe:0;this.Ny=d*b.Ta*q*this.qe;this.X=c+this.qe;this.X=0!=this.X?1/this.X:0}b.Kg?(this.t*=b.zc,b=this.t*this.ad.x,c=this.t*this.ad.y,f.o.x-=f.U*b,f.o.y-=f.U*c,f.I-=f.ea*(h*c-k*b),g.o.x+=g.U*b,g.o.y+=g.U*
c,g.I+=g.ea*(m*c-B*b)):this.t=0};h.prototype.of=function(){var a,b=this.Ga,c=this.Pa;a=b.g.G;var d=this.na.x-b.h.W.x,f=this.na.y-b.h.W.y,g=a.j.x*d+a.k.x*f,f=a.j.y*d+a.k.y*f,d=g;a=c.g.G;var h=this.va.x-c.h.W.x,k=this.va.y-c.h.W.y,g=a.j.x*h+a.k.x*k,k=a.j.y*h+a.k.y*k,h=g,g=-this.X*(this.ad.x*(c.o.x+-c.I*k-(b.o.x+-b.I*f))+this.ad.y*(c.o.y+c.I*h-(b.o.y+b.I*d))+this.Ny+this.qe*this.t);this.t+=g;a=g*this.ad.x;g*=this.ad.y;b.o.x-=b.U*a;b.o.y-=b.U*g;b.I-=b.ea*(d*g-f*a);c.o.x+=c.U*a;c.o.y+=c.U*g;c.I+=c.ea*
(h*g-k*a)};h.prototype.nf=function(){var b;if(0<this.Zo)return!0;var c=this.Ga,f=this.Pa;b=c.g.G;var g=this.na.x-c.h.W.x,h=this.na.y-c.h.W.y,k=b.j.x*g+b.k.x*h,h=b.j.y*g+b.k.y*h,g=k;b=f.g.G;var m=this.va.x-f.h.W.x,aa=this.va.y-f.h.W.y,k=b.j.x*m+b.k.x*aa,aa=b.j.y*m+b.k.y*aa,m=k,k=f.h.m.x+m-c.h.m.x-g,B=f.h.m.y+aa-c.h.m.y-h;b=Math.sqrt(k*k+B*B);k/=b;B/=b;b-=this.Lu;b=d.Cb(b,-a.rf,a.rf);var p=-this.X*b;this.ad.R(k,B);k=p*this.ad.x;B=p*this.ad.y;c.h.m.x-=c.U*k;c.h.m.y-=c.U*B;c.h.T-=c.ea*(g*B-h*k);f.h.m.x+=
f.U*k;f.h.m.y+=f.U*B;f.h.T+=f.ea*(m*B-aa*k);c.pc();f.pc();return d.hd(b)<a.zb};n.Fb(k,n.l.J.ua);k.prototype.la=n.l.J.ua.prototype;k.In=function(){n.l.J.ua.ua.apply(this,arguments);this.Qc=new f;this.Rc=new f};k.prototype.In=function(){this.la.ua.call(this);this.type=s.Gx;this.length=1;this.Rq=this.hr=0};k.prototype.kd=function(a,b,c,d){this.ib=a;this.qb=b;this.Qc.K(this.ib.lf(c));this.Rc.K(this.qb.lf(d));a=d.x-c.x;c=d.y-c.y;this.length=Math.sqrt(a*a+c*c);this.Rq=this.hr=0};n.Fb(m,n.l.J.ia);m.prototype.la=
n.l.J.ia.prototype;m.Mn=function(){n.l.J.ia.ia.apply(this,arguments);this.ef=new f;this.Xf=new f;this.Ou=new b;this.Wf=new f};m.prototype.wd=function(){return this.Ga.hg(this.ef)};m.prototype.Mn=function(a){this.la.ia.call(this,a);this.ef.K(a.Qc);this.Xf.K(a.Rc);this.Ou.La();this.Vo=0;this.Wf.La();this.yi=0;this.Pu=a.Tu;this.GC=a.NC};m.prototype.Kf=function(a){var c,d=0,f=this.Ga,g=this.Pa;c=f.g.G;var h=this.ef.x-f.h.W.x,k=this.ef.y-f.h.W.y,d=c.j.x*h+c.k.x*k,k=c.j.y*h+c.k.y*k,h=d;c=g.g.G;var m=this.Xf.x-
g.h.W.x,B=this.Xf.y-g.h.W.y,d=c.j.x*m+c.k.x*B,B=c.j.y*m+c.k.y*B,m=d;c=f.U;var d=g.U,p=f.ea,q=g.ea,s=new b;s.j.x=c+d;s.k.x=0;s.j.y=0;s.k.y=c+d;s.j.x+=p*k*k;s.k.x+=-p*h*k;s.j.y+=-p*h*k;s.k.y+=p*h*h;s.j.x+=q*B*B;s.k.x+=-q*m*B;s.j.y+=-q*m*B;s.k.y+=q*m*m;s.Es(this.Ou);this.Vo=p+q;0<this.Vo&&(this.Vo=1/this.Vo);a.Kg?(this.Wf.x*=a.zc,this.Wf.y*=a.zc,this.yi*=a.zc,a=this.Wf,f.o.x-=c*a.x,f.o.y-=c*a.y,f.I-=p*(h*a.y-k*a.x+this.yi),g.o.x+=d*a.x,g.o.y+=d*a.y,g.I+=q*(m*a.y-B*a.x+this.yi)):(this.Wf.La(),this.yi=
0)};m.prototype.of=function(a){var b,c=0,g=this.Ga,h=this.Pa,k=g.o,m=g.I,p=h.o,B=h.I,s=g.U,q=h.U,t=g.ea,z=h.ea;b=g.g.G;var x=this.ef.x-g.h.W.x,D=this.ef.y-g.h.W.y,c=b.j.x*x+b.k.x*D,D=b.j.y*x+b.k.y*D,x=c;b=h.g.G;var E=this.Xf.x-h.h.W.x,K=this.Xf.y-h.h.W.y,c=b.j.x*E+b.k.x*K,K=b.j.y*E+b.k.y*K,E=c,c=-this.Vo*(B-m),M=this.yi;b=a.Ta*this.GC;this.yi=d.Cb(this.yi+c,-b,b);c=this.yi-M;m-=t*c;B+=z*c;b=d.yd(this.Ou,new f(-(p.x-B*K-k.x+m*D),-(p.y+B*E-k.y-m*x)));c=this.Wf.wb();this.Wf.Lg(b);b=a.Ta*this.Pu;this.Wf.iq()>
b*b&&(this.Wf.xb(),this.Wf.fa(b));b=d.oc(this.Wf,c);k.x-=s*b.x;k.y-=s*b.y;m-=t*(x*b.y-D*b.x);p.x+=q*b.x;p.y+=q*b.y;B+=z*(E*b.y-K*b.x);g.I=m;h.I=B};m.prototype.nf=function(){return!0};n.Fb(q,n.l.J.ua);q.prototype.la=n.l.J.ua.prototype;q.Nn=function(){n.l.J.ua.ua.apply(this,arguments);this.Qc=new f;this.Rc=new f};q.prototype.Nn=function(){this.la.ua.call(this);this.type=s.Ix;this.NC=this.Tu=0};q.prototype.kd=function(a,b,c){this.ib=a;this.qb=b;this.Qc.K(this.ib.lf(c));this.Rc.K(this.qb.lf(c))};n.Fb(p,
n.l.J.ia);p.prototype.la=n.l.J.ia.prototype;p.On=function(){n.l.J.ia.ia.apply(this,arguments);this.Ai=new f;this.Bi=new f;this.na=new f;this.va=new f;this.jc=new z};p.prototype.wd=function(){return this.Ga.hg(this.na)};p.prototype.On=function(a){this.la.ia.call(this,a);var b=parseInt(a.Ck.hb),c=parseInt(a.Dk.hb);this.Bm=this.Pk=this.Am=this.Ok=null;var d=0,f=0;this.yC=a.Ck.Ga;this.Ga=a.Ck.Pa;b==s.Yq?(this.Ok=a.Ck instanceof $?a.Ck:null,this.Ai.K(this.Ok.na),this.na.K(this.Ok.va),d=this.Ok.ee()):(this.Am=
a.Ck instanceof V?a.Ck:null,this.Ai.K(this.Am.na),this.na.K(this.Am.va),d=this.Am.qn());this.zC=a.Dk.Ga;this.Pa=a.Dk.Pa;c==s.Yq?(this.Pk=a.Dk instanceof $?a.Dk:null,this.Bi.K(this.Pk.na),this.va.K(this.Pk.va),f=this.Pk.ee()):(this.Bm=a.Dk instanceof V?a.Dk:null,this.Bi.K(this.Bm.na),this.va.K(this.Bm.va),f=this.Bm.qn());this.vc=a.$k;this.wm=d+this.vc*f;this.t=0};p.prototype.Kf=function(a){var b=this.yC,c=this.zC,d=this.Ga,f=this.Pa,g=0,h=0,k=0,m=0,p=0,s=0;this.jc.La();this.Ok?(this.jc.ik=-1,s+=d.ea):
(b=b.g.G,h=this.Am.ff,g=b.j.x*h.x+b.k.x*h.y,h=b.j.y*h.x+b.k.y*h.y,b=d.g.G,k=this.na.x-d.h.W.x,m=this.na.y-d.h.W.y,p=b.j.x*k+b.k.x*m,m=b.j.y*k+b.k.y*m,k=p*h-m*g,this.jc.Xg.R(-g,-h),this.jc.ik=-k,s+=d.U+d.ea*k*k);this.Pk?(this.jc.jk=-this.vc,s+=this.vc*this.vc*f.ea):(b=c.g.G,h=this.Bm.ff,g=b.j.x*h.x+b.k.x*h.y,h=b.j.y*h.x+b.k.y*h.y,b=f.g.G,k=this.va.x-f.h.W.x,m=this.va.y-f.h.W.y,p=b.j.x*k+b.k.x*m,m=b.j.y*k+b.k.y*m,k=p*h-m*g,this.jc.Yg.R(-this.vc*g,-this.vc*h),this.jc.jk=-this.vc*k,s+=this.vc*this.vc*
(f.U+f.ea*k*k));this.X=0<s?1/s:0;a.Kg?(d.o.x+=d.U*this.t*this.jc.Xg.x,d.o.y+=d.U*this.t*this.jc.Xg.y,d.I+=d.ea*this.t*this.jc.ik,f.o.x+=f.U*this.t*this.jc.Yg.x,f.o.y+=f.U*this.t*this.jc.Yg.y,f.I+=f.ea*this.t*this.jc.jk):this.t=0};p.prototype.of=function(){var a=this.Ga,b=this.Pa,c=-this.X*this.jc.xA(a.o,a.I,b.o,b.I);this.t+=c;a.o.x+=a.U*c*this.jc.Xg.x;a.o.y+=a.U*c*this.jc.Xg.y;a.I+=a.ea*c*this.jc.ik;b.o.x+=b.U*c*this.jc.Yg.x;b.o.y+=b.U*c*this.jc.Yg.y;b.I+=b.ea*c*this.jc.jk};p.prototype.nf=function(){var b=
this.Ga,c=this.Pa,d=0,f=0,d=this.Ok?this.Ok.ee():this.Am.qn(),f=this.Pk?this.Pk.ee():this.Bm.qn(),d=-this.X*(this.wm-(d+this.vc*f));b.h.m.x+=b.U*d*this.jc.Xg.x;b.h.m.y+=b.U*d*this.jc.Xg.y;b.h.T+=b.ea*d*this.jc.ik;c.h.m.x+=c.U*d*this.jc.Yg.x;c.h.m.y+=c.U*d*this.jc.Yg.y;c.h.T+=c.ea*d*this.jc.jk;b.pc();c.pc();return 0<a.zb};n.Fb(t,n.l.J.ua);t.prototype.la=n.l.J.ua.prototype;t.Pn=function(){n.l.J.ua.ua.apply(this,arguments)};t.prototype.Pn=function(){this.la.ua.call(this);this.type=s.Jx;this.Dk=this.Ck=
null;this.$k=1};z.kt=function(){this.Xg=new f;this.Yg=new f};z.prototype.La=function(){this.Xg.La();this.ik=0;this.Yg.La();this.jk=0};z.prototype.R=function(a,b,c,d){void 0===b&&(b=0);void 0===d&&(d=0);this.Xg.K(a);this.ik=b;this.Yg.K(c);this.jk=d};z.prototype.xA=function(a,b,c,d){void 0===b&&(b=0);void 0===d&&(d=0);return this.Xg.x*a.x+this.Xg.y*a.y+this.ik*b+(this.Yg.x*c.x+this.Yg.y*c.y)+this.jk*d};s.ia=function(){this.Ke=new K;this.Le=new K;this.Kh=new f;this.Lh=new f};s.prototype.Db=function(){return this.hb};
s.prototype.wd=function(){return null};s.prototype.Jf=function(){return this.Ei};s.prototype.un=function(a){this.Ei=a};s.prototype.ck=function(){return this.Ga.ck()&&this.Pa.ck()};s.Qe=function(a){var b=null;switch(a.type){case s.Gx:b=new h(a instanceof k?a:null);break;case s.Lx:b=new T(a instanceof D?a:null);break;case s.Nx:b=new V(a instanceof ga?a:null);break;case s.Yq:b=new $(a instanceof Ba?a:null);break;case s.Ox:b=new W(a instanceof E?a:null);break;case s.Jx:b=new p(a instanceof t?a:null);
break;case s.Kx:b=new M(a instanceof ca?a:null);break;case s.Px:b=new qa(a instanceof Ca?a:null);break;case s.Ix:b=new m(a instanceof q?a:null)}return b};s.jd=function(){};s.prototype.ia=function(b){a.dc(b.ib!=b.qb);this.hb=b.type;this.Ha=this.qd=null;this.Ga=b.ib;this.Pa=b.qb;this.Oy=b.Oq;this.Jk=!1;this.Ei=b.Yj};s.prototype.Kf=function(){};s.prototype.of=function(){};s.prototype.Cs=function(){};s.prototype.nf=function(){return!1};n.wc.push(function(){n.l.J.ia.KB=0;n.l.J.ia.Yq=1;n.l.J.ia.Nx=2;n.l.J.ia.Gx=
3;n.l.J.ia.Ox=4;n.l.J.ia.Lx=5;n.l.J.ia.Jx=6;n.l.J.ia.Kx=7;n.l.J.ia.Px=8;n.l.J.ia.Ix=9;n.l.J.ia.Fe=0;n.l.J.ia.zh=1;n.l.J.ia.Hd=2;n.l.J.ia.ij=3});x.ua=function(){};x.prototype.ua=function(){this.type=s.KB;this.qb=this.ib=this.Yj=null;this.Oq=!1};K.lt=function(){};n.Fb(M,n.l.J.ia);M.prototype.la=n.l.J.ia.prototype;M.Qn=function(){n.l.J.ia.ia.apply(this,arguments);this.na=new f;this.va=new f;this.ff=new f;this.Di=new f;this.da=new f;this.Ca=new f;this.ta=new b;this.t=new f};M.prototype.wd=function(){return this.Ga.hg(this.na)};
M.prototype.qn=function(){var a=this.Ga,b=this.Pa,c=a.hg(this.na),d=b.hg(this.va),b=d.x-c.x,c=d.y-c.y,a=a.Hs(this.ff);return a.x*b+a.y*c};M.prototype.ph=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.Ga.Pd(!0);this.Pa.Pd(!0);this.gf=a;this.hf=b};M.prototype.Qn=function(a){this.la.ia.call(this,a);this.na.K(a.Qc);this.va.K(a.Rc);this.ff.K(a.Hk);this.Di.x=-this.ff.y;this.Di.y=this.ff.x;this.t.La();this.kb=this.Me=0;this.gf=a.Fu;this.hf=a.Ov;this.Qu=a.Uu;this.cp=a.hp;this.Zg=a.dm;this.Dj=a.Co;
this.Xa=s.Fe;this.da.La();this.Ca.La()};M.prototype.Kf=function(b){var c=this.Ga,f=this.Pa,g,h=0;this.Kh.K(c.h.W);this.Lh.K(f.h.W);var k=c.mf();f.mf();g=c.g.G;var m=this.na.x-this.Kh.x,p=this.na.y-this.Kh.y,h=g.j.x*m+g.k.x*p,p=g.j.y*m+g.k.y*p,m=h;g=f.g.G;var B=this.va.x-this.Lh.x,q=this.va.y-this.Lh.y,h=g.j.x*B+g.k.x*q,q=g.j.y*B+g.k.y*q,B=h;g=f.h.m.x+B-c.h.m.x-m;h=f.h.m.y+q-c.h.m.y-p;this.tc=c.U;this.uc=f.U;this.re=c.ea;this.se=f.ea;this.da.K(d.yd(k.G,this.ff));this.Ab=(g+m)*this.da.y-(h+p)*this.da.x;
this.Bb=B*this.da.y-q*this.da.x;this.Me=this.tc+this.uc+this.re*this.Ab*this.Ab+this.se*this.Bb*this.Bb;this.Me=this.Me>Number.MIN_VALUE?1/this.Me:0;this.Ca.K(d.yd(k.G,this.Di));this.Gb=(g+m)*this.Ca.y-(h+p)*this.Ca.x;this.Hb=B*this.Ca.y-q*this.Ca.x;k=this.tc;m=this.uc;p=this.re;B=this.se;this.ta.j.x=k+m+p*this.Gb*this.Gb+B*this.Hb*this.Hb;this.ta.j.y=p*this.Gb*this.Ab+B*this.Hb*this.Bb;this.ta.k.x=this.ta.j.y;this.ta.k.y=k+m+p*this.Ab*this.Ab+B*this.Bb*this.Bb;this.Zg?(g=this.da.x*g+this.da.y*h,
d.hd(this.hf-this.gf)<2*a.zb?this.Xa=s.ij:g<=this.gf?this.Xa!=s.zh&&(this.Xa=s.zh,this.t.y=0):g>=this.hf?this.Xa!=s.Hd&&(this.Xa=s.Hd,this.t.y=0):(this.Xa=s.Fe,this.t.y=0)):this.Xa=s.Fe;0==this.Dj&&(this.kb=0);b.Kg?(this.t.x*=b.zc,this.t.y*=b.zc,this.kb*=b.zc,b=this.t.x*this.Ca.x+(this.kb+this.t.y)*this.da.x,g=this.t.x*this.Ca.y+(this.kb+this.t.y)*this.da.y,h=this.t.x*this.Gb+(this.kb+this.t.y)*this.Ab,k=this.t.x*this.Hb+(this.kb+this.t.y)*this.Bb,c.o.x-=this.tc*b,c.o.y-=this.tc*g,c.I-=this.re*h,
f.o.x+=this.uc*b,f.o.y+=this.uc*g,f.I+=this.se*k):(this.t.La(),this.kb=0)};M.prototype.of=function(a){var b=this.Ga,c=this.Pa,g=b.o,h=b.I,k=c.o,m=c.I,p=0,B=0,q=0,t=0;this.Dj&&this.Xa!=s.ij&&(t=this.Me*(this.cp-(this.da.x*(k.x-g.x)+this.da.y*(k.y-g.y)+this.Bb*m-this.Ab*h)),p=this.kb,B=a.Ta*this.Qu,this.kb=d.Cb(this.kb+t,-B,B),t=this.kb-p,p=t*this.da.x,B=t*this.da.y,q=t*this.Ab,t*=this.Bb,g.x-=this.tc*p,g.y-=this.tc*B,h-=this.re*q,k.x+=this.uc*p,k.y+=this.uc*B,m+=this.se*t);B=this.Ca.x*(k.x-g.x)+this.Ca.y*
(k.y-g.y)+this.Hb*m-this.Gb*h;this.Zg&&this.Xa!=s.Fe?(q=this.da.x*(k.x-g.x)+this.da.y*(k.y-g.y)+this.Bb*m-this.Ab*h,p=this.t.wb(),a=this.ta.hk(new f,-B,-q),this.t.Lg(a),this.Xa==s.zh?this.t.y=d.fe(this.t.y,0):this.Xa==s.Hd&&(this.t.y=d.ek(this.t.y,0)),B=-B-(this.t.y-p.y)*this.ta.k.x,q=0!=this.ta.j.x?B/this.ta.j.x+p.x:p.x,this.t.x=q,a.x=this.t.x-p.x,a.y=this.t.y-p.y,p=a.x*this.Ca.x+a.y*this.da.x,B=a.x*this.Ca.y+a.y*this.da.y,q=a.x*this.Gb+a.y*this.Ab,t=a.x*this.Hb+a.y*this.Bb):(a=0!=this.ta.j.x?-B/
this.ta.j.x:0,this.t.x+=a,p=a*this.Ca.x,B=a*this.Ca.y,q=a*this.Gb,t=a*this.Hb);g.x-=this.tc*p;g.y-=this.tc*B;h-=this.re*q;k.x+=this.uc*p;k.y+=this.uc*B;m+=this.se*t;b.o.K(g);b.I=h;c.o.K(k);c.I=m};M.prototype.nf=function(){var c=this.Ga,g=this.Pa,h=c.h.m,k=c.h.T,m=g.h.m,p=g.h.T,H,s=0,B=0,q=0,t=0,z=0,x=0,B=!1,D=0,E=b.aq(k),q=b.aq(p);H=E;var x=this.na.x-this.Kh.x,K=this.na.y-this.Kh.y,s=H.j.x*x+H.k.x*K,K=H.j.y*x+H.k.y*K,x=s;H=q;q=this.va.x-this.Lh.x;t=this.va.y-this.Lh.y;s=H.j.x*q+H.k.x*t;t=H.j.y*q+
H.k.y*t;q=s;H=m.x+q-h.x-x;s=m.y+t-h.y-K;if(this.Zg){this.da=d.yd(E,this.ff);this.Ab=(H+x)*this.da.y-(s+K)*this.da.x;this.Bb=q*this.da.y-t*this.da.x;var M=this.da.x*H+this.da.y*s;d.hd(this.hf-this.gf)<2*a.zb?(D=d.Cb(M,-a.rf,a.rf),z=d.hd(M),B=!0):M<=this.gf?(D=d.Cb(M-this.gf+a.zb,-a.rf,0),z=this.gf-M,B=!0):M>=this.hf&&(D=d.Cb(M-this.hf+a.zb,0,a.rf),z=M-this.hf,B=!0)}this.Ca=d.yd(E,this.Di);this.Gb=(H+x)*this.Ca.y-(s+K)*this.Ca.x;this.Hb=q*this.Ca.y-t*this.Ca.x;E=new f;K=this.Ca.x*H+this.Ca.y*s;z=d.fe(z,
d.hd(K));x=0;B?(B=this.tc,q=this.uc,t=this.re,H=this.se,this.ta.j.x=B+q+t*this.Gb*this.Gb+H*this.Hb*this.Hb,this.ta.j.y=t*this.Gb*this.Ab+H*this.Hb*this.Bb,this.ta.k.x=this.ta.j.y,this.ta.k.y=B+q+t*this.Ab*this.Ab+H*this.Bb*this.Bb,this.ta.hk(E,-K,-D)):(B=this.tc,q=this.uc,t=this.re,H=this.se,D=B+q+t*this.Gb*this.Gb+H*this.Hb*this.Hb,E.x=0!=D?-K/D:0,E.y=0);D=E.x*this.Ca.x+E.y*this.da.x;B=E.x*this.Ca.y+E.y*this.da.y;K=E.x*this.Gb+E.y*this.Ab;E=E.x*this.Hb+E.y*this.Bb;h.x-=this.tc*D;h.y-=this.tc*B;
k-=this.re*K;m.x+=this.uc*D;m.y+=this.uc*B;p+=this.se*E;c.h.T=k;g.h.T=p;c.pc();g.pc();return z<=a.zb&&x<=a.mk};n.Fb(ca,n.l.J.ua);ca.prototype.la=n.l.J.ua.prototype;ca.Rn=function(){n.l.J.ua.ua.apply(this,arguments);this.Qc=new f;this.Rc=new f;this.Hk=new f};ca.prototype.Rn=function(){this.la.ua.call(this);this.type=s.Kx;this.Hk.R(1,0);this.dm=!1;this.Ov=this.Fu=0;this.Co=!1;this.hp=this.Uu=0};ca.prototype.kd=function(a,b,c,d){this.ib=a;this.qb=b;this.Qc=this.ib.lf(c);this.Rc=this.qb.lf(c);this.Hk=
this.ib.Fs(d)};n.Fb(T,n.l.J.ia);T.prototype.la=n.l.J.ia.prototype;T.Un=function(){n.l.J.ia.ia.apply(this,arguments);this.xd=new b;this.Ng=new b;this.Og=new b;this.zm=new f;this.Cm=new f;this.t=new f;this.X=new b;this.Br=new f};T.prototype.wd=function(){return this.Cm};T.prototype.Un=function(a){this.la.ia.call(this,a);this.Cm.K(a.target);var b=this.Cm.x-this.Pa.g.position.x,c=this.Cm.y-this.Pa.g.position.y,d=this.Pa.g.G;this.zm.x=b*d.j.x+c*d.j.y;this.zm.y=b*d.k.x+c*d.k.y;this.Pu=a.Tu;this.t.La();
this.Zo=a.hr;this.Ju=a.Rq;this.qe=this.Hu=0};T.prototype.Kf=function(a){var b=this.Pa,c=b.X,d=2*Math.PI*this.Zo,f=c*d*d;this.qe=a.Ta*(2*c*this.Ju*d+a.Ta*f);this.qe=0!=this.qe?1/this.qe:0;this.Hu=a.Ta*f*this.qe;var f=b.g.G,c=this.zm.x-b.h.W.x,d=this.zm.y-b.h.W.y,g=f.j.x*c+f.k.x*d,d=f.j.y*c+f.k.y*d,c=g,f=b.U,g=b.ea;this.Ng.j.x=f;this.Ng.k.x=0;this.Ng.j.y=0;this.Ng.k.y=f;this.Og.j.x=g*d*d;this.Og.k.x=-g*c*d;this.Og.j.y=-g*c*d;this.Og.k.y=g*c*c;this.xd.gk(this.Ng);this.xd.Vp(this.Og);this.xd.j.x+=this.qe;
this.xd.k.y+=this.qe;this.xd.Es(this.X);this.Br.x=b.h.m.x+c-this.Cm.x;this.Br.y=b.h.m.y+d-this.Cm.y;b.I*=.98;this.t.x*=a.zc;this.t.y*=a.zc;b.o.x+=f*this.t.x;b.o.y+=f*this.t.y;b.I+=g*(c*this.t.y-d*this.t.x)};T.prototype.of=function(a){var b=this.Pa,c,d=0,f=0;c=b.g.G;var g=this.zm.x-b.h.W.x,h=this.zm.y-b.h.W.y,d=c.j.x*g+c.k.x*h,h=c.j.y*g+c.k.y*h,g=d,d=b.o.x+-b.I*h,k=b.o.y+b.I*g;c=this.X;d=d+this.Hu*this.Br.x+this.qe*this.t.x;f=k+this.Hu*this.Br.y+this.qe*this.t.y;k=-(c.j.x*d+c.k.x*f);f=-(c.j.y*d+c.k.y*
f);c=this.t.x;d=this.t.y;this.t.x+=k;this.t.y+=f;a=a.Ta*this.Pu;this.t.iq()>a*a&&this.t.fa(a/this.t.ig());k=this.t.x-c;f=this.t.y-d;b.o.x+=b.U*k;b.o.y+=b.U*f;b.I+=b.ea*(g*f-h*k)};T.prototype.nf=function(){return!0};n.Fb(D,n.l.J.ua);D.prototype.la=n.l.J.ua.prototype;D.Gl=function(){n.l.J.ua.ua.apply(this,arguments);this.target=new f};D.prototype.Gl=function(){this.la.ua.call(this);this.type=s.Lx;this.Tu=0;this.hr=5;this.Rq=.7};n.Fb(V,n.l.J.ia);V.prototype.la=n.l.J.ia.prototype;V.Wn=function(){n.l.J.ia.ia.apply(this,
arguments);this.na=new f;this.va=new f;this.ff=new f;this.Di=new f;this.da=new f;this.Ca=new f;this.ta=new c;this.t=new g};V.prototype.wd=function(){return this.Ga.hg(this.na)};V.prototype.qn=function(){var a=this.Ga,b=this.Pa,c=a.hg(this.na),d=b.hg(this.va),b=d.x-c.x,c=d.y-c.y,a=a.Hs(this.ff);return a.x*b+a.y*c};V.prototype.ph=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.Ga.Pd(!0);this.Pa.Pd(!0);this.gf=a;this.hf=b};V.prototype.Wn=function(a){this.la.ia.call(this,a);this.na.K(a.Qc);this.va.K(a.Rc);
this.ff.K(a.Hk);this.Di.x=-this.ff.y;this.Di.y=this.ff.x;this.HC=a.Nj;this.t.La();this.kb=this.Me=0;this.gf=a.Fu;this.hf=a.Ov;this.Qu=a.Uu;this.cp=a.hp;this.Zg=a.dm;this.Dj=a.Co;this.Xa=s.Fe;this.da.La();this.Ca.La()};V.prototype.Kf=function(b){var c=this.Ga,f=this.Pa,g,h=0;this.Kh.K(c.h.W);this.Lh.K(f.h.W);var k=c.mf();f.mf();g=c.g.G;var m=this.na.x-this.Kh.x,p=this.na.y-this.Kh.y,h=g.j.x*m+g.k.x*p,p=g.j.y*m+g.k.y*p,m=h;g=f.g.G;var B=this.va.x-this.Lh.x,q=this.va.y-this.Lh.y,h=g.j.x*B+g.k.x*q,q=
g.j.y*B+g.k.y*q,B=h;g=f.h.m.x+B-c.h.m.x-m;h=f.h.m.y+q-c.h.m.y-p;this.tc=c.U;this.uc=f.U;this.re=c.ea;this.se=f.ea;this.da.K(d.yd(k.G,this.ff));this.Ab=(g+m)*this.da.y-(h+p)*this.da.x;this.Bb=B*this.da.y-q*this.da.x;this.Me=this.tc+this.uc+this.re*this.Ab*this.Ab+this.se*this.Bb*this.Bb;this.Me>Number.MIN_VALUE&&(this.Me=1/this.Me);this.Ca.K(d.yd(k.G,this.Di));this.Gb=(g+m)*this.Ca.y-(h+p)*this.Ca.x;this.Hb=B*this.Ca.y-q*this.Ca.x;k=this.tc;m=this.uc;p=this.re;B=this.se;this.ta.j.x=k+m+p*this.Gb*this.Gb+
B*this.Hb*this.Hb;this.ta.j.y=p*this.Gb+B*this.Hb;this.ta.j.z=p*this.Gb*this.Ab+B*this.Hb*this.Bb;this.ta.k.x=this.ta.j.y;this.ta.k.y=p+B;this.ta.k.z=p*this.Ab+B*this.Bb;this.ta.Fa.x=this.ta.j.z;this.ta.Fa.y=this.ta.k.z;this.ta.Fa.z=k+m+p*this.Ab*this.Ab+B*this.Bb*this.Bb;this.Zg?(g=this.da.x*g+this.da.y*h,d.hd(this.hf-this.gf)<2*a.zb?this.Xa=s.ij:g<=this.gf?this.Xa!=s.zh&&(this.Xa=s.zh,this.t.z=0):g>=this.hf?this.Xa!=s.Hd&&(this.Xa=s.Hd,this.t.z=0):(this.Xa=s.Fe,this.t.z=0)):this.Xa=s.Fe;0==this.Dj&&
(this.kb=0);b.Kg?(this.t.x*=b.zc,this.t.y*=b.zc,this.kb*=b.zc,b=this.t.x*this.Ca.x+(this.kb+this.t.z)*this.da.x,g=this.t.x*this.Ca.y+(this.kb+this.t.z)*this.da.y,h=this.t.x*this.Gb+this.t.y+(this.kb+this.t.z)*this.Ab,k=this.t.x*this.Hb+this.t.y+(this.kb+this.t.z)*this.Bb,c.o.x-=this.tc*b,c.o.y-=this.tc*g,c.I-=this.re*h,f.o.x+=this.uc*b,f.o.y+=this.uc*g,f.I+=this.se*k):(this.t.La(),this.kb=0)};V.prototype.of=function(a){var b=this.Ga,c=this.Pa,h=b.o,k=b.I,m=c.o,p=c.I,q=0,B=0,t=0,z=0;this.Dj&&this.Xa!=
s.ij&&(z=this.Me*(this.cp-(this.da.x*(m.x-h.x)+this.da.y*(m.y-h.y)+this.Bb*p-this.Ab*k)),q=this.kb,a=a.Ta*this.Qu,this.kb=d.Cb(this.kb+z,-a,a),z=this.kb-q,q=z*this.da.x,B=z*this.da.y,t=z*this.Ab,z*=this.Bb,h.x-=this.tc*q,h.y-=this.tc*B,k-=this.re*t,m.x+=this.uc*q,m.y+=this.uc*B,p+=this.se*z);t=this.Ca.x*(m.x-h.x)+this.Ca.y*(m.y-h.y)+this.Hb*p-this.Gb*k;B=p-k;this.Zg&&this.Xa!=s.Fe?(a=this.da.x*(m.x-h.x)+this.da.y*(m.y-h.y)+this.Bb*p-this.Ab*k,q=this.t.wb(),a=this.ta.wn(new g,-t,-B,-a),this.t.Lg(a),
this.Xa==s.zh?this.t.z=d.fe(this.t.z,0):this.Xa==s.Hd&&(this.t.z=d.ek(this.t.z,0)),t=-t-(this.t.z-q.z)*this.ta.Fa.x,B=-B-(this.t.z-q.z)*this.ta.Fa.y,B=this.ta.vl(new f,t,B),B.x+=q.x,B.y+=q.y,this.t.x=B.x,this.t.y=B.y,a.x=this.t.x-q.x,a.y=this.t.y-q.y,a.z=this.t.z-q.z,q=a.x*this.Ca.x+a.z*this.da.x,B=a.x*this.Ca.y+a.z*this.da.y,t=a.x*this.Gb+a.y+a.z*this.Ab,z=a.x*this.Hb+a.y+a.z*this.Bb):(a=this.ta.vl(new f,-t,-B),this.t.x+=a.x,this.t.y+=a.y,q=a.x*this.Ca.x,B=a.x*this.Ca.y,t=a.x*this.Gb+a.y,z=a.x*this.Hb+
a.y);h.x-=this.tc*q;h.y-=this.tc*B;k-=this.re*t;m.x+=this.uc*q;m.y+=this.uc*B;p+=this.se*z;b.o.K(h);b.I=k;c.o.K(m);c.I=p};V.prototype.nf=function(){var c=this.Ga,h=this.Pa,k=c.h.m,m=c.h.T,p=h.h.m,q=h.h.T,H,s=0,B=0,t=0,z=0,x=0,B=!1,D=0,E=b.aq(m),K=b.aq(q);H=E;var x=this.na.x-this.Kh.x,M=this.na.y-this.Kh.y,s=H.j.x*x+H.k.x*M,M=H.j.y*x+H.k.y*M,x=s;H=K;K=this.va.x-this.Lh.x;t=this.va.y-this.Lh.y;s=H.j.x*K+H.k.x*t;t=H.j.y*K+H.k.y*t;K=s;H=p.x+K-k.x-x;s=p.y+t-k.y-M;if(this.Zg){this.da=d.yd(E,this.ff);this.Ab=
(H+x)*this.da.y-(s+M)*this.da.x;this.Bb=K*this.da.y-t*this.da.x;var T=this.da.x*H+this.da.y*s;d.hd(this.hf-this.gf)<2*a.zb?(D=d.Cb(T,-a.rf,a.rf),z=d.hd(T),B=!0):T<=this.gf?(D=d.Cb(T-this.gf+a.zb,-a.rf,0),z=this.gf-T,B=!0):T>=this.hf&&(D=d.Cb(T-this.hf+a.zb,0,a.rf),z=T-this.hf,B=!0)}this.Ca=d.yd(E,this.Di);this.Gb=(H+x)*this.Ca.y-(s+M)*this.Ca.x;this.Hb=K*this.Ca.y-t*this.Ca.x;E=new g;M=this.Ca.x*H+this.Ca.y*s;K=q-m-this.HC;z=d.fe(z,d.hd(M));x=d.hd(K);B?(B=this.tc,t=this.uc,H=this.re,s=this.se,this.ta.j.x=
B+t+H*this.Gb*this.Gb+s*this.Hb*this.Hb,this.ta.j.y=H*this.Gb+s*this.Hb,this.ta.j.z=H*this.Gb*this.Ab+s*this.Hb*this.Bb,this.ta.k.x=this.ta.j.y,this.ta.k.y=H+s,this.ta.k.z=H*this.Ab+s*this.Bb,this.ta.Fa.x=this.ta.j.z,this.ta.Fa.y=this.ta.k.z,this.ta.Fa.z=B+t+H*this.Ab*this.Ab+s*this.Bb*this.Bb,this.ta.wn(E,-M,-K,-D)):(B=this.tc,t=this.uc,H=this.re,s=this.se,D=H*this.Gb+s*this.Hb,T=H+s,this.ta.j.R(B+t+H*this.Gb*this.Gb+s*this.Hb*this.Hb,D,0),this.ta.k.R(D,T,0),D=this.ta.vl(new f,-M,-K),E.x=D.x,E.y=
D.y,E.z=0);D=E.x*this.Ca.x+E.z*this.da.x;B=E.x*this.Ca.y+E.z*this.da.y;M=E.x*this.Gb+E.y+E.z*this.Ab;E=E.x*this.Hb+E.y+E.z*this.Bb;k.x-=this.tc*D;k.y-=this.tc*B;m-=this.re*M;p.x+=this.uc*D;p.y+=this.uc*B;q+=this.se*E;c.h.T=m;h.h.T=q;c.pc();h.pc();return z<=a.zb&&x<=a.mk};n.Fb(ga,n.l.J.ua);ga.prototype.la=n.l.J.ua.prototype;ga.Xn=function(){n.l.J.ua.ua.apply(this,arguments);this.Qc=new f;this.Rc=new f;this.Hk=new f};ga.prototype.Xn=function(){this.la.ua.call(this);this.type=s.Nx;this.Hk.R(1,0);this.Nj=
0;this.dm=!1;this.Ov=this.Fu=0;this.Co=!1;this.hp=this.Uu=0};ga.prototype.kd=function(a,b,c,d){this.ib=a;this.qb=b;this.Qc=this.ib.lf(c);this.Rc=this.qb.lf(c);this.Hk=this.ib.Fs(d);this.Nj=this.qb.ha()-this.ib.ha()};n.Fb(W,n.l.J.ia);W.prototype.la=n.l.J.ia.prototype;W.Hl=function(){n.l.J.ia.ia.apply(this,arguments);this.Ai=new f;this.Bi=new f;this.na=new f;this.va=new f;this.Ob=new f;this.Pb=new f};W.prototype.wd=function(){return this.Ga.hg(this.na)};W.prototype.Hl=function(a){this.la.ia.call(this,
a);this.wg=this.Ga.rd.AC;this.Ai.x=a.lr.x-this.wg.g.position.x;this.Ai.y=a.lr.y-this.wg.g.position.y;this.Bi.x=a.mr.x-this.wg.g.position.x;this.Bi.y=a.mr.y-this.wg.g.position.y;this.na.K(a.Qc);this.va.K(a.Rc);this.vc=a.$k;this.wm=a.Cu+this.vc*a.Du;this.Xy=d.ek(a.Zy,this.wm-this.vc*W.Gq);this.Yy=d.ek(a.$y,(this.wm-W.Gq)/this.vc);this.Jh=this.Ih=this.t=0};W.prototype.Kf=function(b){var c=this.Ga,d=this.Pa,f;f=c.g.G;var g=this.na.x-c.h.W.x,h=this.na.y-c.h.W.y,k=f.j.x*g+f.k.x*h,h=f.j.y*g+f.k.y*h,g=k;
f=d.g.G;var m=this.va.x-d.h.W.x,p=this.va.y-d.h.W.y,k=f.j.x*m+f.k.x*p,p=f.j.y*m+f.k.y*p,m=k;f=d.h.m.x+m;var k=d.h.m.y+p,q=this.wg.g.position.x+this.Bi.x,t=this.wg.g.position.y+this.Bi.y;this.Ob.R(c.h.m.x+g-(this.wg.g.position.x+this.Ai.x),c.h.m.y+h-(this.wg.g.position.y+this.Ai.y));this.Pb.R(f-q,k-t);f=this.Ob.ig();k=this.Pb.ig();f>a.zb?this.Ob.fa(1/f):this.Ob.La();k>a.zb?this.Pb.fa(1/k):this.Pb.La();0<this.wm-f-this.vc*k?(this.Su=s.Fe,this.t=0):this.Su=s.Hd;f<this.Xy?(this.Mu=s.Fe,this.Ih=0):this.Mu=
s.Hd;k<this.Yy?(this.Nu=s.Fe,this.Jh=0):this.Nu=s.Hd;f=g*this.Ob.y-h*this.Ob.x;k=m*this.Pb.y-p*this.Pb.x;this.$o=c.U+c.ea*f*f;this.ap=d.U+d.ea*k*k;this.Cr=this.$o+this.vc*this.vc*this.ap;this.$o=1/this.$o;this.ap=1/this.ap;this.Cr=1/this.Cr;b.Kg?(this.t*=b.zc,this.Ih*=b.zc,this.Jh*=b.zc,b=(-this.t-this.Ih)*this.Ob.x,f=(-this.t-this.Ih)*this.Ob.y,k=(-this.vc*this.t-this.Jh)*this.Pb.x,q=(-this.vc*this.t-this.Jh)*this.Pb.y,c.o.x+=c.U*b,c.o.y+=c.U*f,c.I+=c.ea*(g*f-h*b),d.o.x+=d.U*k,d.o.y+=d.U*q,d.I+=
d.ea*(m*q-p*k)):this.Jh=this.Ih=this.t=0};W.prototype.of=function(){var a=this.Ga,b=this.Pa,c;c=a.g.G;var f=this.na.x-a.h.W.x,g=this.na.y-a.h.W.y,h=c.j.x*f+c.k.x*g,g=c.j.y*f+c.k.y*g,f=h;c=b.g.G;var k=this.va.x-b.h.W.x,m=this.va.y-b.h.W.y,h=c.j.x*k+c.k.x*m,m=c.j.y*k+c.k.y*m,k=h,p=0,q=0;this.Su==s.Hd&&(c=a.o.x+-a.I*g,h=a.o.y+a.I*f,p=b.o.x+-b.I*m,q=b.o.y+b.I*k,c=-(this.Ob.x*c+this.Ob.y*h)-this.vc*(this.Pb.x*p+this.Pb.y*q),q=this.Cr*-c,c=this.t,this.t=d.fe(0,this.t+q),q=this.t-c,c=-q*this.Ob.x,h=-q*this.Ob.y,
p=-this.vc*q*this.Pb.x,q=-this.vc*q*this.Pb.y,a.o.x+=a.U*c,a.o.y+=a.U*h,a.I+=a.ea*(f*h-g*c),b.o.x+=b.U*p,b.o.y+=b.U*q,b.I+=b.ea*(k*q-m*p));this.Mu==s.Hd&&(c=a.o.x+-a.I*g,h=a.o.y+a.I*f,c=-(this.Ob.x*c+this.Ob.y*h),q=-this.$o*c,c=this.Ih,this.Ih=d.fe(0,this.Ih+q),q=this.Ih-c,c=-q*this.Ob.x,h=-q*this.Ob.y,a.o.x+=a.U*c,a.o.y+=a.U*h,a.I+=a.ea*(f*h-g*c));this.Nu==s.Hd&&(p=b.o.x+-b.I*m,q=b.o.y+b.I*k,c=-(this.Pb.x*p+this.Pb.y*q),q=-this.ap*c,c=this.Jh,this.Jh=d.fe(0,this.Jh+q),q=this.Jh-c,p=-q*this.Pb.x,
q=-q*this.Pb.y,b.o.x+=b.U*p,b.o.y+=b.U*q,b.I+=b.ea*(k*q-m*p))};W.prototype.nf=function(){var b=this.Ga,c=this.Pa,f,g=this.wg.g.position.x+this.Ai.x,h=this.wg.g.position.y+this.Ai.y,k=this.wg.g.position.x+this.Bi.x,m=this.wg.g.position.y+this.Bi.y,p=0,q=0,t=0,z=0,x=0,D=0,E=0,K=0;this.Su==s.Hd&&(f=b.g.G,p=this.na.x-b.h.W.x,q=this.na.y-b.h.W.y,x=f.j.x*p+f.k.x*q,q=f.j.y*p+f.k.y*q,p=x,f=c.g.G,t=this.va.x-c.h.W.x,z=this.va.y-c.h.W.y,x=f.j.x*t+f.k.x*z,z=f.j.y*t+f.k.y*z,t=x,f=b.h.m.x+p,x=b.h.m.y+q,D=c.h.m.x+
t,E=c.h.m.y+z,this.Ob.R(f-g,x-h),this.Pb.R(D-k,E-m),f=this.Ob.ig(),x=this.Pb.ig(),f>a.zb?this.Ob.fa(1/f):this.Ob.La(),x>a.zb?this.Pb.fa(1/x):this.Pb.La(),f=this.wm-f-this.vc*x,K=d.fe(K,-f),f=d.Cb(f+a.zb,-a.rf,0),E=-this.Cr*f,f=-E*this.Ob.x,x=-E*this.Ob.y,D=-this.vc*E*this.Pb.x,E=-this.vc*E*this.Pb.y,b.h.m.x+=b.U*f,b.h.m.y+=b.U*x,b.h.T+=b.ea*(p*x-q*f),c.h.m.x+=c.U*D,c.h.m.y+=c.U*E,c.h.T+=c.ea*(t*E-z*D),b.pc(),c.pc());this.Mu==s.Hd&&(f=b.g.G,p=this.na.x-b.h.W.x,q=this.na.y-b.h.W.y,x=f.j.x*p+f.k.x*q,
q=f.j.y*p+f.k.y*q,p=x,f=b.h.m.x+p,x=b.h.m.y+q,this.Ob.R(f-g,x-h),f=this.Ob.ig(),f>a.zb?(this.Ob.x*=1/f,this.Ob.y*=1/f):this.Ob.La(),f=this.Xy-f,K=d.fe(K,-f),f=d.Cb(f+a.zb,-a.rf,0),E=-this.$o*f,f=-E*this.Ob.x,x=-E*this.Ob.y,b.h.m.x+=b.U*f,b.h.m.y+=b.U*x,b.h.T+=b.ea*(p*x-q*f),b.pc());this.Nu==s.Hd&&(f=c.g.G,t=this.va.x-c.h.W.x,z=this.va.y-c.h.W.y,x=f.j.x*t+f.k.x*z,z=f.j.y*t+f.k.y*z,t=x,D=c.h.m.x+t,E=c.h.m.y+z,this.Pb.R(D-k,E-m),x=this.Pb.ig(),x>a.zb?(this.Pb.x*=1/x,this.Pb.y*=1/x):this.Pb.La(),f=this.Yy-
x,K=d.fe(K,-f),f=d.Cb(f+a.zb,-a.rf,0),E=-this.ap*f,D=-E*this.Pb.x,E=-E*this.Pb.y,c.h.m.x+=c.U*D,c.h.m.y+=c.U*E,c.h.T+=c.ea*(t*E-z*D),c.pc());return K<a.zb};n.wc.push(function(){n.l.J.Hl.Gq=2});n.Fb(E,n.l.J.ua);E.prototype.la=n.l.J.ua.prototype;E.Yn=function(){n.l.J.ua.ua.apply(this,arguments);this.lr=new f;this.mr=new f;this.Qc=new f;this.Rc=new f};E.prototype.Yn=function(){this.la.ua.call(this);this.type=s.Ox;this.lr.R(-1,1);this.mr.R(1,1);this.Qc.R(-1,0);this.Rc.R(1,0);this.$y=this.Du=this.Zy=this.Cu=
0;this.$k=1;this.Oq=!0};E.prototype.kd=function(a,b,c,d,f,g,h){void 0===h&&(h=0);this.ib=a;this.qb=b;this.lr.K(c);this.mr.K(d);this.Qc=this.ib.lf(f);this.Rc=this.qb.lf(g);a=f.x-c.x;c=f.y-c.y;this.Cu=Math.sqrt(a*a+c*c);c=g.x-d.x;d=g.y-d.y;this.Du=Math.sqrt(c*c+d*d);this.$k=h;h=this.Cu+this.$k*this.Du;this.Zy=h-this.$k*W.Gq;this.$y=(h-W.Gq)/this.$k};n.Fb($,n.l.J.ia);$.prototype.la=n.l.J.ia.prototype;$.Il=function(){n.l.J.ia.ia.apply(this,arguments);this.xd=new b;this.Ng=new b;this.Og=new b;this.sn=
new b;this.md=new g;this.Ug=new f;this.Wh=new f;this.na=new f;this.va=new f;this.t=new g;this.X=new c};$.prototype.wd=function(){return this.Ga.hg(this.na)};$.prototype.ee=function(){return this.Pa.h.T-this.Ga.h.T-this.fp};$.prototype.ph=function(a,b){void 0===a&&(a=0);void 0===b&&(b=0);this.bp=a;this.Er=b};$.prototype.Il=function(a){this.la.ia.call(this,a);this.na.K(a.Qc);this.va.K(a.Rc);this.fp=a.Nj;this.t.La();this.kb=0;this.bp=a.Ly;this.Er=a.jA;this.FC=a.MC;this.cp=a.hp;this.Zg=a.dm;this.Dj=a.Co;
this.Xa=s.Fe};$.prototype.Kf=function(b){var c=this.Ga,f=this.Pa,g,h=0;g=c.g.G;var k=this.na.x-c.h.W.x,m=this.na.y-c.h.W.y,h=g.j.x*k+g.k.x*m,m=g.j.y*k+g.k.y*m,k=h;g=f.g.G;var p=this.va.x-f.h.W.x,q=this.va.y-f.h.W.y,h=g.j.x*p+g.k.x*q,q=g.j.y*p+g.k.y*q,p=h;g=c.U;var h=f.U,t=c.ea,x=f.ea;this.X.j.x=g+h+m*m*t+q*q*x;this.X.k.x=-m*k*t-q*p*x;this.X.Fa.x=-m*t-q*x;this.X.j.y=this.X.k.x;this.X.k.y=g+h+k*k*t+p*p*x;this.X.Fa.y=k*t+p*x;this.X.j.z=this.X.Fa.x;this.X.k.z=this.X.Fa.y;this.X.Fa.z=t+x;this.Me=1/(t+
x);0==this.Dj&&(this.kb=0);if(this.Zg){var z=f.h.T-c.h.T-this.fp;d.hd(this.Er-this.bp)<2*a.mk?this.Xa=s.ij:z<=this.bp?(this.Xa!=s.zh&&(this.t.z=0),this.Xa=s.zh):z>=this.Er?(this.Xa!=s.Hd&&(this.t.z=0),this.Xa=s.Hd):(this.Xa=s.Fe,this.t.z=0)}else this.Xa=s.Fe;b.Kg?(this.t.x*=b.zc,this.t.y*=b.zc,this.kb*=b.zc,b=this.t.x,z=this.t.y,c.o.x-=g*b,c.o.y-=g*z,c.I-=t*(k*z-m*b+this.kb+this.t.z),f.o.x+=h*b,f.o.y+=h*z,f.I+=x*(p*z-q*b+this.kb+this.t.z)):(this.t.La(),this.kb=0)};$.prototype.of=function(a){var b=
this.Ga,c=this.Pa,f=0,g=0,h=0,k=0,m=0,p=b.o,q=b.I,t=c.o,x=c.I,z=b.U,E=c.U,D=b.ea,K=c.ea;this.Dj&&this.Xa!=s.ij&&(g=this.Me*-(x-q-this.cp),h=this.kb,k=a.Ta*this.FC,this.kb=d.Cb(this.kb+g,-k,k),g=this.kb-h,q-=D*g,x+=K*g);if(this.Zg&&this.Xa!=s.Fe){a=b.g.G;g=this.na.x-b.h.W.x;h=this.na.y-b.h.W.y;f=a.j.x*g+a.k.x*h;h=a.j.y*g+a.k.y*h;g=f;a=c.g.G;k=this.va.x-c.h.W.x;m=this.va.y-c.h.W.y;f=a.j.x*k+a.k.x*m;m=a.j.y*k+a.k.y*m;k=f;a=t.x+-x*m-p.x- -q*h;var M=t.y+x*k-p.y-q*g;this.X.wn(this.md,-a,-M,-(x-q));this.Xa==
s.ij?this.t.Lg(this.md):this.Xa==s.zh?(f=this.t.z+this.md.z,0>f&&(this.X.vl(this.Wh,-a,-M),this.md.x=this.Wh.x,this.md.y=this.Wh.y,this.md.z=-this.t.z,this.t.x+=this.Wh.x,this.t.y+=this.Wh.y,this.t.z=0)):this.Xa==s.Hd&&(f=this.t.z+this.md.z,0<f&&(this.X.vl(this.Wh,-a,-M),this.md.x=this.Wh.x,this.md.y=this.Wh.y,this.md.z=-this.t.z,this.t.x+=this.Wh.x,this.t.y+=this.Wh.y,this.t.z=0));p.x-=z*this.md.x;p.y-=z*this.md.y;q-=D*(g*this.md.y-h*this.md.x+this.md.z);t.x+=E*this.md.x;t.y+=E*this.md.y;x+=K*(k*
this.md.y-m*this.md.x+this.md.z)}else a=b.g.G,g=this.na.x-b.h.W.x,h=this.na.y-b.h.W.y,f=a.j.x*g+a.k.x*h,h=a.j.y*g+a.k.y*h,g=f,a=c.g.G,k=this.va.x-c.h.W.x,m=this.va.y-c.h.W.y,f=a.j.x*k+a.k.x*m,m=a.j.y*k+a.k.y*m,k=f,this.X.vl(this.Ug,-(t.x+-x*m-p.x- -q*h),-(t.y+x*k-p.y-q*g)),this.t.x+=this.Ug.x,this.t.y+=this.Ug.y,p.x-=z*this.Ug.x,p.y-=z*this.Ug.y,q-=D*(g*this.Ug.y-h*this.Ug.x),t.x+=E*this.Ug.x,t.y+=E*this.Ug.y,x+=K*(k*this.Ug.y-m*this.Ug.x);b.o.K(p);b.I=q;c.o.K(t);c.I=x};$.prototype.nf=function(){var b=
0,c,f=this.Ga,g=this.Pa,h=0,k=0,m=0,p=0;if(this.Zg&&this.Xa!=s.Fe){var b=g.h.T-f.h.T-this.fp,q=0;this.Xa==s.ij?(b=d.Cb(b-this.bp,-a.Fq,a.Fq),q=-this.Me*b,h=d.hd(b)):this.Xa==s.zh?(b-=this.bp,h=-b,b=d.Cb(b+a.mk,-a.Fq,0),q=-this.Me*b):this.Xa==s.Hd&&(h=b-=this.Er,b=d.Cb(b-a.mk,0,a.Fq),q=-this.Me*b);f.h.T-=f.ea*q;g.h.T+=g.ea*q;f.pc();g.pc()}c=f.g.G;q=this.na.x-f.h.W.x;b=this.na.y-f.h.W.y;k=c.j.x*q+c.k.x*b;b=c.j.y*q+c.k.y*b;q=k;c=g.g.G;var t=this.va.x-g.h.W.x,x=this.va.y-g.h.W.y,k=c.j.x*t+c.k.x*x,x=c.j.y*
t+c.k.y*x,t=k,m=g.h.m.x+t-f.h.m.x-q,p=g.h.m.y+x-f.h.m.y-b,z=m*m+p*p;c=Math.sqrt(z);var k=f.U,E=g.U,D=f.ea,K=g.ea,M=10*a.zb;z>M*M&&(z=1/(k+E),m=z*-m,p=z*-p,f.h.m.x-=.5*k*m,f.h.m.y-=.5*k*p,g.h.m.x+=.5*E*m,g.h.m.y+=.5*E*p,m=g.h.m.x+t-f.h.m.x-q,p=g.h.m.y+x-f.h.m.y-b);this.Ng.j.x=k+E;this.Ng.k.x=0;this.Ng.j.y=0;this.Ng.k.y=k+E;this.Og.j.x=D*b*b;this.Og.k.x=-D*q*b;this.Og.j.y=-D*q*b;this.Og.k.y=D*q*q;this.sn.j.x=K*x*x;this.sn.k.x=-K*t*x;this.sn.j.y=-K*t*x;this.sn.k.y=K*t*t;this.xd.gk(this.Ng);this.xd.Vp(this.Og);
this.xd.Vp(this.sn);this.xd.hk($.Iv,-m,-p);m=$.Iv.x;p=$.Iv.y;f.h.m.x-=f.U*m;f.h.m.y-=f.U*p;f.h.T-=f.ea*(q*p-b*m);g.h.m.x+=g.U*m;g.h.m.y+=g.U*p;g.h.T+=g.ea*(t*p-x*m);f.pc();g.pc();return c<=a.zb&&h<=a.mk};n.wc.push(function(){n.l.J.Il.Iv=new f});n.Fb(Ba,n.l.J.ua);Ba.prototype.la=n.l.J.ua.prototype;Ba.Jl=function(){n.l.J.ua.ua.apply(this,arguments);this.Qc=new f;this.Rc=new f};Ba.prototype.Jl=function(){this.la.ua.call(this);this.type=s.Yq;this.Qc.R(0,0);this.Rc.R(0,0);this.hp=this.MC=this.jA=this.Ly=
this.Nj=0;this.Co=this.dm=!1};Ba.prototype.kd=function(a,b,c){this.ib=a;this.qb=b;this.Qc=this.ib.lf(c);this.Rc=this.qb.lf(c);this.Nj=this.qb.ha()-this.ib.ha()};n.Fb(qa,n.l.J.ia);qa.prototype.la=n.l.J.ia.prototype;qa.bo=function(){n.l.J.ia.ia.apply(this,arguments);this.ef=new f;this.Xf=new f;this.t=new g;this.X=new c};qa.prototype.wd=function(){return this.Ga.hg(this.ef)};qa.prototype.bo=function(a){this.la.ia.call(this,a);this.ef.K(a.Qc);this.Xf.K(a.Rc);this.fp=a.Nj;this.t.La();this.X=new c};qa.prototype.Kf=
function(a){var b,c=0,d=this.Ga,f=this.Pa;b=d.g.G;var g=this.ef.x-d.h.W.x,h=this.ef.y-d.h.W.y,c=b.j.x*g+b.k.x*h,h=b.j.y*g+b.k.y*h,g=c;b=f.g.G;var k=this.Xf.x-f.h.W.x,m=this.Xf.y-f.h.W.y,c=b.j.x*k+b.k.x*m,m=b.j.y*k+b.k.y*m,k=c;b=d.U;var c=f.U,p=d.ea,q=f.ea;this.X.j.x=b+c+h*h*p+m*m*q;this.X.k.x=-h*g*p-m*k*q;this.X.Fa.x=-h*p-m*q;this.X.j.y=this.X.k.x;this.X.k.y=b+c+g*g*p+k*k*q;this.X.Fa.y=g*p+k*q;this.X.j.z=this.X.Fa.x;this.X.k.z=this.X.Fa.y;this.X.Fa.z=p+q;a.Kg?(this.t.x*=a.zc,this.t.y*=a.zc,this.t.z*=
a.zc,d.o.x-=b*this.t.x,d.o.y-=b*this.t.y,d.I-=p*(g*this.t.y-h*this.t.x+this.t.z),f.o.x+=c*this.t.x,f.o.y+=c*this.t.y,f.I+=q*(k*this.t.y-m*this.t.x+this.t.z)):this.t.La()};qa.prototype.of=function(){var a,b=0,c=this.Ga,d=this.Pa,f=c.o,h=c.I,k=d.o,m=d.I,p=c.U,q=d.U,s=c.ea,t=d.ea;a=c.g.G;var x=this.ef.x-c.h.W.x,z=this.ef.y-c.h.W.y,b=a.j.x*x+a.k.x*z,z=a.j.y*x+a.k.y*z,x=b;a=d.g.G;var E=this.Xf.x-d.h.W.x,D=this.Xf.y-d.h.W.y,b=a.j.x*E+a.k.x*D,D=a.j.y*E+a.k.y*D,E=b;a=k.x-m*D-f.x+h*z;var b=k.y+m*E-f.y-h*x,
K=m-h,M=new g;this.X.wn(M,-a,-b,-K);this.t.Lg(M);f.x-=p*M.x;f.y-=p*M.y;h-=s*(x*M.y-z*M.x+M.z);k.x+=q*M.x;k.y+=q*M.y;m+=t*(E*M.y-D*M.x+M.z);c.I=h;d.I=m};qa.prototype.nf=function(){var b,c=0,f=this.Ga,h=this.Pa;b=f.g.G;var k=this.ef.x-f.h.W.x,m=this.ef.y-f.h.W.y,c=b.j.x*k+b.k.x*m,m=b.j.y*k+b.k.y*m,k=c;b=h.g.G;var p=this.Xf.x-h.h.W.x,q=this.Xf.y-h.h.W.y,c=b.j.x*p+b.k.x*q,q=b.j.y*p+b.k.y*q,p=c;b=f.U;var c=h.U,s=f.ea,t=h.ea,x=h.h.m.x+p-f.h.m.x-k,z=h.h.m.y+q-f.h.m.y-m,E=h.h.T-f.h.T-this.fp,D=10*a.zb,K=
Math.sqrt(x*x+z*z),M=d.hd(E);K>D&&(s*=1,t*=1);this.X.j.x=b+c+m*m*s+q*q*t;this.X.k.x=-m*k*s-q*p*t;this.X.Fa.x=-m*s-q*t;this.X.j.y=this.X.k.x;this.X.k.y=b+c+k*k*s+p*p*t;this.X.Fa.y=k*s+p*t;this.X.j.z=this.X.Fa.x;this.X.k.z=this.X.Fa.y;this.X.Fa.z=s+t;D=new g;this.X.wn(D,-x,-z,-E);f.h.m.x-=b*D.x;f.h.m.y-=b*D.y;f.h.T-=s*(k*D.y-m*D.x+D.z);h.h.m.x+=c*D.x;h.h.m.y+=c*D.y;h.h.T+=t*(p*D.y-q*D.x+D.z);f.pc();h.pc();return K<=a.zb&&M<=a.mk};n.Fb(Ca,n.l.J.ua);Ca.prototype.la=n.l.J.ua.prototype;Ca.co=function(){n.l.J.ua.ua.apply(this,
arguments);this.Qc=new f;this.Rc=new f};Ca.prototype.co=function(){this.la.ua.call(this);this.type=s.Px;this.Nj=0};Ca.prototype.kd=function(a,b,c){this.ib=a;this.qb=b;this.Qc.K(this.ib.lf(c));this.Rc.K(this.qb.lf(c));this.Nj=this.qb.ha()-this.ib.ha()}})();(function(){var a=n.l.Se;a.Se=function(){};a.prototype.Se=function(){}})();var r;for(r=0;r<n.wc.length;++r)n.wc[r]();delete n.wc;var ea={autoplay:!1,duration:5E3,gr:[],loop:!1,placeholder:"--",Mr:"metadata",volume:80},fa={mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",aac:"audio/aac",m4a:"audio/x-m4a"},ha=[],ia=document.createElement("audio");
function ja(a,b){function c(a,b){var c=document.createElement("source");c.src=b;fa[b.split(".").pop()]&&(c.type=fa[b.split(".").pop()]);a.appendChild(c)}b=b||{};var d=[],f=!!ia.canPlayType;this.load=function(){if(!f)return this;this.ud.load();return this};this.play=function(){if(!f)return this;this.ud.play();return this};this.pause=function(){if(!f)return this;this.ud.pause();return this};this.kC=function(){return f?this.ud.paused:null};this.stop=function(){if(!f)return this;this.setTime(0);this.ud.pause();
return this};this.loop=function(){if(!f)return this;this.ud.loop="loop";this.bind("ended.buzzloop",function(){this.currentTime=0;this.play()});return this};this.$u=function(){if(!f)return this;this.ud.muted=!0;return this};this.Ki=function(a){f&&(0>a&&(a=0),100<a&&(a=100),this.volume=a,this.ud.volume=a/100)};this.setTime=function(a){if(!f)return this;this.pA(function(){this.ud.currentTime=a});return this};this.getTime=function(){if(!f)return null;var a=Math.round(100*this.ud.currentTime)/100;return isNaN(a)?
ea.placeholder:a};this.set=function(a,b){if(!f)return this;this.ud[a]=b;return this};this.get=function(a){return f?a?this.ud[a]:this.ud:null};this.bind=function(a,b){function c(a){b.call(g,a)}if(!f)return this;a=a.split(" ");for(var g=this,h=0;h<a.length;h++){var k=a[h],x=k,k=x.split(".")[0];d.push({hF:x,gF:c});this.ud.addEventListener(k,c,!0)}return this};this.UB=function(a,b){function c(){setTimeout(function(){0>d&&0>h.volume?(h.Ki(h.volume+=1),c()):0<d&&0<h.volume?(h.Ki(h.volume-=1),c()):b instanceof
Function&&b.apply(h)},g)}if(f){a instanceof Function?(b=a,a=ea.duration):a=a||ea.duration;var d=this.volume,g=a/Math.abs(d-0),h=this;this.play();this.pA(function(){c()})}};this.Xx=function(a,b){f&&this.UB(a,b)};this.pA=function(a){if(f){var b=this;0===this.ud.readyState?this.bind("canplay.buzzwhenready",function(){a.call(b)}):a.call(b)}};if(f&&a){for(var g in ea)ea.hasOwnProperty(g)&&(b[g]=b[g]||ea[g]);this.ud=document.createElement("audio");if(a instanceof Array)for(var h in a)a.hasOwnProperty(h)&&
c(this.ud,a[h]);else if(b.gr.length)for(var k in b.gr)b.gr.hasOwnProperty(k)&&c(this.ud,a+"."+b.gr[k]);else c(this.ud,a);b.loop&&this.loop();b.autoplay&&(this.ud.autoplay="autoplay");this.ud.Mr=!0===b.Mr?"auto":!1===b.Mr?"none":b.Mr;this.Ki(b.volume);ha.push(this)}};var ka={Menu:"complex",Interlude:"complex","Hive 1":"kickit","Hive 2":"breakthru","Hive 3":"emergence","Hive 4":"fire",Tessellation:"driven","Final Tessellation":"wicked"},la={driven:27.46,wicked:2.922},ma={impulse:"effects/impulse",pdeath:"effects/pdeath",ffrenzy:"effects/ffrenzy",sparks:"effects/sparks",ult:"effects/ult",pwheel:"effects/pwheel",goo:"effects/goo",sshot:"effects/sshot",deathray:"effects/deathray",b1hit:"effects/b1hit",b1shrink:"effects/b1shrink",b1grow:"effects/b1grow",b2bhole:"effects/b2bhole",
b3strike:"effects/b3strike",b3select:"effects/b3select",b4spawner:"effects/b4spawner",b4attacker:"effects/b4attacker",b4darkness:"effects/b4darkness"},na={b3tick:{file:"effects/b3tick",Fi:2},sdeath:{file:"effects/sdeath",Fi:4},tdeath:{file:"effects/tdeath",Fi:4},hfire:{file:"effects/hfire",Fi:2},hhit:{file:"effects/hhit",Fi:2},fbullet:{file:"effects/fbullet",Fi:4},fbullethit:{file:"effects/fbullethit",Fi:4},b2eat:{file:"effects/b2eat",Fi:4},b4spawneract:{file:"effects/b4spawneract",Fi:2}},oa={"Hive 0":"bg/hive0",
"Hive 1":"bg/hive1","Hive 2":"bg/hive2","Hive 3":"bg/hive3","Hive 4":"bg/hive4"},pa={1:"IGNAVIAM",2:"CONSUMENDI",3:"NEGLIGENTIA",4:"ADROGANTIA"},ra=[{Qo:4,Kc:500},{Qo:5,Kc:1E3},{Qo:6,Kc:2E3},{Qo:7,Kc:5E3},{Qo:8,Kc:7E3},{Qo:9,Kc:1E4}],sa=[{mh:1,Kc:50},{mh:2,Kc:3E3},{mh:3,Kc:8E3}],ta=[{Zh:11,Kc:200},{Zh:12,Kc:750},{Zh:13,Kc:1500},{Zh:14,Kc:4E3},{Zh:15,Kc:6E3},{Zh:16,Kc:9E3}],ua={},va,wa,xa;for(xa in na)ma[xa]=na[xa].file;
var w={bronze:"#cc8032",silver:"#c0c0c0",impulse_target_blue:"rgba(0, 128, 255, 0.2)",impulse_blue:"rgb(0, 128, 255)",impulse_blue_dark:"#13527e",gold:"#edb900","world 0":"#333","world 0 lite":"#999","world 0 bright":"#fff","world 0 dark":"#080808","world 1":"#034903","world 1 lite":"#046a04","world 1 bright":"#21f721","world 1 dark":"#000d00","world 2":"#0020b0","world 2 lite":"#0028dd","world 2 bright":"#2474fe","world 2 dark":"#010310","world 3":"#450555","world 3 lite":"#5f0775","world 3 dark":"#0f0013",
"world 3 bright":"#a260a6","world 4":"#600","world 4 lite":"#a00","world 4 dark":"#180000","world 4 bright":"#f00",player_color:"rgb(32, 140, 231)",boss:"red","boss dark":"#900","boss 1":"#05c205","boss 2":"#002eff","boss 3":"#a260a6","boss 4":"#f00"};
function ya(){var a=A.Vb+" "+A.Hc;"left mouse"==a?ua={hq:37,mq:38,kq:39,Yp:40,Vi:13,fk:27,bq:16,uw:88,hw:67,gw:39,Ew:37,jq:16,zw:39,fw:37,Aw:39,dw:40,xw:13}:"right mouse"==a?ua={hq:65,mq:87,kq:68,Yp:83,Vi:81,fk:27,bq:32,uw:88,hw:67,gw:69,jq:82,Ew:83,zw:81,fw:69,Aw:82,dw:68,xw:32}:"right keyboard"==a&&(ua={hq:37,mq:38,kq:39,Yp:40,Vi:81,fk:27,qw:65,sw:87,rw:68,pw:83,bq:32,uw:88,hw:67,gw:69,jq:82,Ew:83,zw:81,fw:69,Aw:82,dw:68,xw:32,Ow:69})};function za(a,b,c,d,f,g,h){a.beginPath();a.arc(b*F,c*F,d*F*2,-.5*Math.PI,-.5*Math.PI+1.999*Math.PI*f,!0);a.lineWidth=h?h:2;a.strokeStyle=g;a.stroke()}function Aa(a,b,c,d,f){a.moveTo(b*F,c*F-d*F*2);a.arc(b*F,c*F,d*F*2,-.5*Math.PI,-.5*Math.PI+1.998*Math.PI*f,!0)}
function Da(a,b,c,d,f,g){void 0===g&&(g=1);a.save();for(var h=a.shadowBlur=0;h<c.length;h++)if(!1!==c[h].visible){var k=c[h],m=c[h].ga,q=c[h].color?c[h].color:f;a.beginPath();if("polygon"==k.type){a.moveTo(g*(k.x+k.Z*m[0][0])*F,g*(k.y+k.Z*m[0][1])*F);for(var p=1;p<m.length;p++)a.lineTo(g*(k.x+k.Z*m[p][0])*F,g*(k.y+k.Z*m[p][1])*F)}a.closePath();p=G[d].xy;a.fillStyle=q;"normal"==b&&p&&(a.fillStyle=p);a.fillStyle="black";"lighten"!=b&&a.fill();a.strokeStyle=q;a.lineWidth=2*Math.sqrt(g);"lighten"==b&&
(a.strokeStyle="black",a.lineWidth=4*Math.sqrt(g));a.stroke()}if(b=G[d].Ux){a.beginPath();for(p=0;p<b.length;p++)a.moveTo(g*b[p][0][0]*F,g*b[p][0][1]*F),a.lineTo(g*b[p][1][0]*F,g*b[p][1][1]*F);a.strokeStyle="black";a.lineWidth=3;a.globalAlpha=1;a.stroke()}b=G[d].Wx;d=G[d].N;if("undefined"!==typeof b)for(c=0;c<b.length;c++)a.beginPath(),f=b[c],a.moveTo(g*d*f.x1*F,g*d*f.y1*F),a.lineTo(g*d*f.x2*F,g*d*f.y2*F),a.lineWidth=2,a.strokeStyle=q,a.stroke();a.restore()}
function Ea(a,b,c,d,f,g,h,k){"boss"!=b.slice(b.length-4)&&(a.save(),a.translate(c,d),g&&a.rotate(g),void 0===h&&(h="normal"),c=G[b].N*F*Fa.prototype.fm,f=null==f?c:f*Math.min(G[b].N/1.5,1),Ga(a,b,f,h,k),a.restore())}
function Ga(a,b,c,d,f){void 0===f&&(f=G[b].className.prototype.zk(d),f||(f=G[b].color));var g=G[b].Qt;g||(g=G[b].Xb);Da(a,d,g,b,f,c/(Fa.prototype.fm*G[b].N*F));d=G[b].className.prototype.zk(d);d||(d=G[b].color);if("undefined"!==typeof G[b].nj)for(f=0;f<G[b].nj.length;f++)g=G[b].nj[f],g.Et?Ha(a,0,0,g,c,d):Ha(a,0,0,g,c,d,1,0,"black")}function Ia(a,b,c,d,f,g){a.save();a.translate(c,d);g&&a.rotate(g);Ga(a,b,G[b].images.normal.height*f/2,"normal");a.restore()}var Ja={0:1.4,1:1,2:1.4,3:1.4,4:1.6};
function Ka(a,b,c,d,f,g,h){f*=Ja[b];a.save();g&&(a.globalAlpha*=.5,1==b&&J(a,c,d,Math.PI/4,2*f,2*f,La[b],Ma[b]),J(a,c,d,Math.PI/4,1.5*f,1.5*f,La[b],Ma[b]));a.restore();a.save();a.translate(c,d);a.rotate((h?h:0)+(4!=b&&2!=b?Math.PI/4:0));J(a,0,0,0,f,f,Na[b],Ma[b]);1==b&&(a.beginPath(),a.rect(-f/2*1.2,-f/2*1.2,1.2*f,1.2*f),a.lineWidth=Math.ceil(f/20),a.strokeStyle=w["boss "+b],a.stroke());a.restore()}
function Oa(a,b,c,d,f){f*=Ja[b];a.save();a.translate(c,d);4!=b&&2!=b&&a.rotate(Math.PI/4);J(a,0,0,0,f,f,Pa[b],Ma[b]);1==b&&(a.beginPath(),a.rect(-f/2*1.2,-f/2*1.2,1.2*f,1.2*f),a.lineWidth=Math.ceil(f/20),a.strokeStyle="gray",a.stroke());a.restore()}
function Qa(a,b,c,d,f,g){a.save();a.shadowColor=f;a.shadowBlur=0;Ra(a,b,c-d,.9*d,.9*d,.2*d,f);Ra(a,b-d,c,.9*d,.9*d,.2*d,f);Ra(a,b,c,.9*d,.9*d,.2*d,f);Ra(a,b+d,c,.9*d,.9*d,.2*d,f);a.fillStyle=f;a.font=.4*d+"px Muli";a.textAlign="center";g?(a.fillText(g[0],b,c-1*d),a.fillText(g[1],b-d,c+0*d),a.fillText(g[2],b,c+0*d),a.fillText(g[3],b+d,c+0*d),Sa(a,b,c-.8*d,.3*d,"up",f),Sa(a,b-d,c+.2*d,.3*d,"left",f),Sa(a,b,c+.2*d,.3*d,"down",f),Sa(a,b+d,c+.2*d,.3*d,"right",f)):(Sa(a,b,c-d,.5*d,"up",f),Sa(a,b-d,c,.5*
d,"left",f),Sa(a,b,c-2,.5*d,"down",f),Sa(a,b+d,c,.5*d,"right",f));a.restore()}function Ta(a,b,c,d,f,g){a.save();a.fillStyle=g;Ra(a,b,c,d,f,.25*f,g);a.beginPath();a.moveTo(b-d/2,c-f/6);a.lineTo(b+d/2,c-f/6);a.moveTo(b,c-f/6);a.lineTo(b,c-f/2);a.lineWidth=2;a.strokeStyle=g;a.stroke();a.restore()}
function Ua(a,b,c,d,f,g){a.save();a.shadowColor=g;a.fillStyle=g;a.shadowBlur=0;Ra(a,b,c,d,f,.2*f,g);a.clip();a.beginPath();a.rect(b-d/2,c-f/2,d/2,f/3);a.globalAlpha*=.5;a.fill();a.restore();a.save();a.beginPath();a.moveTo(b-d/2,c-f/6);a.lineTo(b+d/2,c-f/6);a.moveTo(b,c-f/6);a.lineTo(b,c-f/2);a.lineWidth=2;a.strokeStyle=g;a.stroke();a.restore()}
function Va(a,b,c,d,f,g){a.save();a.shadowColor=g;a.fillStyle=g;a.shadowBlur=0;Ra(a,b,c,d,f,.2*f,g);a.clip();a.beginPath();a.rect(b,c-f/2,d/2,f/3);a.globalAlpha*=.5;a.fill();a.restore();a.save();a.beginPath();a.moveTo(b-d/2,c-f/6);a.lineTo(b+d/2,c-f/6);a.moveTo(b,c-f/6);a.lineTo(b,c-f/2);a.lineWidth=2;a.strokeStyle=g;a.stroke();a.restore()}
function Ra(a,b,c,d,f,g,h){a.save();a.shadowColor=h;a.shadowBlur=0;a.beginPath();a.moveTo(b-d/2+g,c-f/2);a.arcTo(b+d/2,c-f/2,b+d/2,c+f/2,g);a.arcTo(b+d/2,c+f/2,b-d/2,c+f/2,g);a.arcTo(b-d/2,c+f/2,b-d/2,c-f/2,g);a.arcTo(b-d/2,c-f/2,b+d/2,c-f/2,g);a.closePath();a.strokeStyle=h;a.lineWidth=2;a.stroke();a.restore()}function Wa(a,b,c,d){a.save();a.beginPath();a.rect(b-15,c-15,30,30);a.lineWidth=4;a.strokeStyle=d;a.stroke();a.fillStyle=d;a.font="20px Muli";a.fillText("f",b,c+7.5);a.restore()}
function Xa(a,b,c,d,f,g){a.save();var h=2*Math.PI/24;a.beginPath();for(var k=0;6>k;k++)0==k?a.moveTo(b-15*Math.cos(h*(4*k+-.4)),c-15*Math.sin(h*(4*k+-.4))):a.lineTo(b-15*Math.cos(h*(4*k+-.4)),c-15*Math.sin(h*(4*k+-.4))),a.lineTo(b-15*Math.cos(h*(4*k+.6)),c-15*Math.sin(h*(4*k+.6))),a.lineTo(b-11.25*Math.cos(h*(4*k+1.6)),c-11.25*Math.sin(h*(4*k+1.6))),a.lineTo(b-11.25*Math.cos(h*(4*k+2.6)),c-11.25*Math.sin(h*(4*k+2.6)));a.closePath();a.fillStyle=d;a.fill();g&&(a.globalAlpha/=2);a.beginPath();a.arc(b,
c,7.5,0,1.998*Math.PI);a.fillStyle=f;a.fill();a.restore()}function Ya(a,b,c,d){a.save();a.beginPath();a.arc(b,c-5,5,0,2*Math.PI,!0);a.moveTo(b,c+12.5);a.arc(b,c+12.5,10,0,Math.PI,!0);a.fillStyle=d;a.fill();a.restore()}function Za(a,b,c,d,f){a.save();a.beginPath();a.moveTo(b,c-1*d/3);a.lineTo(b-d,c-2*d/3);a.lineTo(b-d,c+2*d/3);a.lineTo(b,c+d);a.moveTo(b,c+d);a.lineTo(b,c-1*d/3);a.lineTo(b+d,c-2*d/3);a.lineTo(b+d,c+2*d/3);a.lineTo(b,c+d);a.lineWidth=4;a.strokeStyle=f;a.stroke();a.restore()}
function ab(a,b,c,d){a.save();a.beginPath();a.arc(b,c,9.75,2*Math.PI/5,Math.PI);a.lineWidth=4;a.strokeStyle=d;a.stroke();a.beginPath();a.arc(b,c,9.75,7*Math.PI/5,2*Math.PI);a.lineWidth=4;a.strokeStyle=d;a.stroke();a.beginPath();a.moveTo(b-2.4375,c);a.lineTo(b-15.4375,c);a.lineTo(b-8.9375,c-6.5);a.moveTo(b+2.4375,c);a.lineTo(b+15.4375,c);a.lineTo(b+8.9375,c+6.5);a.fillStyle=d;a.fill();a.restore()}
function bb(a,b,c,d){a.save();a.beginPath();a.arc(b,c,9.75,3*Math.PI/2,3*Math.PI/4);a.lineWidth=4;a.strokeStyle=d;a.stroke();a.beginPath();a.moveTo(b,c-2.4375);a.lineTo(b,c-15.4375);a.lineTo(b-6.5,c-8.9375);a.fillStyle=d;a.fill();a.restore()}function cb(a,b,c,d){a.save();db(a,b,c,d);a.beginPath();a.arc(b,c,15,7*Math.PI/6,11*Math.PI/6);a.lineWidth=2;a.strokeStyle=d;a.stroke();a.restore()}
function db(a,b,c,d){a.beginPath();a.arc(b,c,10,3*Math.PI/2,3*Math.PI/2+1.999*Math.PI);a.fillStyle=d;a.fill();a.beginPath();a.arc(b,c,8,3*Math.PI/2,3*Math.PI/2+1.999*Math.PI);a.fillStyle="black";a.fill();a.beginPath();a.arc(b,c,5.5,3*Math.PI/2,3*Math.PI/2+1.999*Math.PI);a.fillStyle=d;a.fill()}
function eb(a,b,c,d){a.save();a.shadowBlur=0;a.beginPath();a.fillStyle=d;a.strokeStyle=d;a.moveTo(b-12,c-12);a.lineTo(b-12,c+12);a.lineTo(b+12,c+12);a.lineTo(b+12,c-12);a.lineTo(b,c-12);a.lineTo(b,c);a.lineWidth=5;a.stroke();a.beginPath();a.moveTo(b-7,c-3);a.lineTo(b+7,c-3);a.lineTo(b,c+4);a.fill();a.restore()}
function fb(a,b,c,d){a.save();a.shadowBlur=0;a.beginPath();a.fillStyle=d;a.strokeStyle=d;a.arc(b,c,12.6,0,2*Math.PI,!0);a.lineWidth=3;a.stroke();a.beginPath();a.lineWidth=4;a.moveTo(b,c-7.2);a.lineTo(b,c+3.6);a.moveTo(b,c+18*.3);a.lineTo(b,c+7.2);a.stroke();a.restore()}function gb(a,b,c,d){a.save();a.shadowBlur=0;a.beginPath();a.moveTo(b-12,c-12);a.lineTo(b+12,c+12);a.moveTo(b-12,c+12);a.lineTo(b+12,c-12);a.strokeStyle=d;a.lineWidth=5;a.stroke();a.restore()}
function ib(a,b,c,d){a.save();a.translate(b,c);a.transform(1,-.35,0,1,0,0);a.translate(-b,-c);a.beginPath();a.moveTo(b-10,c);a.lineTo(b+10,c);a.moveTo(b-10,c+10);a.lineTo(b+10,c+10);a.lineWidth=6;a.strokeStyle=d;a.stroke();a.restore()}function jb(a,b,c,d){a.save();a.beginPath();a.rect(b-5,c-10,10,10);a.rect(b-10,c,10,10);a.rect(b,c,10,10);a.strokeStyle=d;a.lineWidth=4;a.stroke();a.restore()}
function kb(a,b,c,d){a.save();a.translate(20/3,0);a.beginPath();a.moveTo(b-20/3,c+10);a.lineTo(b-20/3,c-20/6);a.lineTo(b+20/3,c-40/6);a.lineTo(b+20/3,c+40/6);a.lineWidth=4;a.strokeStyle=d;a.stroke();var f=b-10,g=c+10;a.save();a.translate(f,g);a.scale(1.3,1);a.translate(-f,-g);a.beginPath();a.arc(f,g,20/6,0,2*Math.PI,!0);a.fillStyle=d;a.fill();a.restore();b+=20/6;c+=20/3;a.save();a.translate(b,c);a.scale(1.3,1);a.translate(-b,-c);a.beginPath();a.arc(b,c,20/6,0,2*Math.PI,!0);a.fillStyle=d;a.fill();
a.restore();a.restore()}
function lb(a,b,c,d,f,g,h){a.save();a.clearRect(b-d,c-d,3*d,3*d);a.beginPath();a.moveTo(b-.3*d-d/2*.75,c-d/2*.6);a.lineTo(b-.3*d,c-d/2*.6);a.lineTo(b-.3*d+d/2*.75,c-.6*d);a.lineTo(b-.3*d+d/2*.75,c+.6*d);a.lineTo(b-.3*d,c+d/2*.6);a.lineTo(b-.3*d-d/2*.75,c+d/2*.6);a.fillStyle=f;a.fill();h?(a.beginPath(),a.arc(b-.3*d+.75*d,c,d/2*.45,0,2*Math.PI,!0),a.moveTo(b-.3*d+.75*d-Math.cos(Math.PI/4)*d/2*.45,c-Math.cos(Math.PI/4)*d/2*.45),a.lineTo(b-.3*d+.75*d+Math.cos(Math.PI/4)*d/2*.45,c+Math.cos(Math.PI/4)*
d/2*.405),a.lineWidth=2,a.strokeStyle=f):(a.beginPath(),a.arc(b-.3*d+.4*d,c,d/2*.6,-Math.PI/3,Math.PI/3,!1),a.lineWidth=2,a.strokeStyle=f,a.stroke(),a.beginPath(),a.arc(b-.3*d+.4*d,c,d/2,-Math.PI/3,Math.PI/3,!1));a.stroke();g&&(a.font="10px Muli",a.textAlign="center",a.fillText("X",b+d,c+d));a.restore()}
function Ha(a,b,c,d,f,g,h,k,m){h="undefined"!==typeof h?h:1;k="undefined"!==typeof k?k:0;a.beginPath();a.save();0!=k&&(a.translate(b,c),a.rotate(k),a.translate(-b,-c));"circle"==d.type&&a.arc(b+d.x,c+d.y,f*d.Z,0,1.998*Math.PI);if("polygon"==d.type){a.moveTo(b+(d.x+d.ga[0][0]*d.Z)*f,c+(d.y+d.ga[0][1]*d.Z)*f);for(k=1;k<d.ga.length;k++)a.lineTo(b+(d.x+d.ga[k][0]*d.Z)*f,c+(d.y+d.ga[k][1]*d.Z)*f);a.closePath()}a.globalAlpha*=h;a.fillStyle=g;m&&"none"!=m?a.fillStyle=m:a.globalAlpha/=3;"none"!=m&&a.fill();
m&&"none"!=m||(a.globalAlpha*=3);a.strokeStyle=g;a.lineWidth=2;a.stroke();a.restore()}function mb(a,b,c,d,f,g){a.save();a.shadowBlur=0;a.beginPath();a.rect(b-20-60,c-.5*d-20,160,d+40);a.fillStyle="black";a.fill();a.restore();a.save();a.beginPath();a.shadowBlur=20;a.shadowColor=g;a.globalAlpha/=10;a.rect(b-20,c-.5*d,40,d);a.strokeStyle=g;a.fillStyle=g;a.lineWidth=2;a.fill();a.stroke();a.globalAlpha*=10;a.beginPath();a.rect(b-20,c-.5*d,40,d*f);a.fillStyle=g;a.fill();a.restore()}
function Sa(a,b,c,d,f,g,h){h=void 0==h?!1:h;a.save();a.translate(b,c);"left"==f?a.rotate(Math.PI):"up"==f?a.rotate(3*Math.PI/2):"down"==f&&a.rotate(Math.PI/2);a.beginPath();a.moveTo(Math.cos(0)*d/2,Math.sin(0)*d/2);a.lineTo(Math.cos(2*Math.PI/3)*d/2,Math.sin(2*Math.PI/3)*d/2);a.lineTo(Math.cos(4*Math.PI/3)*d/2,Math.sin(4*Math.PI/3)*d/2);a.closePath();a.fillStyle=g;h?(a.shadowBlur=10,a.shadowColor=g):a.shadowBlur=0;a.fill();a.restore()}
function nb(a,b,c,d,f,g,h,k,m){a.save();m&&(a.globalAlpha*=m);a.beginPath();a.rect(b-.5*d,c-7.5,d*f,15);a.fillStyle=g;a.fill();a.restore();k||(a.beginPath(),a.rect(b-.5*d,c-7.5,d,15),a.strokeStyle=h?h:"black",a.lineWidth=2,a.stroke())}function ob(a,b,c,d){a.save();a.textAlign="center";a.shadowColor=w.impulse_blue;a.shadowBlur=0;a.fillStyle="white";a.drawImage(pb,b-pb.width/2*.85,c-.6375*pb.height,.85*pb.width,.85*pb.height);d&&(a.font="16px Muli",a.fillText(d,b,c+40));a.restore()}
function qb(a,b,c,d,f,g,h,k){a.save();var m=.9*h;k.mh&&(m=0);a.font=h+"px Muli";a.fillStyle="white";a.shadowBlur=0;J(a,f-1.8*h+m,g,0,1.3*h,1.3*h,"lives_icon");J(a,f+m+.05*h,g+.05*h,0,.8*h,.8*h,"spark");k.Tm&&(a.shadowBlur=10,a.shadowColor=a.fillStyle);a.textAlign="center";a.fillText(b,f-1.8*h+m,g+1.6*h);a.fillText(c,f+m,g+1.6*h);k.labels&&(a.font=Math.max(8,h/3)+"px Muli",a.fillText("LIVES",f-1.8*h+m,g-.8*h),k.Uz?(a.fillText("SPARK",f+m,g-1.4*h),a.fillText("VALUE",f+m,g-.8*h)):a.fillText("SPARKS",
f+m,g-.8*h));a.font=h+"px Muli";k.mh&&(a.fillStyle="white",a.shadowColor=a.fillStyle,J(a,f+1.8*h,g,0,1.2*h,1.2*h,"ultimate_icon"),a.fillText(d,f+1.8*h,g+1.6*h));k.labels&&k.mh&&(a.font=Math.max(8,h/3)+"px Muli",a.fillText("ULT",f+1.8*h,g-.8*h));a.restore()}
function rb(a,b,c,d,f,g,h){a.save();a.shadowBlur=0;a.beginPath();a.rect(c-f/2,d-g/2,f,g);a.clip();a.beginPath();a.rect(c-f/2,d-g/2,f,g);a.save();a.globalAlpha*=.3;a.fillStyle=h;a.fill();a.restore();var k=null;"easy"==L&&(k=N[b].Df);k||(k=N[b].Ya);if(k){for(b=0;b<k.length;b++){a.beginPath();a.moveTo(c-f/2+k[b][0][0]/O*f,d-g/2+k[b][0][1]/P*g);for(var m=1;m<k[b].length;m++)a.lineTo(c-f/2+k[b][m][0]/O*f,d-g/2+k[b][m][1]/P*g);a.closePath();a.fillStyle="black";a.strokeStyle=h;a.lineWidth=2;a.stroke();a.fill()}a.restore();
a.save();a.beginPath();a.shadowBlur=0;a.rect(c-f/2,d-g/2,f,g);a.lineWidth=2;a.strokeStyle=h;a.stroke();a.restore()}}function sb(){var a=document.createElement("canvas");a.width=400;a.height=400;var b=a.getContext("2d");b.globalAlpha=.2;J(b,a.width/2,a.height/2,0,.7*a.width,.7*a.height,"ultimate");b.globalAlpha=1;for(var c=0;48>c;c++){var d=c%2?.4*a.width:.42*a.width;J(b,a.width/2+d*Math.cos(c*Math.PI*2/48),a.height/2+d*Math.sin(c*Math.PI*2/48),2*Math.PI/48*c,32,18,"ultimate_shard")}return a}
function tb(a){var b=new Image;b.src=a;return b}
var ub=tb("art/sprites.png"),vb={player_normal:[0,0,40,40],player_red:[40,-1,40,40],player_yellow:[80,0,41,41],player_gray:[120,0,41,41],player_green:[160,0,41,41],player_white:[200,0,40,40],spark:[0,41,40,40],multi:[0,81,40,40],white_glow:[40,40,100,100],ultimate:[148,41,150,150],lives_icon:[0,0,40,40],sparks_icon:[0,41,40,40],ultimate_icon:[0,155,42,42],ultimate_icon_blue:[43,155,42,42],ultimate_shard:[0,121,18,32],world1_starblank:[85,199,41,38],world1_star:[127,199,41,38],world2_starblank:[85,
237,41,38],world2_star:[127,237,41,38],world3_starblank:[0,199,41,38],world3_star:[42,199,41,38],world4_starblank:[0,237,41,38],world4_star:[42,237,41,38],silver_trophy:[0,277,90,78],gold_trophy:[89,277,90,78],timer_icon:[169,197,61,77],immunitas_arm:[0,0,90,90],immunitas_arm_red:[150,135,90,90],immunitas_hand:[90,0,90,90],immunitas_hand_red:[240,135,90,90],immunitas_logo_gray:[330,135,90,90],immunitas_head:[0,90,108,108],immunitas_head_red:[450,123,108,108],immunitas_glow:[180,0,135,135],immunitas_red_glow:[315,
0,135,135],immunitas_aura:[450,0,123,123],immunitas_aura_red:[573,0,123,123],immunitas_arrow:[0,200,70,70],immunitas_lockon:[573,123,120,120],consumendi_head:[0,0,180,180],consumendi_head_red:[720,136,135,135],consumendi_aura:[181,0,269,269],consumendi_small_diamond:[94,180,30,56],consumendi_small_diamond_filled:[64,180,30,56],consumendi_small_arrow:[124,180,30,16],consumendi_glow:[720,0,135,135],consumendi_logo:[450,0,120,119],consumendi_mini:[450,119,120,120],consumendi_mini_gray:[570,0,120,120],
negligentia_head:[0,0,180,180],negligentia_head_red:[0,180,180,180],negligentia_arm_striking:[180,0,244,100],negligentia_arm_striking_red:[180,100,244,100],negligentia_wheel:[424,0,134,134],negligentia_wheel_red:[424,270,134,134],negligentia_wheel_complete:[423,135,135,135],negligentia_glow:[560,0,115,115],negligentia_glow_red:[560,115,115,115],negligentia_aura:[559,270,39,65],negligentia_aura_open:[598,270,39,65],negligentia_arm_ring:[180,200,180,180],negligentia_logo:[680,0,120,120],negligentia_logo_gray:[680,
120,120,120],adrogantia_attack_bud:[0,0,80,80],adrogantia_spawner:[0,80,80,80],adrogantia_body_bud:[80,0,80,80],adrogantia_attack_bud_firing:[80,80,80,80],adrogantia_head:[181,1,160,160],adrogantia_glow:[340,0,135,135],adrogantia_logo:[476,0,125,125],adrogantia_logo_gray:[476,125,125,125],generated_ultimate:[0,0,400,400]},wb=tb("art/immunitas_sprite.png"),xb=tb("art/consumendi_sprite.png"),yb=tb("art/negligentia_sprite.png"),zb=tb("art/adrogantia_sprite.png"),pb=tb("art/logo.png"),La={0:"white_glow",
1:"immunitas_glow",2:"consumendi_glow",3:"negligentia_glow",4:"adrogantia_glow"},Na={0:"ultimate",1:"immunitas_arm",2:"consumendi_logo",3:"negligentia_logo",4:"adrogantia_logo"},Pa={0:"world_logo",1:"immunitas_logo_gray",2:"consumendi_mini_gray",3:"negligentia_logo_gray",4:"adrogantia_logo_gray"},Ma={0:ub,1:wb,2:xb,3:yb,4:zb},Ab={},Bb;for(Bb in oa)Ab[Bb]=tb("art/"+oa[Bb]+".png");
function J(a,b,c,d,f,g,h,k){k="undefined"!==typeof k?k:ub;a.save();a.translate(b,c);a.rotate(d);a.drawImage(k,vb[h][0],vb[h][1],vb[h][2],vb[h][3],-f/2,-g/2,f,g);a.restore()}function Cb(a,b,c,d,f,g,h){var k=h.width,m=h.height;a.save();a.translate(b,c);a.rotate(d);a.drawImage(h,0,0,k,m,-f/2,-g/2,f,g);a.restore()}function Db(a,b,c,d,f){f=Ab[f];var g=f.width,h=f.height;a.save();a.rect(0,b,c-0,d-b);a.clip();for(var k=0;k<c;k+=g)for(var m=b;m<d;m+=h)a.drawImage(f,0,0,g,h,k,m,g,h);a.restore()}
function Eb(a,b){var c=Fb;a.clearRect(0,0,canvas.width,canvas.height);a.fillStyle="#000";a.fillRect(0,0,canvas.width,canvas.height);a.globalAlpha=b;a.drawImage(c,0,0,O,P,Q,0,O,P);a.globalAlpha=1}
function Gb(a,b,c,d,f,g){"half"==f?(J(a,b-30*g,c,0,25*g,25*g,"world"+d+"_starblank"),J(a,b,c,0,25*g,25*g,"world"+d+"_starblank"),J(a,b+30*g,c,0,25*g,25*g,"world"+d+"_starblank")):"basic"==f?(J(a,b-30*g,c,0,25*g,25*g,"world"+d+"_star"),J(a,b,c,0,25*g,25*g,"world"+d+"_starblank"),J(a,b+30*g,c,0,25*g,25*g,"world"+d+"_starblank")):"silver"==f?(J(a,b-30*g,c,0,25*g,25*g,"world"+d+"_star"),J(a,b,c,0,25*g,25*g,"world"+d+"_star"),J(a,b+30*g,c,0,25*g,25*g,"world"+d+"_starblank")):"gold"==f&&(J(a,b-30*g,c,0,
25*g,25*g,"world"+d+"_star"),J(a,b,c,0,25*g,25*g,"world"+d+"_star"),J(a,b+30*g,c,0,25*g,25*g,"world"+d+"_star"))}
draw_quest_button=function(a,b,c,d,f){a.beginPath();a.arc(b,c,d,0,2*Math.PI,!1);a.fillStyle="#000";a.fill();a.beginPath();a.arc(b,c,d-8,0,2*Math.PI,!1);a.lineWidth=4;a.strokeStyle="white";a.stroke();"beat_hive1"==f&&Ka(a,1,b,c,.6*d,!0,0);"beat_hive2"==f&&Ka(a,2,b,c,.6*d,!0,0);"beat_hive3"==f&&Ka(a,3,b,c,.6*d,!0,0);"beat_hive4"==f&&Ka(a,4,b,c,.6*d,!0,0);"first_gold"==f&&(a.save(),a.globalAlpha*=.2,J(a,b,c,0,1.2*d,1.2*d,"white_glow"),a.restore(),J(a,b,c,0,.8*d,.8*d,"gold_trophy"),a.font="15px Muli",
a.textAlign="center",a.fillStyle=w.gold,a.fillText("1",b,c-1));if("combo"==f){a.save();a.globalAlpha*=.2;J(a,b,c,0,1.2*d,1.2*d,"white_glow");a.restore();J(a,b,c-d/4,0,.4*d,.4*d,"player_normal");a.beginPath();a.arc(b,c-d/2,.75*d,Math.PI/3,2*Math.PI/3,!1);a.strokeStyle=w.impulse_blue;a.stroke();for(var g=[Math.PI/2,.36*Math.PI,.64*Math.PI,.57*Math.PI,.43*Math.PI],h=0;h<g.length;h++){var k=g[h];Cb(a,b+.9*d*Math.cos(k),c-d/2+.9*d*Math.sin(k),k,10,10,G.stunner.images.normal)}}if("survivor"==f)for(a.save(),
a.globalAlpha*=.2,J(a,b,c,0,1.2*d,1.2*d,"white_glow"),a.restore(),J(a,b,c,0,.4*d,.4*d,"player_normal"),h=0;8>h;h++)k=2*Math.PI*h/4+Math.PI/4,Cb(a,b+.5*d*Math.cos(k),c+.5*d*Math.sin(k),Math.PI/2+k,15,15,G.spear.images.normal);"fast_time"==f&&(a.save(),a.globalAlpha*=.2,J(a,b,c,0,1.2*d,1.2*d,"white_glow"),a.restore(),J(a,b,c,0,.7*d,.7*d,"timer_icon"));if("pacifist"==f){a.save();a.globalAlpha*=.2;J(a,b,c,0,1.2*d,1.2*d,"white_glow");a.restore();J(a,b,c+.2*d,0,.4*d,.4*d,"player_normal");a.save();a.lineWidth=
3;var g=c-.2*d,h=d/6,k=d/12,m=w.gold;a.save();a.beginPath();a.translate(b-h,g-k);a.scale(h,k);a.arc(1,1,1,0,2*Math.PI,!1);a.restore();a.save();m&&(a.strokeStyle=m);a.stroke();a.restore()}if("star"==f.substring(1,5)){a.save();a.globalAlpha*=.1;J(a,b,c,0,1.2*d,1.2*d,"white_glow");a.restore();f=parseInt(f.substring(0,1));g=[1.25*Math.PI,3*Math.PI/2,1.75*Math.PI];for(h=0;h<g.length;h++)k=g[h],J(a,b+.6*d*Math.cos(k),c+.1*d+.6*d*Math.sin(k),0,20,20,h<f?"world"+(f+1)+"_star":"world"+(f+1)+"_starblank");
J(a,b,c+d/4,0,.7*d,.7*d,"ultimate_icon")}};var Hb={beat_hive1:{za:["ult"],text:["DEFEAT HIVE 1"]},beat_hive2:{za:["spark"],text:["DEFEAT HIVE 2"]},beat_hive3:{za:["spark"],text:["DEFEAT HIVE 3"]},beat_hive4:{za:["life"],text:["DEFEAT HIVE 4"]},first_gold:{za:["spark"],text:["GET A GOLD SCORE","ON ANY LEVEL"]},combo:{za:["life"],text:["BEAT A LEVEL IN HIVE 1","WITH 150 COMBO OR MORE"]},pacifist:{za:["life"],text:["BEAT ANY LEVEL","WITHOUT USING IMPULSE"]},survivor:{za:["life"],text:["BEAT A LEVEL IN HIVE 3","AFTER 2.5 MINUTES"]},fast_time:{za:["spark"],
text:["BEAT A LEVEL IN HIVE 2","IN UNDER 30 SECONDS"]},"0star":{za:[],text:["DEFEAT CHALLENGE MODE"]},"1star":{za:["life","spark","ult"],text:["GET 1-STAR ON ALL HIVES","IN CHALLENGE MODE"]},"2star":{za:["life","spark","ult"],text:["GET 2-STAR ON ALL HIVES","IN CHALLENGE MODE"]},"3star":{za:[],text:["GET 3-STAR ON ALL HIVES","IN CHALLENGE MODE"]}};function Ib(a,b){return a.x==b.x&&a.y==b.y}function Jb(a,b,c,d){void 0===d&&(d=null);for(var f=0;f<c.length;f++)if(!(Ib(a,c[f].p1)||Ib(a,c[f].p2)||Ib(b,c[f].p1)||Ib(b,c[f].p2))&&c[f].p1.p_n!==d&&Kb(a,b,c[f].p1,c[f].p2))return!1;return!0}function Lb(a,b){for(var c=a.length-1,d=!1,f=0;f<a.length;f++)(a[f].y<b.y&&a[c].y>=b.y||a[f].y>=b.y&&a[c].y<b.y)&&a[f].y!=a[c].y&&a[f].x+(b.y-a[f].y)/(a[c].y-a[f].y)*(a[c].x-a[f].x)<b.x&&(d=!d),c=f;return d}
function R(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))}function Kb(a,b,c,d){b={x:b.x-a.x,y:b.y-a.y};d={x:d.x-c.x,y:d.y-c.y};a={x:c.x-a.x,y:c.y-a.y};c=Mb(b,d);if(0==c&&0==Mb(a,d))return!1;d=Mb(a,d)/c;b=Mb(a,b)/c;return 0<=d&&1>=d&&0<=b&&1>=b}function Nb(a,b,c,d){b={x:b.x-a.x,y:b.y-a.y};d={x:d.x-c.x,y:d.y-c.y};c={x:c.x-a.x,y:c.y-a.y};var f=Mb(b,d);if(0==f&&0==Mb(c,d))return null;d=Mb(c,d)/f;c=Mb(c,b)/f;return 0<=d&&1>=d&&0<=c&&1>=c?{x:a.x+b.x*d,y:a.y+b.y*d}:null}
function Ob(a,b,c){return Math.abs(Mb({x:b.x-a.x,y:b.y-a.y},{x:c.x-a.x,y:c.y-a.y}))/Math.sqrt((b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y))}function Mb(a,b){return a.x*b.y-a.y*b.x}function Pb(a){var b;a.pageX||a.pageY?(b=a.pageX,a=a.pageY):(b=a.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,a=a.clientY+document.body.scrollTop+document.documentElement.scrollTop);b-=offset_left;a-=offset_top;return{x:b,y:a}}
function S(a,b){null!=a&&null!=b||console.log("ERROR");var c;if(a.x==b.x)return c=a.y>b.y?-Math.PI/2:Math.PI/2;c=Math.atan((a.y-b.y)/(a.x-b.x));a.x>b.x&&a.y<b.y?c+=Math.PI:a.x>b.x&&a.y>=b.y&&(c-=Math.PI);return c}function Qb(a,b,c,d){for(var f=[],g=0;g<c.length;g++){var h=d(c[g]);R(a,h)<b&&f.push(c[g])}return f}
function Rb(a,b){for(var c=a.length-1,d=[],f=0;f<a.length;f++){var g=(f+1)%a.length,h=new b2Vec2(a[f].y-a[c].y,a[c].x-a[f].x),c=new b2Vec2(a[f].x-a[c].x,a[f].y-a[c].y),k=new b2Vec2(a[g].y-a[f].y,a[f].x-a[g].x),g=new b2Vec2(a[f].x-a[g].x,a[f].y-a[g].y);h.xb();k.xb();c.xb();g.xb();var m=S({x:0,y:0},k),q=S({x:0,y:0},h),m=m-q,m=0>m?m+2*Math.PI:m,m=m>=2*Math.PI?m-2*Math.PI:m;m>Math.PI?d.push({x:a[f].x+h.x*b-1*c.x/Math.tan(m/2-Math.PI/2)*b,y:a[f].y+h.y*b-1*c.y/Math.tan(m/2-Math.PI/2)*b}):m>5*Math.PI/6?
(d.push({x:a[f].x+h.x*b+c.x*b,y:a[f].y+h.y*b+c.y*b}),d.push({x:a[f].x+k.x*b+g.x*b,y:a[f].y+k.y*b+g.y*b})):d.push({x:a[f].x+h.x*b+c.x*Math.tan(m/2)*b,y:a[f].y+h.y*b+c.y*Math.tan(m/2)*b});c=f}return d}function Sb(a,b){var c=F,c=c?c:1;return b.x>=a&&b.y>=a&&b.x<=O/c-a&&b.y<=P/c-a}function Tb(a,b,c){for(var d={x:Math.random()*(O/c-2*b)+b,y:Math.random()*(P/c-2*b)+b},f=!1,g=0;g<X.i.vh.length;g++)r!=g&&Lb(X.i.vh[g],d)&&(f=!0);return f||null==Ub(X.Rb,d,a).path?Tb(a,b,c):d}
function Vb(a,b,c){for(;a<c;)a+=2*Math.PI;for(;a>c;)a-=2*Math.PI;for(;b>c;)b-=2*Math.PI;for(;b<c;)b+=2*Math.PI;return b-a<=2*Math.PI}function Wb(a,b){for(;b-a>Math.PI;)b-=2*Math.PI;for(;b-a<-Math.PI;)b+=2*Math.PI;return b}function Xb(a,b){var c=a-b;c>2*Math.PI&&(c-=2*Math.PI);0>c&&(c+=2*Math.PI);c>Math.PI&&(c=2*Math.PI-c);return c}function Yb(a,b,c){return 0*Math.pow(1-c,3)+3*Math.pow(1-c,2)*c*a+3*(1-c)*Math.pow(c,2)*b+1*Math.pow(c,3)}
function Zb(a,b,c,d,f,g,h,k){var m=new b2BodyDef;m.type="static"==h?b2Body.tf:b2Body.Cd;m.position.x=c;m.position.y=d;m.xr=3;a=a.ln(m);for(c=0;c<b.length;c++){d=b[c];h=null;"circle"==d.type&&(h=new b2CircleShape(d.Z),h.Kw(new b2Vec2(d.x,d.y)));if("polygon"==d.type){m=[];for(h=0;h<d.ga.length;h++)m.push(new b2Vec2(d.x+d.Z*d.ga[h][0],d.y+d.Z*d.ga[h][1]));h=new b2PolygonShape;h.Ms(m,m.length)}d=new b2FixtureDef;d.rb=f;d.mm=0;d.Pm=.7;d.filter.uf=g;d.filter.Cf=6;d.shape=h;a.Xp(d).un({body:a,owner:k,self:null})}return a}
function $b(a,b){var c=L,d={};b>N[a].Va[c].sc?(d.sc=!0,N[a].Va[c].sc=b):d.sc=!1;d.ba=ac(a,b,c);d.sc&&(N[a].Va[c].ba=d.ba,bc());return d}function ac(a,b,c){for(var d=0;b>=N[a].sa[c][d];)d+=1;return d}function cc(a,b){var c=L,d={};b<N[a].Va[c].Zc?(d.Zc=!0,N[a].Va[c].Zc=b):d.Zc=!1;N[a].Va[c].ba=3;d.ba=3;d.Zc&&bc();return d}function dc(a){var b=a%60;10>b&&(b="0"+b);return Math.floor(a/60)+":"+b};function ec(){this.Vc={};this.Vk={};this.Pc=null;for(var a in na)fc(this,na[a].file,na[a].Fi);this.Jm={};this.$u=A.UC;this.Rx=A.Rx}function gc(a){hc.play(ma[a])}ec.prototype.play=function(a){if(!this.Rx)if(a in this.Vk)for(var b=0;b<this.Vk[a].length;b++){if(!this.Vk[a][b]){this.Vc[a+b].play();this.Vc[a+b].Ki(A.$q);this.Vk[a][b]=!0;break}}else a in this.Vc||(this.Vc[a]=new ja("audio/"+a+".ogg")),this.Vc[a].play(),this.Vc[a].Ki(A.$q)};
function fc(a,b,c){a.Vk[b]=[];for(var d=0;d<c;d++){a.Vk[b].push(!1);a.Vc[b+d]=new ja("audio/"+b+".ogg");var f=a;a.Vc[b+d].bind("ended",function(a,b){return function(){f.Vk[b][a]=!1}}(d,b))}}function ic(a,b){a.Pc&&a.Vc[a.Pc].stop();a.Pc=null;jc(a,b)}
function jc(a,b){null!=a.Pc&&a.Pc!=b?a.Vc[a.Pc].kC()?ic(a,b):(a.Jm[a.Pc]=!1,a.Jm[b]=!0,a.Vc[a.Pc].Xx(500,function(){ic(a,b)})):(b in a.Vc||(b in la?(a.Vc[b]=new ja("audio/"+b+".ogg"),a.Vc[b].bind("ended",function(){this.setTime(la[b]);this.play()})):a.Vc[b]=new ja("audio/"+b+".ogg",{loop:!0})),a.$u?a.Vc[b].Ki(0):a.Vc[b].Ki(A.fo),a.Vc[b].play(),a.Jm[b]=!0,a.Pc=b)}
function kc(){var a=hc;if(a.Pc){a.Jm[a.Pc]=!1;var b=a.Pc;a.Vc[a.Pc].Xx(300,function(){a.Pc&&!a.Jm[a.Pc]?(a.Vc[a.Pc].stop(),a.Pc=null):a.Pc==b&&a.Jm[a.Pc]&&a.Vc[a.Pc].Ki(A.fo)})}};function lc(a,b){void 0!==a&&(this.Lb=mc(),this.Wc=0,this.gd=nc(),this.Of=0,this.Zh=oc(),this.Ec=b,this.Ec||(this.Lb=0,1<this.gd&&(this.gd=1)),this.tr=this.Lb,this.ur=0,this.vr=this.gd,this.Fy=mc(),this.hA=nc(),this.wx=null,this.H={},this.Ea=a,this.pu="HIVE "+pa[a],this.zt=pa[a],this.ev=0,this.oh=null)}lc.prototype.clone=function(a){var b=new lc,c;for(c in a)b[c]=a[c];return b};function pc(a){a.Lb+=mc()-a.Fy;a.gd+=nc()-a.hA;a.Zh=oc();a.Fy=mc();a.hA=nc()}
lc.prototype.continue=function(){this.Lb=mc();this.Wc=0;this.gd=nc();this.Zh=oc();this.tr=this.Lb;this.ur=0;this.vr=this.gd;this.Of+=1};function qc(a,b,c,d){this.ma(a,b,c,d)}l=qc.prototype;l.xa=3.5;l.id=9999;l.an=1.2;l.sy=50;l.Vg=10;l.tu=.03125;l.eC=w.impulse_target_blue;l.py=w.impulse_blue;l.rb=.5625;l.hh=.66;l.N=.66;
l.ma=function(a,b,c,d){if(null!=a){"easy"==L&&(this.rb*=1.5,this.an*=1.5);var f=new b2FixtureDef;f.rb=this.rb;f.mm=0;f.Pm=1;f.filter.uf=2;f.filter.Cf=29;var g=new b2BodyDef;g.type=b2Body.Cd;f.shape=new b2CircleShape(qc.prototype.hh);this.Z=qc.prototype.hh;this.i=d.i;this.w=d;g.position.x=b;g.position.y=c;g.xr=this.xa;this.body=a.ln(g);this.body.Xp(f).un({owner:this,body:this.body,self:this});this.shape=f.shape;this.fh=[];for(a=0;4>a;a++)this.fh.push({Z:.5,fi:a*Math.PI/2});this.Op=this.xo=this.right=
this.left=!1;this.nh=this.Eh=this.Bh=this.Dh=this.Ch=null;this.ti=0;this.Do=[];this.Lv=[];this.bj=!1;this.qh={};this.Yc=0;this.aj=500;this.$i=0;this.nh=!1;this.Ig={};this.Pi=1E3;this.Xj=0;this.Mv=20;this.lE=250;this.Qj=this.dd=this.Ft=this.Vl=0;this.Yu={x:0,y:0};this.status="normal";this.q=[0,0,0,0,0,0];this.ih=.3;this.Q=!1;this.Ua=1E3;this.sb=0;this.color=w.player_color;this.oa=this.an;this.kx=5;this.Ct=!1;this.Uf=1.5;this.Bu=0;this.ip=!1;this.Cy=0;this.ov=!1}};
function rc(a,b){switch(b){case ua.hq:a.left=!0;break;case ua.kq:a.right=!0;break;case ua.Yp:a.xo=!0;break;case ua.mq:a.Op=!0;break;case ua.Vi:case ua.fk:a.Op=!1;a.xo=!1;a.left=!1;a.right=!1;a.Ch=null;a.Dh=null;a.Eh=null;a.Bh=null;a.pr=null;break;case ua.qw:a.Ch=(new Date).getTime();break;case ua.sw:a.Eh=(new Date).getTime();break;case ua.rw:a.Dh=(new Date).getTime();break;case ua.pw:a.Bh=(new Date).getTime();break;case ua.Ow:a.pr=(new Date).getTime()}}
l.ai=function(a){this.q[0]=Math.max(a,this.q[0]);this.q[1]=Math.max(a,this.q[1])};l.Zb=function(a,b){b&&(this.dd=Math.max(a,this.q[1]),this.Qj=Math.max(a,this.q[1]));this.q[1]=Math.max(a,this.q[1])};l.gu=function(a){this.q[2]=Math.max(a,this.q[2])};l.Ro=function(a){this.q[3]=Math.max(a,this.q[3]);this.sr=this.q[3];this.So=1;this.Fk=1/this.Uf};function sc(a,b){a.q[5]=Math.max(b,a.q[5])}function tc(a,b){a.Vl=Math.max(b,a.q[4]);a.Ft=Math.max(b,a.q[4]);a.q[4]=Math.max(b,a.q[4])}
l.ra=function(a){if(this.Q)this.sb-=a;else{0<this.dd&&(this.dd-=a);0<this.Vl&&(this.Vl-=a);0<this.q[0]&&(this.q[0]-=a);0<this.q[1]&&(this.q[1]-=a);0<this.q[2]?(this.q[2]-=a,this.body.ze(3*this.xa),this.ZB=!0):this.ZB&&this.body.ze(this.xa);if(0<this.q[3]){if(this.q[3]-=a,!this.vi){this.vi=!0;var b=this.body.Cc;void 0===b.length&&(b=[b]);for(var c=0;c<b.length;c++)b[c].bb.Ia/=this.Uf;this.body.jg();uc(this)}}else if(this.vi){this.vi=!1;b=this.body.Cc;void 0===b.length&&(b=[b]);for(c=0;c<b.length;c++)b[c].bb.Ia*=
this.Uf;this.body.jg();uc(this)}0<this.q[4]&&(this.q[4]-=a);if(0<this.q[5]){this.q[5]-=a;b=this.body.Cc;void 0===b.length&&(b=[b]);for(c=0;c<b.length;c++)b[c].Jw(this.rb*this.kx);uc(this);this.body.jg();this.Ct=!0}else if(this.Ct){this.Ct=!1;b=this.body.Cc;void 0===b.length&&(b=[b]);for(c=0;c<b.length;c++)b[c].Jw(this.rb);uc(this);this.body.jg()}cur_time=(new Date).getTime();"mouse"==A.Hc?((this.ip||100>cur_time-this.Bu)&&!this.bj&&0>=this.q[1]&&(this.bj=!0,this.w.H.uu=!0,this.qh=this.body.g.position.wb(),
this.Yc=this.ti,this.$i=this.aj,gc("impulse"),this.w instanceof vc&&(c=this.w,1==c.ca&&"first_time_tutorial"==c.mode&&0==c.Qd&&"none"==c.ob&&(c.lg=c.Zl,c.Qd=!0)),this.w.Yh&&wc(this.w,"player_impulsed")),(this.ov||100>cur_time-this.Cy)&&!this.nh&&0<this.w.u.gd&&(xc(this),this.w instanceof vc||(this.w.u.gd-=1)),this.ti=S({x:this.body.g.position.x*F,y:this.body.g.position.y*F},this.Yu)):"keyboard"==A.Hc&&(!this.bj&&0>=this.q[1]&&(c=0,null!=this.Ch&&this.Ch>c&&(c=this.Ch),null!=this.Dh&&this.Dh>c&&(c=
this.Dh),null!=this.Eh&&this.Eh>c&&(c=this.Eh),null!=this.Bh&&this.Bh>c&&(c=this.Bh),0!=c&&40<(new Date).getTime()-c&&(null!=this.Ch&&null!=this.Eh?this.Yc=5*Math.PI/4:null!=this.Ch&&null!=this.Bh?this.Yc=3*Math.PI/4:null!=this.Dh&&null!=this.Eh?this.Yc=7*Math.PI/4:null!=this.Dh&&null!=this.Bh?this.Yc=1*Math.PI/4:null!=this.Ch?this.Yc=Math.PI:null!=this.Dh?this.Yc=0:null!=this.Eh?this.Yc=3*Math.PI/2:null!=this.Bh&&(this.Yc=1*Math.PI/2),0<this.q[4]&&(this.Yc+=Math.PI),this.bj=!0,this.w.H.uu=!0,this.qh=
this.body.g.position.wb(),this.$i=this.aj,gc("impulse"))),!this.nh&&null!=this.pr&&0<this.w.u.gd&&(xc(this),this.w instanceof vc||(this.w.u.gd-=1)));this.body.pb(this.ti);0<this.q[4]&&(this.ti+=Math.PI);for(c=0;c<this.i.Zd.length;c++)if(Lb(this.i.Zd[c],this.body.g.position)){this.Mc();break}if(this.bj)if(0>this.$i)this.bj=!1,this.Do=[];else{for(c=0;c<this.i.r.length;c++)if(!(this.i.r[c]instanceof yc&&0>=this.i.r[c].q[1]||this.i.r[c]instanceof zc&&this.i.r[c].MB)){if(-1==this.Do.indexOf(this.i.r[c].id)&&
!this.i.r[c].Q)for(var b=this.i.r[c].vj(),d=0;d<b.length;d++)if(Ac(this,b[d])){if(Bc(this,b[d],20<this.i.r[c].body.o.ig())){var f=S(this.qh,b[d]);this.Do.push(this.i.r[c].id);this.i.r[c].Hf(this.qh,this.sy,f);break}this.i.r[c]instanceof Cc&&"engaged"==this.i.r[c].jb&&Dc(this.i.r[c])}if(this.i.r[c]instanceof Cc&&"inactive"!=this.i.r[c].jb){var g=this.i.r[c].ab;if(-1==this.Do.indexOf(g.id))for(b=g.vj(),d=0;d<b.length;d++)Ac(this,b[d])&&Bc(this,b[d],!0)&&(f=S(this.qh,b[d]),g.Hf(this.qh,this.sy,f),this.Do.push(g.id))}}this.$i-=
a}this.nh&&(0>this.Xj?(Ec(this,!0),this.nh=!1,this.Lv=[],this.w instanceof vc&&(a=this.w,1==a.ca&&"ult_tutorial"==a.mode&&0==a.Qd&&"none"==a.ob&&(a.lg=a.Zl,a.Qd=!0)),this.i.pa&&this.body.ei(this.Ig)):(Ec(this,!1),this.Xj-=a));0>=this.q[0]&&(b=this.oa,c=a=0,this.left&&(a-=1),this.right&&(a+=1),this.Op&&(c-=1),this.xo&&(c+=1),b=2==Math.abs(a)+Math.abs(c)?b/Math.sqrt(2):b,0<this.q[4]&&(a*=-1,c*=-1),this.body.ja(new b2Vec2(b*a,b*c),this.body.h.m),this.w instanceof vc&&(0!=a||0!=c)&&(b=this.w,0==b.ca&&
"first_time_tutorial"==b.mode&&0==b.Qd&&"none"==b.ob&&(b.lg=b.Zl,b.Qd=!0)),!this.w.Yh||0==a&&0==c||wc(this.w,"player_moved"))}};function uc(a){a.oa=0<a.q[5]?a.an*a.kx:0<a.q[3]?a.an/a.Uf/a.Uf:a.an}function xc(a){gc("ult");a.nh=!0;a.Ig=a.body.g.position.wb();a.Xj=a.Pi;sc(a,a.Pi);a.ai(a.Pi);a.body.ul(new b2Vec2(0,0));a.i.pa&&a.body.ei(new b2Vec2(-1E3,-1E3))}
function Ec(a,b){for(var c=0;c<a.i.r.length;c++){var d=a.i.r[c];if(!d.Q){for(var f=d.vj(),g=(b?1:.002)*a.lE,h=0;h<f.length;h++)if(Fc(a,f[h])){var k=S(a.Ig,f[h]);-1==a.Lv.indexOf(d.id)?(a.Lv.push(d.id),Gc(d,!0)):Gc(d,!1);f=G[d.type];h=d.Sf?.02/d.He:1;"slingshot"==d.type&&(h*=2);d.Hf(a.Ig,1*g*h*d.body.X*f.xa,k,!0);break}d instanceof Cc&&"engaged"==d.jb&&d.Jc==a&&Dc(d)}if(d instanceof Cc&&"inactive"!=d.jb)for(d=d.ab,f=d.vj(),h=0;h<f.length;h++)Fc(a,f[h])&&(k=S(a.Ig,f[h]),d.Hf(a.Ig,2*g,k))}}
function Hc(a){return a.nh?a.Ig:a.body.g.position}function Ac(a,b){var c=S(a.qh,b);return a.Yc<2*-Math.PI/3?c<=a.Yc+Math.PI/3||c>=a.Yc+5*Math.PI/3:a.Yc>2*Math.PI/3?c<=a.Yc-5*Math.PI/3||c>=a.Yc-Math.PI/3:c>=a.Yc-Math.PI/3&&c<=a.Yc+Math.PI/3}function Bc(a,b,c){var d=Ic(a),f=a.qh.wb();f.xn(b);f=f.xb();b=c?4*a.tu:2*a.tu;return f>=a.Vg*d*((a.aj-a.$i)/a.aj-b)&&f<=a.Vg*d*((a.aj-a.$i)/a.aj+b)}function Fc(a,b){var c=a.Ig.wb();c.xn(b);c=c.xb();return c<=a.Mv*Yb(.15,.5,(a.Pi-a.Xj)/a.Pi)}
function Jc(a,b){b.save();if(a.Q){var c=a.Q?Math.min((a.Ua-a.sb)/a.Ua,1):0;b.globalAlpha*=1-c}a.nh&&0<a.Xj&&(b.save(),b.globalAlpha*=.3,c=Math.min(2-Math.abs((a.Xj-a.Pi/2)/(a.Pi/4)),1),b.globalAlpha*=c/2,b.fillStyle="white",b.fillRect(0,0,Kc,Lc),b.restore(),b.shadowBlur=10,b.shadowColor="#ccc",b.globalAlpha*=.5,c=Yb(.1,.5,(a.Pi-a.Xj)/a.Pi),.4<c&&(b.globalAlpha*=0>(1-c)/.4?0:(1-c)/.4),J(b,a.Ig.x*F,a.Ig.y*F,0,a.Mv*c*F*2,a.Mv*c*F*2,"generated_ultimate",va));b.restore()}
l.gh=function(a){this.Q||Jc(this,a)};
l.$=function(a){if(!this.Q){Jc(this,a);a.save();if(0<this.Vl){var b=Math.max((this.Ft-this.Vl)/this.Ft,0);za(a,this.body.g.position.x,this.body.g.position.y,this.hh,b,"#24ac40")}else 0<this.dd&&(b=Math.max((this.Qj-this.dd)/this.Qj,0),za(a,this.body.g.position.x,this.body.g.position.y,this.hh,b,"gray"));if(this.nh){var c=Ic(this);J(a,this.Ig.x*F,this.Ig.y*F,this.body.ha(),this.shape.Ia*F*2.5*c,this.shape.Ia*F*2.5*c,"player_gray")}else 0<this.q[0]?Mc(this,a,"player_red"):0<this.q[4]?Mc(this,a,"player_green"):
0<this.q[1]?Mc(this,a,"player_gray"):0<this.q[2]?Mc(this,a,"player_yellow"):Mc(this,a,"player_normal");c=Ic(this);0<this.q[3]&&(a.beginPath(),a.arc(this.body.g.position.x*F,this.body.g.position.y*F,this.hh*c*F,0,2*Math.PI,!1),a.strokeStyle="black",a.stroke());a.beginPath();A.nr&&(0>=this.q[1]&&"mouse"==A.Hc?(a.fillStyle=this.eC,a.arc(this.body.g.position.x*F,this.body.g.position.y*F,this.Vg*c*F,this.ti-Math.PI/3,this.ti+Math.PI/3),a.lineTo(this.body.g.position.x*F+Math.cos(this.ti+Math.PI/3)*this.Vg*
c*F,this.body.g.position.y*F+Math.sin(this.ti+Math.PI/3)*this.Vg*c*F),a.lineTo(this.body.g.position.x*F,this.body.g.position.y*F),a.fill()):0>=this.q[1]&&"keyboard"==A.Hc&&(a.beginPath(),a.arc(this.body.g.position.x*F,this.body.g.position.y*F,this.Vg*c*F,0,2*Math.PI),a.globalAlpha/=6,a.lineWidth=2,a.strokeStyle=w.impulse_blue,a.stroke(),a.globalAlpha*=6));this.bj&&(a.beginPath(),a.shadowOffsetX=0,a.shadowOffsetY=0,a.shadowBlur=10,a.shadowColor=this.py,a.lineWidth=this.Vg*this.tu*F*c,b=(this.aj-this.$i)/
this.aj,a.save(),.5<b&&(a.globalAlpha*=0>(1-b)/.5?0:(1-b)/.5),a.arc(this.qh.x*F,this.qh.y*F,this.Vg*c*b*F,this.Yc-Math.PI/3,this.Yc+Math.PI/3),a.strokeStyle=this.py,a.lineWidth=5,a.stroke(),a.restore());A.Gr&&!this.w.pa&&(a.font="16px Muli",a.fillStyle=w.impulse_blue,a.textAlign="center",a.shadowBlur=0,a.fillText("x"+this.w.H.Ce,this.body.g.position.x*F,this.body.g.position.y*F+30));a.restore()}};
function Mc(a,b,c){var d=Ic(a);J(b,a.body.g.position.x*F,a.body.g.position.y*F,a.body.ha(),a.shape.Ia*F*2.5*d,a.shape.Ia*F*2.5*d,c)}function Ic(a){if(0>=a.q[3])return 1;var b=a.q[3]/a.sr;.1>b?(b=1-b/.1,lighten_factor=a.So*b+a.Fk*(1-b)):.9<b?(b=(b-.9)/.1,lighten_factor=a.So*b+a.Fk*(1-b)):lighten_factor=a.Fk;return lighten_factor}l.Ye=function(){};l.Mc=function(a){this.Q=!0;this.sb=this.Ua;this.i.kF=!0;"absorbed"!=a&&gc("pdeath");Nc(this.i,"player",this.body.g.position,this.body.o,!0)};
l.eu=function(a,b){for(var c=this.fh.length-1,d=null,f=null,g=0;g<this.fh.length;g++){var h=Nb({x:this.body.g.position.x+this.fh[g].Z*Math.cos(this.fh[g].fi+0),y:this.body.g.position.y+this.fh[g].Z*Math.sin(this.fh[g].fi+0)},{x:this.body.g.position.x+this.fh[c].Z*Math.cos(this.fh[c].fi+0),y:this.body.g.position.y+this.fh[c].Z*Math.sin(this.fh[c].fi+0)},a,b);if(null!=h){c=R(h,a);if(null==f||c<f)d=h,f=c;c=g}}return{dD:d,Rd:f}};function Fa(){}l=Fa.prototype;l.fm=1.5;
l.ma=function(a,b,c,d,f){this.bD=new b2Vec2(b,c);if(this.w=f)this.i=f.i,this.n=f.n;this.Ea=a;for(g in G[this.type])this[g]=G[this.type][g];this.jv=[];this.jv.push(new b2Vec2(Math.cos(0*Math.PI),Math.sin(0*Math.PI)));this.jv.push(new b2Vec2(Math.cos(5*Math.PI/6),Math.sin(5*Math.PI/6)));this.jv.push(new b2Vec2(Math.cos(7*Math.PI/6),Math.sin(7*Math.PI/6)));this.eD=1E3;this.iy=3;this.Pt=this.kv=0;this.Ij=1500;this.Om=!0;this.Uf=1.5;this.vu=w.impulse_blue;g=new b2BodyDef;g.type=b2Body.Cd;g.position.x=
b;g.position.y=c;g.xr=this.xa;g.bu=this.rF?!1:!0;g.bu||(g.Tw=50);a&&(this.body=a.ln(g));this.LD=[];this.Fg=[];this.vi=!1;this.Oo=500;for(var g=0;g<this.Xb.length;g++){a=this.Xb[g];b=null;"circle"==a.type&&(b=new b2CircleShape(a.Z),b.Kw(new b2Vec2(a.x,a.y)));if("polygon"==a.type){c=[];for(b=0;b<a.ga.length;b++)c.push(new b2Vec2(a.x+a.Z*a.ga[b][0],a.y+a.Z*a.ga[b][1]));b=new b2PolygonShape;b.Ms(c,c.length)}a=new b2FixtureDef;a.rb=this.rb;a.mm=0;a.Pm=.7;a.filter.uf=this.uf?this.uf:4;a.filter.Cf=this.Cf?
this.Cf:30;a.shape=b;this.body&&this.body.Xp(a).un({owner:this,body:this.body,self:this});this.LD.push(b);b instanceof b2PolygonShape?this.Fg.push(b.Y):this.Fg.push(null)}this.Pf=!0;Oc(this);this.path=null;this.Uv=0;this.Tv=!1;this.id=d;this.pk=this.Q=!1;this.Ua=500;this.sb=0;this.q=[0,0,0,0];this.qa={};this.qa.open=0;this.qa.impulsed=0;this.yy=!0;this.If=!1;this.Sz=0;this.wo=!0;this.Ld=this.ue=40;this.tE=10;this.ih=.3;this.Gd=!1;this.gj=!0;this.zv=this.oa/3;this.wu=!1;this.xu=this.ty=2E3;this.De=
2;this.sr=0;this.cE="normal impulsed stunned silenced gooed lighten ulted white world1 world2 world3 world4 black".split(" ");this.qq=[];this.sq=0;this.aB=4;this.rq=null;this.zn=.5;this.yn=!0;this.qm=!1;this.Sl=0;this.gz=this.oy=this.im=!1;this.ny=4;this.yj=0;this.Re=null;this.Li&&(this.yf=!1,this.xc=this.Vh=this.Ah=this.pg)};
l.Lq=function(){for(var a=0;a<this.i.Zd.length;a++)if(Lb(this.i.Zd[a],this.body.g.position)){if(0>=this.qa.open&&this.gz){this.body.ei(this.bD);break}0>=this.qa.open&&this.Om?this.Mc("accident"):(this.w instanceof vc&&(a=this.w,3==a.ca&&"first_time_tutorial"==a.mode&&0==a.Qd&&"none"==a.ob&&(a.lg=a.Zl,a.Qd=!0),4==a.ca&&"first_time_tutorial"==a.mode&&0==a.Qd&&"none"==a.ob&&(a.lg=a.Zl,a.Qd=!0)),this.w.Yh&&wc(this.w,"enemy_killed"),this.Mc("kill"));break}};
function Oc(a){a.wv=[];a.DB=[];if(a.n)for(var b=a.body.Cc;null!=b;){var c=b.bb,d=[];if(c instanceof b2PolygonShape){for(var c=c.Y,f=0;f<c.length;f++){var g=R({x:0,y:0},c[f]),h=S({x:0,y:0},c[f]);d.push({Z:g,fi:h})}a.DB.push(Rb(c,a.n.Z+.1))}a.wv.push(d);b=b.Ha}}l.pz=function(a,b){this.pk&&("hit_player"!=this.Q||this.sb<this.Ua-50)&&(this.pk=!1,this.i.uo.push(a));return this.Q&&0>this.sb?(this.i.Ho.push(a),!0):this.Q?(this.sb-=b,!0):!1};
l.ra=function(a,b){if(!this.pz(a,b))if(0==this.nb)this.Oc(b);else if(this.Pg)this.Ts(b);else{0<this.q[0]&&(this.q[0]-=b);0<this.q[1]?this.q[1]-=b:this.vf&&(this.vf=!1);for(status in this.qa)0<this.qa[status]&&(this.qa[status]-=b);0<this.q[2]?(this.q[2]-=b,this.body.ze(this.xa*this.iy)):this.body.ze(this.xa);if(0<this.q[3]){if(this.q[3]-=b,!this.vi){this.vi=!0;var c=this.body.Cc;void 0===c.length&&(c=[c]);for(var d=0;d<c.length;d++)for(var f=this.body.Cc.bb.Y,g=0;g<f.length;g++)f[g]=new b2Vec2(f[g].x/
this.Uf,f[g].y/this.Uf);this.body.jg();this.oa=G[this.type].oa/this.Uf/this.Uf}}else if(this.vi){this.vi=!1;c=this.body.Cc;void 0===c.length&&(c=[c]);for(d=0;d<c.length;d++)for(f=this.body.Cc.bb.Y,g=0;g<f.length;g++)f[g]=new b2Vec2(f[g].x*this.Uf,f[g].y*this.Uf);this.body.jg();this.oa=G[this.type].oa}1>this.kv&&(this.kv=Math.min(this.kv+b/this.eD,1));this.Sz+=b;this.xu=this.wu?this.xu-b:this.ty;this.Lq();this.sq+=1;if(!(!this.yn||0<this.qa.open&&"tank"==this.type||0<this.q[1])){if(this.sq>this.aB){this.sq=
0;c=!1;f=this.i.vh;d=null;for(g=0;g<f.length;g++)if(Lb(f[g],this.body.g.position)){var h;h=f[g];for(var k=this.body.g.position,m=h.length-1,q={Hm:null,Im:null,Rd:null},p=0;p<h.length;p++){var t=Ob(h[p],h[m],k);if(null==q.Rd||t<q.Rd){var z=S(k,h[m]);Wb(z,S(k,h[p]))-z<Math.PI/2||(q.Hm=h[m],q.Im=h[p],q.Rd=t)}m=p}h=q;if(null!=h.Rd)d=S({x:0,y:0},{x:h.Im.x-h.Hm.x,y:h.Im.y-h.Hm.y})-Math.PI/2,c=!0;else{f=f[g];g=this.body.g.position;h={$b:null,Rd:null};for(k=0;k<f.length;k++)if(m=R(f[k],g),null==h.Rd||m<h.Rd)h.Rd=
m,h.$b=f[k];f=h;f.Rd<N[this.i.V].$a&&(d=S(f.$b,this.body.g.position),c=!0)}break}this.rq=c?d:null}null!=this.rq&&(c=new b2Vec2(Math.cos(this.rq),Math.sin(this.rq)),c.fa(this.oa*this.zn),0<this.qa.open&&"normal"==L&&this.im?c.fa(1.5):("goo"==this.type||"disabler"==this.type)&&0<this.qa.open?c.fa(0):"harpoon"==this.type&&0<this.qa.open&&c.fa(.6),this.body.ja(c,this.body.h.m))}this.Li&&(!this.yf&&Sb(0,this.body.g.position)&&(this.Zb(this.pg),this.xc=this.Vh=this.pg,this.yf=!0),0<this.Ah&&(this.Ah-=dt),
Sb(0,this.body.g.position)||(this.yf=!1,this.Zb(100,!0),this.xc=0),0<this.xc&&(this.xc-=dt,this.Zb(100,!0)));this.move();this.Oc(b)}};l.Oc=function(){};l.Ts=function(){};l.hy=function(){return this.n.body.g.position};
l.move=function(){if(!(this.n.Q||0<this.q[0])){this.Ld+=1;if(0==this.Ld%4||this.Ld>=this.ue){var a=this.hy();if(!a)return;if(this.path&&0==this.path.length||this.path&&1==this.path.length&&a==this.n.body.g.position||this.Ld>=this.ue||this.path&&!Jb(this.body.g.position,this.path[0],this.i.kf)){var b=Ub(this.w.Rb,this.body.g.position,a,this.w.i.rp);this.path=null!=b.path?b.path:null;this.Ld=Math.floor(.25*Math.random()*this.ue)}}if(this.path){b=this.path[0];if(0==this.Ld%4){for(;0<this.path.length&&
1>R(b,this.body.g.position);)this.path=this.path.slice(1),b=this.path[0];if(!b||!Jb(this.body.g.position,b,this.i.kf))return;a==this.n.body.g.position&&Jb(this.body.g.position,this.n.body.g.position,this.i.kf)&&(this.path=[this.n.body.g.position],b=this.path[0])}if(this.Gd){if(this.Uv==this.tE){a=Qb(this.body.g.position,4*this.N,this.i.r,function(a){return a.body.g.position});this.Tv=!1;for(var c=0;c<a.length;c++)if(a[c].id>this.id&&"fighter_bullet"!=a[c].type){this.Tv=!0;break}this.Uv=0}this.Uv++}this.Gd&&
this.Tv||!b||this.Fr(b)}}};l.Fr=function(a){var b=new b2Vec2(a.x-this.body.g.position.x,a.y-this.body.g.position.y);b.xb();this.Hj(b);this.body.ja(b,this.body.h.m);this.Pf&&Pc(this,a)};l.Hj=function(a){a.fa(this.oa)};function Pc(a,b){a.Eg(S(a.body.g.position,b))}l.Eg=function(a){this.yj-=1;0>=this.yj&&(this.body.pb(a),this.yj=this.ny);this.Re=a};
l.Mc=function(a){this.Q=a;this.sb=this.Ua;this.pk=!0;if("kill"==this.Q&&!this.n.Q&&(this.w.H.pe+=1,G[this.type].Ii?G[G[this.type].Ii].pe+=1:G[this.type].pe+=1,!this.i.pa)){var b=this.w.H.Ce*this.Lc;A.cc&&Qc(this.w,b,this.color,this.body.g.position.x,this.body.g.position.y,20);this.w.H.cd+=b;Rc(this.w);Sc(this.w)}"accidental"!=this.Q&&"absorbed"!=this.Q&&("tank"==this.type?gc("tdeath"):"troll"==this.type&&"hit_player"==this.Q&&0>=this.q[1]||gc("sdeath"));Nc(this.i,this.type,this.body.g.position,this.body.o);
this.Rw(a)};l.Rw=function(){};
l.Ye=function(a){if(!this.Q){if(0<this.qa.open&&("mote"==a.type||"troll"==a.type)){var b=this.body.o,c=this.body.X/a.body.X;a.body.ja(new b2Vec2(.2*b.x*c,.2*b.y*c),a.body.g.position);this.body.ul(new b2Vec2(b.x*c/(1+c),b.y*c/(1+c)))}if(a===this.n){if(this.w.pa&&!this.vi&&50<this.body.o.ig()&&(b=this.body.o,c=this.body.X/a.body.X,a.body.ja(new b2Vec2(b.x*c*.5,b.y*c*.5),a.body.g.position),this.body.ul(new b2Vec2(b.x*c/(1+c),b.y*c/(1+c)))),this.wo&&this.Mc("hit_player"),0>=this.q[1]||this.oy)this.ag(),
!this.i.pa&&0>=this.q[1]&&Tc(this.w)}else a instanceof Fa&&0<a.qa.open&&this.open(a.qa.open)}};l.ag=function(){"easy"==L&&this.n.ai(300);"normal"==L&&this.n.ai(500)};
l.$=function(a,b){if(!(0==this.nb&&this.hc>.9*this.ed)){var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0,d=this.body.g.position;a.save();a.translate(d.x*b,d.y*b);a.rotate(this.Re);d=G[this.type].images.normal.height;a.globalAlpha=this.Q?a.globalAlpha*(1-c):a.globalAlpha*(this.visibility?this.visibility:1);var f=this.Q?1+this.De*c:1,g=d;if(0<this.q[3]){var c=this.q[3]/this.sr,h=1;.1>c?(c=1-c/.1,h=this.So*c+this.Fk*(1-c)):.9<c?(c=(c-.9)/.1,h=this.So*c+this.Fk*(1-c)):h=this.Fk;g*=h}g*=f;a.drawImage(G[this.type].images[this.uj()],
0,0,d,d,-g/2,-g/2,g,g);0<this.q[3]&&a.drawImage(G[this.type].images[this.uj()],0,0,d,d,-g/2,-g/2,g,g);a.restore();this.zd(a,b)}};l.zd=function(){};l.gh=function(){};l.$t=function(){};l.Tl=function(){};l.Ql=function(){};l.Rl=function(){};l.Hf=function(a,b,c,d){d||(this.open(this.Ij),this.qa.impulsed+=this.Oo);this.body.ja(new b2Vec2(b*Math.cos(c),b*Math.sin(c)),this.body.h.m);d&&!this.Sf||this.Oe(a,b,c)};l.Oe=function(){};
function Gc(a,b){a.ai(2E3);a.qa.open=0;a.qa.ulted=2E3;b&&a.body.ul(new b2Vec2(0,0))}l.ai=function(a){this.q[0]=Math.max(a,this.q[0]);this.q[1]=Math.max(a,this.q[1])};l.Zb=function(a,b){b&&(this.vf=b);this.q[1]=Math.max(a,this.q[1])};l.gu=function(a){this.q[2]=Math.max(a,this.q[2])};l.Ro=function(a){this.q[3]=Math.max(a,this.q[3]);this.sr=this.q[3];this.So=1;this.Fk=1/this.Uf};l.open=function(a){this.qa.open=Math.max(a,this.qa.open)};
l.eu=function(a,b){for(var c=null,d=null,f="polygon"==this.qF?this.WE:0,g=0;g<this.wv.length;g++)for(var h=this.wv[g],k=h.length-1,m=0;m<h.length;m++){var q=Nb({x:this.body.g.position.x+h[m].Z*Math.cos(h[m].fi+f),y:this.body.g.position.y+h[m].Z*Math.sin(h[m].fi+f)},{x:this.body.g.position.x+h[k].Z*Math.cos(h[k].fi+f),y:this.body.g.position.y+h[k].Z*Math.sin(h[k].fi+f)},a,b);if(null!=q){k=R(q,a);if(null==d||k<d)c=q,d=k;k=m}}return{dD:c,Rd:d}};l.vj=function(){return[this.body.g.position]};
l.uj=function(){if(!this.Q){if(0<this.qa.ulted)return"ulted";if(0<this.qa.impulsed)return"impulsed";if(0<this.q[0])return"stunned";if(this.vf)return"silenced";if(0<this.q[2])return"gooed"}return this.Ko()};l.Ko=function(){return"normal"};l.zk=function(a){return"normal"==a?this.color?this.color:null:"stunned"==a||"silenced"==a?"gray":"gooed"==a?"#e6c43c":"impulsed"==a?this.vu:"ulted"==a?w.impulse_blue:"white"==a?"white":"black"==a?"black":"world"==a.slice(0,5)?w["world "+a.slice(5,6)+" lite"]:this.Jo(a)};
l.Jo=function(){};function Uc(){}Uc.prototype=new Fa;l=Uc.prototype;l.constructor=Uc;l.ma=function(a,b,c,d,f){this.QB(a,b,c,d,f);this.ed=1E3;this.He=10;this.w.wk&&this.w.i.Ec&&(this.ed=6600);this.hc=this.ed};l.QB=Fa.prototype.ma;l.Sf=!0;function Vc(a){if(a.Q)return 0;var b=Math.min(775/F-a.body.g.position.x,a.body.g.position.x-25/F);a=Math.min(575/F-a.body.g.position.y,a.body.g.position.y-25/F);return Math.min(b,a)/(275/F)}function Wc(a){console.log(a.He);return a.He}
l.Hf=function(a,b,c){this.nb&&(this.body.ja(new b2Vec2(Wc(this)*b*Math.cos(c),Wc(this)*b*Math.sin(c)),this.body.h.m),this.Oe(a,b,c))};l.Oe=function(){this.Ac=this.qr};l.ai=function(){};l.Zb=function(){};l.gu=function(){};l.Ro=function(){};l.open=function(){};Xc.prototype=new Uc;l=Xc.prototype;l.constructor=Xc;
function Xc(a,b,c,d,f){this.type="fourth boss";this.ma(a,b,c,d,f);this.If=!1;this.De=5;this.Gd=!1;this.Xh=!0;this.body.pb(Math.PI/2);this.visibility=0;this.Ua=2E3;this.hc=this.ed=2300;this.nb=!1;this.$d=Math.PI/2;this.Nz=2E4;"easy"==L&&(this.Nz=3E4);this.Rj=.2;this.XD={stunner:8,spear:5,tank:6,mote:6,goo:1,harpoon:4,orbiter:5,disabler:1,fighter:3,slingshot:4,troll:6,deathray:2};this.YD={stunner:6,spear:4,tank:4,mote:4,goo:1,harpoon:3,orbiter:3,disabler:1,fighter:2,slingshot:2,troll:4,deathray:1};
this.ZD={stunner:10,spear:10,tank:75,mote:10,goo:20,harpoon:20,orbiter:8,disabler:20,fighter:30,slingshot:10,troll:10,deathray:50};this.Pz="stunner spear harpoon fighter troll goo orbiter deathray slingshot mote tank disabler".split(" ");this.Cv=0;this.WD=22E3;this.$D=0;this.rr=this.Ay=2;this.zy=Math.PI/4;this.gc=5E3;this.we=[this.gc,this.gc/2];this.An=.25;this.pj=200;this.yp=2;this.wp=0;this.xp=500;this.Zi=[!1,!1];this.er=[!1,!1];this.fl=1;this.xa=10;this.body.ze(10);this.Yk=5;this.Xe=[];this.ax=
1E4;this.uq=!1;this.Bn=this.$w=1250;this.ui=!1;this.Bx=!0;this.fj=G[this.type].fj;for(a=0;a<this.Yk;a++)b=(a+.5)/this.Yk*Math.PI*2+this.body.ha(),c=Zb(this.Ea,G[this.type].zB,this.body.g.position.x+1.5*this.N*Math.cos(Math.PI/5)*Math.cos(b),this.body.g.position.y+1.5*this.N*Math.cos(Math.PI/5)*Math.sin(b),10,17,"static",this),c.pb(b),this.Xe.push({type:"body",Je:a,body:c,size:this.fj*(.8+.2*Yb(.15,.85,Math.abs(1E3-(new Date).getTime()%2E3)/1E3))});this.cA=4E3;this.VD=2E3;this.At=0;this.fd=100;this.qy=
5;this.su=30;this.ry=12E4;"easy"==L&&(this.ry=9E4);this.He=this.qy;this.Mt=25E3;this.Fd=this.Mt-1;this.to=this.ok=this.Rg=1E3;this.$e=document.createElement("canvas");this.Xl=this.$e.getContext("2d");this.$e.width=200;this.$e.height=200;this.so=0;this.Xl.beginPath();this.Xl.moveTo(100+100*Math.cos(8*Math.PI/5),100+100*Math.sin(8*Math.PI/5));for(a=0;5>a;a++)this.Xl.lineTo(100+100*Math.cos(2*Math.PI*a/5),100+100*Math.sin(2*Math.PI*a/5));this.Xl.closePath();this.Xl.fillStyle="black";this.Xl.fill();this.Nt=
!1}l.$=function(a,b){if(!(0==this.nb&&this.hc>.9*this.ed)){var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.save();a.globalAlpha=this.Q?a.globalAlpha*(1-c):a.globalAlpha*(null!=this.visibility?this.visibility:1);c=this.body.g.position;J(a,c.x*b,c.y*b,this.body.ha(),2*this.N*b,2*this.N*b,"adrogantia_head",zb);this.zd(a,b);a.restore()}};
l.$t=function(a,b){a.save();a.globalAlpha=1;var c=this.body.g.position;if(0<this.Fd){var d=1-this.Fd/this.Mt,f=this.N*d*b;this.so=this.body.ha();a.save();a.globalAlpha*=.5;a.translate(c.x*b,c.y*b);a.rotate(this.so);a.drawImage(this.$e,0,0,this.$e.width,this.$e.height,-f,-f,2*f,2*f);a.restore()}else this.Fd>-this.Rg?(this.Nt||(this.Nt=!0,gc("b4darkness")),d=this.Fd/-this.Rg,f=(this.N*(1-d)+60*d)*b,a.save(),a.globalAlpha*=.5,a.translate(c.x*b,c.y*b),a.rotate(this.so),a.drawImage(this.$e,0,0,this.$e.width,
this.$e.height,-f,-f,2*f,2*f),a.restore()):this.Fd>-(this.Rg+this.ok)?(f=60*b,a.save(),a.globalAlpha*=.5,a.translate(c.x*b,c.y*b),a.rotate(this.so),a.drawImage(this.$e,0,0,this.$e.width,this.$e.height,-f,-f,2*f,2*f),a.restore()):this.Fd>-(this.Rg+this.ok+this.to)&&(d=1-(this.Fd+this.Rg+this.ok)/-this.to,f=60*b,a.save(),a.globalAlpha=.5*a.globalAlpha*d,a.translate(c.x*b,c.y*b),a.rotate(this.so),a.drawImage(this.$e,0,0,this.$e.width,this.$e.height,-f,-f,2*f,2*f),a.restore());a.restore()};
l.zd=function(a,b){Yc(this);for(var c in this.Xe)if("body"==this.Xe[c].type){var d=this.Xe[c],f=d.body.g.position,g=d.body.ha();a.save();J(a,f.x*b,f.y*b,g,d.size*b*2,d.size*b*2,"adrogantia_body_bud",zb);a.restore()}};
l.Oc=function(a){if(0<this.hc)this.hc=Math.max(this.hc-a,0),this.visibility=1-this.hc/this.ed;else{0==this.nb&&(this.nb=!0,this.visibility=1);this.He<this.su&&(this.He+=(this.su-this.qy)*a/this.ry,this.He=Math.min(this.He,this.su));if(this.Bx){this.ui=!0;for(var b=0;b<this.Yk;b++){var c=null,c=0==b?{type:"attack",Je:b,Yl:0,body:null,br:null,hm:null}:{type:"spawn",Je:b,Yl:0,body:null,br:null,hm:null};this.Xe.push(c);Zc(this,c)}this.Bx=!1}for(var d in this.Xe)if(b=this.Xe[d],"attack"==b.type||"spawn"==
b.type){var b=this.Xe[d],c=this.Xe[d].Je,f=c/this.Yk*Math.PI*2+this.body.ha();if(0<b.Yl&&!this.ui)b.Yl-=a;else if(null==b.body)b.type=null,Zc(this,b);else{var g=Math.max(.1,Yb(.15,.85,Math.min(1,1-b.hm/b.br))*G["boss four "+b.type+"er"].N),h=this.N+g,h={x:this.body.g.position.x+h*Math.cos(f),y:this.body.g.position.y+h*Math.sin(f)};b.xf.$r(g);b.body.pb(f);b.body.ei(h);b.hm-=a;0>b.hm&&!this.Mj&&(this.Mj=b,this.Zw=c/this.Yk*Math.PI*2)}}d=S(this.body.g.position,Hc(this.n));for(var k in this.i.r)b=this.i.r[k],
b.Q||b==this||"boss four attacker"==b.type||"boss four spawner"==b.type||(6.5>R(b.body.g.position,this.body.g.position)?b.Mc("absorbed"):8>R(b.body.g.position,this.body.g.position)&&(c=Wb(d,S(this.body.g.position,b.body.g.position)),b.body.ja(new b2Vec2(5*b.oa*Math.cos(c),5*b.oa*Math.sin(c)),b.body.h.m),c=c<d?c+Math.PI/2:c-Math.PI/2,b.body.ja(new b2Vec2(b.oa*Math.cos(c),b.oa*Math.sin(c)),b.body.h.m)));0>this.Fd&&this.Fd>-this.Rg?(k=this.Fd/-this.Rg,this.i.gm=1-k):this.Fd<-(this.Rg+this.ok)&&this.Fd>
-(this.Rg+this.ok+this.to)?(k=(this.Fd+this.Rg+this.ok)/-this.to,this.i.gm=k):0<=this.Fd&&(this.i.gm=1);if(this.Mj)if(this.uq)this.Bn-=a,0>this.Bn&&$c(this,this.Mj);else{k=this.body.ha();if("attack"==this.Mj.type)var m=Wb(k,S(this.body.g.position,Hc(this.n))-this.Zw);else"spawn"==this.Mj.type&&(this.ui?m=Wb(k,Math.PI/2):(null==this.Kv&&ad(this),m=Wb(k,this.Kv-this.Zw)));d=this.cA;Xb(k,m)<2*Math.PI*a/d?(this.body.pb(m),this.uq=!0,this.ui?this.Bn=0:(this.Bn=this.$w,this.Mj.xf.fr=!0)):m>k?this.body.pb(this.body.ha()+
2*Math.PI*a/d):this.body.pb(this.body.ha()-2*Math.PI*a/d)}this.$D<=this.WD-500&&(this.xa=G["fourth boss"].xa);Yc(this);this.$d+=a/this.Nz*Math.PI*2;k=m=null;d={x:this.body.g.position.x+100*Math.cos(this.$d),y:this.body.g.position.y+100*Math.sin(this.$d)};if(0>=this.rr)for(this.rr=this.Ay,b=0;b<this.i.r.length;b++)this.i.r[b].id!=this.id&&this.i.r[b]instanceof bd&&this.i.r[b].nb&&Vb(this.$d-this.zy,this.$d+this.zy,S(this.body.g.position,this.i.r[b].body.g.position))&&(c=this.i.r[b].eu(this.body.g.position,
d).Rd,null==m||null!=c&&c<m)&&(m=c,k=this.i.r[b]);else m=this.wf,k=this.vx;this.rr-=1;c=this.n.eu(this.body.g.position,d).Rd;if(null==m||null!=c&&c<m)m=c,k=this.n;k instanceof bd&&k.id!=this.vx.id&&k.nb&&(d=k,0>=d.q[1]&&(d.ds=!0,d.Wm=d.Bv));this.vx=k;this.wf=m;"normal"==L&&(this.Fd-=a,0>this.Fd&&this.Fd<-(this.Rg+this.ok+this.to)&&(this.Fd=this.Mt,this.Nt=!1))}};
function ad(a){var b=2*Math.random()*Math.PI,c={x:a.body.g.position.x+15*Math.cos(b),y:a.body.g.position.y+15*Math.sin(b)},d=Math.min(775/F-c.x,c.x-25/F),f=Math.min(575/F-c.y,c.y-25/F);Jb(a.body.g.position,c,a.i.kf)&&10<Math.min(d,f)?a.Kv=b:ad(a)}
function $c(a,b,c){if(a.ui)for(a.ui=!1,b=0;b<a.Xe.length;b++)c=a.Xe[b],"spawn"==c.type&&$c(a,c,!0);else if("attack"==b.type)b.xf.dir={x:b.body.g.position.x-a.body.g.position.x,y:b.body.g.position.y-a.body.g.position.y},b.body=null,b.Yl=0,a.Mj=null,a.uq=!1,b.xf.body.jg(),b.xf=null,gc("b4attacker");else if("spawn"==b.type){a.Mj=null;a.uq=!1;b.Yl=0;b.body=null;var d=S(a.body.g.position,b.xf.body.g.position),d=new b2Vec2(Math.cos(d),Math.sin(d));d.fa(a.VD);b.xf.body.ja(d,b.xf.body.h.m);b.xf.nb=!0;b.xf.fr=
!1;1!=c&&b.xf.Zb(5E3,!0,!0);Oc(b.xf);b.xf.body.jg();b.xf=null;a.Kv=null;gc("b4spawner")}}
function Yc(a){for(var b=.8+.2*Yb(.15,.85,Math.abs(1E3-(new Date).getTime()%2E3)/1E3),c=[],d=0;5>d;d++)c.push({x:Math.cos(2*Math.PI*d/5)*b*a.fj,y:Math.sin(2*Math.PI*d/5)*b*a.fj});for(d in a.Xe){var f=a.Xe[d];if("body"==f.type){var f=a.Xe[d],g=(a.Xe[d].Je+.5)/a.Yk*Math.PI*2+a.body.ha();f.body.Cc.bb.Y=c;f.body.ei({x:a.body.g.position.x+(a.N+b*a.fj)*Math.cos(Math.PI/5)*Math.cos(g),y:a.body.g.position.y+(a.N+b*a.fj)*Math.cos(Math.PI/5)*Math.sin(g)});f.body.pb(g);f.size=b*a.fj}}}
function cd(a){for(var b=0,c=0;c<a.i.r.length;c++)"boss four spawner"==a.i.r[c].type&&(b+=1);return b}
function Zc(a,b){if(null==b.type){a.At+=1;var c=4;.5>Vc(a)&&3<cd(a)&&(c*=1.5);2>cd(a)&&(c=3);b.type=0==a.At%c?"spawn":"attack"}var c=b.Je/a.Yk*Math.PI*2+a.body.ha(),d=a.N+1.5*G["boss four "+b.type+"er"].vy,f=a.body.g.position.x+d*Math.cos(c),d=a.body.g.position.y+d*Math.sin(c),g=null;"attack"==b.type?g=new dd(a.Ea,f,d,a.i.rc,a.w,.1):(a.Cv+=1,g=a.Pz[(a.Cv-1)%a.Pz.length],g=new bd(a.Ea,f,d,a.i.rc,a.w,g,"easy"==L?a.YD[g]:a.XD[g],a.ZD[g],a,.1));b.body=g.body;b.xf=g;b.body.pb(c);a.i.$h.push(g);a.i.rc+=
1;b.br=a.ui&&"spawn"==b.type?a.ax/10:a.ax;b.hm=b.br}
l.gh=function(a,b){if(!(0==this.nb&&this.hc>.9*this.ed)){a.save();var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.globalAlpha=this.Q?a.globalAlpha*(1-c):a.globalAlpha*(null!=this.visibility?this.visibility:1);this.rk(a,b);this.nb&&(a.beginPath(),c=null!=this.wf?this.wf:100,a.moveTo((this.body.g.position.x+this.Rj*Math.cos(this.$d+Math.PI/2))*b,(this.body.g.position.y+this.Rj*Math.sin(this.$d+Math.PI/2))*b),a.lineTo((this.body.g.position.x+this.Rj*Math.cos(this.$d-Math.PI/2))*b,(this.body.g.position.y+
this.Rj*Math.sin(this.$d-Math.PI/2))*b),a.lineTo((this.body.g.position.x+c*Math.cos(this.$d)+this.Rj*Math.cos(this.$d-Math.PI/2))*b,(this.body.g.position.y+c*Math.sin(this.$d)+this.Rj*Math.sin(this.$d-Math.PI/2))*b),a.lineTo((this.body.g.position.x+c*Math.cos(this.$d)+this.Rj*Math.cos(this.$d+Math.PI/2))*b,(this.body.g.position.y+c*Math.sin(this.$d)+this.Rj*Math.sin(this.$d+Math.PI/2))*b),a.closePath(),a.globalAlpha*=.5,a.fillStyle="black",a.fill(),a.globalAlpha=1);a.restore()}};
l.rk=function(a,b){var c=this.body.g.position;J(a,c.x*b,c.y*b,this.body.ha(),200,200,"adrogantia_glow",zb)};l.move=function(){};l.Ye=function(a){this.Q||a!==this.n||(a=S(this.body.g.position,Hc(this.n)),this.n.body.ja(new b2Vec2(this.fd*Math.cos(a),this.fd*Math.sin(a)),this.n.body.h.m))};l.vj=function(){for(var a=[],b=0;b<this.Fg[0].length;b++){var c=this.body.g.position.wb();c.Lg(this.Fg[0][b]);a.push(c)}return a};l.cr=function(){};dd.prototype=new Fa;l=dd.prototype;l.constructor=dd;function dd(a,b,c,d,f,g){this.type="boss four attacker";this.ma(a,b,c,d,f);this.size=g;this.Pf=!1;this.fd=100;this.Rz=200;this.dir=null;this.yn=this.fr=!1}
l.$=function(a,b){var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.save();a.globalAlpha*=1-c;this.fr?J(a,this.body.g.position.x*b,this.body.g.position.y*b,this.body.ha(),this.size*b*2,this.size*b*2,"adrogantia_attack_bud_firing",zb):J(a,this.body.g.position.x*b,this.body.g.position.y*b,this.body.ha(),this.size*b*2,this.size*b*2,"adrogantia_attack_bud",zb);a.restore()};
l.Oc=function(){if(this.dir){var a=new b2Vec2(this.dir.x,this.dir.y);a.xb();a.fa(this.oa);"easy"==L&&a.fa(.5);this.body.ja(a,this.body.h.m)}};l.move=function(){};
l.Ye=function(a){if(!(this.Q||0<this.q[1]))if(a===this.n){var b=S(this.body.g.position,this.n.body.g.position);this.n.body.ja(new b2Vec2(this.fd*Math.cos(b),this.fd*Math.sin(b)),this.n.body.h.m)}else if(this.dir&&"boss four spawner"==a.type){var b=S({x:0,y:0},this.dir),c=Wb(b,S(this.body.g.position,a.body.g.position)),b=b<c?b-Math.PI/2:b+Math.PI/2;a.body.ja(new b2Vec2(this.Rz*Math.cos(b),this.Rz*Math.sin(b)),a.body.h.m)}else this.dir&&"fourth boss"!=a.type&&(S(this.body.g.position,a.body.g.position),
b=new b2Vec2(this.dir.x,this.dir.y),b.xb(),b.fa(100*a.oa),a.body.ja(b,a.body.h.m))};l.Hf=function(){};l.Lq=function(){if(this.dir)for(var a=0;a<this.i.Zd.length;a++)if(Lb(this.i.Zd[a],this.body.g.position)){0>=this.qa.open&&this.Om?this.Mc("accident"):this.Mc("kill");break}};l.$r=function(a){for(var b=[],c=0;5>c;c++)b.push({x:Math.cos(2*Math.PI*c/5)*a,y:Math.sin(2*Math.PI*c/5)*a});this.body.Cc.bb.Y=b;this.size=a;this.body.jg()};bd.prototype=new Fa;l=bd.prototype;l.constructor=bd;function bd(a,b,c,d,f,g,h,k,m,q){this.type="boss four spawner";this.ma(a,b,c,d,f);this.Go=g;this.color="black";this.xy=G[this.Go].color;this.ds=!1;this.Oz=h;this.hD=k;this.size=q;this.Pf=!1;this.parent=m;this.fr=this.nb=!1;this.Bv=1E3;this.Wm=0;this.He=2;this.fd=100}
l.Oc=function(a){if(!this.Q&&(this.nb&&(0<this.Wm?(this.$r(G[this.type].N*(1+Yb(.15,.85,.5-Math.abs(this.Wm/this.Bv-.5)))),this.Wm-=a):this.size!=G[this.type].N&&this.$r(G[this.type].N)),this.ds&&this.Wm<this.Bv/2)){gc("b4spawneract");a=S(this.parent.body.g.position,this.body.g.position);for(var b=0,c=Math.max(this.Oz,4),d=0;d<this.Oz;d++){if(this.i.mj[this.Go]+d>=this.i.em[this.Go][6]){this.Zb(500);this.ds=!1;return}for(var f=a+2*Math.PI*(b+1/((b-b%c)/c+1))/c;!Jb(this.body.g.position,{x:this.body.g.position.x+
10*Math.cos(f),y:this.body.g.position.y+10*Math.sin(f)},this.i.kf);)b+=1,f=a+2*Math.PI*(b+1/((b-b%c)/c+1))/c;var g=[this.body.g.position.x+2*this.N*Math.cos(f),this.body.g.position.y+2*this.N*Math.sin(f)],g=new G[this.Go].className(this.Ea,g[0],g[1],this.i.rc,this.w),f=new b2Vec2(Math.cos(f),Math.sin(f));f.fa(this.hD);g.body.ja(f,g.body.h.m);g.Ld=g.ue;this.i.$h.push(g);this.i.rc+=1;b+=1}this.ds=!1;this.Zb(1E3)}};
l.$r=function(a){for(var b=[],c=0;5>c;c++)b.push({x:Math.cos(2*Math.PI*c/5)*a,y:Math.sin(2*Math.PI*c/5)*a});this.body.Cc.bb.Y=b;this.size=a;this.body.jg()};l.zd=function(a,b){0<this.q[1]&&this.vf&&!this.Q&&(a.beginPath(),a.arc(this.body.g.position.x*b,this.body.g.position.y*b,this.N*b*1.5,-.5*Math.PI,-.5*Math.PI+this.q[1]/this.oC*Math.PI*1.998,!0),a.lineWidth=2,a.strokeStyle="red",a.stroke())};l.Zb=function(a,b){b&&(this.vf=b);this.q[1]=Math.max(a,this.q[1]);this.oC=this.q[1]};l.Ye=function(){};
l.Hf=function(a,b,c){this.nb&&(this.body.ja(new b2Vec2(this.He*b*Math.cos(c),this.He*b*Math.sin(c)),this.body.h.m),this.Oe(a,b,c))};
l.$=function(a,b){var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.save();a.globalAlpha*=1-c;J(a,this.body.g.position.x*b,this.body.g.position.y*b,this.body.ha(),this.size*b*2,this.size*b*2,"adrogantia_spawner",zb);0<this.q[1]&&(a.globalAlpha*=.5);var d=this.Go,c=this.body.g.position.x*b,f=this.body.g.position.y*b,g=this.size*b*.7,h=this.body.ha();a.save();h&&(a.translate(c,f),a.rotate(h),a.translate(-c,-f));h=Math.min(1/G[d].N,1)*g/2;"boss"==d.slice(d.length-4)&&(h=2/G[d].N*g/2);for(g=0;g<
G[d].Xb.length;g++){var k=G[d].Xb[g];Ha(a,c,f,k,h,"black")}if("undefined"!==typeof G[d].nj)for(g=0;g<G[d].nj.length;g++)k=G[d].nj[g],Ha(a,c,f,k,h,"black");d=G[d].Wx;if("undefined"!==typeof d)for(g=0;g<d.length;g++)a.beginPath(),k=d[g],a.moveTo(c+h*k.x1,f+h*k.y1),a.lineTo(c+h*k.x2,f+h*k.y2),a.lineWidth=2,a.strokeStyle="black",a.stroke();a.restore();a.restore();this.zd(a,b)};l.move=function(){};ed.prototype=new Uc;l=ed.prototype;l.constructor=ed;
function ed(a,b,c,d,f){this.type="first boss";this.Ea=a;this.ma(a,b,c,d,f);this.If=!1;this.De=5;this.Gg=this.gc=562.5;this.Gd=!1;this.Xh=!0;this.gc=3E3;this.Hz=2;this.Gk=2E4;this.Ud=this.Gk-1;this.xi=6E3;this.nb=this.To=!1;this.ar=["stunner","spear","tank"];this.Xm={stunner:5,spear:3,tank:20};this.Pf=!1;this.body.pb(Math.PI/2);this.uy=Math.PI/2;this.visibility=0;this.Ua=2E3;this.dA=1E3;"easy"==L&&(this.dA=1500);this.cA=5E3;this.body.ze(100*G[this.type].xa);this.Mf=40;"easy"==L&&(this.Mf=30);this.nC=
1;this.sz=8;this.Qw=750;this.Iy=this.xx=400;this.wz=300;this.rz=400;this.lz=300;this.nD=(this.xx+this.rz+this.wz+this.Iy+this.lz)/2;this.kE=1500;this.qr=150;this.Ac=0;this.Po={left:0,right:0};this.Kj={left:0,right:0};this.qf={left:this.Qw,right:this.Qw};this.data=G[this.type];this.state="turret";this.qc={left:"none",right:"none"};this.gb={};this.Wa={};a=G[this.type].Pv[0].Z;b=G[this.type].Gu[0].Z;c=G[this.type].hu[0].Z;d=this.N;f=this.body.g.position.x;var g=this.body.g.position.y,h=this.nC;this.Wa.lu=
Zb(this.Ea,G[this.type].Pv,f+d+a-2*h,g,.01,8,"dynamic",this);this.gb.lu=fd(this,new b2Vec2(f+d-h,g),this.body,this.Wa.lu);this.Wa.ll=Zb(this.Ea,G[this.type].Gu,f+d+2*a+b-4*h,g,.01,8,"dynamic",this);this.gb.ll=fd(this,new b2Vec2(f+d+2*a-3*h,g),this.Wa.lu,this.Wa.ll);this.Wa.lh=Zb(this.Ea,G[this.type].hu,f+d+2*a+2*b-4*h+.25*c,g,.01,8,"dynamic",this);this.Wa.lh.pb(Math.PI/4);this.gb.lh=fd(this,new b2Vec2(f+d+2*a+2*b-4*h+.25*c,g),this.Wa.ll,this.Wa.lh);this.Wa.ru=Zb(this.Ea,G[this.type].Pv,f-(d+a-2*h),
g,.01,8,"dynamic",this);this.gb.ru=fd(this,new b2Vec2(f-(d-h),g),this.body,this.Wa.ru);this.Wa.rl=Zb(this.Ea,G[this.type].Gu,f-(d+2*a+b-4*h),g,.01,8,"dynamic",this);this.gb.rl=fd(this,new b2Vec2(f-(d+2*a-3*h),g),this.Wa.ru,this.Wa.rl);this.Wa.rh=Zb(this.Ea,G[this.type].hu,f-(d+2*a+2*b-4*h+.25*c),g,.01,8,"dynamic",this);this.Wa.rh.pb(Math.PI/4);this.gb.rh=fd(this,new b2Vec2(f-(d+2*a+2*b-4*h+.25*c),g),this.Wa.rl,this.Wa.rh);this.Ek={};this.Dg={};this.Uh={left:"none",right:"none"};this.By={left:0,right:0};
this.Or=13;this.Lm={left:0,right:0};this.Zk=this.lv=13500;this.Nm=2E3;this.mv=200;this.tz=8;this.Mm=15;this.Pr=150;this.gD=!1;this.cz=1E4;this.az=12E3;this.bz=6E3;this.Tk=this.cz/2;this.Em=this.az;this.Om=!1;this.Jy=1E3;this.Fv=this.Uo=0;this.cy=!0;this.He=20}
function gd(a,b){var c=arm;hd(a,c,a.Iy);if("left"==c){var d=a;a.qc[c]="loading";id(a,"lu",.3*-Math.PI);id(a,"lh",Math.PI/4);id(a,"ll",function(){return Wb(d.gb.ll.ee(),S(d.gb.ll.wd(),Hc(d.n))-d.gb.lu.ee()-(d.body.ha()-d.uy))});a.Lm[c]=S(a.gb.ll.wd(),b);a.Uh[c]={x:a.gb.ll.wd().x+Math.cos(a.Lm[c])*a.Or,y:a.gb.ll.wd().y+Math.sin(a.Lm[c])*a.Or};a.Uo=a.Jy}"right"==c&&(d=a,a.qc[c]="loading",id(a,"ru",.3*Math.PI),id(a,"rh",-Math.PI/4),id(a,"rl",function(){return Wb(d.gb.rl.ee(),Math.PI+S(d.gb.rl.wd(),Hc(d.n))-
d.gb.ru.ee()-(d.body.ha()-d.uy))}),a.Lm[c]=S(a.gb.rl.wd(),b),a.Uh[c]={x:a.gb.rl.wd().x+Math.cos(a.Lm[c])*a.Or,y:a.gb.rl.wd().y+Math.sin(a.Lm[c])*a.Or},a.Uo=a.Jy)}function jd(a,b,c){hd(a,b,a.xx);"left"==b?(a.qc[b]="default",id(a,"lu",-Math.PI/4),id(a,"ll",Math.PI/2),id(a,"lh",0)):"right"==b&&(a.qc[b]="default",c&&(a.qc[b]="delay_default"),id(a,"ru",Math.PI/4),id(a,"rl",-Math.PI/2),id(a,"rh",0))}
function kd(a,b){hd(a,b,a.kE);"left"==b?(a.qc[b]="loading_turret",id(a,"lu",Math.PI/2),id(a,"ll",0),id(a,"lh",0)):"right"==b&&(a.qc[b]="loading_turret",id(a,"ru",-Math.PI/2),id(a,"rl",0),id(a,"rh",0))}function id(a,b,c){a.Ek[b]={start:a.gb[b].ee(),end:c}}function hd(a,b,c){a.qf[b]=c;a.By[b]=c}function fd(a,b,c,d){var f=new n.l.J.Jl;f.kd(c,d,b);f.dm=!0;f.Ly=-Math.PI/2;f.jA=Math.PI/2;f.Oq=!1;return a.Ea.AA(f)}
l.Oc=function(a){this.Fv+=a;1==this.i.r.length&&this.Em>this.bz&&(this.Em=this.bz);if(0<this.hc)this.hc=Math.max(this.hc-a,0),this.visibility=1-this.hc/this.ed;else{0==this.nb&&(this.nb=!0,this.visibility=1,this.body.ze(G[this.type].xa));0<this.Ac&&(this.Ac-=a);0<this.Uo&&(this.Uo-=a);"turret"==this.state?(this.Tk-=a,0>this.Tk&&(this.state="punching",jd(this,"left",!0),this.Kj.left=0,this.Kj.right=0,jd(this,"right",!0),this.Em=this.az)):"punching"==this.state&&(this.Em-=a,0>this.Em&&ld(this));for(arm in this.qc){this.qf[arm]-=
a;0<this.Po[arm]&&(this.Po[arm]-=a);"none"==this.qc[arm]&&ld(this);if("turret"==this.state)var b=Wb(this.body.ha(),S(this.body.g.position,Hc(this.n))+(Math.abs(this.Fv%2E3-1E3)-500)/500*Math.PI/8);else"punching"==this.state&&(b=Wb(this.body.ha(),S(this.body.g.position,Hc(this.n))));if("loading"==this.qc[arm])if(this.body.pb(b),0>this.qf[arm]){Hc(this.n).wb();var c=arm;hd(this,c,this.rz);"left"==c&&"left"==c&&(this.Dg.ll=this.gb.ll.ee(),this.Dg.lu=this.gb.lu.ee(),this.Dg.lh=this.gb.lh.ee(),this.qc[c]=
"punching",this.gb.ll.ph(0,Math.PI),this.gb.lu.ph(-Math.PI,Math.PI),this.gb.lh.ph(0,0));"right"==c&&(this.Dg.rl=this.gb.rl.ee(),this.Dg.ru=this.gb.ru.ee(),this.Dg.rh=this.gb.rh.ee(),this.qc[c]="punching",this.gb.rl.ph(-Math.PI,0),this.gb.ru.ph(-Math.PI,Math.PI),this.gb.rh.ph(0,0))}else md(this);"default"==this.qc[arm]&&(this.body.pb(b),0>this.qf[arm]?0<this.Kj[arm]?this.Kj[arm]-=a:gd(this,Hc(this.n)):md(this));"delay_default"==this.qc[arm]&&(this.body.pb(b),this.qf[arm]<-this.nD?0<this.Kj[arm]?this.Kj[arm]-=
a:gd(this,Hc(this.n)):md(this));if("punching"==this.qc[arm])if(0>this.qf[arm]){c=arm;this.qc[c]="paralyzed";if("right"==c)var d=["rl","ru","rh"];"left"==c&&(d=["ll","lu","lh"]);c=void 0;for(c in d){var f=d[c];this.gb[f].ph(this.gb[f].ee(),this.gb[f].ee())}this.qf[arm]=this.lz}else{c=arm;if("left"==c){var f=S(this.Wa.lh.g.position,this.Uh[c]),f=new b2Vec2(Math.cos(f),Math.sin(f)),g=R(this.Wa.lh.g.position,this.Uh[c]);this.gb.lu.wd();10>g&&f.fa(g/10);"punching"==this.qc[c]&&f.fa(this.sz);this.Wa.lh.ja(f,
this.Wa.lh.h.m)}"right"==c&&(f=S(this.Wa.rh.g.position,this.Uh[c]),f=new b2Vec2(Math.cos(f),Math.sin(f)),g=R(this.Wa.rh.g.position,this.Uh[c]),this.gb.ru.wd(),10>g&&f.fa(g/10),"punching"==this.qc[c]&&f.fa(this.sz),this.Wa.rh.ja(f,this.Wa.rh.h.m))}"retract"==this.qc[arm]&&(0>this.qf[arm]?jd(this,arm):md(this));"paralyzed"==this.qc[arm]&&0>this.qf[arm]&&(c=arm,hd(this,c,this.wz),"left"==c?(this.Uh.left=null,this.qc[c]="retract",id(this,"lu",this.Dg.lu),id(this,"ll",this.Dg.ll),id(this,"lh",this.Dg.lh)):
"right"==c&&(this.Uh.right=null,this.qc[c]="retract",id(this,"ru",this.Dg.ru),id(this,"rl",this.Dg.rl),id(this,"rh",this.Dg.rh)));"loading_turret"==this.qc[arm]&&(this.body.pb(b),0>this.qf[arm]?this.qc[arm]="turret_firing":md(this));if("turret_firing"==this.qc[arm]&&(this.body.pb(b),0>this.qf[arm])){g=arm;c=new b2Vec2(Math.cos(this.body.ha()),Math.sin(this.body.ha()));f=this.ar[Math.floor(Math.random()*this.ar.length)];c.xb();var h=null;"left"==g&&(h={x:this.Wa.lh.g.position.x+5*c.x,y:this.Wa.lh.g.position.y+
5*c.y});"right"==g&&(h={x:this.Wa.rh.g.position.x+5*c.x,y:this.Wa.rh.g.position.y+5*c.y});c.fa(this.Xm[f]);g=new this.i.Sx[f](this.Ea,h.x,h.y,this.i.rc,this.w);this.i.$h.push(g);g.body.ja(c,g.body.h.m);g.ai(this.Tk+2E3);"stunner"==f&&g.open(1500);g.Ld=2*g.ue;g.Eg(this.body.ha());0>this.Ud&&g.Ro(this.Ud+this.xi);this.i.rc+=1;this.qf[arm]=this.dA}}if("normal"==L){if(0>this.Ud&&this.Ud>.9*-this.xi&&!this.To)for(this.To=!0,gc("b1shrink"),this.Gg>this.gc/this.Hz&&(this.Gg=this.gc/this.Hz),this.n.Ro(Math.round(this.xi)),
b=0;b<this.i.r.length;b++)this.i.r[b].id!=this.id&&this.i.r[b].Ro(Math.round(this.xi));this.Ud<.9*-this.xi&&this.To&&(this.To=!1,gc("b1grow"));this.Ud<-this.xi&&(this.Ud=this.Gk);this.Ud-=a;if(!(this.Ud>.9*this.Gk)&&this.Ud<.175*this.Gk&&0<=this.Ud)for(a=this.Ud;a>.05*this.Gk;)a-=.05*this.Gk}}};
function md(a){var b=arm,c=[];"left"==b&&(c=["lu","ll","lh"]);"right"==b&&(c=["ru","rl","rh"]);for(index in c){var d=c[index];if("undefined"!==typeof a.Ek[d].start&&"undefined"!==typeof a.Ek[d].end){var f=Math.max(a.qf[b]/a.By[b],0),g=null,g="function"==typeof a.Ek[d].end?a.Ek[d].end():a.Ek[d].end,f=f*a.Ek[d].start+(1-f)*g;a.gb[d].ph(f,f)}}}
function nd(a,b,c,d,f){var g=b.g.position;0<a.Ac||0<a.Po[f]?J(c,g.x*d,g.y*d,b.ha()+Math.PI/4,64,64,"immunitas_arm_red",wb):J(c,g.x*d,g.y*d,b.ha()+Math.PI/4,64,64,"immunitas_arm",wb)}function od(a,b,c,d,f){var g=b.g.position;0<a.Ac||0<a.Po[f]?J(c,g.x*d,g.y*d,b.ha()+Math.PI/4,64,64,"immunitas_hand_red",wb):J(c,g.x*d,g.y*d,b.ha()+Math.PI/4,64,64,"immunitas_hand",wb)}
l.rk=function(a,b){var c=this.body.g.position;0<this.Ac?J(a,c.x*b,c.y*b,this.body.ha(),285,285,"immunitas_red_glow",wb):J(a,c.x*b,c.y*b,this.body.ha(),285,285,"immunitas_glow",wb);var d=[];for(index in d)if(c=d[index],this.Wa[c]){var f=this.Wa[c],c=f.g.position;J(a,c.x*b,c.y*b,f.ha(),190,190,"immunitas_glow",wb)}};
l.$=function(a,b){if(!(0==this.nb&&this.hc>.9*this.ed)){var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.save();a.globalAlpha=this.Q?a.globalAlpha*(1-c):a.globalAlpha*(this.visibility?this.visibility:1);nd(this,this.Wa.lu,a,b,"left");nd(this,this.Wa.ru,a,b,"right");nd(this,this.Wa.ll,a,b,"left");nd(this,this.Wa.rl,a,b,"right");od(this,this.Wa.lh,a,b,"left");od(this,this.Wa.rh,a,b,"right");c=this.body.g.position;0<this.Ac?J(a,c.x*b,c.y*b,this.body.ha()+Math.PI/4,64,64,"immunitas_head_red",wb):
J(a,c.x*b,c.y*b,this.body.ha()+Math.PI/4,64,64,"immunitas_head",wb);a.restore();this.zd(a,b)}};
l.Fx=function(a,b){var c=1-Math.max(this.Ud,0)/this.Gk;a.beginPath();var d=b*this.body.g.position.x,f=b*this.body.g.position.y;0<c&&(a.moveTo(d,f-106),a.lineTo(d+106*Math.min(1,c/.25),f-106+106*Math.min(1,c/.25)));.25<c&&(a.moveTo(d+106,f),a.lineTo(d+106-106*Math.min(1,(c-.25)/.25),f+106*Math.min(1,(c-.25)/.25)));.5<c&&(a.moveTo(d,f+106),a.lineTo(d-106*Math.min(1,(c-.5)/.25),f+106-106*Math.min(1,(c-.5)/.25)));.75<c&&(a.moveTo(d-106,f),a.lineTo(d-106+106*Math.min(1,(c-.75)/.25),f-106*Math.min(1,(c-
.75)/.25)));a.lineWidth=15;a.strokeStyle=w["boss 1"];a.stroke()};function $d(a,b,c){for(var d=0;d<a.tz;d++){var f=d/a.tz*Math.PI*2;J(b,a.body.g.position.x*c+(a.Mm+.9)*c*Math.cos(f),a.body.g.position.y*c+(a.Mm+.9)*c*Math.sin(f),f,70,70,"immunitas_arrow",wb);b.globalAlpha*=.8;b.beginPath();b.arc(a.body.g.position.x*c,a.body.g.position.y*c,a.Mm*c,0,2*Math.PI,!1);b.strokeStyle="black";b.lineWidth=2;b.stroke();b.globalAlpha/=.8}}
l.zd=function(a,b){this.Q||(a.save(),null!=this.Zk&&(this.Zk<this.Nm?(a.beginPath(),a.globalAlpha=(this.Nm-this.Zk)/this.Nm*.7,$d(this,a,b)):this.Zk>this.lv-this.Nm/2&&this.gD&&(a.beginPath(),a.globalAlpha=(this.Zk-(this.lv-this.Nm/2))/this.Nm/2*.7,$d(this,a,b)),this.Zk<this.mv&&(a.beginPath(),a.arc(this.body.g.position.x*b,this.body.g.position.y*b,(this.mv-this.Zk)/this.mv*this.Mm*b,0,2*Math.PI,!1),globalAlpha=.7,a.lineWidth=4,a.strokeStyle=this.color,a.stroke())),a.restore())};
l.gh=function(a,b){if(!(0==this.nb&&this.hc>.9*this.ed)){a.save();if(this.Q){var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.globalAlpha*=1-c}else a.globalAlpha*=this.visibility?this.visibility:1;this.rk(a,b);c=this.body.g.position;a.globalAlpha*=.6;0<this.Ac?J(a,c.x*b,c.y*b,Math.PI/4,173,173,"immunitas_aura_red",wb):J(a,c.x*b,c.y*b,Math.PI/4,173,173,"immunitas_aura",wb);a.globalAlpha/=.6;0<=this.Ud&&this.Fx(a,b);a.globalAlpha*=.8;0>this.Ud&&this.Ud>=-this.xi&&(c=Math.min(5-Math.abs((-this.Ud-
this.xi/2)/(this.xi/10)),1),a.globalAlpha*=c/2,a.fillStyle=this.color,a.fillRect(0,0,Kc,Lc));a.restore()}};l.move=function(){var a=this.body.ha(),b=S(this.body.g.position,Hc(this.n));Math.min(250,Xb(a,b)/Math.PI*1E3);Vb(a-Math.PI,a,b)?this.body.pb(this.body.ha()-Math.PI/2E3):this.body.pb(this.body.ha()+Math.PI/2E3)};
l.Ye=function(a,b){if(!this.Q&&this.nb)if(a==this.n&&gc("b1hit"),b==this.body){var c=S(this.body.g.position,a.body.g.position);a.body.ja(new b2Vec2(4*this.Mf*Math.cos(c),4*this.Mf*Math.sin(c)),a.body.h.m)}else{var c=S(this.body.g.position,a.body.g.position),d=this.Mf;this.To&&(d*=2);d="punching"==this.state?1.5*d:b!=this.Wa.lh&&b!=this.Wa.rh?2*d:1*d;a.body.ja(new b2Vec2(d*Math.cos(c),d*Math.sin(c)),a.body.h.m)}};
l.vj=function(){for(var a=[],b=0;b<this.Fg[0].length;b++){var c=this.body.g.position.wb();c.Lg({x:.6*this.Fg[0][b].x,y:.6*this.Fg[0][b].y});a.push(c)}return a};l.ag=function(){var a=S(this.body.g.position,Hc(this.n));this.n.body.ja(new b2Vec2(this.Mf*Math.cos(a),this.Mf*Math.sin(a)),this.n.body.h.m)};function ld(a){a.state="turret";kd(a,"left");kd(a,"right");a.Tk=a.cz;a.Uh.left=null;a.Uh.right=null;a.cy&&(a.Tk/=2,a.cy=!1)}
l.cr=function(){if(R(this.body.g.position,Hc(this.n))<=this.Mm){var a=S(this.body.g.position,Hc(this.n));this.n.body.ja(new b2Vec2(this.Pr*Math.cos(a),this.Pr*Math.sin(a)),this.n.body.h.m)}for(a=0;a<this.i.r.length;a++)if(this.i.r[a]!==this&&R(this.body.g.position,this.i.r[a].body.g.position)<=this.Mm){var b=S(this.body.g.position,this.i.r[a].body.g.position);this.i.r[a].body.ja(new b2Vec2(this.Pr*Math.cos(b),this.Pr*Math.sin(b)),this.i.r[a].body.h.m);this.i.r[a]instanceof ae||this.i.r[a].open(1500)}};be.prototype=new Uc;l=be.prototype;l.constructor=be;
function be(a,b,c,d,f){this.type="third boss";this.ma(a,b,c,d,f);this.If=!1;this.De=5;this.gc=1500;this.Gg=5;this.Gd=!1;this.Xh=!0;this.nb=!1;this.body.pb(7*Math.PI/16);this.Ua=2E3;this.Ac=this.visibility=0;this.qr=150;this.Mf=200;"easy"==L&&(this.Mf=120);this.Yd=16;this.nc={};this.Sj=2200;"easy"==L&&(this.Sj=3500);this.Lp=1500;"easy"==L&&(this.Lp=2500);this.dg=this.Lp;this.Gv=.7;this.Pf=!1;this.jh=16*this.Sj*(1-this.Gv);this.qs=4E3;"easy"==L&&(this.qs=5E3);this.fn=this.qs;this.rE=16;this.ce=0;this.Sb=
"gap";this.gg=this.nl=1E3;this.Rp=this.sE=2E3;this.Zj=4;this.en=4.3;this.Dy=-1;this.oA=1E3;this.di=0;this.Tj=this.Hv=4500;this.Kp=.75;this.Yt=0;this.ic="extend";this.eg=this.jl=500;this.vo=this.N+2;this.HB=18;this.Ym=this.N;this.Sp=0;this.Qg=ce(this);this.cg=[];this.es=this.Dv=200;this.ps=!1;this.fl={stunner:12,spear:9,tank:5,mote:9,goo:1,harpoon:5,disabler:1,fighter:3,troll:9};if("easy"==L)for(var g in this.fl)this.fl[g]*=.5,this.fl[g]=Math.ceil(this.fl[g]);this.Xm={stunner:25,spear:18,tank:200,
mote:10,goo:200,harpoon:400,disabler:300,fighter:400,troll:20};this.TD={stunner:500,spear:1E3,tank:2E3,mote:500,goo:0,harpoon:5E3,disabler:0,fighter:5E3,troll:2E3,frenzy:1E3};this.Qj=2E4;this.Pe=this.Qj-1;this.dd=7E3;this.Mi=!1;this.cl=-1;this.Qm=!1;for(a=0;a<this.Yd;a++)b=Zb(this.Ea,G[this.type].eB,this.body.g.position.x,this.body.g.position.y,10,16,"static",this),b.pb(this.body.ha()+Math.PI/(this.Yd/2)*a),this.nc[a]={interval:this.Sj,duration:0,Sk:0,wf:this.N,body:b,$c:this.Gv}}
function ce(a){var b=["tank","fighter","troll","harpoon"],c=["stunner","spear","goo","disabler"],d="mote harpoon stunner spear goo disabler tank fighter troll".split(" ");6<a.i.r.length&&(c.push("frenzy"),d.push("frenzy"));a=[];var f=Math.floor(Math.random()*b.length);a.push(b[f]);d.splice(d.indexOf(b[f]),1);b.splice(f,1);f=Math.floor(Math.random()*b.length);a.push(b[f]);d.splice(d.indexOf(b[f]),1);b=Math.floor(Math.random()*d.length);a.push(d[b]);-1!=c.indexOf(d[b])&&c.splice(c.indexOf(d[b]),1);
a.push(c[Math.floor(Math.random()*c.length)]);return a}
l.Oc=function(a){if(0<this.hc)this.hc=Math.max(this.hc-a,0),this.visibility=1-this.hc/this.ed;else{0==this.nb&&(this.nb=!0,this.visibility=1,this.body.ze(G[this.type].xa));this.Qm&&(0==this.cl%2?this.body.pb(this.body.ha()+2*Math.PI*a/this.jh):1==this.cl%2&&this.body.pb(this.body.ha()-2*Math.PI*a/this.jh));if("normal"==L){if(0>this.Pe&&!this.Mi&&"activate"!=this.Sb&&"fadeout"!=this.Sb&&"gap"!=this.Sb){this.Pe=0;this.Mi=!0;this.n.Zb(Math.round(this.dd));for(var b=0;b<this.i.r.length;b++)this.i.r[b].id!=
this.id&&this.i.r[b].Zb(Math.round(this.dd),!0,!0);"fadein"==this.Sb?(this.gg=this.nl-this.gg,this.Sb="fadeout",this.ce=null):"spinning"==this.Sb||"activate"==this.Sb?(this.gg=this.nl,this.Sb="fadeout","spinning"==this.Sb&&(this.ce=null)):"gap"==this.Sb&&(this.Rp=this.Pe+this.dd);"retract"==this.ic?(this.eg=this.jl-this.eg,this.ic="extend"):"gap"==this.ic?(this.eg=this.jl,this.ic="extend"):"striking"==this.ic?(de(this),this.ic="frenzy",this.Qm=!1,this.Tj=this.Pe+this.dd):"frenzy"==this.ic&&(this.Tj=
this.Pe+this.dd);this.cg=[]}this.Mi&&this.Pe<-this.dd&&(this.Mi=!1,this.Pe=this.Qj);this.Pe-=a}"extend"==this.ic?(this.eg-=a,b=Math.min(1-this.eg/this.jl,1),this.Ym=this.N+b*(this.vo-this.N),ee(this,this.Ym),0>this.eg&&(this.Mi?(this.ic="frenzy",this.Tj=this.Pe+this.dd):(this.ic="striking",this.Qm=!0,this.cl+=1),this.dg=0)):"striking"==this.ic?(fe(this),15>=R(this.body.g.position,Hc(this.n))?(this.dg-=a,0>=this.dg&&!(0<this.di&&"frenzy"==this.Qg[this.ce])&&(this.dg=this.Lp,ge(this))):this.dg-=a):
"retract"==this.ic?(this.eg-=a,b=Math.max(this.eg/this.jl,0),this.Ym=this.N+b*(this.vo-this.N),ee(this,this.Ym),fe(this),0>this.eg&&(this.ic="gap")):"gap"==this.ic?fe(this):"frenzy"==this.ic&&(fe(this),this.dg-=a,this.Tj-=a,0>=this.dg&&this.Tj>this.Kp*this.Sj&&(this.dg=this.Lp*this.Kp,ge(this)),0>this.Tj&&(this.ic="striking",this.Qm=!0,this.cl+=1,this.dg=this.Lp));if("fadein"==this.Sb)this.ce=0,this.gg-=a,this.Sp=Math.min(1-this.gg/this.nl,1),0>=this.gg&&(this.Sb="spinning",this.Sp=1,this.fn=this.qs);
else if("spinning"==this.Sb)this.fn-=a,b=Math.pow(Math.min(1-this.fn/this.qs,1),1),this.ce=Math.floor(b*this.rE)%this.Zj,this.Dy!=this.ce&&(this.Dy=this.ce,gc("b3tick")),0>=this.fn&&he(this);else if("fadeout"==this.Sb)this.gg-=a,this.Sp=Math.max(this.gg/this.nl,0),0>=this.gg&&(this.Sb="gap",this.Sp=0,this.Rp=this.Mi?this.Pe+this.dd:this.TD[this.Qg[this.ce]]+this.Yt,this.Yt=0,this.ce=null);else if("activate"==this.Sb){if("striking"==this.ic&&"frenzy"!=this.Qg[this.ce]&&(this.ic="retract",this.Qm=!1,
this.eg=this.jl,de(this)),this.di!=this.oA||"frenzy"!=this.Qg[this.ce]||this.ps||de(this),this.di-=a,0>this.di)if(this.ps)this.Sb="fadeout",this.gg=this.nl,"gap"==this.ic&&"frenzy"!=this.Qg[this.ce]&&(this.ic="extend",this.eg=this.jl);else{b=this.Qg[this.ce];if("frenzy"!=b)for(var c=0;c<this.fl[b];c++)this.cg.push(b),this.di+=this.Dv;else this.ic="frenzy",this.Qm=!1,this.Tj=this.Hv,this.di+=this.Hv,this.dg=0;this.ps=!0}}else"gap"==this.Sb&&(this.Rp-=a,0>=this.Rp&&(this.Sb="fadein",this.gg=this.nl,
this.Qg=ce(this)));0<this.cg.length&&(this.es-=a,0>this.es&&(this.hs(this.cg[0]),this.cg.splice(0,1),this.es=this.Dv));0<this.Ac&&(this.Ac-=a);for(var d in this.nc)a=this.nc[d],a.body.pb(this.body.ha()+Math.PI/(this.Yd/2)*d),a.body.ei(this.body.g.position),a.body.Cc.bb.Y[1]={x:Math.cos(0)*a.wf,y:Math.sin(0)*a.wf},a.body.Cc.bb.Y[2]={x:Math.cos(Math.PI/8)*a.wf,y:Math.sin(Math.PI/8)*a.wf}}};
function fe(a){for(var b in a.nc){var c=a.nc[b];0<c.duration&&(c.duration-=dt);if(0>=c.duration)c.wf=c.ks;else{var d=1-c.duration/c.interval,f=0;d>c.$c&&d<c.$c+.3*(1-c.$c)?f=1*(d-c.$c)/(.3*(1-c.$c)):d>=c.$c+.3*(1-c.$c)&&d<c.$c+.7*(1-c.$c)?f=1:d>=c.$c+.7*(1-c.$c)&&(f=1*(1-d)/(.3*(1-c.$c)));0<f?(c.Kz||(c.Kz=!0,gc("b3strike")),f=Yb(.15,.85,f),null==c.Sk&&(c.Sk=R(a.body.g.position,Hc(a.n))+5,20>c.Sk&&(c.Sk+=10)),c.wf=c.Sk*f+c.ks*(1-f)):c.wf=c.ks}}}
function ee(a,b){for(var c in a.nc){var d=a.nc[c];d.ks=b;0>=d.duration&&(d.wf=b)}}function de(a){for(var b in a.nc){var c=a.nc[b];if(0<c.duration){var d=1-c.duration/c.interval;d<c.$c?c.duration=0:d>c.$c&&d<.5*c.$c+.5&&(c.duration=2*c.interval*(.5-.5*c.$c)-c.duration)}}}
function ge(a){if("striking"==a.ic){for(var b=S(a.body.g.position,Hc(a.n)),c=Math.floor((b-a.body.ha())/(Math.PI/8));0>c;)c+=a.Yd;for(var b=a.HB,d=0==a.cl%2?[c-1,c-3,c-2]:[c+3,c+1,c+2],f=d.length-1;0<=f;f--)d[f]>=a.Yd&&(d[f]-=a.Yd),0>d[f]&&(d[f]+=a.Yd),0<a.nc[d[f]].duration&&d.splice(f,1);f=Math.floor(Math.random()*d.length);ie(a,d[f],b,a.Sj)}else if("frenzy"==a.ic){b=S(a.body.g.position,Hc(a.n));for(c=Math.floor((b-a.body.ha())/(Math.PI/8));0>c;)c+=a.Yd;for(var b=null,d=[c-3,c-2,c-1,c,c+1,c+2,c+
3,c+4],g=!1,f=d.length-1;0<=f;f--)0<a.nc[je(a,d[f])].duration&&(d.splice(f,1),2<=f&&4>=f&&(g=!0));g||d.splice(d.indexOf(c+Math.floor(3*Math.random()-1)),1);f=Math.floor(Math.random()*d.length);ie(a,d[f],b,a.Sj*a.Kp);d.splice(f,1);c=Math.floor(Math.random()*d.length);ie(a,d[c],b,a.Sj*a.Kp);d.splice(c,1);ie(a,d[Math.floor(Math.random()*d.length)],b,a.Sj*a.Kp)}}function je(a,b){b>=a.Yd&&(b-=a.Yd);0>b&&(b+=a.Yd);return b}
function ie(a,b,c,d){a.dE||(a.dE=b);b=je(a,b);0>=a.nc[b].duration&&(a.nc[b].duration=d,a.nc[b].interval=d,a.nc[b].Sk=c,a.nc[b].ks=a.vo,a.nc[b].$c=a.Gv,a.nc[b].Kz=!1)}l.vj=function(){for(var a=[],b=0;b<this.Fg[0].length;b++){var c=this.body.g.position.wb();c.Lg({x:this.Fg[0][b].x,y:this.Fg[0][b].y});a.push(c)}return a};
l.$=function(a,b){if(!(0==this.nb&&this.hc>.9*this.ed)){var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.save();a.globalAlpha=this.Q?a.globalAlpha*(1-c):a.globalAlpha*(null!=this.visibility?this.visibility:1);c=this.body.g.position;if(this.nb)if("extend"==this.ic||"retract"==this.ic)c=this.body.g.position,J(a,c.x*b,c.y*b,this.body.ha()+Math.PI/16,this.Ym*b*2,this.Ym*b*2,"negligentia_arm_ring",yb);else if("striking"==this.ic||"frenzy"==this.ic)c=this.body.g.position,J(a,c.x*b,c.y*b,this.body.ha()+
Math.PI/16,this.vo*b*2,this.vo*b*2,"negligentia_arm_ring",yb);if(this.nb)for(var d in this.nc)if(0<this.nc[d].duration){var c=this.nc[d].body.g.position,f=this.nc[d].body.ha();a.save();a.translate(c.x*b,c.y*b);a.rotate(f+Math.PI/16);f=this.nc[d].wf*Math.cos(Math.PI/16);J(a,f/2*b,0,0,f*b,this.nc[d].wf*Math.sin(Math.PI/16)*2*b,0<this.Ac?"negligentia_arm_striking_red":"negligentia_arm_striking",yb);a.restore()}0<this.Ac?J(a,c.x*b,c.y*b,this.body.ha()+Math.PI/16,2*this.N*b,2*this.N*b,"negligentia_head_red",
yb):J(a,c.x*b,c.y*b,this.body.ha()+Math.PI/16,2*this.N*b,2*this.N*b,"negligentia_head",yb);this.zd(a,b);a.restore()}};l.rk=function(a,b){var c=this.body.g.position;0<this.Ac?J(a,c.x*b,c.y*b,this.body.ha(),300,300,"negligentia_glow_red",yb):J(a,c.x*b,c.y*b,this.body.ha(),300,300,"negligentia_glow",yb)};
l.gh=function(a,b){if(!(0==this.nb&&this.hc>.9*this.ed)){a.save();var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.globalAlpha=this.Q?a.globalAlpha*(1-c):a.globalAlpha*(null!=this.visibility?this.visibility:1);this.Mi&&0>this.Pe&&this.Pe>=-this.dd&&(a.save(),c=Math.min(5-Math.abs((-this.Pe-this.dd/2)/(this.dd/10)),1),a.globalAlpha*=c/2,a.fillStyle=this.color,a.fillRect(0,0,Kc,Lc),a.restore());this.rk(a,b);this.Mi||(a.globalAlpha*=.4);for(c=0;16>c;c++){var d=this.body.g.position,f=2*Math.PI*
(c/16+.03125-.25);1-this.Pe/this.Qj>1-c/16&&(0!=c||this.Mi)?(a.globalAlpha*=2,J(a,(d.x+Math.cos(f)*this.N*1.8)*b,(d.y+Math.sin(f)*this.N*1.8)*b,f+Math.PI/2,30,50,"negligentia_aura",yb),a.globalAlpha/=2):J(a,(d.x+Math.cos(f)*this.N*1.8)*b,(d.y+Math.sin(f)*this.N*1.8)*b,f+Math.PI/2,30,50,"negligentia_aura_open",yb)}a.restore()}};
l.zd=function(a,b){a.save();a.globalAlpha*=this.Sp;if("fadein"==this.Sb||"spinning"==this.Sb||"fadeout"==this.Sb||"activate"==this.Sb){var c=0<this.Ac?"negligentia_wheel_red":"negligentia_wheel";if("fadeout"==this.Sb||"activate"==this.Sb)c="negligentia_wheel_complete";var d=this.body.ha()+Math.PI/16+Math.PI/4,f=Math.PI/(this.Zj/2)*(this.ce+.5)+d;J(a,this.body.g.position.x*b,this.body.g.position.y*b,d+Math.PI/2*((this.ce+1)%4),2*this.en*Math.cos(Math.PI/4)*b,2*this.en*Math.cos(Math.PI/4)*b,c,yb);if("fadein"==
this.Sb||"spinning"==this.Sb)for(c=0;c<this.Zj;c++)f=Math.PI/(this.Zj/2)*(c+.5)+d,"frenzy"!=this.Qg[c]?Ea(a,this.Qg[c],this.body.g.position.x*b+Math.cos(f+Math.PI/(this.Zj/2)/2)*this.en*.4*b,this.body.g.position.y*b+Math.sin(f+Math.PI/(this.Zj/2)/2)*this.en*.4*b,15,f+1*Math.PI/4):Ka(a,3,this.body.g.position.x*b+Math.cos(f+Math.PI/(this.Zj/2)/2)*this.en*.4*b,this.body.g.position.y*b+Math.sin(f+Math.PI/(this.Zj/2)/2)*this.en*.4*b,20,!0,f);else("fadeout"==this.Sb||"activate"==this.Sb)&&null!=this.ce&&
("frenzy"!=this.Qg[this.ce]?Ea(a,this.Qg[this.ce],this.body.g.position.x*b,this.body.g.position.y*b,20,f+1*Math.PI/4):Ka(a,3,this.body.g.position.x*b,this.body.g.position.y*b,50,!0,f))}a.restore()};l.Fx=function(a,b){a.beginPath();var c=Math.min(1-this.Pe/this.Qj,1);a.arc(this.body.g.position.x*b,this.body.g.position.y*b,this.N*b*1.5,-.5*Math.PI,-.5*Math.PI+2*Math.PI*c*.999);a.strokeStyle=this.color;a.lineWidth=2;a.stroke()};
l.hs=function(a){var b=S(this.body.g.position,Hc(this.n)),c=new this.i.Sx[a](this.Ea,(this.body.g.position.x+Math.cos(b)*this.N*1.25)*F/F,(this.body.g.position.y+Math.sin(b)*this.N*1.25)*F/F,this.i.rc,this.w);this.i.$h.push(c);this.i.rc+=1;"stunner"==a&&.7>Math.random()&&(b+=Math.random()*Math.PI/4-Math.PI/8);"spear"==a&&.7>Math.random()&&(b+=Math.random()*Math.PI/4-Math.PI/8);"tank"==a&&.7>Math.random()&&(b+=Math.random()*Math.PI*.7-.35*Math.PI);"mote"==a&&.7>Math.random()&&(b+=Math.random()*Math.PI-
.5*Math.PI);"troll"==a&&.7>Math.random()&&(b+=Math.random()*Math.PI*.8-.4*Math.PI);"harpoon"==a&&(b+=Math.random()*Math.PI/10-Math.PI/20);var d=new b2Vec2(Math.cos(b),Math.sin(b));d.fa(this.Xm[a]);c.body.ja(d,c.body.h.m);c.body.pb(b);c.Ld=2*c.ue;c.pg=0;c.Ah=0;"harpoon"==a&&c.Zb(500,!0)};
l.Ye=function(a,b){if(!this.Q&&this.nb)if(b!==this.body)for(var c in this.nc){var d=this.nc[c],f=1-d.duration/d.interval;if(d.body==b&&(f>d.$c&&f<d.$c+.3*(1-d.$c)||1<=f||f<d.$c))if(d=S(this.body.g.position,a.body.g.position),a===this.n)a.body.ja(new b2Vec2(this.Mf*Math.cos(d),this.Mf*Math.sin(d)),a.body.h.m);else if("harpoonhead"==a.type)a.body.ja(new b2Vec2(this.Xm.harpoon*Math.cos(d),this.Xm.harpoon*Math.sin(d)),a.body.h.m);else{if(void 0!=this.Xm[a.type])var g=G[a.type];g&&(f=a.body.X*Math.sqrt(g.xa)*
this.Mf,a.body.ja(new b2Vec2(f*Math.cos(d),f*Math.sin(d)),a.body.h.m))}}else d=S(this.body.g.position,a.body.g.position),c=1,a===this.n&&"easy"==L&&(c=.5),a.body.ja(new b2Vec2(this.Mf*c*Math.cos(d),this.Mf*c*Math.sin(d)),a.body.h.m)};function he(a){a.Sb="activate";a.di=a.oA;a.ps=!1;gc("b3select")}l.Oe=function(){this.Ac=this.qr;"spinning"==this.Sb&&(he(this),this.Yt=this.fn)};ke.prototype=new Uc;l=ke.prototype;l.constructor=ke;
function ke(a,b,c,d,f){this.type="second boss";this.ma(a,b,c,d,f);this.If=!1;this.De=5;this.Gd=!1;this.Xh=!0;this.gi=3*Math.PI/4;this.Xw=1*Math.PI/8;this.fB=3*Math.PI/8;this.hi=1*Math.PI/8;this.Yw=1*Math.PI/8;this.tq=50;this.Ww=.9;this.Yd=4;this.Vw=15E3;this.nb=!1;this.body.pb(this.gi);this.Pf=!1;this.jh=this.Vw;this.visibility=0;this.Ua=2E3;this.io=13400;this.Dd=this.io-1;this.nk=2E3;this.Pl=0;this.ix=10;this.wB=1;this.jo=1E3;this.ho=.7;this.wt=!1;this.qr=150;this.bh=this.Ac=0;this.body.ze(2*G[this.type].xa);
this.rm=2.5;this.ug=4;this.xt=.75;this.lo=.3;this.ko=1.2;"easy"==L&&(this.xt*=1.5,this.lo*=1.5,this.ko*=1.5);this.Qz=!1;this.il=[];this.Wb=this.sg=1;this.bA=.2;this.ky=.125;this.MD=.025;this.Tx=1E4;this.Fo=1E3;this.gs=[["stunner","mote"],["spear","harpoon"],["tank","goo"]];this.Wt={stunner:.4,spear:.4,tank:2,mote:.2,goo:2.5,harpoon:2};this.iv=!1;this.Eo=[];this.gl=0}
l.Oc=function(a){if(!this.Qz){this.Qz=!0;for(var b=[[O-80,P-80],[80,P-80]],c=0;c<b.length;c++){var d=new le(b[c][0],b[c][1],this,this.w);d.hc=c/b.length*d.ed;this.il.push(d)}}if(0<this.hc)this.hc=Math.max(this.hc-a,0),this.visibility=1-this.hc/this.ed;else{0==this.nb&&(this.nb=!0,this.visibility=1,this.body.ze(G[this.type].xa));this.body.pb(this.gi);0<this.Ac&&(this.Ac-=a);this.Fo-=a;0>this.Fo&&(this.Fo=this.Tx,me(this.il[0],this.gs[this.gl][0]),me(this.il[1],this.gs[this.gl][1]),this.gl+=1,this.gl%=
this.gs.length);1<this.sg&&(this.sg=Math.max(1,this.sg-a/1E3*this.MD));if(this.Wb!=this.sg){this.Wb=this.Wb<this.sg?Math.min(this.Wb+this.bA*a/1E3,this.sg):Math.max(this.Wb-this.bA*a/1E3,this.sg);c=this.body.Cc;void 0===c.length&&(c=[c]);for(b=0;b<c.length;b++)for(var d=this.body.Cc.bb.Y,f=this.Xb[b],g=0;g<d.length;g++)d[g]=new b2Vec2(f.x+f.Z*f.ga[g][0]*this.Wb,f.y+f.Z*f.ga[g][1]*this.Wb);this.body.jg()}c=this.Xw+Math.min(1,(this.sg-1)/2)*(this.fB-this.Xw);this.hi!=c&&(this.hi=this.hi<c?Math.min(this.hi+
this.Yw*a/1E3,c):Math.max(this.hi-this.Yw*a/1E3,c));for(var h in this.il)this.il[h].ra(a);this.RD&&(0>this.Jz?this.RD=!1:this.Jz-=a);this.gi+=2*Math.PI*a/(this.Vw/this.Wb);for(c=0;c<this.i.r.length;c++)this.i.r[c].id!=this.id&&(h=S(this.i.r[c].body.g.position,this.body.g.position),b=this.Wt[this.i.r[c].type]*this.Lo(this.i.r[c].body.g.position),0<b&&this.i.r[c].body.ja(new b2Vec2(b*Math.cos(h),b*Math.sin(h)),this.i.r[c].body.h.m));this.bh=0;h=S(Hc(this.n),this.body.g.position);b=this.Lo(Hc(this.n));
0<b&&(this.bh+=b,this.n.body.ja(new b2Vec2(b*Math.cos(h),b*Math.sin(h)),this.n.body.h.m));if("normal"==L){if(0>this.Dd)for(this.wt||(this.wt=!0,gc("b2bhole")),h=-this.Dd/this.nk,this.Pl=h<this.ho?h/this.ho*this.N*this.ug*this.Wb:this.N*this.Wb*this.ug*(1-(h-this.ho)/(1-this.ho)),h=1,-this.Dd/this.nk<this.ho&&(h=.05),c=0,this.iv||(c=R(this.body.g.position,Hc(this.n))<=this.Pl?this.ix*h*this.wB:this.lo,b=S(this.body.g.position,Hc(this.n))+Math.PI,this.bh+=c,this.n.body.ja(new b2Vec2(c*Math.cos(b),c*
Math.sin(b)),this.n.body.h.m),this.bh+=c),c=0;c<this.i.r.length;c++)-1!=this.Eo.indexOf(this.i.r[c])||this.i.r[c].Q||this.i.r[c]===this||(R(this.body.g.position,this.i.r[c].body.g.position)<=this.Pl?(b=S(this.body.g.position,this.i.r[c].body.g.position)+Math.PI,d=this.ix*this.Wt[this.i.r[c].type]*h):(b=S(this.body.g.position,this.i.r[c].body.g.position)+Math.PI,d=this.lo*this.Wt[this.i.r[c].type]),this.i.r[c].body.ja(new b2Vec2(d*Math.cos(b),d*Math.sin(b)),this.i.r[c].body.h.m));this.Dd<-this.nk&&
(this.Dd=this.io,this.Pl=0,this.iv=!1,this.Eo=[],this.wt=!1);this.Dd-=a}}};l.Lo=function(a){for(var b=R(a,this.body.g.position),c=ne(this),d=0;d<c.length;d++)if(Lb(c[d],a))return b<=this.N*this.Wb*this.rm?2*this.ko:b<=this.N*this.Wb*this.ug?1.5*this.ko:this.ko;if(b<=this.N*this.Wb*this.rm)return this.xt;if(b<=this.N*this.Wb*this.ug)return this.lo};
l.gh=function(a,b){if(!(0==this.nb&&this.hc>.9*this.ed)){a.save();if(this.Q){var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.globalAlpha*=1-c}else a.globalAlpha*=this.visibility?this.visibility:1;0>this.Dd&&this.Dd>=-this.nk&&(a.globalAlpha*=.5,c=Math.min(5-Math.abs((-this.Dd-this.nk/2)/(this.nk/10)),1),a.globalAlpha*=c/2,a.fillStyle=this.color,a.fillRect(0,0,Kc,Lc),a.globalAlpha*=2);0>this.Dd&&this.Dd>=-this.nk&&(c=this.body.g.position,J(a,c.x*b,c.y*b,0,this.Pl*b*2,this.Pl*b*2,"consumendi_aura",
xb));var d=1;this.Dd>=this.io-this.jo?d=1-(this.Dd-this.io+this.jo)/this.jo:this.Dd<=this.jo&&0<this.Dd&&(d=this.Dd/this.jo);c=this.body.g.position;0<this.Dd&&J(a,c.x*b,c.y*b,0,90*d*this.Wb*this.rm,90*d*this.Wb*this.rm,"consumendi_aura",xb);a.save();a.globalAlpha*=.7;for(d=0;16>d;d++){var f=2*Math.PI*(d/16+.03125-.25);this.nb&&1-this.Dd/this.io>1-d/16?J(a,(c.x+Math.cos(f)*this.N*this.Wb*this.ug)*b,(c.y+Math.sin(f)*this.N*this.Wb*this.ug)*b,f,30,56,"consumendi_small_diamond_filled",xb):J(a,(c.x+Math.cos(f)*
this.N*this.Wb*this.ug)*b,(c.y+Math.sin(f)*this.N*this.Wb*this.ug)*b,f,30,56,"consumendi_small_diamond",xb)}a.restore();this.rk(a,b);a.restore()}};
l.$=function(a,b){if(!(0==this.nb&&this.hc>.9*this.ed)){var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.save();a.globalAlpha=this.Q?a.globalAlpha*(1-c):a.globalAlpha*(null!=this.visibility?this.visibility:1);c=this.body.g.position;0<this.Ac?J(a,c.x*b,c.y*b,this.body.ha()+Math.PI/4,90*this.Wb,90*this.Wb,"consumendi_head_red",xb):J(a,c.x*b,c.y*b,this.body.ha()+Math.PI/4,90*this.Wb,90*this.Wb,"consumendi_head",xb);this.zd(a,b);a.restore()}};
l.rk=function(a,b){var c=this.body.g.position;0<this.Ac?J(a,c.x*b,c.y*b,this.body.ha(),200*this.Wb,200*this.Wb,"immunitas_red_glow",wb):J(a,c.x*b,c.y*b,this.body.ha(),200*this.Wb,200*this.Wb,"consumendi_glow",xb)};
l.zd=function(a,b){for(var c in this.il)this.il[c].$(a,b,Math.max(this.Fo,0)/this.Tx,this.gs[this.gl][c]);c=ne(this);a.save();a.beginPath();a.rect(0,0,O,P);a.clip();for(var d=0;d<c.length;d++){a.beginPath();a.moveTo(c[d][0].x*b,c[d][0].y*b);for(var f=1;f<c[d].length;f++)a.lineTo(c[d][f].x*b,c[d][f].y*b);a.closePath();a.save();a.globalAlpha*=this.visibility/4;a.fillStyle=this.color;a.fill();var f=this.body.g.position,g=2*Math.PI*d/this.Yd+this.gi;J(a,(f.x+Math.cos(g)*this.N*this.Wb*this.ug*1.5)*b,
(f.y+Math.sin(g)*this.N*this.Wb*this.ug*1.5)*b,g+Math.PI/2,50,80,"consumendi_small_arrow",xb);a.restore()}a.restore();f=Hc(this.n);c=S(f,this.body.g.position);this.n.Q||(.3<=this.bh&&J(a,(f.x+2*Math.cos(c))*b,(f.y+2*Math.sin(c))*b,c-Math.PI/2,20,10,"consumendi_small_arrow",xb),.75<=this.bh&&J(a,(f.x+2.75*Math.cos(c))*b,(f.y+2.75*Math.sin(c))*b,c-Math.PI/2,20,10,"consumendi_small_arrow",xb),1.2<=this.bh&&J(a,(f.x+3.5*Math.cos(c))*b,(f.y+3.5*Math.sin(c))*b,c-Math.PI/2,20,10,"consumendi_small_arrow",
xb),2<=this.bh&&J(a,(f.x+4.25*Math.cos(c))*b,(f.y+4.25*Math.sin(c))*b,c-Math.PI/2,20,10,"consumendi_small_arrow",xb))};
function ne(a){for(var b=[],c=0;c<a.Yd;c++){var d=[];d.push({x:a.body.g.position.x,y:a.body.g.position.y});d.push({x:a.body.g.position.x+a.tq*a.Ww*Math.cos(2*Math.PI*c/a.Yd+a.gi-a.hi/2),y:a.body.g.position.y+a.tq*a.Ww*Math.sin(2*Math.PI*c/a.Yd+a.gi-a.hi/2)});d.push({x:a.body.g.position.x+a.tq*Math.cos(2*Math.PI*c/a.Yd+a.gi+a.hi/2),y:a.body.g.position.y+a.tq*Math.sin(2*Math.PI*c/a.Yd+a.gi+a.hi/2)});b.push(d)}return b}l.move=function(){};
l.Ye=function(a){this.Q||!this.nb||a.Q||(a===this.n?(gc("b2eat"),S(this.body.g.position,a.body.g.position),this.iv=!0,a.Mc("absorbed")):a!==this.n&&(gc("b2eat"),"harpoonhead"!=a.type?(a.Mc("absorbed"),this.sg+=this.ky,this.Eo.push(a)):(a.si.Mc("absorbed"),this.sg+=this.ky,this.Eo.push(a),this.Eo.push(a.si))))};l.vj=function(){for(var a=[],b=0;b<this.Fg[0].length;b++){var c=this.body.g.position.wb();c.Lg(this.Fg[0][b]);a.push(c)}return a};function le(a,b,c,d){this.x=a;this.y=b;this.Gc=c;this.color=this.Gc.color;this.Ea=this.Gc.Ea;this.w=d;this.i=this.w.i;this.n=this.w.n;this.size=60;this.visibility=0;this.ar={stunner:3,spear:3,tank:2,mote:2,goo:1,harpoon:2};this.PB={stunner:3,spear:3,tank:2,mote:1,goo:1,harpoon:1};this.rm=.75;this.ug=1.5;this.dC=.8;this.qC=.2}
le.prototype.$=function(a,b,c,d){a.save();a.globalAlpha*=.5;J(a,this.x,this.y,Math.PI/4,2*this.size,2*this.size,"consumendi_glow",xb);J(a,this.x,this.y,Math.PI/4,this.size,this.size,"consumendi_mini",xb);0<c&&(a.beginPath(),a.arc(this.x,this.y,.75*this.size,-.5*Math.PI,-.5*Math.PI-2*Math.PI*(1-c),!0),a.lineWidth=2,a.strokeStyle=G[d].color,a.stroke());a.restore()};
le.prototype.ra=function(){for(var a=0;a<this.i.r.length;a++)if(this.i.r[a].id!=this.id){var b=S(this.i.r[a].body.g.position,{x:this.x/F,y:this.y/F})+Math.PI,c=this.Lo(this.i.r[a].body.g.position);0<c&&this.i.r[a].body.ja(new b2Vec2(c*Math.cos(b),c*Math.sin(b)),this.i.r[a].body.h.m)}b=S(this.n.body.g.position,{x:this.x/F,y:this.y/F})+Math.PI;c=this.Lo(this.n.body.g.position);0<c&&this.n.body.ja(new b2Vec2(c*Math.cos(b),c*Math.sin(b)),this.n.body.h.m)};
le.prototype.Lo=function(a){a=R(a,{x:this.x/F,y:this.y/F});return a<=this.size/F*this.rm?this.dC:a<=this.size/F*this.ug?this.qC:0};function me(a,b){var c=a.ar[b];"easy"==L&&(c=a.PB[b]);if(a.i.mj[b]+1<=a.i.em[b][6])for(var d=0;d<c;d++){var f=S({x:a.x/F,y:a.y/F},a.Gc.body.g.position),f=[(a.x+a.size/2*Math.cos(f))/F,(a.y+a.size/2*Math.sin(f))/F],f=new G[b].className(a.Ea,f[0],f[1],a.i.rc,a.w);"harpoon"==f.type&&(f.JB=!0);a.i.$h.push(f);a.i.rc+=1}};oe.prototype=new Fa;l=oe.prototype;l.constructor=oe;
function oe(a,b,c,d,f){void 0!==a&&(this.type="deathray",this.ma(a,b,c,d,f),null!==a&&(this.Gd=!1,this.Vr=10,this.sv=2,this.iC=5,this.Xh=!0,this.Sv=!1,this.gc=1600,"easy"==L&&(this.gc=2E3),this.im=!1,this.zn=1,this.Gg=this.gc,this.An=.56,this.ri=this.pj=200,this.oj=5,this.sd=null,this.yp=.8,this.wp=-.5,this.xp=400,this.kl=1E3,"easy"==L&&(this.kl=1500),this.er=this.Zi=!1,this.wj=null,this.Rr=100,this.Sr=Math.PI/48,this.Pf=!1,this.He=3,this.fd=100,this.wo=!1))}
l.ai=function(a){this.q[0]=Math.max(a,this.q[0]);this.q[1]=Math.max(a,this.q[1]);this.Vh=this.xc=a};
l.Oc=function(a){this.Zi?this.Eg(this.sd):this.Eg(S(this.body.g.position,this.n.body.g.position));this.Xh!=R(this.n.body.g.position,this.body.g.position)>this.Vr&&(this.Xh=!this.Xh);0<this.Pt&&(this.Pt-=a);this.Sv=Sb(this.iC,this.body.g.position);0<this.xc&&(this.xc-=a);if(0<this.q[1])pe(this);else if(0>=this.Gg)if(0>=this.ri)pe(this),this.ai(this.kl);else{if(this.ri=Math.max(this.ri-a,0),gc("deathray"),this.ri<=this.pj/2&&!this.er){a=qe(this);this.er=!0;if(Lb(a,this.n.body.g.position)){var b=1;0<
this.n.q[5]&&!this.n.nh&&(b*=10);0<this.n.q[2]&&(b*=.25);this.n.body.ja(new b2Vec2(b*this.xp*Math.cos(this.sd),b*this.xp*Math.sin(this.sd)),this.n.body.h.m);Tc(this.w)}for(b=0;b<this.i.r.length;b++)if(this.i.r[b]!=this&&Lb(a,this.i.r[b].body.g.position)){if("orbiter"==this.i.r[b].type){var c=this.i.r[b];c.dn=c.Rv}this.i.r[b].body.ja(new b2Vec2(this.xp*Math.cos(this.sd),this.xp*Math.sin(this.sd)),this.i.r[b].body.h.m);this.i.r[b].open(2500)}}}else if(this.Zi||!this.Zi&&this.Sv&&!this.Zu)this.Gg=Math.max(this.Gg-
a,0),this.Gg<=this.gc*this.An&&!this.Zi&&(this.sd=S(this.body.g.position,this.n.body.g.position),this.Gg=this.gc*this.An,this.Zi=!0)};l.zd=function(a){0<this.xc&&!this.Q&&za(a,this.body.g.position.x,this.body.g.position.y,this.N,1-this.xc/this.Vh,"#444444",4)};function pe(a){a.Gg=a.gc;a.ri=a.pj;a.Zi=!1;a.er=!1;a.sd=null}
function qe(a){var b=[];b.push({x:a.body.g.position.x+a.wp*Math.cos(a.sd)+a.yp*Math.cos(a.sd+Math.PI/2),y:a.body.g.position.y+a.wp*Math.sin(a.sd)+a.yp*Math.sin(a.sd+Math.PI/2)});b.push({x:a.body.g.position.x+a.wp*Math.cos(a.sd)+a.yp*Math.cos(a.sd-Math.PI/2),y:a.body.g.position.y+a.wp*Math.sin(a.sd)+a.yp*Math.sin(a.sd-Math.PI/2)});b.push({x:b[1].x+a.Rr*Math.cos(a.sd-a.Sr),y:b[1].y+a.Rr*Math.sin(a.sd-a.Sr)});b.push({x:b[0].x+a.Rr*Math.cos(a.sd+a.Sr),y:b[0].y+a.Rr*Math.sin(a.sd+a.Sr)});return b}
l.Hf=function(a,b,c,d){d||(this.open(this.Ij),this.qa.impulsed+=this.Oo);this.body.ja(new b2Vec2(this.He*b*Math.cos(c),this.He*b*Math.sin(c)),this.body.h.m);d&&!this.Sf||this.Oe(a,b,c)};l.hy=function(){if(this.Xh)return null==this.wj&&(this.wj={x:this.i.Oi.x/F,y:this.i.Oi.y/F}),this.wj;this.wj=null;for(var a=N[this.w.V].Oa,b=null,c=1E3,d=0;d<a.length;d++){var f=R({x:a[d][0]/F,y:a[d][1]/F},this.body.g.position);f<c&&(c=f,b=a[d])}return{x:b[0]/F,y:b[1]/F}};l.kj=Fa.prototype.move;
l.move=function(){this.Zi||(this.Xh?this.Sv?(this.wj=this.path=null,this.Zu=!1):R(this.n.body.g.position,this.body.g.position)>this.Vr+this.sv?(null==this.path&&(this.Ld=2*this.ue),this.kj(),this.Zu=!0):this.wj=null:(null==this.path&&(this.Ld=2*this.ue),this.wj=null,this.kj(),this.Zu=!0))};
l.gh=function(a,b){if(0>=this.q[1]){var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.save();a.globalAlpha*=1-c;var d=qe(this);if(this.Gg<=this.gc*this.An&&null!=this.sd){c=1-this.Gg/(this.gc*this.An);a.save();a.beginPath();a.globalAlpha*=Math.max(c,.2);a.moveTo(d[1].x*b,d[1].y*b);a.lineTo(d[2].x*b,d[2].y*b);a.moveTo(d[3].x*b,d[3].y*b);a.lineTo(d[0].x*b,d[0].y*b);a.lineWidth=1;a.strokeStyle=this.color;a.stroke();if(this.ri<this.pj){c=this.ri>this.pj/2?this.pj-this.ri:this.ri;c/=this.pj/2;a.globalAlpha=
c;a.beginPath();a.moveTo(d[0].x*b,d[0].y*b);for(c=1;c<d.length;c++)a.lineTo(d[c].x*b,d[c].y*b);a.closePath();a.fillStyle=this.color;a.fill()}a.restore()}a.restore()}};l.zk=function(a){return"normal"==a?this.color?this.color:null:"stunned"==a?"#444444":"silenced"==a?"gray":"gooed"==a?"#e6c43c":"impulsed"==a?this.vu:"ulted"==a?w.impulse_blue:"white"==a?"white":"world"==a.slice(0,5)?w["world "+a.slice(5,6)+" lite"]:this.Jo(a)};l.Zb=function(a,b){b&&(this.vf=!0);this.q[1]=Math.max(a,this.q[1])};
l.Hj=function(a){Sb(-3,this.body.g.position)||a.fa(this.oj);for(var b=!1,c=0;c<this.i.Zd.length;c++)Lb(this.i.Zd[c],this.body.g.position)&&(b=!0);b?a.fa(this.zv):(0<this.q[1]&&a.fa(.5),0<this.q[2]&&a.fa(this.ih),a.fa(this.oa))};l.ag=function(){};re.prototype=new Fa;l=re.prototype;l.constructor=re;
function re(a,b,c,d,f){void 0!==a&&(this.type="fighter",this.ma(a,b,c,d,f),this.qq=["frenzy"],null!==a&&(this.De=5,this.gc=2E3,this.rj=750,this.we=[this.gc,2*this.gc],this.Ez=.15,this.as=[!1,!1],this.xv=400,this.el=0,this.Dz=2.5*this.N,this.vu=this.color,this.Gd=!1,this.Vr=10,this.sv=2,this.oj=5,this.ou=!1,this.Xh=!0,this.Fz=this.N,this.Gz=2*this.N,this.Sd=0,this.dy=2500,"easy"==L&&(this.dy=3500),this.qj=5,this.Ge="normal",this.th=3,this.Pg=!1,this.fd=100,"easy"==L&&(this.fd=80),this.gj=!1,this.cD=
200,this.sp=0,this.wo=!1))}function se(a,b){var c=a.Re+Math.PI/2*(b%2*2-1);return{x:a.body.g.position.x+a.Gz*Math.cos(c)+a.Fz*Math.cos(a.Re),y:a.body.g.position.y+a.Gz*Math.sin(c)+a.Fz*Math.sin(a.Re)}}l.Jo=function(a){if("frenzy"==a)return"red"};l.uj=function(){if(!this.Q){if(0<this.q[0])return"stunned";if("frenzy"==this.Ge)return"frenzy";if(this.vf)return"silenced";if(0<this.q[2])return"gooed";if(0<this.qa.impulsed)return"impulsed"}return this.Ko()};
l.Oc=function(a){"normal"==this.Ge&&this.Sd>=this.qj&&(gc("ffrenzy"),this.Ge="frenzy",this.we=[this.rj,this.rj],this.color="red",this.body.ze(5*G[this.type].xa));if(0>=this.q[1]&&0>=this.sp&&R(this.body.g.position,this.n.body.g.position)<this.Dz){var b=S(this.body.g.position,this.n.body.g.position);this.n.body.ja(new b2Vec2(this.fd*Math.cos(b),this.fd*Math.sin(b)),this.n.body.h.m);Tc(this.w);this.el=this.xv;this.sp=this.cD}0<this.q[1]?this.body.ze(.5*this.xa):this.body.ze(this.xa);0<this.sp&&(this.sp-=
a);"frenzy"==this.Ge&&0>=this.Sd&&(this.Ge="normal",this.we=[this.gc,2*this.gc],this.color=G[this.type].color,this.body.ze(G[this.type].xa));for(b=0;b<this.we.length;b++){if(0>=this.we[b]&&!this.as[b]&&0>=this.q[1]&&Sb(0,this.body.g.position)){var c=se(this,b);this.ou=Jb(c,this.n.body.g.position,this.i.kf);var d=S(c,this.n.body.g.position);this.ou?(this.we[b]="normal"==this.Ge?2*this.gc:this.rj,gc("fbullet"),"frenzy"==this.Ge?(this.Sd-=.5,c=new te(this.Ea,c.x,c.y,this.i.rc,this.w,d,this.id),d=new b2Vec2(Math.cos(d),
Math.sin(d)),d.fa(2)):(c=new ue(this.Ea,c.x,c.y,this.i.rc,this.w,d,this.id),d=new b2Vec2(Math.cos(d),Math.sin(d)),d.fa(.5)),c.body.ja(d,c.body.h.m),this.i.$h.push(c),this.i.rc+=1):this.as[b]=!0}this.as[b]&&this.we[b]<-this.Ez*("normal"==this.Ge?this.gc:this.rj)&&(this.we[b]="normal"==this.Ge?2*this.gc+this.we[b]:this.rj,this.as[b]=!1);Sb(0,this.body.g.position)&&(this.we[b]-=a)}"normal"==this.Ge&&0>=this.q[1]&&this.Sd<this.qj&&Sb(0,this.body.g.position)&&(this.Sd+=a/this.dy);0<this.el&&(this.el-=
a)};l.ag=function(){};
l.zd=function(a,b){if(!this.Q){a.save();a.globalAlpha*=.7;if(0<this.Sd){for(var c=0;c<Math.floor(this.Sd);c++)a.beginPath(),a.arc(this.body.g.position.x*b,this.body.g.position.y*b,2*this.N*b,-Math.PI/2+2*Math.PI*(c+1)/this.qj-Math.PI/24,-Math.PI/2+2*Math.PI*c/this.qj+Math.PI/24,!0),a.strokeStyle="red",a.lineWidth=5,a.stroke();if(0>=this.q[1]&&this.Sd<this.qj){var c=Math.floor(this.Sd),d=this.Sd-c;a.beginPath();a.arc(this.body.g.position.x*b,this.body.g.position.y*b,2*this.N*b,-Math.PI/2+2*Math.PI*
c/this.qj+Math.PI/24+(2*Math.PI/this.qj-Math.PI/12)*d,-Math.PI/2+2*Math.PI*c/this.qj+Math.PI/24,!0);a.lineWidth=5;a.strokeStyle="red";a.stroke()}}a.restore();for(c=0;c<this.we.length;c++){var d=se(this,c),f="normal"==this.Ge?this.gc:this.rj,f=Math.max((f-this.we[c])/f,0);if(0<f&&1>f){a.save();a.globalAlpha*=f;var g="frenzy"==this.Ge?"piercing_fighter_bullet":"fighter_bullet";this.Re?Ea(a,g,d.x*b,d.y*b,null,this.Re):Ea(a,g,d.x*b,d.y*b,null,this.body.ha());0<this.we[c]&&0<f&&(a.beginPath(),a.arc(d.x*
b,d.y*b,this.N*b*1,-.5*Math.PI,-.5*Math.PI+2*Math.PI*f*.999),a.lineWidth=2,a.strokeStyle=this.color,a.stroke());a.restore()}else 0>this.we[c]&&(f=1-Math.min((f-1)/this.Ez,1),a.save(),a.globalAlpha*=f,g="frenzy"==this.Ge?"piercing_fighter_bullet":"fighter_bullet",this.Re?Ea(a,g,d.x*b,d.y*b,null,this.Re):Ea(a,g,d.x*b,d.y*b,null,this.body.ha()),a.beginPath(),a.arc(d.x*b,d.y*b,this.N*b*1,-.5*Math.PI,-.5*Math.PI+1.998*Math.PI),a.lineWidth=2,a.strokeStyle=this.color,a.stroke(),a.restore())}0<this.el&&(c=
1-Math.abs(1-2*this.el/this.xv),a.save(),a.globalAlpha*=Yb(.15,.85,c),a.beginPath(),a.strokeStyle=this.color,a.arc(this.body.g.position.x*b,this.body.g.position.y*b,this.Dz*b,-.5*Math.PI,-.5*Math.PI+1.998*Math.PI),a.lineWidth=3,a.stroke(),a.fillStyle=this.color,a.globalAlpha/=4,a.fill(),a.restore())}};l.Ts=function(){};l.Zb=function(a,b){b&&(this.vf=!0);this.q[1]=Math.max(a,this.q[1]);this.we[0]="normal"==this.Ge?this.gc:this.rj;this.we[1]="normal"==this.Ge?2*this.gc:this.rj};
l.Hj=function(a){Sb(-3,this.body.g.position)||a.fa(this.oj);for(var b=!1,c=0;c<this.i.Zd.length;c++)Lb(this.i.Zd[c],this.body.g.position)&&(b=!0);b?a.fa(this.zv):("frenzy"==this.Ge&&0>=this.q[1]&&!this.ou&&a.fa(this.oj),0<this.q[1]&&a.fa(.5),0<this.q[2]&&a.fa(this.ih),a.fa(this.oa))};
l.cr=function(){if(R(this.body.g.position,this.n.body.g.position)<=this.N*this.th){var a=S(this.body.g.position,this.n.body.g.position);this.n.body.ja(new b2Vec2(this.fd*Math.cos(a),this.fd*Math.sin(a)),this.n.body.h.m)}for(a=0;a<this.i.r.length;a++)if(this.i.r[a]!==this&&R(this.body.g.position,this.i.r[a].body.g.position)<=this.N*this.th){var b=S(this.body.g.position,this.i.r[a].body.g.position);this.i.r[a].body.ja(new b2Vec2(this.fd*Math.cos(b),this.fd*Math.sin(b)),this.i.r[a].body.h.m);this.i.r[a].open(1500)}};
l.Hf=function(a,b,c,d){d||this.open(this.Ij);var f=1.5;0<this.q[1]||d||(f=.6);this.body.ja(new b2Vec2(f*b*Math.cos(c),f*b*Math.sin(c)),this.body.h.m);this.qa.impulsed+=this.Oo;this.Oe(a,b,c)};l.Oe=function(){0<this.Sd&&(this.Sd-=1,0>this.Sd&&(this.Sd=0));0>=this.q[1]&&(this.el=this.xv)};ue.prototype=new Fa;l=ue.prototype;l.constructor=ue;function ue(a,b,c,d,f,g,h){void 0!==a&&(this.type="fighter_bullet",this.ma(a,b,c,d,f),null!==a&&(this.If=!1,this.De=5,this.$b=new b2Vec2(Math.cos(g),Math.sin(g)),this.$b.xb(),this.$b.fa(this.oa),"easy"==L&&this.$b.fa(.5),this.Gd=!1,this.mo=100,"easy"==L&&(this.mo=50),this.yn=!1,this.lx=150,this.fv=h,this.nv=!1,this.body.Hw(),this.Gd=!1,this.Dt=.33))}l.Mc=function(a){this.Q=a;this.sb=this.Ua;this.pk=!0};
l.Ye=function(a){if(!this.Q)if(a===this.n){if(this.Mc("hit_player"),0>=this.q[1]){gc("fbullethit");var b=this.body.o.wb();b.xb();0<this.n.q[2]?b.fa(this.mo*this.Dt):b.fa(this.mo);this.n.body.ja(b,this.n.body.h.m);Tc(this.w)}}else if(a.yy&&!(a instanceof ue)&&(this.Mc("hit_enemy"),(a.id!=this.fv||this.nv)&&0>=this.q[1])){gc("fbullethit");a instanceof re&&(a.Sd=0);b=this.body.o.wb();b.xb();var c=1;a.id==this.fv?c*=1.5:a instanceof re?c*=.7:a instanceof ve&&(a.dn=a.Rv);b.fa(this.lx*a.oa*c);a.open(1500);
a.body.ja(b,a.body.h.m)}};l.move=function(){0<this.q[2]?this.body.ja(new b2Vec2(.7*this.$b.x,.7*this.$b.y),this.body.h.m):this.body.ja(this.$b,this.body.h.m);this.Eg(S({x:0,y:0},this.$b))};l.Hf=function(a,b){var c=new b2Vec2(this.body.g.position.x-a.x,this.body.g.position.y-a.y);c.xb();c.fa(b);this.$b.Lg(c);this.nv=!0;this.open(this.Ij)};
l.Lq=function(){for(var a=0;a<this.i.Zd.length;a++)if(Lb(this.i.Zd[a],this.body.g.position)){this.Mc("kill");return}(-5>=this.body.g.position.x||this.body.g.position.x>=Kc/F+5||-5>=this.body.g.position.y||this.body.g.position.y>=Kc/F+5)&&this.Mc("kill")};l.ag=function(){};we.prototype=new Fa;l=we.prototype;l.constructor=we;function we(a,b,c,d,f){void 0!==a&&(this.type="goo",this.Li=!1,this.ma(a,b,c,d,f),this.De=2,this.Gd=!1,this.pm=3,this.Mo=10,this.rg=this.pm,this.xj=500,this.Ak=2500,"easy"==L&&(this.Ak=3500),this.Af="small",this.me=0,this.ih=.2,this.Pf=!1,this.jh=6E3)}
l.Oc=function(a){this.body.pb(this.body.ha()+2*Math.PI*a/this.jh);0<this.me&&(this.me-=a);"expanding"==this.Af?0>=this.me?(this.Af="big",this.rg=this.Mo,this.me=this.Ak):(a=(this.xj-this.me)/this.xj,a=Yb(.15,.85,a),this.rg=this.pm*(1-a)+a*this.Mo):"big"==this.Af&&0>=this.me?(this.Af="shrinking",gc("goo"),this.me=this.xj):"shrinking"==this.Af&&(0>=this.me?(this.Af="small",this.rg=this.pm,this.me=this.Ak):(a=(this.xj-this.me)/this.xj,a=Yb(.15,.85,a),this.rg=this.pm*a+(1-a)*this.Mo));0>=this.q[1]?(this.body.ze(G[this.type].xa),
this.oa=G[this.type].oa):(this.body.ze(.3*G[this.type].xa),this.oa=.3*G[this.type].oa);this.ox()};l.ox=function(){0>=this.q[1]&&R(this.body.g.position,this.n.body.g.position)<this.rg&&this.wl(this.n);for(var a=0;a<this.i.r.length;a++)0>=this.q[1]&&R(this.body.g.position,this.i.r[a].body.g.position)<this.rg&&this.i.r[a].className!=this.className&&this.wl(this.i.r[a])};l.ag=function(){};l.wl=function(a){a.gu(100)};
l.$t=function(a,b){0<this.q[1]||(this.Q||(a.beginPath(),a.strokeStyle=this.color,a.fillStyle=this.color,a.lineWidth=2,a.save(),a.globalAlpha*=.3,a.arc(this.body.g.position.x*b,this.body.g.position.y*b,this.rg*b,0,1.998*Math.PI),a.stroke(),a.fill(),a.restore()),"big"==this.Af&&za(a,this.body.g.position.x,this.body.g.position.y,this.N,1-this.me/this.Ak))};
l.Oe=function(){0>=this.q[1]&&("shrinking"==this.Af?(this.me=this.xj-this.me,this.Af="expanding"):"big"==this.Af?this.me=this.Ak:"small"==this.Af&&(this.me=this.xj,this.Af="expanding",gc("goo")))};l.Hj=function(a){"small"!=this.Af&&0>=this.q[1]&&a.fa(this.ih);a.fa(this.oa)};xe.prototype=new Fa;l=xe.prototype;l.constructor=xe;function xe(a,b,c,d,f,g){void 0!==a&&(this.si=g,this.type="harpoonhead",this.ma(a,b,c,d,f),this.wo=this.Om=!1)}l.Oc=function(){this.q=this.si.q};l.Oe=function(){this.si.Zb(this.si.Dp)};l.Eg=function(a){this.Re=a};l.ag=function(){};l.open=function(){};yc.prototype=new Fa;yc.prototype.constructor=yc;function yc(a,b,c,d,f){this.type="mote";this.Li=!1;this.ma(a,b,c,d,f);this.If=!1;this.De=5;this.Pf=!1;this.jh=2E3;this.gj=!0;this.im=!1;this.zn=1;this.dd=3E3;"easy"==L&&(this.dd=2E3)}yc.prototype.ag=function(){0>=this.q[1]&&this.n.Zb(this.dd,!0)};yc.prototype.Oc=function(a){this.body.pb(this.body.ha()+2*Math.PI*a/this.jh)};yc.prototype.Hf=function(a,b,c,d){0<this.q[1]&&(this.body.ja(new b2Vec2(b*Math.cos(c),b*Math.sin(c)),this.body.h.m),d||this.open(this.Ij))};ve.prototype=new Fa;l=ve.prototype;l.constructor=ve;function ve(a,b,c,d,f){this.type="orbiter";this.Li=!0;this.pg=500;this.ma(a,b,c,d,f);f&&(this.If=!1,this.De=5,this.zp=1.25*this.n.Vg,this.Jr=1,this.ue=18,this.qm=!0,this.Sl=1,this.gv=18,this.hv=9,this.gj=!0,this.oj=2,this.Cn=!1,this.Kr=50,this.gA=!0,this.YB=3,this.kz=[-1,1,-4,4,-8,8,-12,12,-16,16],this.Wu=4,this.dn=0,this.Rv=250,this.dv=G[this.type].xa,this.im=!1,this.zn=.5,this.BB=200,this.Mq=100,this.jz=1.2*this.n.Vg,this.gz=!1,this.iy=2)}
l.zd=function(){};
l.Oc=function(a){this.ue=R(this.body.g.position,this.n.body.g.position)<1.5*this.zp?this.hv:this.gv;this.Mq-=a;if(0>this.Mq){for(var b=!1,c=0;c<this.i.vh.length;c++)Lb(this.i.vh[c],this.body.g.position)&&(b=!0);this.wu=b;this.Mq=this.BB}0<this.dn?(this.dn-=a,this.xa=3):this.xa=this.dv;Pc(this,this.n.body.g.position);!this.yf&&Sb(0,this.body.g.position)&&(this.Zb(this.pg,!0),this.yf=!0);0<this.Ah&&(this.Ah-=a);Sb(0,this.body.g.position)||(this.yf=!1,this.Zb(100,!0));this.nx=(this.Cn=this.n.bj&&!Ac(this.n,
this.body.g.position)||0<this.n.q[0]||0<this.n.q[1]||0<this.n.q[4])&&!this.Q&&this.path&&1==this.path.length&&this.path[0]==this.n.body.g.position&&0>=this.q[1]&&this.yf;this.gj=!this.nx};
l.fu=function(){if(this.Cn)return Ub(this.w.Rb,this.body.g.position,this.n.body.g.position,this.w.i.rp);var a=S(this.n.body.g.position,this.body.g.position),b=this.kz,c=0;this.gA&&(this.Jr*=-1);for(var d=!1,f=null,g=0;!d&&c<b.length;){for(var h=a+2*Math.PI/64*b[c]*this.Jr,d=!0,h=new b2Vec2(this.n.body.g.position.x+Math.cos(h)*this.zp,this.n.body.g.position.y+Math.sin(h)*this.zp),k=0;k<this.i.vh.length;k++)if(Lb(this.i.vh[k],h)){d=!1;break}if(d)if(f=Ub(this.w.Rb,this.body.g.position,h,this.w.i.rp),
f.path){a:{h=f.path;for(k=0;k<h.length-1;k++)if(Ob(h[k],h[k+1],this.n.body.g.position)<this.jz){h=!1;break a}h=!0}if(!h&&(d=!1,g+=1,g>=this.Wu))break}else if(d=!1,g+=1,g>=this.Wu)break;if(d)return f;c+=1}if(this.w.pa)a={path:null,Rd:null};else if(R(this.body.g.position,this.n.body.g.position)<this.jz){a=this.w.Rb;b=this.body.g.position;c=N[this.w.V].Oa;d=null;f=0;g=S(this.body.g.position,this.n.body.g.position);for(h=0;h<c.length;h++)k=Wb(g,S(this.body.g.position,{x:c[h][0]/F,y:c[h][1]/F})),k=Math.abs(k-
g),k>f&&(f=k,d=c[h]);a=Ub(a,b,{x:d[0]/F,y:d[1]/F})}else a=Ub(this.w.Rb,this.body.g.position,this.n.body.g.position,this.w.i.rp);return a};
l.move=function(){if(!(this.n.Q||0<this.q[0])){this.Ld+=1;if(null==this.path||this.Ld>=this.ue){var a=this.fu();if(!a.path)return;if(this.path&&0==this.path.length||this.path&&1==this.path.length&&a.path[a.length-1]==this.n.body.g.position||this.Ld>=this.ue||this.path&&!Jb(this.body.g.position,this.path[0],this.i.kf))null!=a.path&&(this.path=a.path,this.hE=this.path[this.path.length-1]),this.Ld=Math.floor(.1*Math.random()*this.ue)}if(this.path){a=this.path[0];if(0==this.Ld%4){for(;0<this.path.length&&
1>R(a,this.body.g.position);)this.path=this.path.slice(1),a=this.path[0];if(!a||!Jb(this.body.g.position,a,this.i.kf))return;Jb(this.body.g.position,this.n.body.g.position,this.i.kf)&&this.hE==this.n.body.g.position&&(this.path=[this.n.body.g.position],a=this.path[0])}a&&this.Fr(a)}}};l.Hj=function(a){this.nx?(a.fa(this.oj),a.fa(this.oa)):this.wu&&this.gj&&0<this.xu||0<this.q[2]?a.fa(this.zv):(0<this.q[2]&&a.fa(this.YB),a.fa(this.oa))};
l.Fr=function(a){a=new b2Vec2(a.x-this.body.g.position.x,a.y-this.body.g.position.y);a.xb();this.Hj(a);this.body.ja(a,this.body.h.m)};l.ag=function(){var a=S(this.body.g.position,this.n.body.g.position);new b2Vec2(this.Kr*Math.cos(a),this.Kr*Math.sin(a));this.n.body.ja(new b2Vec2(this.Kr*Math.cos(a),this.Kr*Math.sin(a)),this.n.body.h.m)};l.Oe=function(){this.dn=this.Rv};l.Tl=function(a,b,c){a.save();a.beginPath();a.strokeStyle=this.color;1==c&&(a.lineWidth=2,a.strokeStyle="gray")};
l.Ql=function(a,b,c){this.Q||1==c&&(!(0<this.xc)||this.Q||0<this.q[0]||Aa(a,this.body.g.position.x,this.body.g.position.y,this.N,1-this.xc/this.Vh))};l.Rl=function(a){a.stroke();a.restore()};te.prototype=new ue;te.prototype.constructor=te;function te(a,b,c,d,f,g,h){this.type="piercing_fighter_bullet";this.ma(a,b,c,d,f);null!==a&&(this.If=!1,this.De=5,this.fv=h,this.$b=new b2Vec2(Math.cos(g),Math.sin(g)),this.$b.xb(),this.$b.fa(this.oa),"easy"==L&&this.$b.fa(.5),this.Gd=!1,this.mo=100,"easy"==L&&(this.mo=50),this.nv=!1,this.body.Hw(),this.yn=!1,this.Dt=.33,this.lx=150,this.Dt=.33)}te.prototype.Hf=function(){};te.prototype.Ye=ue.prototype.Ye;zc.prototype=new Fa;l=zc.prototype;l.constructor=zc;function zc(a,b,c,d,f){this.type="slingshot";this.ma(a,b,c,d,f);this.If=!1;"easy"==L&&(this.oa*=.8);this.ND=50;this.au=!1;this.De=5;this.ih=.5;this.Gd=!1;this.jD=this.color;this.Fp=!1;this.Ni=null;this.Ep=0;this.OD=100;this.QD=1;this.oi=0;this.OB=750;this.NB=100;this.gj=!1;this.qq=["empowered"];this.dv=G[this.type].xa;this.PD=6}l.kj=Fa.prototype.move;
l.move=function(){if(this.Fp){if(0>=this.q[0]){var a=new b2Vec2(this.Ni.x-this.body.g.position.x,this.Ni.y-this.body.g.position.y);a.fa(this.QD);0<this.q[2]&&a.fa(this.ih);this.body.ja(a,this.body.h.m);a=S(this.body.g.position,this.Ni);this.body.pb(a)}}else this.kj()};l.Hj=function(a){0<this.q[2]&&a.fa(this.ih);this.au||a.fa(this.ih);a.fa(this.oa)};
l.Oc=function(a){if(this.Fp&&0>=this.Ep&&1>R(this.Ni,this.body.g.position)||0<this.q[1])this.Fp=!1,this.xa=this.dv;!this.au&&Sb(1,this.body.g.position)&&(this.au=!0);this.If=0<this.oi;this.color=0<this.oi?"red":this.jD;this.MB=0<this.oi&&0>=this.q[1];0<this.Ep&&(this.Ep-=a);0<this.oi&&(this.oi-=a)};l.ag=function(){var a=S(this.body.g.position,this.n.body.g.position),a=new b2Vec2(Math.cos(a),Math.sin(a));0<this.oi?a.fa(this.NB):a.fa(this.ND);this.n.body.ja(a,this.n.body.h.m)};
l.Oe=function(){0>=this.q[1]&&(this.Ni=this.body.g.position.wb(),this.Fp=!0,this.Ep=this.OD,this.oi=this.OB,this.xa=this.PD,gc("sshot"))};l.uj=function(){if(!this.Q){if(0<this.q[0])return"stunned";if(this.vf)return"silenced";if(0<this.q[2])return"gooed"}return this.Ko()};l.Jo=function(a){if("empowered"==a)return"red"};l.Ko=function(){return!this.Q&&0<this.oi?"empowered":"normal"};
function ye(a,b){var c=a.body.ha()+2*Math.PI/3*b;return{x:a.body.g.position.x+Math.cos(c)*a.N*3/4,y:a.body.g.position.y+Math.sin(c)*a.N*3/4}}l.zd=function(a,b){if(this.Fp&&!this.Q){a.beginPath();a.strokeStyle=this.color;a.lineWidth=2;a.moveTo(this.Ni.x*b,this.Ni.y*b);var c=ye(this,1);a.lineTo(c.x*b,c.y*b);c=ye(this,2);a.moveTo(this.Ni.x*b,this.Ni.y*b);a.lineTo(c.x*b,c.y*b);a.stroke()}};ze.prototype=new Fa;l=ze.prototype;l.constructor=ze;function ze(a,b,c,d,f){this.type="spear";this.Li=!0;this.pg=500;this.ma(a,b,c,d,f);this.oj=5;this.Jp=30;"easy"==L&&(this.Jp=40);this.De=5;this.kl=3E3;this.qm=!0;this.Sl=1;this.Gd=!1;this.oy=this.Om=!0}l.kj=Fa.prototype.move;l.move=function(){this.n.Q||0<this.q[0]||(Jb(this.body.g.position,this.n.body.g.position,this.i.kf)?(this.path=[this.n.body.g.position],this.Fr(this.n.body.g.position)):this.kj())};
l.Hj=function(a){this.If&&a.fa(this.oj);0<this.q[2]&&a.fa(this.ih);a.fa(this.oa)};l.Oc=function(){this.If=!this.Q&&this.path&&1==this.path.length&&0>=this.q[1]&&this.yf};l.ag=function(){if(0>=this.q[1]){var a=S(this.body.g.position,this.n.body.g.position);new b2Vec2(this.Jp*Math.cos(a),this.Jp*Math.sin(a));this.n.body.ja(new b2Vec2(this.Jp*Math.cos(a),this.Jp*Math.sin(a)),this.n.body.h.m)}};l.Oe=function(){this.Zb(this.kl);this.kl>this.xc&&(this.xc=this.Vh=this.kl)};
l.ai=function(a){this.q[0]=Math.max(a,this.q[0]);this.Zb(a)};l.Zb=function(a,b){b&&(this.vf=b);this.q[1]=Math.max(a,this.q[1])};l.zd=function(){};l.Tl=function(a,b,c){a.save();a.beginPath();a.strokeStyle=this.color;1==c&&(a.lineWidth=2,a.strokeStyle="gray")};l.Ql=function(a,b,c){this.Q||1==c&&(!(0<this.xc)||this.Q||0<this.q[0]||Aa(a,this.body.g.position.x,this.body.g.position.y,this.N,1-this.xc/this.Vh))};l.Rl=function(a){a.stroke();a.restore()};$e.prototype=new Fa;$e.prototype.constructor=$e;function $e(a,b,c,d,f){this.type="stunner";this.Li=!1;this.ma(a,b,c,d,f);f&&(this.Gd=!1,"HIVE 1-1"==this.w.i.V||"HIVE 1-2"==this.w.i.V)&&(a=Math.min(this.w.H.Uc/120,1),this.oa*=1+.3*a)};ae.prototype=new Fa;l=ae.prototype;l.constructor=ae;function ae(a,b,c,d,f){this.type="tank";this.Li=!1;this.ma(a,b,c,d,f);this.If=!1;this.fd=100;"easy"==L&&(this.fd=80);this.De=5;this.IB=this.am=200;this.th=6;"easy"==L&&(this.th=5);this.gE=75;this.Pg=!1;this.oo=null;this.Pf=this.Gd=!1;this.jh=4E3;this.Om=!0;this.Ij=500;this.qq=["volatile"];this.qa["volatile"]=0;this.qm=!0;this.Sl=1;this.qE=1500}
l.Oc=function(a){this.If=0>=this.q[1];0<this.ls&&(this.ls-=a);0<this.qa["volatile"]&&(this.qa["volatile"]-=a)};l.Rw=function(){this.color="red"};l.Ts=function(a){this.Pg&&(this.color="red",0>=this.am&&!this.Q&&(this.Mc(this.oo),this.cr()),0<this.am&&(this.am-=a))};l.Lq=function(){for(var a=0;a<this.i.Zd.length;a++)if(Lb(this.i.Zd[a],this.body.g.position)){0>=this.q[1]&&0<this.qa["volatile"]?(this.Pg=!0,this.oo="kill"):0<this.qa.open?this.Mc("kill"):this.Mc("accident");break}};
l.Hf=function(a,b,c,d){this.qa.impulsed+=this.Oo;this.Oe(a,b,c);d||this.open(this.Ij);0<this.q[2]?this.body.ja(new b2Vec2(1.3*b*Math.cos(c),1.3*b*Math.sin(c)),this.body.h.m):this.body.ja(new b2Vec2(b*Math.cos(c),b*Math.sin(c)),this.body.h.m);0<this.ls&&!this.Q&&!this.Pg&&0>=this.q[1]&&(this.Pg=!0,this.oo="kill")};l.Oe=function(){this.qa["volatile"]=this.qE};
l.Ye=function(a){a instanceof ae&&(0<this.qa["volatile"]&&!this.Q&&!this.Pg&&0>=this.q[1]?(this.Pg=!0,this.oo="kill"):this.ls=this.gE);this.Q||this.Pg||(a===this.n?0>=this.q[1]?(this.Pg=!0,this.oo="hit_player",Tc(this.w)):this.Mc("hit_player"):a instanceof Fa&&0<a.qa.open&&this.open(a.qa.open))};
l.cr=function(){if(R(this.body.g.position,this.n.body.g.position)<=this.N*this.th){var a=S(this.body.g.position,this.n.body.g.position);this.n.body.ja(new b2Vec2(this.fd*Math.cos(a),this.fd*Math.sin(a)),this.n.body.h.m)}for(a=0;a<this.i.r.length;a++)if(this.i.r[a]!==this&&R(this.body.g.position,this.i.r[a].body.g.position)<=this.N*this.th){var b=S(this.body.g.position,this.i.r[a].body.g.position);this.i.r[a].body.ja(new b2Vec2(this.fd*Math.cos(b),this.fd*Math.sin(b)),this.i.r[a].body.h.m);this.i.r[a].open(1500)}};
l.zd=function(a,b){var c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0;a.save();a.globalAlpha*=1-c;this.Pg&&0<this.am?(a.beginPath(),a.strokeStyle="red",a.lineWidth=5,a.arc(this.body.g.position.x*b,this.body.g.position.y*b,this.N*this.th*(1-this.am/this.IB)*b,0,1.998*Math.PI),a.stroke()):0>=this.q[1]&&0<this.qa["volatile"]&&(a.beginPath(),a.strokeStyle="red",a.lineWidth=2,a.globalAlpha*=.5,a.arc(this.body.g.position.x*b,this.body.g.position.y*b,this.N*this.th*b,0,1.998*Math.PI),a.stroke());a.restore()};
l.Tl=function(a){a.save();a.beginPath();a.lineWidth=2;a.globalAlpha*=.5;a.strokeStyle=G[this.type].color};l.Ql=function(a,b){!this.Q&&0>=this.qa["volatile"]&&0>=this.q[1]&&(a.moveTo(this.body.g.position.x*b+this.N*this.th*b,this.body.g.position.y*b),a.arc(this.body.g.position.x*b,this.body.g.position.y*b,this.N*this.th*b,0,1.998*Math.PI))};l.Rl=function(a){a.stroke();a.restore()};l.Jo=function(a){if("volatile"==a)return"red"};
l.uj=function(){if(this.Q)return"volatile";if(!this.Q){if(0<this.q[0])return"stunned";if(this.vf)return"silenced";if(0<this.qa["volatile"])return"volatile";if(0<this.q[2])return"gooed";if(0<this.qa.impulsed)return"impulsed"}return this.Ko()};af.prototype=new Fa;l=af.prototype;l.constructor=af;function af(a,b,c,d,f){this.type="troll";this.Li=!0;this.pg=1E3;this.ma(a,b,c,d,f);this.Gd=!1;this.ci=400;this.$m=4;"easy"==L&&(this.ci=600,this.$m=3);this.Pf=this.gj=!1;this.jh=1E3;this.xh=[];this.rx=250;this.qm=!0;this.Sl=2;this.Iz=1E3;"easy"==L&&(this.Iz=750);this.im=!0;this.Ky=5E3;"easy"==L&&(this.Ky=2500)}
l.Oc=function(a){var b=(new Date).getTime();0>=this.q[1]&&this.body.pb(this.body.ha()+2*Math.PI*a/this.jh);b%(this.$m*this.ci)<this.ci&&this.Zb(this.ci-b%(this.$m*this.ci),!0);for(b=this.xh.length-1;0<=b;b--)this.xh[b].kh-=a,0>=this.xh[b].kh&&this.xh.splice(b,1);!this.yf&&Sb(0,this.body.g.position)&&(this.Zb(this.pg,!0),this.yf=!0);0<this.Ah&&(this.Ah-=a);Sb(0,this.body.g.position)||(this.yf=!1)};
l.zd=function(a,b){if(!(this.Q||0<this.q[1])){a.save();for(var c in this.xh){a.beginPath();var d=this.xh[c].kh/this.rx;a.globalAlpha*=Math.max(0,(1-2*Math.abs(d-.5))/.5);a.moveTo(this.xh[c].object.body.g.position.x*b,this.xh[c].object.body.g.position.y*b);a.lineTo(this.body.g.position.x*b,this.body.g.position.y*b);a.lineWidth=3;a.strokeStyle=this.color;a.stroke();a.globalAlpha/=Math.max(0,(1-2*Math.abs(d-.5))/.5)}a.restore()}};
l.Hf=function(a,b,c,d){0>=this.q[1]&&this.yf?(this.body.ja(new b2Vec2(.3*b*Math.cos(c),.3*b*Math.sin(c)),this.body.h.m),tc(this.n,this.Iz),gc("pwheel"),this.xh.push({object:this.n,kh:this.rx})):this.body.ja(new b2Vec2(b*Math.cos(c),b*Math.sin(c)),this.body.h.m);d||this.open(this.Ij);this.qa.impulsed+=this.Oo};l.ag=function(){0>=this.q[1]&&(tc(this.n,this.Ky),gc("pwheel"))};
l.Tl=function(a,b,c){a.save();a.beginPath();a.strokeStyle=this.color;1==c&&(a.lineWidth=2,a.strokeStyle="gray");2==c&&(a.lineWidth=2,a.strokeStyle=this.color)};l.Ql=function(a,b,c){this.Q||(1==c&&(!(0<this.xc)||this.Q||0<this.q[0]||Aa(a,this.body.g.position.x,this.body.g.position.y,this.N,1-this.xc/this.Vh)),2==c&&(b=(new Date).getTime(),0>=this.q[1]&&b%(this.$m*this.ci)>this.ci&&Aa(a,this.body.g.position.x,this.body.g.position.y,this.N,(b%(this.$m*this.ci)-this.ci)/((this.$m-1)*this.ci))))};
l.Rl=function(a){a.stroke();a.restore()};bf.prototype=new we;bf.prototype.constructor=bf;function bf(a,b,c,d,f){this.type="disabler";this.ma(a,b,c,d,f);this.De=2;this.Gd=!1;this.pm=3;this.Mo=9;"easy"==L&&(this.Mo=8);this.rg=this.pm;this.xj=500;this.Ak=2500;"easy"==L&&(this.Ak=3500);this.Af="small";this.me=0;this.Pf=!1;this.jh=6E3;this.ih=0}
bf.prototype.ox=function(){0>=this.q[1]&&R(this.body.g.position,this.n.body.g.position)<this.rg&&this.wl(this.n);for(var a=0;a<this.i.r.length;a++)0>=this.q[1]&&R(this.body.g.position,this.i.r[a].body.g.position)<this.rg?this.i.r[a].className!=this.className&&this.wl(this.i.r[a]):"harpoon"==this.i.r[a].type&&(R(this.i.r[a].ab.body.g.position,this.body.g.position)<this.rg||"engaged"==this.i.r[a].jb&&R(this.i.r[a].Jc.body.g.position,this.body.g.position)<this.rg)&&this.wl(this.i.r[a])};
bf.prototype.wl=function(a){"harpoonhead"==a.type?a.si.Zb(100,!0):a===this.n?(sc(a,100),a.Zb(100)):a.Zb(100,!0)};Cc.prototype=new Fa;l=Cc.prototype;l.constructor=Cc;
function Cc(a,b,c,d,f){if(void 0!==a){this.type="harpoon";var g=[];g.push(new b2Vec2(.3*Math.cos(0*Math.PI),.3*Math.sin(0*Math.PI)));g.push(new b2Vec2(.3*Math.cos(5*Math.PI/6),.3*Math.sin(5*Math.PI/6)));g.push(new b2Vec2(.3*Math.cos(7*Math.PI/6),.3*Math.sin(7*Math.PI/6)));this.Li=!0;this.pg=1E3;this.ma(a,b,c,d,f);null!=a&&(this.De=2,this.No=17,"easy"==L&&(this.No=13),this.wj=null,this.jb="inactive",this.my=6,"easy"==L&&(this.my=4.5),this.cC=.33,this.mu=400,"easy"==L&&(this.mu=50),this.nu=1.2,"easy"==
L&&(this.nu=.6),this.Vr=this.n.Vg,this.sv=2,this.zp=.8*this.No,this.gv=40,this.hv=20,this.ue=40,this.Jr=.5>Math.random()?1:-1,this.Dp=500,this.gA=this.Gd=!1,this.po=this.px=5,this.state="seek",this.Nq=this.qx=8,this.Pf=!1,this.Wu=4,this.ku=Math.sqrt(2)/2+Math.sqrt(6)/6-.4,a=cf(this),this.ab=new xe(this.Ea,a.x,a.y,this.id+1E4,this.w,this),this.bC=3,this.ju=null,this.Sq=1E3,this.Jc=null,this.JB=this.gj=!1,this.Cn=!0,this.im=!1,this.zn=1,this.kz=[0,-1,1,-2,2,-4,4,-8,8,-12,12,-16,16,-20,20],this.qm=!0,
this.Sl=3,this.wo=!1)}}l.fu=ve.prototype.fu;l.kj=ve.prototype.move;l.ag=function(){};
l.move=function(){if("inactive"==this.jb||"engaged"==this.jb)if("engaged"==this.jb){var a=new b2Vec2(this.body.g.position.x-this.Jc.body.g.position.x,this.body.g.position.y-this.Jc.body.g.position.y);a.xb();a.fa(this.my);this.Jc==this.n&&0<this.n.q[2]&&a.fa(this.cC);this.Jc.body.ja(a,this.body.h.m);this.Jc!=this.n&&(this.Jc.open(1500),"tank"==this.Jc.type&&(this.Jc.qa["volatile"]=1500))}else null==this.path&&(this.Ld=this.ue),this.kj()};
function cf(a){return new b2Vec2(a.body.g.position.x+a.ku*G[a.type].N*Math.cos(a.Re),a.body.g.position.y+a.ku*G[a.type].N*Math.sin(a.Re))}l.Eg=function(a){this.yj-=1;0>=this.yj&&(this.body.pb(a),this.yj=this.ny,this.ab.body.pb(this.ab.Re));this.Re=a};l.Zb=function(a,b){b&&(this.vf=!0);this.q[1]=Math.max(a,this.q[1])};
l.Oc=function(a){"inactive"==this.jb?Pc(this,this.n.body.g.position):"engaged"==this.jb?Pc(this,this.Jc.body.g.position):Pc(this,this.ab.body.g.position);this.yn="inactive"==this.jb;this.ue=R(this.body.g.position,this.n.body.g.position)<1.5*this.zp?this.hv:this.gv;if("inactive"==this.jb)this.ab.body.ei(cf(this)),this.ab.Eg(this.Re);else if("fire"==this.jb){var b=S(this.body.g.position,this.ab.body.g.position);this.ab.Eg(b);1>this.ab.body.o.ig()&&(this.jb="retract")}else if("retract"==this.jb){if(0>=
this.q[1]||!Sb(0,this.body.g.position))b=S(this.ab.body.g.position,this.body.g.position),this.ab.body.ja(new b2Vec2(this.nu*Math.cos(b),this.nu*Math.sin(b)),this.ab.body.h.m),this.ab.Eg(Math.PI+b),R(this.ab.body.g.position,this.body.g.position)<1.1*this.ku&&(this.jb="inactive",this.Zb(this.Sq,!0),this.Sq>this.xc&&(this.xc=this.Vh=this.Sq),this.ju=null)}else if("engaged"==this.jb)this.ab.body.ei(new b2Vec2(-100,-100));else if("retract_ready"==this.jb){b=new b2Vec2(this.n.body.g.position.x-this.body.g.position.x,
this.n.body.g.position.y-this.body.g.position.y);b.xb();b.fa(2*this.n.hh);var c=this.Jc.body.g.position.wb();c.xn(b);this.ab.body.ei(c);b=S(this.body.g.position,this.ab.body.g.position);this.ab.Eg(b);this.jb="retract";this.Jc=null}0>=this.Nq&&(this.Cn=!1,this.Nq=this.qx);this.Nq-=1;0<this.po&&(this.po-=1);0>=this.po&&((!Jb(this.body.g.position,this.n.body.g.position,this.i.kf)||this.w.pa)&&0>=this.q[1]&&this.yf&&!this.Q&&"inactive"==this.jb&&Sb(0,this.body.g.position)&&R(this.body.g.position,this.n.body.g.position)<=
this.No&&(gc("hfire"),this.jb="fire",this.iu=S(this.ab.body.g.position,this.n.body.g.position.wb()),this.ab.body.ja(new b2Vec2(this.mu*Math.cos(this.iu),this.mu*Math.sin(this.iu)),this.ab.body.h.m),this.ab.Eg(this.iu)),0<this.q[1]&&"inactive"!=this.jb&&Dc(this),"engaged"==this.jb&&(!Sb(1,this.Jc.body.g.position)||this.Jc.Q||R(this.Jc.body.g.position,this.body.g.position)<this.bC)?Dc(this):"engaged"==this.jb&&this.n.Q&&Dc(this),this.po=this.px);0<this.ab.qa.open&&(this.ab.qa.open-=a)};
l.pz=function(a,b){this.pk&&("hit_player"!=this.Q||this.sb<this.Ua-50)&&(this.pk=!1,this.i.uo.push(a));return this.Q&&0>this.sb?(this.i.Ho.push(a),!0):this.Q?(this.sb-=b,this.ab.sb-=b,!0):!1};
l.Mc=function(a){Dc(this);this.Q=a;this.sb=this.Ua;this.pk=!0;"kill"!=this.Q||this.n.Q||(this.w.H.pe+=1,G[this.type].Ii?G[G[this.type].Ii].pe+=1:G[this.type].pe+=1,this.i.pa||(a=this.w.H.Ce*this.Lc,A.cc&&Qc(this.w,a,this.color,this.body.g.position.x,this.body.g.position.y,20),this.w.H.cd+=a,Rc(this.w),Sc(this.w)));gc("sdeath");Nc(this.i,this.type,this.body.g.position,this.body.o);this.ab.Mc("normal")};
l.gh=function(a,b){var c=this.zk(this.uj());if(c!=this.color||this.Q)a.save(),a.strokeStyle=c,a.lineWidth=3,a.globalAlpha*=.5,c=this.Q?Math.min((this.Ua-this.sb)/this.Ua,1):0,this.Q&&(a.globalAlpha*=1-c),a.beginPath(),"engaged"!=this.jb&&"retract_ready"!=this.jb?(a.moveTo(this.body.g.position.x*b,this.body.g.position.y*b),a.lineTo(this.ab.body.g.position.x*b,this.ab.body.g.position.y*b)):(a.moveTo(this.body.g.position.x*b,this.body.g.position.y*b),a.lineTo(this.Jc.body.g.position.x*b,this.Jc.body.g.position.y*
b)),a.stroke(),a.restore()};l.zd=function(a,b){"engaged"!=this.jb&&"retract_ready"!=this.jb&&(this.ab.color=this.zk(this.uj()),this.ab.vf=this.vf,this.ab.qa=this.qa,this.ab.$(a,b))};l.Tl=function(a,b,c){a.save();a.beginPath();a.strokeStyle=this.color;1==c&&(a.lineWidth=2,a.globalAlpha*=.2);2==c&&(a.lineWidth=3,a.globalAlpha*=.5);3==c&&(a.lineWidth=2,a.strokeStyle="gray")};
l.Ql=function(a,b,c){if(!this.Q){1==c&&0>=this.q[1]&&this.yf&&"inactive"==this.jb&&(a.moveTo(this.body.g.position.x*b+this.No*b,this.body.g.position.y*b),a.arc(this.body.g.position.x*b,this.body.g.position.y*b,this.No*b,0,1.998*Math.PI));if(2==c){if(this.zk(this.uj())!=this.color||this.Q)return;"engaged"!=this.jb&&"retract_ready"!=this.jb?(a.moveTo(this.body.g.position.x*b,this.body.g.position.y*b),a.lineTo(this.ab.body.g.position.x*b,this.ab.body.g.position.y*b)):(a.moveTo(this.body.g.position.x*
b,this.body.g.position.y*b),a.lineTo(this.Jc.body.g.position.x*b,this.Jc.body.g.position.y*b))}3==c&&(!(0<this.xc)||this.Q||0<this.q[0]||Aa(a,this.body.g.position.x,this.body.g.position.y,this.N,1-this.xc/this.Vh))}};l.Rl=function(a){a.stroke();a.restore()};l.Oe=function(){this.Zb(this.Dp,!0);this.Dp>this.xc&&(this.xc=this.Vh=this.Dp)};function Dc(a){"engaged"==a.jb&&(a.jb="retract_ready",a.ju=a.Jc.id)};var G={};G.stunner={color:"#00ffff",rb:1.5,xa:4,N:.5,oa:.42,Lc:100,he:1,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:.5,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(2*Math.PI/3),Math.sin(2*Math.PI/3)],[Math.cos(4*Math.PI/3),Math.sin(4*Math.PI/3)]]}],Qt:[{type:"polygon",x:-.1,y:0,Z:.5,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(2*Math.PI/3),Math.sin(2*Math.PI/3)],[Math.cos(4*Math.PI/3),Math.sin(4*Math.PI/3)]]}],Ee:"YES",af:["Upon collision, stuns you for a short period"],className:$e};
G.spear={color:"#f86003",rb:.7,xa:4,N:.7,oa:.24,Lc:500,he:7,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:.7,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(5*Math.PI/6),Math.sin(5*Math.PI/6)],[Math.cos(7*Math.PI/6),Math.sin(7*Math.PI/6)]]}],Ee:"YES",af:["Will dive at you if it has line of sight","When Impulsed, cannot dive for a few moments"],Hg:"Charges you on sight. Hurls you backward on impact.",Bg:"Silenced for two seconds upon entering or re-entering stage. When Impulsed, silenced for five seconds.",
className:ze};
G.tank={color:"#6f27cf",rb:2.5,xa:3,N:1,oa:1.5,Lc:1E3,he:8,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:1,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/2),Math.sin(1*Math.PI/2)],[Math.cos(1*Math.PI),Math.sin(1*Math.PI)],[Math.cos(3*Math.PI/2),Math.sin(3*Math.PI/2)]]}],Wx:[{x1:.5,y1:.5,x2:-.5,y2:-.5},{x1:.5,y1:-.5,x2:-.5,y2:.5}],Ee:"YES",af:["Explodes upon death or collision with player","The explosion radius is outlined around the tank","Will explode upon collision with another Tank if it has been recently Impulsed"],className:ae};
G.mote={color:"#ee42ae",rb:.5,xa:3,N:.5,oa:.15,Lc:1E3,he:.5,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:.5,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/2),Math.sin(1*Math.PI/2)],[Math.cos(1*Math.PI),Math.sin(1*Math.PI)],[Math.cos(3*Math.PI/2),Math.sin(3*Math.PI/2)]]}],Ee:"YES",af:["Cannot be Impulsed # # Upon collision, disarms you for a few moments","To defeat, impulse other enemies into it."],className:yc};
G.goo={color:"#e6c43c",rb:7,xa:9,N:.5,oa:3.5,Lc:3E3,he:.25,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:.5,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(2*Math.PI/5),Math.sin(2*Math.PI/5)],[Math.cos(4*Math.PI/5),Math.sin(4*Math.PI/5)],[Math.cos(6*Math.PI/5),Math.sin(6*Math.PI/5)],[Math.cos(8*Math.PI/5),Math.sin(8*Math.PI/5)]]}],nj:[{type:"circle",x:0,y:0,Z:1.3,Et:!0}],Ee:"YES",af:["All units within its area of influence are slowed","When Impulsed, expands its area of influence for a few moments"],
className:we};
G.harpoon={color:"#00aa00",rb:6,xa:6,N:.7,oa:5.4,Lc:3E3,he:6,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:.7,ga:[[Math.cos(1*Math.PI/4)-.4,Math.sin(1*Math.PI/4)],[Math.cos(7*Math.PI/8)-.4,Math.sin(7*Math.PI/8)],[Math.cos(9*Math.PI/8)-.4,Math.sin(9*Math.PI/8)],[Math.cos(7*Math.PI/4)-.4,Math.sin(7*Math.PI/4)]]}],nj:[{type:"polygon",x:-.1,y:0,Z:.7,Et:!1,ga:[[Math.cos(7*Math.PI/4)-.4,Math.sin(7*Math.PI/4)],[((Math.sqrt(2)+Math.sqrt(6))/2-.4)*Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/4)-.4,Math.sin(1*
Math.PI/4)]]},{type:"polygon",x:-.1,y:0,Z:.7,ga:[[Math.cos(1*Math.PI/4)-.4,Math.sin(1*Math.PI/4)],[Math.cos(7*Math.PI/8)-.4,Math.sin(7*Math.PI/8)],[Math.cos(9*Math.PI/8)-.4,Math.sin(9*Math.PI/8)],[Math.cos(7*Math.PI/4)-.4,Math.sin(7*Math.PI/4)]]}],Qt:[],Ee:"NO",af:"Fires its hook at you and # attempts to yank you in # # Can only fire through the void.;The hook range is outlined # around the Harpoon;If you are hooked, # impulse the harpoon and it will let you go;Will attempt to avoid you and also avoid the void.;While the hook is detached from the Harpoon, it cannot move;Does not die on collision;During boss battles, can fire at any time".split(";"),
className:Cc};
G.harpoonhead={color:"#00dd00",rb:1.2,xa:6,N:G.harpoon.N*Math.sqrt(6)/3,oa:1.5,Lc:1E3,he:6,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:G.harpoon.N*Math.sqrt(6)/3,ga:[[Math.cos(4*Math.PI/3),Math.sin(4*Math.PI/3)],[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(2*Math.PI/3),Math.sin(2*Math.PI/3)]]}],Ee:"NO",Hg:"Shoots a harpoon which can latch onto you. Once you are latched, the Harpoon will attempt to drag you to your death.",Bg:"In normal levels, harpoons can only fire through obstacles and are harmless up close. In boss levels, harpoons can fire at any time. Impulsing a harpoon silences it for 1 second. Harpoons will flee from you.",description:"Shoots a harpoon that can latch onto you. Once you are latched, it will attempt to drag you to your death.",
className:xe};
G.fighter={color:"#0000ff",rb:3,xa:6,N:.75,oa:2.5,Lc:4E3,he:9,Vj:"hunter",Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:.75,ga:[[Math.cos(1*Math.PI/4)+.3,Math.sin(1*Math.PI/4)],[Math.cos(3*Math.PI/4)+.3,Math.sin(3*Math.PI/4)],[Math.cos(5*Math.PI/4)+.3,Math.sin(5*Math.PI/4)],[Math.cos(7*Math.PI/4)+.3,Math.sin(7*Math.PI/4)]]},{type:"polygon",x:0,y:0,Z:.75,ga:[[Math.cos(3*Math.PI/4)+.3,Math.sin(3*Math.PI/4)],[Math.cos(1*Math.PI/4)+.3,Math.sin(1*Math.PI/4)],[Math.cos(3*Math.PI/4)-Math.sqrt(6)/4+.3,Math.sqrt(2)]]},
{type:"polygon",x:0,y:0,Z:.75,ga:[[Math.cos(7*Math.PI/4)+.3,Math.sin(7*Math.PI/4)],[Math.cos(5*Math.PI/4)+.3,Math.sin(5*Math.PI/4)],[Math.cos(3*Math.PI/4)-Math.sqrt(6)/4+.3,-Math.sqrt(2)]]}],af:"Fires bullets at you on sight # # Has a force-field which resists impulse. # Touching this force-field will knock you back.;To defeat, reflect the bullets back at the hunter with impulse.;Periodically charges up a Frenzy bar # # When the Hunter has five Frenzy bars, # it will enter Frenzy mode;During Frenzy mode, moves faster and fires bullets that cannot be Impulsed;During Frenzy mode, # loses a Frenzy bar whenever it fires # # When the Frenzy bars are depleted, # the Hunter exits Frenzy mode;Loses one frenzy bar every time it is Impulsed".split(";"),
Ee:"NO",Hg:"Fires bullets at you upon sight. Bullets fling you backwards on impact. For every 2 seconds that the Fighter is idle, it loads up a piercing bullet, which cannot be Impulsed.",Bg:"Normal bullets can be reflected to hit other enemies and even the Fighter itself.",className:re};
G.fighter_bullet={color:"#0000ec",rb:1,xa:3,N:.3,oa:.5,Lc:0,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:.3,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/4),Math.sin(1*Math.PI/4)],[Math.cos(3*Math.PI/4),Math.sin(3*Math.PI/4)],[Math.cos(5*Math.PI/4),Math.sin(5*Math.PI/4)],[Math.cos(7*Math.PI/4),Math.sin(7*Math.PI/4)]]}],className:ue};
G.piercing_fighter_bullet={color:"#ff0000",rb:1,xa:3,N:.3,oa:1,Lc:0,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:.3,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/4),Math.sin(1*Math.PI/4)],[Math.cos(3*Math.PI/4),Math.sin(3*Math.PI/4)],[Math.cos(5*Math.PI/4),Math.sin(5*Math.PI/4)],[Math.cos(7*Math.PI/4),Math.sin(7*Math.PI/4)]]}],className:te};
G.disabler={color:"#cccccc",rb:8,xa:9,N:.5,oa:5,Lc:5E3,he:.25,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:.5,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/3),Math.sin(1*Math.PI/3)],[Math.cos(2*Math.PI/3),Math.sin(2*Math.PI/3)],[Math.cos(3*Math.PI/3),Math.sin(3*Math.PI/3)],[Math.cos(4*Math.PI/3),Math.sin(4*Math.PI/3)],[Math.cos(5*Math.PI/3),Math.sin(5*Math.PI/3)]]}],nj:[{type:"circle",x:0,y:0,Z:1.3,Et:!0}],Ee:"YES",af:["Disables all units within its area of influence","When Impulsed, expands its area of influence for a few moments",
"Colliding with a disabled enemy will not reset your multiplier # # However you will not score points"],Hg:"Leaves behind a trail of crippling poison. Everything that passes through the poison is silenced.",Bg:"Passing through goo will instantly slow you down, which may help you survive blasts from other enemies. Goos are not affected by each other.",className:bf};
G.troll={color:"#159d31",rb:1.5,xa:3,N:.7,oa:.38,Lc:4E3,he:2,Vj:"pinwheel",Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:1,ga:[[0,0],[.25*Math.cos(5*Math.PI/3),.25*Math.sin(5*Math.PI/3)],[Math.sqrt(52)/8*Math.cos(-.408),Math.sqrt(52)/8*Math.sin(-.408)],[.25*Math.cos(1*Math.PI/3),.25*Math.sin(1*Math.PI/3)]]},{type:"polygon",x:0,y:0,Z:1,ga:[[0,0],[.25*Math.cos(1*Math.PI/3),.25*Math.sin(1*Math.PI/3)],[Math.sqrt(52)/8*Math.cos(-.408+2*Math.PI/3),Math.sqrt(52)/8*Math.sin(-.408+2*Math.PI/3)],[.25*Math.cos(3*Math.PI/
3),.25*Math.sin(3*Math.PI/3)]]},{type:"polygon",x:0,y:0,Z:1,ga:[[0,0],[.25*Math.cos(3*Math.PI/3),.25*Math.sin(3*Math.PI/3)],[Math.sqrt(52)/8*Math.cos(-.408+4*Math.PI/3),Math.sqrt(52)/8*Math.sin(-.408+4*Math.PI/3)],[.25*Math.cos(5*Math.PI/3),.25*Math.sin(5*Math.PI/3)]]}],Qt:[{type:"polygon",x:-.2,y:0,Z:1,ga:[[0,0],[.25*Math.cos(5*Math.PI/3+.36),.25*Math.sin(5*Math.PI/3+.36)],[Math.sqrt(52)/8*Math.cos(-.408+.36),Math.sqrt(52)/8*Math.sin(-.408+.36)],[.25*Math.cos(1*Math.PI/3+.36),.25*Math.sin(1*Math.PI/
3+.36)]]},{type:"polygon",x:-.2,y:0,Z:1,ga:[[0,0],[.25*Math.cos(1*Math.PI/3+.36),.25*Math.sin(1*Math.PI/3+.36)],[Math.sqrt(52)/8*Math.cos(-.408+2*Math.PI/3+.36),Math.sqrt(52)/8*Math.sin(-.408+2*Math.PI/3+.36)],[.25*Math.cos(3*Math.PI/3+.36),.25*Math.sin(3*Math.PI/3+.36)]]},{type:"polygon",x:-.2,y:0,Z:1,ga:[[0,0],[.25*Math.cos(3*Math.PI/3+.36),.25*Math.sin(3*Math.PI/3+.36)],[Math.sqrt(52)/8*Math.cos(-.408+4*Math.PI/3+.36),Math.sqrt(52)/8*Math.sin(-.408+4*Math.PI/3+.36)],[.25*Math.cos(5*Math.PI/3+.22),
.25*Math.sin(5*Math.PI/3+.22)]]}],af:["Upon collision, # reverses your controls for a few moments","If Impulsed while active, # reverses your controls for a short period","Periodically becomes inactive # # Inactive pinwheels will not reverse you and fly farther when Impulsed"],Ee:"YES",Hg:"When active, impulsing the Troll will pull it towards you. Upon impact, reverses your movement and impulse controls.",Bg:"The troll alternates between active and inactive every second.",className:af};
G.slingshot={color:"#a0522d",rb:.2,xa:7,N:1,oa:.65,Lc:5E3,he:10,Ve:!0,Xb:[{type:"polygon",x:-.25,y:0,Z:1,ga:[[1*Math.cos(0*Math.PI)/4,1*Math.sin(0*Math.PI)/4],[1*Math.cos(2*Math.PI/3)/2,1*Math.sin(2*Math.PI/3)/2],[1*Math.cos(4*Math.PI/3)/2,1*Math.sin(4*Math.PI/3)/2]]},{type:"polygon",x:-.25,y:0,Z:1,ga:[[1*Math.cos(0*Math.PI),1*Math.sin(0*Math.PI)],[1*Math.cos(2*Math.PI/3),1*Math.sin(2*Math.PI/3)],[1*Math.cos(2*Math.PI/3),1*Math.sin(2*Math.PI/3)/2],[1*Math.cos(0*Math.PI)/4,1*Math.sin(0*Math.PI)/4]]},
{type:"polygon",x:-.25,y:0,Z:1,ga:[[1*Math.cos(0*Math.PI),1*Math.sin(0*Math.PI)],[1*Math.cos(0*Math.PI)/4,1*Math.sin(0*Math.PI)/4],[1*Math.cos(4*Math.PI/3),1*Math.sin(4*Math.PI/3)/2],[1*Math.cos(4*Math.PI/3),1*Math.sin(4*Math.PI/3)]]}],Ux:[[[1*Math.cos(0*Math.PI)/4-.25,1*Math.sin(0*Math.PI)/4],[.75*Math.cos(0*Math.PI)-.25,3*Math.sin(0*Math.PI)/4]]],Ee:"YES",Hg:"When Impulsed, it will hook onto the ground and slingshot back towards you, flinging you away if it hits you.",Bg:"If the slingshot hits you while not slingshoting, it will still push you back a fair way.",
className:zc,af:["When Impulsed, latches onto its current position # and slingshots back at you","While slingshotting, cannot be impulsed"]};
G.orbiter={color:"red",rb:.3,xa:15,N:.5,oa:.96,Lc:5E3,he:10,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:.5,ga:[[Math.cos(0*Math.PI)+.4,Math.sin(0*Math.PI)],[Math.cos(2*Math.PI/3)+.4,Math.sin(2*Math.PI/3)],[.4,0]]},{type:"polygon",x:0,y:0,Z:.5,ga:[[Math.cos(4*Math.PI/3)+.4,Math.sin(4*Math.PI/3)],[Math.cos(0*Math.PI)+.4,Math.sin(0*Math.PI)],[.4,0]]},{type:"polygon",x:0,y:0,Z:.5,ga:[[.4,0],[-.6,.3],[-1.6,0],[-.6,-.3]]}],Ux:[[[.5,0],[.2,0]]],af:["Intelligently avoids your Impulse # # Will charge at you opportunistically"],
Ee:"YES",Hg:"Locks onto you. Actively avoids your Impulse. Charges you if you've shot your Impulse the other way.",Bg:"Intelligent and dangerous.",className:ve};
G.deathray={color:"#dddddd",xy:"black",rb:6,xa:6,N:1,oa:7.2,Lc:1E4,he:10,Ve:!0,Xb:[{type:"polygon",x:0,y:0,Z:1.5,ga:[[.5*Math.cos(3*Math.PI/4)+.2,.5*Math.sin(3*Math.PI/4)],[Math.cos(3*Math.PI/4)+.2,Math.sin(3*Math.PI/4)],[Math.cos(5*Math.PI/4)+.2,Math.sin(5*Math.PI/4)],[.5*Math.cos(5*Math.PI/4)+.2,.5*Math.sin(5*Math.PI/4)]]},{type:"polygon",x:0,y:0,Z:1.5,ga:[[.6*Math.cos(1*Math.PI/3)+.2,.6*Math.sin(1*Math.PI/3)],[Math.cos(3*Math.PI/4)+.2,Math.sin(3*Math.PI/4)],[.5*Math.cos(3*Math.PI/4)+.2,.5*Math.sin(3*
Math.PI/4)],[.8*Math.cos(1*Math.PI/3)+.2,.3*Math.sin(1*Math.PI/3)]]},{type:"polygon",x:0,y:0,Z:1.5,ga:[[.8*Math.cos(5*Math.PI/3)+.2,.3*Math.sin(5*Math.PI/3)],[.5*Math.cos(5*Math.PI/4)+.2,.5*Math.sin(5*Math.PI/4)],[Math.cos(5*Math.PI/4)+.2,Math.sin(5*Math.PI/4)],[.6*Math.cos(5*Math.PI/3)+.2,.6*Math.sin(5*Math.PI/3)]]}],af:["Fires an enormous ray that destroys everything in its path # # The ray has infinite range","After firing, must recharge for a short period # # During this time, the death ray cannot move",
"DOes not die on collision"],Ee:"NO",Hg:"While in turret mode, sends a devastating ray across the level every 2 seconds.",Bg:"Death rays will only enter turret mode after they are a certain distance away from the walls. Death rays take 1 seconds to enter or leave turret mode.",className:oe};
G["first boss"]={color:w["boss 1"],rb:4.5,xa:8,N:3,oa:0,Lc:[1E6,5E6,15E6],he:10,Sf:!0,uf:8,Cf:6,Xb:[{type:"polygon",x:0,y:0,Z:3,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/2),Math.sin(1*Math.PI/2)],[Math.cos(2*Math.PI/2),Math.sin(2*Math.PI/2)],[Math.cos(3*Math.PI/2),Math.sin(3*Math.PI/2)]]}],Pv:[{type:"polygon",x:0,y:0,Z:3,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/2),Math.sin(1*Math.PI/2)],[Math.cos(2*Math.PI/2),Math.sin(2*Math.PI/2)],[Math.cos(3*Math.PI/
2),Math.sin(3*Math.PI/2)]]}],Gu:[{type:"polygon",x:0,y:0,Z:3,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/2),Math.sin(1*Math.PI/2)],[Math.cos(2*Math.PI/2),Math.sin(2*Math.PI/2)],[Math.cos(3*Math.PI/2),Math.sin(3*Math.PI/2)]]}],hu:[{type:"polygon",x:0,y:0,Z:3,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/2),Math.sin(1*Math.PI/2)],[Math.cos(2*Math.PI/2),Math.sin(2*Math.PI/2)],[Math.cos(3*Math.PI/2),Math.sin(3*Math.PI/2)]]}],Ee:"NO",Hg:"Shoots stunners, spears, and tanks at you. Can cast a global lighten, which causes everything to lighter and much easier to push.",
Bg:"The color of the boss's guns reflect what it is shooting. During the global lighten, the boss will shoot faster. Use this time to clear the field of enemies.",className:ed};
G["second boss"]={color:w["boss 2"],rb:4.5,xa:8,N:3,oa:0,Lc:[1E6,5E6,15E6],he:10,Sf:!0,Xb:[{type:"polygon",x:0,y:0,Z:3,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/4),Math.sin(1*Math.PI/4)],[Math.cos(2*Math.PI/4),Math.sin(2*Math.PI/4)],[Math.cos(3*Math.PI/4),Math.sin(3*Math.PI/4)],[Math.cos(4*Math.PI/4),Math.sin(4*Math.PI/4)],[Math.cos(5*Math.PI/4),Math.sin(5*Math.PI/4)],[Math.cos(6*Math.PI/4),Math.sin(6*Math.PI/4)],[Math.cos(7*Math.PI/4),Math.sin(7*Math.PI/4)]]}],Ee:"NO",Hg:"Exerts a gravity on the field, pulling everything towards it. The closer to the boss, the stronger the pull. The boss has four gravity arms, inside which the gravity is doubled. The boss can also send a massive shockwave through the field.",
Bg:"Enemies that collide with the boss will be absorbed, increasing the boss's shockwave range. If you touch the boss, you will be flung away.",className:ke};
G["third boss"]={color:"#a260a6",rb:2,xa:8,N:4.5,oa:0,he:10,Lc:[1E6,5E6,15E6],Sf:!0,uf:16,Cf:6,Xb:[{type:"polygon",x:0,y:0,Z:4.5,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(1*Math.PI/8),Math.sin(1*Math.PI/8)],[Math.cos(2*Math.PI/8),Math.sin(2*Math.PI/8)],[Math.cos(3*Math.PI/8),Math.sin(3*Math.PI/8)],[Math.cos(4*Math.PI/8),Math.sin(4*Math.PI/8)],[Math.cos(5*Math.PI/8),Math.sin(5*Math.PI/8)],[Math.cos(6*Math.PI/8),Math.sin(6*Math.PI/8)],[Math.cos(7*Math.PI/8),Math.sin(7*Math.PI/8)],[Math.cos(8*
Math.PI/8),Math.sin(8*Math.PI/8)],[Math.cos(9*Math.PI/8),Math.sin(9*Math.PI/8)],[Math.cos(10*Math.PI/8),Math.sin(10*Math.PI/8)],[Math.cos(11*Math.PI/8),Math.sin(11*Math.PI/8)],[Math.cos(12*Math.PI/8),Math.sin(12*Math.PI/8)],[Math.cos(13*Math.PI/8),Math.sin(13*Math.PI/8)],[Math.cos(14*Math.PI/8),Math.sin(14*Math.PI/8)],[Math.cos(15*Math.PI/8),Math.sin(15*Math.PI/8)]]}],eB:[{type:"polygon",x:0,y:0,Z:4.5,ga:[[0,0],[Math.cos(0*Math.PI/8),Math.sin(0*Math.PI/8)],[Math.cos(1*Math.PI/8),Math.sin(1*Math.PI/
8)]]}],Ee:"NO",Hg:"Has six turrets which fire bullets. Can cast a global silence and enter berserk mode, during which its attack speed is doubled.",Bg:"Turrets which enter an obstacle cannot attack. Bullets can be reflected by Impulse to hit other enemies, including the boss.",className:be};
G["fourth boss"]={color:"#ff0000",rb:9,xa:10,N:4,oa:0,he:10,Lc:[1E6,5E6,15E6],Sf:!0,uf:17,Cf:6,Xb:[{type:"polygon",x:0,y:0,Z:4,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(2*Math.PI/5),Math.sin(2*Math.PI/5)],[Math.cos(4*Math.PI/5),Math.sin(4*Math.PI/5)],[Math.cos(6*Math.PI/5),Math.sin(6*Math.PI/5)],[Math.cos(8*Math.PI/5),Math.sin(8*Math.PI/5)]]}],fj:2,zB:[{type:"polygon",x:0,y:0,Z:2,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(2*Math.PI/5),Math.sin(2*Math.PI/5)],[Math.cos(4*
Math.PI/5),Math.sin(4*Math.PI/5)],[Math.cos(6*Math.PI/5),Math.sin(6*Math.PI/5)],[Math.cos(8*Math.PI/5),Math.sin(8*Math.PI/5)]]}],Ee:"NO",Hg:"Periodically spawns capsules. Has a thin laser which sweeps around the field. When the sweep laser hits a capsule, the capsule spawns a large number of enemies. The boss has two additional lasers, one which paralyzes and one which exerts massive force.",Bg:"The sweep laser can be blocked, preventing capsules from spawning enemies.",className:Xc};
G["boss four attacker"]={color:"white",rb:1.5,xa:1,vy:.1,N:2.2,oa:360,he:10,Lc:[1E6,5E6,15E6],Xb:[{type:"polygon",x:0,y:0,Z:.1,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(2*Math.PI/5),Math.sin(2*Math.PI/5)],[Math.cos(4*Math.PI/5),Math.sin(4*Math.PI/5)],[Math.cos(6*Math.PI/5),Math.sin(6*Math.PI/5)],[Math.cos(8*Math.PI/5),Math.sin(8*Math.PI/5)]]}],className:dd};
G["boss four spawner"]={color:"rgb(0, 255, 0)",rb:4,xa:12,vy:.1,N:1,oa:0,Lc:5E3,Xb:[{type:"polygon",x:0,y:0,Z:.1,ga:[[Math.cos(0*Math.PI),Math.sin(0*Math.PI)],[Math.cos(2*Math.PI/5),Math.sin(2*Math.PI/5)],[Math.cos(4*Math.PI/5),Math.sin(4*Math.PI/5)],[Math.cos(6*Math.PI/5),Math.sin(6*Math.PI/5)],[Math.cos(8*Math.PI/5),Math.sin(8*Math.PI/5)]]}],className:bd};var df={stunner:500,spear:250,tank:150,mote:150,goo:50,harpoon:50,disabler:50,fighter:50,slingshot:50,troll:50,deathray:25,orbiter:50};
function ef(){for(var a in G)if(G[a].Ve){var b=new G[a].className(null,0,0,0,null),c=G[a],d={},f=b.Xb,g=b.cE.concat(b.qq);for(index in g){var h=g[index],k=document.createElement("canvas");k.width=2*G[b.type].N*b.fm*F;k.height=2*G[b.type].N*b.fm*F;var m=k.getContext("2d"),q=b.zk(h);q||(q=b.color);var p=G[b.type].N*Fa.prototype.fm,t=G[b.type].N*Fa.prototype.fm;m.translate(p*F,t*F);Da(m,h,f,b.type,q);m.translate(-p*F,-t*F);d[h]=k}c.images=d}};function ff(a,b,c){this.ma(a,b,c)}ff.prototype.ma=function(a,b,c){this.Qi=a;this.color=b;this.GB=c};ff.prototype.ra=function(){};ff.prototype.$=function(a,b){a.beginPath();a.shadowOffsetX=0;a.shadowOffsetY=0;a.shadowBlur=20;a.shadowColor=this.color;a.moveTo(this.Qi[0].x*b,this.Qi[0].y*b);for(var c=1;c<this.Qi.length;c++)a.lineTo(this.Qi[c].x*b,this.Qi[c].y*b);a.closePath();a.fillStyle=this.GB;a.strokeStyle=this.color;a.lineWidth=6;a.stroke();a.fill();a.shadowBlur=0};function gf(a,b,c,d,f,g,h){this.ma(a,b,c,d,f,g,h)}gf.prototype.ma=function(a,b,c,d,f,g,h){this.i=a;this.Bt=a.vh;this.Zd=a.Zd;b&&(this.nz=b,this.ga=c,this.bs=g,this.mA=h);this.Wg=(new Date).getTime()};function hf(a,b,c,d){var f;if(f=Jb(b,c,a.nz,d)){if(!(d=c.p_n!=d))a:{a=a.Zd[c.p_n];d=a.length-1;for(f=0;f<a.length;f++){if(Kb(b,c,a[f],a[d])){d=!1;break a}d=f}d=!0}f=d}return f}
function Ub(a,b,c,d){if(Jb(b,c,a.nz)&&Jb(b,c,a.i.kf))return{path:[c],Rd:R(b,c)};for(var f=null,g=null,h=0;h<a.Bt.length;h++)Lb(a.Bt[h],b)&&(f=h),Lb(a.Bt[h],c)&&(g=h);var k=null,m=null,q=a.mA[50*Math.floor(b.x*F/50)+" "+50*Math.floor(b.y*F/50)],p=a.mA[50*Math.floor(c.x*F/50)+" "+50*Math.floor(c.y*F/50)];if(q){for(var t=[],h=0;h<q.length;h++)hf(a,b,a.ga[q[h]],f)&&t.push(q[h]);q=t}if(!q||0==q.length)for(q=[],h=0;h<a.ga.length;h++)hf(a,b,a.ga[h],f)&&q.push(h);if(p){f=[];for(h=0;h<p.length;h++)hf(a,c,
a.ga[p[h]],g)&&f.push(p[h]);p=f}if(!p||0==p.length)for(p=[],h=0;h<a.ga.length;h++)hf(a,c,a.ga[h],g)&&p.push(h);for(h=0;h<q.length;h++)for(g=0;g<p.length;g++)if(f=q[h]==p[g]?0:a.bs[q[h]][p[g]].b,null!=f&&(f=R(b,a.ga[q[h]])+f+R(a.ga[p[g]],c),!k||f<k))k=f,m=q[h]==p[g]?[q[h]]:a.bs[q[h]][p[g]].a;if(!m)return{path:null,Rd:null};d&&(d=Math.floor(Math.random()*q.length*p.length),h=Math.floor(d/p.length),g=d%p.length,R(b,5>a.ga[m[0]])&&(h=q.indexOf(m[0])),0!=q.length*p.length&&(f=q[h]==p[g]?0:a.bs[q[h]][p[g]].b,
null!=f&&(f=R(b,a.ga[q[h]])+f+R(a.ga[p[g]],c),d=S(b,a.ga[m[0]]),t=S(b,a.ga[q[h]]),f<1.2*k&&Xb(d,t)<3*Math.PI/8&&!Jb(a.ga[m[0]],a.ga[q[h]])&&(k=f,m=q[h]==p[g]?[q[h]]:a.bs[q[h]][p[g]].a))));q=[];for(h=0;h<m.length;h++)q.push(a.ga[m[h]]);q.push(c);return 2==q.length&&Jb(b,c,a.i.kf)?{path:[c],Rd:R(b,c)}:{path:q,Rd:k}};var Kc=0,Lc=0,Q=0,O=0,P=0,jf=null,kf=null,lf=null,mf=null,F=15,nf=0,X=null,of=null,pf="impulse_save_data",A,L,qf,rf,sf,tf,uf,vf,wf,hc=null,Fb,xf;
window.impulse_main=function(){b2Vec2=n.aa.Math.mg;b2AABB=n.v.Dn;b2BodyDef=n.l.xl;b2Body=n.l.ie;b2FixtureDef=n.l.Dl;b2Fixture=n.l.Cl;b2World=n.l.Ue;b2MassData=n.v.Sa.Tn;b2PolygonShape=n.v.Sa.ki;b2CircleShape=n.v.Sa.cj;b2DebugDraw=n.l.Se;b2MouseJointDef=n.l.J.Gl;b2ContactListener=n.l.Gn;Kc=1200;Lc=600;Q=200;O=Kc-2*Q;P=Lc;kf=document.getElementById("canvas");var a=document.getElementById("canvas_container");kf.width=Kc;kf.height=Lc;a.style.width=Kc+"px";a.style.height=Lc+"px";lf=document.getElementById("bg_canvas");
a=document.getElementById("bg_canvas_container");lf.width=Kc;lf.height=Lc;a.style.width=Kc+"px";a.style.height=Lc+"px";jf=kf.getContext("2d");mf=lf.getContext("2d");window.addEventListener("keydown",yf,!1);window.addEventListener("keyup",zf,!1);window.addEventListener("click",Af,!1);window.addEventListener("mousedown",Bf,!1);window.addEventListener("mouseup",Cf,!1);window.addEventListener("mousemove",Df,!1);window.addEventListener("resize",Ef,!1);window.oncontextmenu=function(){return!1};Ef();Ff();
ef();va=sb();Gf();wa=[];ya();hc=new ec;X=new Hf;nf=(new Date).getTime();If()};
function Ef(){var a,b;a=800;b=600;document.body&&document.body.offsetWidth&&(a=document.body.offsetWidth,b=document.body.offsetHeight);"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth&&(a=document.documentElement.offsetWidth,b=document.documentElement.offsetHeight);window.innerWidth&&window.innerHeight&&(a=window.innerWidth,b=window.innerHeight);Kc<a?(offset_left=(a-Kc)/2,canvas_container.style.left=Math.round(offset_left)+"px",bg_canvas_container.style.left=
Math.round(offset_left)+"px"):offset_left=0;Lc<b?(offset_top=(b-Lc)/2,canvas_container.style.top=Math.round(offset_top)+"px",bg_canvas_container.style.top=Math.round(offset_top)+"px"):offset_top=0;message.style.display=""}function Gf(){var a=document.createElement("canvas");a.width=O;a.height=P;var b=a.getContext("2d");Db(b,0,O,P,"Hive 0");Fb=a;a=document.createElement("canvas");a.width=O;a.height=P;xf=a}
function If(){var a=(new Date).getTime();jf.globalAlpha=1;dt=a-nf;X.ra(dt);null!=of&&of.ra(dt);X instanceof Jf?X instanceof Jf&&X.ready&&(1!=X.zoom?(jf.fillStyle=X.ni,jf.fillRect(Q,0,O,P)):jf.clearRect(Q,0,O,P)):jf.clearRect(0,0,canvas.width,canvas.height);if(X instanceof Jf){X.$(jf,mf);jf.save();Kf(X,jf);for(var b=0;b<wa.length;b++)wa[b].$(jf);jf.restore()}else jf.fillStyle="black",jf.fillRect(0,0,Q,Lc),jf.fillRect(Kc-Q,0,Q,Lc),jf.translate(Q,0),X.$(jf,mf),jf.translate(-Q,0);null!=of&&(jf.beginPath(),
jf.globalAlpha=1,jf.fillStyle=of.We?of.We:"black",jf.rect(Q,0,O,P),jf.fill(),jf.globalAlpha=1,of.$(jf));X instanceof Hf&&null==of?Lf():Mf();nf=a;setTimeout(If,Math.max(33-((new Date).getTime()-a),1))}function Df(a){a=Pb(a);of&&of.Ba(a.x,a.y);if(X instanceof Jf){X.Ba(a.x,a.y);for(var b=0;b<wa.length;b++)wa[b].Ba(a.x,a.y)}else X.Ba(a.x-Q,a.y)}
function Bf(a){a.preventDefault();var b=Pb(a);0==a.button?of?of.Ag(b.x,b.y):X instanceof Jf?X.Ag(b.x,b.y):X.Ag(b.x-Q,b.y):2==a.button&&(of?of.pp(b.x,b.y):X instanceof Jf?X.pp(b.x,b.y):X.pp(b.x-Q,b.y))}function Cf(a){a.preventDefault();var b=Pb(a);0==a.button?of?of.ah(b.x,b.y):X instanceof Jf?X.ah(b.x,b.y):X.ah(b.x-Q,b.y):2==a.button&&(of?of.qp(b.x,b.y):X instanceof Jf?X.qp(b.x,b.y):X.qp(b.x-Q,b.y))}
function Af(a){a.preventDefault();var b=Pb(a);if(0==a.button)if(of){if(of.Na(b.x,b.y),X instanceof Jf)for(a=0;a<wa.length;a++)wa[a].Na(b.x,b.y)}else if(X instanceof Jf){for(a=0;a<wa.length;a++)wa[a].Na(b.x,b.y);X.Na(b.x,b.y)}else X.Na(b.x-Q,b.y)}function Nf(){return document.WB&&null!==document.WB||document.mozFullScreen||document.webkitIsFullScreen}function yf(a){a=null==a?window.event.keyCode:a.keyCode;of?of.Ne(a):X.Ne(a)}
function zf(a){a=null==a?window.event.keyCode:a.keyCode;of&&of.op(a);X.op(a)}
function Ff(){var a={};void 0===localStorage[pf]||null===localStorage[pf]?(rf=!0,a.difficulty_mode="normal"):(a=JSON.parse(localStorage[pf]),rf=0==a.first_time?!1:!0);a.levels||(a.levels={});a.enemies_seen||(a.enemies_seen={});a.enemies_killed||(a.enemies_killed={});a.world_rankings||(a.world_rankings={easy:{},normal:{}});var b={$q:100,fo:100,dr:!0,cc:!0,lF:!1,Gr:!1,nr:!0,Cp:!1,Vb:"right",Hc:"mouse"};a.options||(a.options={});a.quests||(a.quests=[]);for(var c in b)a.options.hasOwnProperty(c)||(a.options[c]=
b[c]);a.save_data||(a.save_data={easy:{},normal:{}});sf=a.save_data;L=a.difficulty_mode?a.difficulty_mode:"normal";tf=a.total_kills?a.total_kills:0;A=a.options;uf=a.quests;Of("easy",a);Of("normal",a);qf=a.world_rankings;for(difficulty in qf)for(world in qf[difficulty])b=qf[difficulty][world],"string"===typeof b&&(c=Pf(b),Qf(c)),b.rank&&(c=Pf(b.rank),Qf(c));for(r in G)G[r].bg=a.enemies_seen[r]?a.enemies_seen[r]:0,G[r].pe=a.enemies_killed[r]?a.enemies_killed[r]:0;Rf("easy");Rf("normal")}
function Of(a,b){for(r in N)if("HOW TO PLAY"!=r.slice(0,11))if("undefined"===typeof N[r].Va&&(N[r].Va={}),N[r].Va[a]={},b.levels.hasOwnProperty(r)&&b.levels[r].save_state&&b.levels[r].save_state[a])if(N[r].Va[a].sc=b.levels[r].save_state[a].high_score,N[r].Va[a].bg=b.levels[r].save_state[a].seen,N[r].Va[a].Zc=b.levels[r].save_state[a].best_time,"HIVE"==r.slice(0,4)){for(var c=0;N[r].Va[a].sc>=N[r].sa[a][c];)c+=1;N[r].Va[a].ba=c}else N[r].Va[a].ba=1E3>N[r].Va[a].Zc?3:0;else N[r].Va[a].sc=0,N[r].Va[a].ba=
0,N[r].Va[a].bg=!1,N[r].Va[a].Zc=1E3}function bc(){var a={levels:{}};Sf("easy",a);Sf("normal",a);a.enemies_seen={};a.enemies_killed={};for(r in G)a.enemies_seen[r]=G[r].bg,a.enemies_killed[r]=G[r].pe;a.total_kills=tf;a.difficulty_mode=L;a.world_rankings=qf;a.save_data=sf;a.options=A;a.first_time=rf;a.quests=uf;localStorage[pf]=JSON.stringify(a)}
function Sf(a,b){for(r in N)"HOW TO PLAY"!=r.slice(0,11)&&(b.levels.hasOwnProperty(r)||(b.levels[r]={},b.levels[r].save_state={}),b.levels[r].save_state[a]={},b.levels[r].save_state[a].high_score=N[r].Va[a].sc,b.levels[r].save_state[a].best_time=N[r].Va[a].Zc,b.levels[r].save_state[a].seen=N[r].Va[a].bg)}function Rf(a){var b=0;for(r in N)"HOW TO PLAY"!=r.slice(0,11)&&N[r].Va[a]&&(b+=N[r].Va[a].ba);vf=0;for(r in df)G[r].pe>=df[r]&&(vf+=1);"undefined"===typeof wf&&(wf={});wf[a]=b+vf}
function mc(){for(var a=3,b=0;b<uf.length;b++)-1!=Hb[uf[b]].za.indexOf("life")&&(a+=1);return a}function nc(){for(var a=0,b=0;b<uf.length;b++)-1!=Hb[uf[b]].za.indexOf("ult")&&(a+=1);return a}function oc(){for(var a=10,b=0;b<uf.length;b++)-1!=Hb[uf[b]].za.indexOf("spark")&&(a+=1);return a}
function Tf(){for(var a=null,b=0;b<ra.length;b++)0<ra[b].Kc&&(ra[b].Kc<a||null==a)&&(a=ra[b].Kc);for(b=0;b<sa.length;b++)0<sa[b].Kc&&(sa[b].Kc<a||null==a)&&(a=sa[b].Kc);for(b=0;b<ta.length;b++)0<ta[b].Kc&&(ta[b].Kc<a||null==a)&&(a=ta[b].Kc)}function Uf(a){return 2==a?.5:3==a?.4:.3}function Lf(){document.getElementById("at4-soc")&&!Vf()&&document.getElementById("at4-soc").click()}function Mf(){document.getElementById("at4-scc")&&Vf()&&document.getElementById("at4-scc").click()}
function Vf(){return document.getElementById("at4-share").className.match(/\bat4-show\b/)};function Wf(a,b,c,d,f,g,h,k){this.type=a;this.vk=b;this.Ip=c;this.Hp=d;this.fs=f;this.ZC=g;this.YC=h;this.PC=k;this.hl=0==this.vk?1E3*this.Ip:1}Wf.prototype.ra=function(a,b){b>this.vk&&(this.hl-=a)};function Xf(a,b){this.ma(a,b)}l=Xf.prototype;
l.ma=function(a,b){this.s=b.s;this.sm=b;this.w=null;"easy"==L&&(this.em=a.ec);this.em?this.nE=!0:this.em=a.r;"easy"==L&&(this.cb=a.oe);this.cb?this.oE=!0:this.cb=a.cb;this.mj={};this.V=a.V;"easy"==L&&(this.Ka=a.Mz);this.Ka||(this.Ka=a.Ka);this.cs=0;this.SD=8E3;this.rp=a.rp;this.Oi=a.vb;"easy"==L&&a.mz&&(this.Oi=a.mz);this.vb=this.Oi;this.Oa=a.Oa;this.Ir=a.Ir;"easy"==L&&(this.Ya=a.Df);this.Ya||(this.Ya=a.Ya);this.kr=a.kr;this.color=w["world "+this.sm.s];this.ni=w["world "+this.sm.s+" dark"];this.ub=
w["world "+this.sm.s+" lite"];this.L=w["world "+this.sm.s+" bright"];this.pa="BOSS"==this.V.slice(0,4);this.pa||(this.Ey=parseInt(this.V.slice(this.V.length-1,this.V.length)),this.sa=a.sa[L]);this.uh=!1;this.$a=a.$a;this.vh=[];this.Zd=[];this.mp=[];this.kf=[];this.$C=[];this.zf=[];this.Np=0;this.QC=20;this.sj=!1;this.Sx={stunner:$e,spear:ze,tank:ae,mote:yc,goo:we,disabler:bf,troll:af,fighter:re,harpoon:Cc,orbiter:ve,slingshot:zc,deathray:oe,"first boss":ed,"second boss":ke,"third boss":be,"fourth boss":Xc,
"boss four spawner":bd};this.Rf={x:this.Oi.x/F,y:this.Oi.y/F};this.yk=4;this.gy=500;this.tj=null;this.xk=[];this.nm=this.jr=1E3;this.ey=2E3;this.fy=5;this.reset();this.Iq={}};
l.reset=function(){this.Ec=this.w&&this.w.Ec?!0:!1;this.r=[];this.rc=0;this.js=this.ed=200;this.gm=1;this.sj=!1;this.np=0;this.yB=3;this.Gc=null;this.uh=this.jx=!1;this.pi={};for(r in this.em){var a=this.em[r];this.pi[r]=new Wf(r,a[0],a[1],a[2],a[3],a[4],a[5],a[6]);this.mj[r]=0}this.uo=[];this.Ho=[];this.$h=[];this.cg=[];this.wy=!1;this.Gp=this.xe=null;this.Lz=1E4;this.jp=this.te=null;this.ez=1E4};
function Yf(a){var b=Math.floor(Math.random()*a.Ka.length);a.xe={x:a.Ka[b][0],y:a.Ka[b][1]};for(var c={x:a.w.n.body.g.position.x*F,y:a.w.n.body.g.position.y*F};125>R(c,a.xe)||a.te&&a.te.x==a.xe.x&&a.te.y==a.xe.y;)b+=1,b%=a.Ka.length,a.xe={x:a.Ka[b][0],y:a.Ka[b][1]};a.Gp=a.Lz}
function Zf(a){var b=Math.floor(Math.random()*a.Ka.length);a.te={x:a.Ka[b][0],y:a.Ka[b][1]};for(var c={x:a.w.n.body.g.position.x*F,y:a.w.n.body.g.position.y*F};125>R(c,a.te)||a.xe&&a.te.x==a.xe.x&&a.te.y==a.xe.y;)b+=1,b%=a.Ka.length,a.te={x:a.Ka[b][0],y:a.Ka[b][1]};a.jp=a.ez}
l.ra=function(a){this.Gp-=a;if(!this.pa&&(null==this.xe||0>this.Gp))Yf(this);else if(!this.pa){var b={x:this.w.n.body.g.position.x*F,y:this.w.n.body.g.position.y*F};25>R(b,this.xe)&&(gc("sparks"),this.w.u.Wc+=this.w.u.Zh,100<=this.w.u.Wc&&(this.w.u.Wc-=100,this.w.u.Lb+=1,Qc(this.w,"1UP",w.impulse_blue,this.w.n.body.g.position.x,this.w.n.body.g.position.y-1,24,3E3)),Qc(this.w,"+"+this.w.u.Zh,w.impulse_blue,this.xe.x/F,this.xe.y/F,20,2E3,!0),Yf(this))}this.jp-=a;!this.pa&&(null==this.te||0>this.jp)?
Zf(this):this.pa||(b={x:this.w.n.body.g.position.x*F,y:this.w.n.body.g.position.y*F},25>R(b,this.te)&&(gc("sparks"),this.w.H.sh+=5,this.w.H.Ce=this.w.H.sh+Math.floor(this.w.H.Uc/10),Qc(this.w,"x"+this.w.H.Ce,"white",this.te.x/F,this.te.y/F,20,2E3),Zf(this)));this.cs+=2*Math.PI*a/this.SD;null!=this.tj&&(0<this.tj?this.tj-=a:(mf.translate(Q,0),this.le(mf),mf.translate(-Q,0),this.tj=null));this.sj&&this.Nr(a);0>=this.np&&1>this.lp?this.lp=Math.min(1,this.lp+a/1E3):0<this.np&&0<this.lp&&(this.lp=Math.max(0,
this.lp-a/1E3));0<this.np&&(this.np-=a);this.uo=[];this.$h=[];this.Ho=[];for(b=0;b<this.r.length;b++)this.r[b].ra(b,a);for(;0<this.uo.length;)b=this.uo.pop(),this.w.Ea.ew(this.r[b].body),this.r[b]instanceof Cc&&this.w.Ea.ew(this.r[b].ab.body),this.r[b]==this.Gc&&(this.uh=!0);for(b=this.zf.length-1;0<=b;b--)this.zf[b].ra(a),0>=this.zf[b].wr&&(this.zf.splice(b,1),this.Np-=4);for(;0<this.Ho.length;){b=this.Ho.pop();this.mj[this.r[b].type]-=1;if("goo"==this.r[b].type||"disabler"==this.r[b].type){var c=
this.pi[this.r[b].type];c.hl=1E3*Math.max(c.Ip-(this.w.H.Uc-c.vk)/60*c.Hp,c.fs)}this.r.splice(b,1)}for(;0<this.$h.length;)b=this.$h.pop(),$f(this,b);if(this.wy){if(!this.pa){for(var d in this.pi){b=this.pi[d];b.ra(a,this.w.H.Uc);c=this.w.H.Uc;if(0>=b.hl){b.hl+=1E3*Math.max(b.Ip-(c-b.vk)/60*b.Hp,b.fs);var f=0;0<b.Hp&&(f=2*Math.max(0,(b.fs-(b.Ip-(c-b.vk)/60*b.Hp))/b.Hp)*b.fs/b.Ip);b=b.ZC+(c-b.vk)/60*b.YC+f}else b=void 0;if(0<b)for("easy"!=L||this.nE||(b=Math.max(1,.5*b)),this.w instanceof vc&&this.Cx&&
(b*=2),this.w.Yh&&(b=Math.ceil(.5*b)),this.w instanceof vc&&this.Fm&&(b=0),c=0,this.Oa&&(c=Math.floor(Math.random()*this.Oa.length)),f=0;f<Math.floor(b);f++)this.cg.push({type:d,UD:c}),c+=1}if(0==this.r.length&&0==this.cg.length){d=1E3;for(var g in this.pi)b=this.pi[g],this.w.H.Uc>b.vk&&(d=Math.min(d,b.hl));for(g in this.pi)b=this.pi[g],b.ra(d,this.w.H.Uc)}}0<=this.js?this.js-=a:0<this.cg.length&&(a=this.cg[0].type,g=this.cg[0].UD,this.cg=this.cg.slice(1),this.hs(a,g),this.js=this.ed)}else this.ui(),
this.wy=!0;if(this.uh)for(b=0;b<this.r.length;b++)this.r[b].Q||this.r[b].Mc("kill")};l.ui=function(){if(this.cb)for(var a in this.cb){var b=0;this.Oa&&(b=Math.floor(Math.random()*this.Oa.length));var c=this.cb[a];this.pa||"easy"!=L||this.oE||(c=Math.max(1,.5*c));this.w.Yh&&(c=Math.ceil(.5*c));for(var d=0;d<Math.floor(c);d++)this.hs(a,b),b+=1}};function Nc(a,b,c,d,f){if("player"==b||"spark"==b||"multi"==b||"boss"==b.slice(b.length-4,b.length)||a.Np<a.QC&&A.dr)a.zf.push(new ag(b,c,d,f)),a.Np+=4}
l.hs=function(a,b){var c=G[a].className;if(!(c.prototype.Sf&&this.jx||this.mj[a]>=this.pi[a].PC)){if(c.prototype.Sf)this.Gc=c=new c(this.w.Ea,O/F/2,P/F/2,this.rc,this.w),this.jx=!0;else if(this.Oa)var d=this.Oa[b%this.Oa.length],c=new c(this.w.Ea,d[0]/F,d[1]/F,this.rc,this.w);else{var f;.5>Math.random()?(d=.5>Math.random()?-7:O/F+5,f=Math.random()*(P/F+12)-7):(f=.5>Math.random()?-7:P/F+5,d=Math.random()*(O/F+12)-7);d={x:d+2*Math.random(),y:f+2*Math.random()};c=new c(this.w.Ea,d.x,d.y,this.rc,this.w)}$f(this,
c)}};function $f(a,b){a.r.push(b);a.rc+=1;a.mj[b.type]+=1;b.Sf&&(a.Gc=b);b.qm&&!a.Iq.hasOwnProperty(b.type)&&(a.Iq[b.type]=b.Sl)}function bg(a){null==a.Ir&&a.Ya.length&&(a.Ir=a.Ya.length);for(var b=0;b<a.Ir;b++){var c=a.kr(b);a.mp.push(new ff(c,a.ub,a.ni));a.Zd.push(c);for(var d=0;d<c.length;d++)a.$C.push(c[d]);a.vh.push(Rb(c,a.$a))}for(b=0;b<a.mp.length;b++)for(var c=a.mp[b],d=c.Qi.length-1,f=0;f<c.Qi.length;f++)a.kf.push({p1:c.Qi[d],p2:c.Qi[f]}),d=f}
l.gh=function(a,b){if(this.Rf&&!this.pa){a.save();if(null!=this.tj&&4>=this.s){var c=Math.max(this.tj/this.gy,0);a.globalAlpha*=.3+.2*(1-c)}else a.globalAlpha=this.w&&this.sj&&4>=this.s?.7*a.globalAlpha:.3*a.globalAlpha;Ka(a,this.s,this.Rf.x*b,this.Rf.y*b,this.yk*b,this.sj,0);this.sj&&this.Tq(a,b);a.restore()}};
l.$=function(a,b){a.save();if(this.xe){var c=this.Gp/this.Lz;a.save();a.globalAlpha*=Math.min(1,(1-2*Math.abs(c-.5))/.7);J(a,this.xe.x,this.xe.y,this.cs,25,25,"spark");a.restore()}this.te&&(c=this.jp/this.ez,a.save(),a.globalAlpha*=Math.min(1,(1-2*Math.abs(c-.5))/.7),J(a,this.te.x,this.te.y,this.cs,25,25,"multi"),a.restore());this.kD&&(mf.translate(Q,0),this.le(mf,!0),mf.translate(-Q,0),this.kD=!1);1!=this.gm&&(a.save(),a.globalAlpha*=this.gm);for(c=0;c<this.r.length;c++)this.r[c].gh(a,b);for(var d in this.Iq)for(var f=
this.Iq[d],g=1;g<=f;g++){for(var h=null,c=0;c<this.r.length;c++)this.r[c].type==d&&(null==h&&(h=this.r[c],h.Tl(a,b,g)),this.r[c].Ql(a,b,g));null!=h&&h.Rl(a,b,g)}for(c=0;c<this.r.length;c++)this.r[c].$(a,b);for(c=0;c<this.r.length;c++)this.r[c].$t(a,b);for(c=0;c<this.zf.length;c++)this.zf[c].$(a,b);1!=this.gm&&a.restore();0<=this.xB&&(a.beginPath(),a.arc(O/b/2*b,P/b/2*b,2*this.yB*b,-.5*Math.PI,-.5*Math.PI+this.xB/this.TE*Math.PI*2,!0),a.lineWidth=2,a.strokeStyle="gray",a.stroke(),a.globalAlpha=1);
a.restore()};l.le=function(a){a.save();a.rect(0,0,O,P);a.clip();null!=this.sm.s?Db(a,0,O,P,"Hive "+this.sm.s):(a.fillStyle=w["world 0 bright"],a.fillRect(0,0,O,P));for(var b=0;b<this.mp.length;b++)this.mp[b].$(a,F);this.pa&&(a.fillStyle=w["world "+this.s+" dark"],a.fillRect(375,0,50,25),a.fillRect(375,575,50,25),a.fillRect(0,275,25,50),a.fillRect(775,275,25,50));a.restore()};
l.Nr=function(a){for(var b=0;b<this.xk.length;b++){var c=this.xk[b];c.Rh+=a/this.ey;1<c.Rh&&this.xk.splice(b,1)}this.nm-=a;0>this.nm&&(this.nm+=this.jr,this.cu(this.Rf.x,this.Rf.y,this.fy))};l.cu=function(a,b,c){for(var d=0;d<c;d++){var f=2*Math.PI*d/c+(Math.random()-.5)*Math.PI*2/c;this.xk.push({aE:1.5*Math.cos(f)*this.yk+a,bE:1.4*Math.sin(f)*this.yk+b,Rh:0})}};
l.Tq=function(a,b){for(var c=0;c<this.xk.length;c++){var d=this.xk[c];a.save();a.globalAlpha=.25>d.Rh?4*a.globalAlpha*d.Rh:(1-d.Rh)/.75*a.globalAlpha;a.beginPath();a.rect(b*(d.aE*(1-d.Rh)+this.Rf.x*d.Rh)-3,b*(d.bE*(1-d.Rh)+this.Rf.y*d.Rh)-3,6,6);a.fillStyle=w["world "+this.s+" bright"];a.fill();a.restore()}};var N={"HOW TO PLAY":{r:{stunner:[0,4,0,4,1,0,5]},Eb:"stunner",Ya:[[[838,84],[-38,84],[-38,-45],[838,-45]],[[-38,175],[42,175],[42,258],[756,258],[756,175],[838,175],[838,645],[-38,645]]],Ka:[[72,225],[728,225],[21,127],[779,127]],Oa:[[-100,127],[900,127]],$a:1,sa:{normal:[2500,1E4,2E4],easy:[2500,1E4,2E4]},vb:{x:400,y:170},$a:1},"HIVE 1-1":{ec:{stunner:[0,5,1,1,2,0,50]},r:{stunner:[0,3,0,3,4,4,50]},oe:{stunner:2},cb:{stunner:4},Eb:"stunner",Ya:[[[-33,-26],[19,-26],[19,626],[-33,626]],[[833,626],
[781,626],[781,-26],[833,-26]],[[144,367],[656,367],[656,626],[144,626]],[[144,-26],[656,-26],[656,233],[144,233]]],Df:[[[-33,-26],[19,-26],[19,626],[-33,626]],[[833,626],[781,626],[781,-26],[833,-26]],[[174,400],[626,400],[626,626],[174,626]],[[174,-26],[626,-26],[626,200],[174,200]]],Ka:[[81,75],[81,525],[719,75],[719,525]],Mz:[[250,250],[250,350],[550,250],[550,350]],Oa:[[50,-100],[750,-100],[50,700],[750,700]],$a:1,Xu:50,sa:{easy:[2500,5E4,3E5],normal:[5E4,3E5,12E5]},vb:{x:400,y:300}},"HIVE 1-2":{r:{stunner:[3,
3,0,3,2,2,25],spear:[0,2.5,.5,1.5,1,0,25]},ec:{stunner:[5,3,1,1,1,0,25],spear:[0,5,1,1,1,0,25]},cb:{spear:2},Eb:"spear",Ya:[[[112,-6],[688,-6],[688,26],[112,26]],[[-9,96],[30,96],[30,505],[-9,505]],[[809,504],[770,504],[770,95],[809,95]],[[688,606],[112,606],[112,574],[688,574]],[[135,126],[330,126],[135,259]],[[135,341],[330,474],[135,474]],[[665,259],[470,126],[665,126]],[[665,474],[470,474],[665,341]]],Ka:[[135,300],[665,300],[400,125],[400,475],[709,78],[91,78],[709,522],[91,522]],Oa:[[-100,-100],
[900,700],[900,-100],[-100,700]],$a:1,sa:{easy:[1E4,8E4,4E5],normal:[15E4,45E4,135E4]},vb:{x:400,y:300}},"HIVE 1-3":{ec:{stunner:[0,2,.4,.8,2,0,40],spear:[30,6,1.5,1.5,1,0,15]},r:{stunner:[0,1,0,1,2,2,40],spear:[20,5,0,5,1,3,15]},oe:{stunner:6},cb:{stunner:12},Eb:"stunner",Ya:[[[-11,-10],[335,-10],[-11,252]],[[-11,348],[335,610],[-11,610]],[[811,252],[465,-10],[811,-10]],[[811,610],[465,610],[811,348]],[[466,300],[400,348],[335,300],[400,251]]],Oa:[[-100,300],[400,-100],[900,300],[400,700]],Ka:[[400,
50],[50,300],[400,550],[750,300]],$a:1,sa:{easy:[2E4,12E4,6E5],normal:[1E5,3E5,12E5]},vb:{x:400,y:400}},"HIVE 1-4":{ec:{spear:[0,6,1,1,2,0,40]},r:{spear:[0,3,0,3,2,3,40]},cb:{spear:2},oe:{spear:1},Eb:"spear",Ya:[[[-15,73],[265,253],[-15,269]],[[336,426],[362,610],[-15,610]],[[464,175],[438,-10],[815,-10]],[[-15,331],[265,348],[-15,527]],[[815,269],[535,253],[815,73]],[[-15,-10],[362,-10],[336,175]],[[815,610],[438,610],[464,426]],[[815,527],[535,348],[815,331]]],Oa:[[-100,14],[900,14],[900,586],[-100,
586],[-100,300],[400,-100],[900,300],[400,700]],Ka:[[400,125],[400,475],[125,300],[675,300],[177,145],[623,145],[177,455],[623,455]],$a:1,sa:{easy:[25E3,2E5,75E4],normal:[125E3,4E5,15E5]},vb:{x:400,y:300}},"HIVE 1-5":{r:{spear:[0,6,0,6,2,1.5,15],tank:[0,4,0,4,2,1.5,25]},ec:{spear:[6,6,2,2,1.5,0,15],tank:[0,5,2,1,1,0,25]},Eb:"tank",cb:{spear:8,tank:4},oe:{tank:6},Ya:[[[103,1],[688,1],[688,27],[103,27]],[[799,483],[770,483],[770,116],[799,116]],[[103,573],[688,573],[688,599],[103,599]],[[1,116],[30,
116],[30,483],[1,483]]],Oa:[[-100,-100],[900,-100],[900,700],[-100,700]],Ka:[[66,528],[66,72],[734,528],[66,528]],$a:1,sa:{easy:[4E4,2E5,6E5],normal:[15E4,4E5,125E4]},vb:{x:400,y:300}},"HIVE 1-6":{r:{stunner:[0,6,0,6,2,1,25],tank:[0,8,0,8,2,4,25]},ec:{stunner:[0,6,0,6,2,1,25],tank:[0,8,2,2,1,1,25]},cb:{tank:4},oe:{tank:4},Eb:"tank",Ya:[[[828,322],[518,8],[554,-32],[823,-32]],[[-28,278],[282,592],[246,632],[-23,632]],[[398,125],[575,300],[399,476],[223,300]],[[107,185],[-25,53],[-25,-34],[325,-34]],
[[693,415],[825,547],[825,634],[475,634]]],Oa:[[400,-100],[400,700],[-100,150],[900,450]],Ka:[[50,240],[400,15],[400,585],[750,360]],$a:1,sa:{easy:[4E4,2E5,8E5],normal:[15E4,5E5,2E6]},vb:{x:250,y:150}},"HIVE 1-7":{ec:{stunner:[0,5,1,2,1,0,30],spear:[0,6,1.2,2.4,1,0,15],tank:[0,10,2.5,5,1,0,15]},r:{stunner:[0,4,0,4,2,1,30],spear:[0,5,0,5,2,1,15],tank:[0,8,0,8,2,1,15]},cb:{stunner:6,spear:2,tank:4},oe:{stunner:2,spear:1,tank:1},Eb:"tank",Ya:[[[243,110],[332,144],[243,179],[153,144]],[[310,-3],[400,
-38],[489,-3],[400,31]],[[310,300],[400,265],[489,300],[400,334]],[[88,-38],[177,-3],[88,31],[-2,-3]],[[-2,300],[88,265],[177,300],[88,334]],[[-21,125],[25,143],[-21,163]],[[-2,603],[88,569],[177,603],[88,638]],[[802,-3],[712,31],[623,-3],[712,-38]],[[-21,437],[25,457],[-21,475]],[[821,163],[775,143],[821,125]],[[153,456],[243,421],[332,456],[243,490]],[[647,144],[557,179],[468,144],[557,110]],[[712,334],[623,300],[712,265],[802,300]],[[557,490],[468,456],[557,421],[647,456]],[[712,638],[623,603],
[712,569],[802,603]],[[400,569],[489,603],[400,638],[310,603]],[[821,475],[775,457],[821,437]]],Oa:[[-100,50],[-100,300],[-100,550],[900,50],[900,300],[900,550],[240,-100],[560,-100],[240,700],[560,700]],Ka:[[75,145],[235,34],[565,34],[725,145],[725,455],[565,566],[235,566],[75,455]],$a:1,sa:{easy:[5E4,15E4,75E4],normal:[125E3,4E5,15E5]},vb:{x:400,y:450}},"BOSS 1":{r:{"first boss":[0,1,0,1,0,0,1]},cb:{"first boss":1},Eb:"first boss",Ya:[[[-25,-25],[400,-25],[400,25],[25,25],[25,300],[-25,300]],[[-25,
300],[25,300],[25,575],[400,575],[400,625],[-25,625]],[[825,300],[775,300],[775,25],[400,25],[400,-25],[825,-25]],[[825,625],[400,625],[400,575],[775,575],[775,300],[825,300]]],Oa:[[60,62],[60,539],[740,62],[740,539]],$a:1,vb:{x:400,y:550},Ot:40},"HIVE 2-1":{ec:{stunner:[0,5,1.5,2,1,0,15],tank:[15,12,3,3,1,0,15],mote:[0,10,2,4,2,0,25]},r:{stunner:[1,4,0,4,2,2,15],tank:[0,8,0,8,2,1,15],mote:[0,6,0,6,2,2,25]},cb:{mote:4,tank:2},oe:{mote:2,stunner:2},Eb:"mote",Ya:[[[-12,-8],[815,-8],[815,609],[748,609],
[748,50],[51,50],[51,609],[-12,609]],[[176,609],[176,175],[288,174],[286,286],[228,286],[228,540],[566,540],[566,287],[510,286],[510,175],[626,175],[626,609]],[[324,363],[469,363],[469,466],[324,466]]],Ka:[[400,500],[687,450],[113,450]],Oa:[[100,700],[700,700]],$a:1,sa:{easy:[6E4,2E5,75E4],normal:[15E4,45E4,175E4]},vb:{x:400,y:235}},"HIVE 2-2":{r:{stunner:[3,3,0,3,2,1,30],spear:[0,10,0,10,4,4,20],mote:[0,5,1,2,1,0,20]},ec:{stunner:[5,5,1,2,1,0,30],spear:[0,12,0,12,2,1,20],mote:[0,7,1.5,3,1,0,20]},
cb:{spear:4,mote:2},Eb:"mote",Ya:[[[-25,253],[143,253],[143,347],[-25,347]],[[825,347],[656,347],[656,253],[825,253]],[[556,347],[454,347],[454,253],[557,253]],[[244,253],[346,253],[346,347],[243,347]],[[-25,-36],[825,-36],[825,148],[758,148],[758,23],[656,23],[658,148],[555,148],[557,23],[454,23],[455,148],[346,148],[346,23],[243,23],[244,148],[143,148],[143,23],[42,23],[42,148],[-25,148]],[[-25,452],[42,452],[42,577],[143,577],[143,452],[244,452],[243,577],[346,577],[346,452],[455,452],[454,577],
[557,577],[555,452],[658,452],[656,577],[758,577],[758,452],[825,452],[825,636],[-25,636]]],Oa:[[-100,175],[900,175],[900,425],[-100,425]],Ka:[[95,85],[295,85],[505,85],[705,85],[95,515],[295,515],[505,515],[705,515]],$a:1,sa:{normal:[1E5,3E5,15E5]},vb:{x:400,y:300}},"HIVE 2-3":{ec:{spear:[0,8,0,8,2,1,30],tank:[0,8,0,8,2,1,30],goo:[0,10,0,10,1,0,1]},r:{spear:[0,8,0,8,4,1,30],tank:[0,8,0,8,4,1,30],goo:[0,10,0,10,1,0,1]},Eb:"goo",Ya:[[[169,549],[630,549],[706,621],[91,622]],[[631,51],[170,51],[94,-21],
[709,-22]],[[-24,116],[58,184],[56,416],[-24,483]],[[824,484],[743,416],[744,184],[824,117]]],Oa:[[-100,-100],[900,-100],[900,700],[-100,700]],Ka:[[66,528],[66,72],[734,528],[66,528]],$a:1,cb:{tank:4,spear:8,goo:1},oe:{tank:2,spear:2,goo:1},sa:{easy:[8E4,3E5,1E6],normal:[2E5,6E5,2E6]},vb:{x:400,y:300}},"HIVE 2-4":{r:{stunner:[6,6,0,6,2,2,10],spear:[0,2,.3,1,1.5,0,20],mote:[0,6,2,2,1,0,15],goo:[0,10,0,10,1,0,1]},ec:{stunner:[8,8,0,8,2,1,10],spear:[0,6,1,1,1.5,1,20],mote:[0,8,1.5,2,1,0,15],goo:[0,10,
0,10,1,0,1]},Eb:"goo",cb:{spear:3,goo:1,mote:3},Ya:[[[-33,-54],[342,-54],[343,201],[191,384],[-33,536]],[[833,536],[609,384],[457,201],[458,-54],[833,-54]],[[526,478],[725,602],[725,641],[75,641],[75,602],[274,478]]],Oa:[[400,-100],[-125,700],[925,700]],Ka:[[400,120],[180,460],[620,460]],$a:1,sa:{easy:[6E4,2E5,8E5],normal:[175E3,5E5,2E6]},vb:{x:400,y:330}},"HIVE 2-5":{ec:{stunner:[14,6,2,2,1,0,15],mote:[15,8,2,4,1,0,15],harpoon:[0,15,3,6,1.5,0,15]},r:{stunner:[0,6,0,6,1,2,15],mote:[0,8,1.6,3.2,1,
0,15],harpoon:[0,20,4,8,2,0,15]},Eb:"harpoon",cb:{stunner:2,mote:2,harpoon:2},oe:{harpoon:1},Ya:[[[-32,-31],[49,-31],[49,631],[-32,631]],[[832,631],[751,631],[751,-31],[832,-31]],[[656,366],[629,366],[629,236],[656,236]],[[144,235],[171,235],[171,364],[144,364]],[[387,235],[414,235],[414,365],[387,365]],[[265,368],[292,368],[292,498],[265,498]],[[535,232],[508,232],[508,102],[535,102]],[[265,102],[292,102],[292,232],[265,232]],[[535,498],[508,498],[508,368],[535,368]],[[659,102],[628,102],[629,18],
[414,18],[414,102],[387,102],[387,18],[172,18],[172,102],[143,102],[145,-34],[659,-33]],[[141,498],[172,498],[171,582],[386,582],[386,498],[414,498],[413,582],[628,582],[628,498],[658,498],[655,634],[141,633]]],$a:1,Oa:[[100,-100],[700,-100],[100,700],[700,700]],Ka:[[100,50],[100,300],[100,550],[700,50],[700,300],[700,550]],sa:{easy:[8E4,3E5,1E6],normal:[2E5,6E5,2E6]},vb:{x:400,y:425}},"HIVE 2-6":{r:{spear:[0,10,0,10,2,2,10],tank:[2,15,0,15,2,1,12],goo:[0,15,0,15,1,0,1],harpoon:[0,20,0,20,2,2,12]},
ec:{spear:[0,10,3,4,1,1,10],tank:[2,15,4,3,1,1,12],goo:[0,20,0,20,1,0,1],harpoon:[0,20,5,6,1,1,12]},Eb:"harpoon",Ya:[[[325,276],[374,276],[374,231],[427,231],[427,276],[475,276],[475,324],[426,324],[426,371],[373,371],[373,324],[325,324]],[[832,27],[-31,27],[-31,-18],[832,-18]],[[-32,573],[831,573],[831,618],[-32,618]],[[192,369],[246,369],[246,450],[325,450],[325,502],[192,502]],[[192,98],[325,98],[325,150],[246,150],[246,231],[192,231]],[[-25,98],[111,98],[111,502],[-25,502]],[[825,502],[689,502],
[689,98],[825,98]],[[608,231],[554,231],[554,150],[475,150],[475,98],[608,98]],[[608,502],[475,502],[475,450],[554,450],[554,369],[608,369]]],Oa:[[-100,50],[900,50],[-100,550],[900,550]],Ka:[[90,63],[710,63],[90,537],[710,537]],cb:{spear:4,harpoon:2,goo:1},$a:1,sa:{easy:[9E4,25E4,6E5],normal:[2E5,5E5,125E4]},vb:{x:400,y:450}},"HIVE 2-7":{ec:{stunner:[0,30,0,30,2,1,16],spear:[2,30,0,30,2,1,16],tank:[12,30,0,30,2,1,16],mote:[6,30,0,30,2,1,16],goo:[18,30,0,30,1,0,1],harpoon:[20,30,0,30,2,1,16]},r:{stunner:[0,
30,0,30,4,2,16],spear:[22,30,0,30,4,2,16],tank:[2,30,0,30,4,2,16],mote:[6,30,0,30,4,2,16],goo:[16,30,0,30,1,0,1],harpoon:[10,30,0,30,4,2,16]},Eb:"harpoon",Ya:[[[830,52],[-29,52],[-29,-27],[830,-27]],[[-30,548],[829,548],[829,627],[-30,627]],[[-30,133],[307,133],[307,186],[54,186],[54,415],[307,415],[307,467],[-30,466]],[[830,466],[493,467],[493,415],[746,415],[746,186],[493,186],[493,133],[830,133]],[[229,275],[571,275],[571,325],[229,325]]],Oa:[[-100,100],[900,100],[-100,500],[900,500]],Ka:[[200,
93],[600,93],[200,507],[600,507]],$a:1,sa:{easy:[1E5,3E5,1E6],normal:[2E5,75E4,225E4]},cb:{stunner:4},vb:{x:400,y:400}},"BOSS 2":{r:{"second boss":[0,1,0,1,0,0,1],stunner:[0,10,0,10,0,0,12],spear:[0,10,0,10,0,0,8],tank:[0,10,0,10,0,0,8],mote:[0,10,0,10,0,0,8],goo:[0,10,0,10,0,0,1],harpoon:[0,10,0,10,0,0,8]},cb:{"second boss":1},Eb:"second boss",Ya:[[[-25,-25],[400,-25],[400,25],[25,25],[25,300],[-25,300]],[[-25,300],[25,300],[25,575],[400,575],[400,625],[-25,625]],[[825,300],[775,300],[775,25],[400,
25],[400,-25],[825,-25]],[[825,625],[400,625],[400,575],[775,575],[775,300],[825,300]]],Oa:[[60,62],[60,539],[740,62],[740,539]],$a:1,vb:{x:400,y:500},Ot:60},"HIVE 3-1":{ec:{stunner:[14,12,2,6,2,0,20],tank:[16,12,3,3,1,0,10],mote:[16,12,2,4,1,0,15],fighter:[0,24,4,8,1,0,12]},r:{stunner:[0,10,1.5,4,4,0,20],tank:[0,12,2.4,4.8,1,0,10],mote:[0,12,2.4,4.8,1,0,15],fighter:[0,15,3,6,1,0,12]},Eb:"fighter",Ya:[[[304,274],[426,204],[496,326],[374,396]],[[72,212],[193,142],[263,263],[142,333]],[[242,507],[363,
437],[433,558],[312,628]],[[558,93],[437,163],[367,42],[488,-28]],[[728,388],[607,458],[537,337],[658,267]],[[326,31],[204,101],[134,-20],[256,-90]],[[474,569],[596,499],[666,620],[544,690]],[[10,444],[131,374],[201,496],[80,566]],[[790,156],[669,226],[599,104],[720,34]],[[-160,150],[-39,80],[31,201],[-90,271]],[[960,450],[839,520],[769,399],[890,329]]],Df:[[[314,277],[423,214],[486,323],[377,386]],[[82,215],[190,152],[253,260],[145,323]],[[252,510],[360,447],[423,555],[315,618]],[[548,90],[440,153],
[377,45],[485,-18]],[[718,385],[610,448],[547,340],[655,277]],[[316,28],[207,91],[144,-17],[253,-80]],[[484,572],[593,509],[656,617],[547,680]],[[20,447],[128,384],[191,493],[83,556]],[[780,153],[672,216],[609,107],[717,44]],[[-150,153],[-42,90],[21,198],[-87,261]],[[950,447],[842,510],[779,402],[887,339]]],Oa:[[-100,360],[-100,-100],[900,200],[900,700],[200,700],[400,700],[360,-100],[600,-100]],Ka:[[586,50],[83,88],[205,548],[715,515],[728,260],[83,330]],$a:.8,sa:{easy:[125E3,4E5,1E6],normal:[25E4,
75E4,225E4]},cb:{fighter:1,tank:1,mote:1,stunner:4},oe:{fighter:1},wh:!0,vb:{x:250,y:380}},"HIVE 3-2":{r:{spear:[0,6,0,6,2,1,20],goo:[1,15,0,15,1,0,1],fighter:[0,18,0,18,2,2,12],harpoon:[0,15,3,6,1,0,12]},ec:{spear:[8,8,1.5,3,1,0,20],goo:[1,15,0,15,1,0,1],fighter:[0,20,4,8,1,0,12],harpoon:[0,18,3,9,1,0,12]},Eb:"fighter",Ya:[[[438,472],[393,455],[380,425],[413,411]],[[488,230],[474,198],[505,185],[548,205]],[[572,262],[555,307],[525,320],[512,287]],[[228,338],[245,293],[275,280],[288,313]],[[312,370],
[326,402],[295,415],[252,395]],[[470,388],[502,374],[515,405],[495,448]],[[330,212],[298,226],[285,195],[305,152]],[[362,128],[407,145],[420,175],[387,189]],[[739,714],[628,449],[692,422],[665,357],[855,279],[972,480]],[[61,-114],[172,151],[108,178],[135,243],[-55,321],[-172,120]],[[677,-232],[737,-7],[547,72],[520,7],[456,33],[347,-232]],[[123,832],[63,607],[253,528],[280,593],[344,567],[453,832]],[[631,276],[672,187],[581,154],[844,45],[894,167]],[[169,324],[128,413],[219,446],[-44,555],[-94,433]],
[[145,-144],[267,-194],[376,69],[288,27],[254,119]],[[655,744],[533,794],[424,531],[512,573],[546,481]],[[359,283],[417,259],[441,317],[384,340]]],Df:[[[433,467],[395,453],[384,427],[412,416]],[[490,226],[479,199],[505,188],[541,205]],[[567,267],[553,305],[527,316],[516,288]],[[233,333],[247,295],[273,284],[284,312]],[[310,374],[321,401],[295,412],[259,395]],[[474,390],[501,379],[512,405],[495,441]],[[326,210],[299,221],[288,195],[305,159]],[[367,133],[405,147],[416,173],[388,184]],[[739,714],[628,
449],[692,422],[665,357],[855,279],[972,480]],[[61,-114],[172,151],[108,178],[135,243],[-55,321],[-172,120]],[[677,-232],[737,-7],[547,72],[520,7],[456,33],[347,-232]],[[123,832],[63,607],[253,528],[280,593],[344,567],[453,832]],[[631,276],[672,187],[581,154],[844,45],[894,167]],[[169,324],[128,413],[219,446],[-44,555],[-94,433]],[[145,-144],[267,-194],[376,69],[288,27],[254,119]],[[655,744],[533,794],[424,531],[512,573],[546,481]],[[359,283],[417,259],[441,317],[384,340]]],Oa:[[-156,410],[-78,605],
[110,-102],[317,-187],[886,-23],[972,193],[706,742],[482,820]],Ka:[[190,84],[613,89],[610,521],[186,503]],$a:1,sa:{easy:[1E5,3E5,1E6],normal:[3E5,8E5,2E6]},cb:{fighter:2,spear:2,harpoon:1},oe:{fighter:1,harpoon:1},wh:!0,vb:{x:370,y:380}},"HIVE 3-3":{r:{stunner:[0,4,.8,2.4,1,0,10],tank:[0,10,2,4,1,0,20],harpoon:[0,16,4,6,1,0,15],mote:[0,8,1.6,3.2,1,0,10],disabler:[0,10,1,1,1,0,1]},ec:{stunner:[6,6,1,3,1,0,10],tank:[12,12,3,3,1,0,20],harpoon:[16,16,3,6,1,0,15],mote:[0,10,2,4,1,0,10],disabler:[0,5,0,
5,1,0,1]},Eb:"disabler",Ya:[[[-14,343],[25,439],[175,439],[250,239],[325,439],[475,439],[550,239],[625,439],[775,439],[811,341],[850,629],[-50,629]],[[850,161],[775,161],[700,361],[625,161],[475,161],[400,361],[325,161],[175,161],[100,361],[25,161],[-50,161],[-50,-21],[850,-21]]],Df:[[[-14,363],[25,459],[175,459],[250,259],[325,459],[475,459],[550,259],[625,459],[775,459],[811,361],[850,649],[-50,649]],[[850,141],[775,141],[700,341],[625,141],[475,141],[400,341],[325,141],[175,141],[100,341],[25,
141],[-50,141],[-50,-41],[850,-41]]],Oa:[[-100,166],[900,166]],Ka:[[100,402],[700,402],[25,299],[775,299]],$a:1.3,sa:{easy:[125E3,3E5,9E5],normal:[25E4,6E5,175E4]},cb:{disabler:1,harpoon:1,tank:2,mote:2,stunner:4},oe:{disabler:1,mote:2},wh:!0,vb:{x:400,y:400}},"HIVE 3-4":{r:{spear:[0,4,0,4,2,2,15],fighter:[0,10,0,10,2,1,10],mote:[0,8,0,8,2,1,20],disabler:[0,10,0,10,1,0,1]},ec:{spear:[0,6,1,3,1,0,15],fighter:[0,15,3,6,1,0,10],mote:[0,10,0,10,2,1,20],disabler:[0,5,0,5,1,0,1]},Eb:"disabler",Ya:[[[424,
337],[540,368],[555,310],[613,326],[582,441],[640,457],[624,515],[509,484],[493,541],[436,526],[467,410],[409,395]],[[420,584],[536,615],[551,558],[609,573],[578,689],[405,642]],[[428,90],[544,121],[559,63],[617,78],[586,194],[644,209],[629,267],[513,236],[498,294],[440,279],[471,163],[413,147]],[[177,333],[292,364],[308,306],[366,322],[335,437],[393,453],[377,510],[262,479],[246,537],[188,522],[219,406],[161,391]],[[173,580],[288,611],[304,553],[362,569],[331,685],[157,638]],[[181,86],[297,117],
[312,59],[370,74],[339,190],[397,205],[381,263],[266,232],[250,290],[192,274],[223,159],[166,143]],[[401,-42],[385,16],[270,-15],[254,43],[197,27],[228,-89]],[[648,-38],[633,20],[517,-11],[502,47],[444,31],[475,-84]],[[671,341],[787,372],[802,314],[860,330],[829,445],[887,461],[871,519],[756,488],[740,545],[683,530],[714,414],[656,399]],[[895,-34],[880,24],[764,-7],[749,51],[691,35],[722,-80]],[[154,-46],[138,12],[23,-19],[7,39],[-50,23],[-19,-93]],[[667,588],[783,619],[798,562],[856,577],[825,693],
[652,646]],[[-66,82],[50,113],[65,55],[123,70],[92,186],[150,201],[134,259],[19,228],[3,286],[-55,270],[-24,155],[-81,139]],[[-74,576],[41,607],[57,549],[115,565],[84,681],[-90,634]],[[-70,329],[45,360],[61,302],[119,318],[88,433],[146,449],[130,506],[15,475],[-1,533],[-59,518],[-28,402],[-86,387]],[[675,94],[791,125],[806,67],[864,82],[833,198],[891,213],[876,271],[760,240],[745,298],[687,283],[718,167],[660,151]]],Df:[[[434,346],[538,374],[552,322],[604,336],[576,439],[628,454],[614,506],[511,478],
[496,529],[445,516],[473,412],[421,398]],[[430,587],[534,615],[548,563],[600,577],[572,681],[416,639]],[[438,99],[542,127],[556,75],[608,88],[580,192],[632,206],[619,258],[515,230],[501,282],[449,269],[477,165],[425,150]],[[187,342],[291,370],[305,318],[357,332],[329,435],[381,450],[367,501],[264,473],[249,525],[197,512],[225,408],[173,394]],[[183,583],[286,611],[301,558],[353,573],[325,677],[168,635]],[[191,95],[295,123],[309,71],[361,84],[333,188],[385,202],[371,254],[268,226],[253,278],[201,264],
[229,161],[178,146]],[[390,-39],[375,13],[272,-14],[258,38],[206,23],[234,-81]],[[637,-35],[623,17],[519,-10],[505,42],[453,27],[481,-76]],[[681,350],[785,378],[799,326],[851,340],[823,443],[875,458],[861,510],[758,482],[743,533],[692,520],[720,416],[668,402]],[[884,-31],[870,21],[766,-6],[752,46],[700,31],[728,-72]],[[143,-43],[128,9],[25,-18],[11,34],[-41,19],[-13,-85]],[[677,591],[781,619],[795,567],[847,581],[819,685],[663,643]],[[-56,91],[48,119],[62,67],[114,80],[86,184],[138,198],[124,250],
[21,222],[6,274],[-46,260],[-18,157],[-69,142]],[[-64,579],[39,607],[54,554],[106,569],[78,673],[-79,631]],[[-60,338],[44,366],[58,314],[110,328],[82,431],[134,446],[120,497],[17,469],[2,521],[-50,508],[-22,404],[-74,390]],[[685,103],[789,131],[803,79],[855,92],[827,196],[879,210],[866,262],[762,234],[748,286],[696,273],[724,169],[672,154]]],Oa:[[-692,162],[958,574],[-114,43],[958,327],[-139,277],[941,70],[-125,530],[105,743],[-125,530],[344,745],[456,-148],[597,738],[203,-140]],Ka:[[159,48],[646,
551],[151,544],[653,58]],$a:.8,sa:{normal:[3E5,6E5,2E6]},vb:{x:400,y:300},cb:{spear:3,fighter:2,mote:2,disabler:1}},"HIVE 3-5":{r:{spear:[0,10,0,10,2,2,8],tank:[0,12,0,12,2,2,8],harpoon:[0,12,2.4,4.8,1,0,8],troll:[0,10,0,10,2,2,10]},ec:{spear:[6,10,2,4,2,0,8],tank:[8,15,2.5,4,1,0,8],harpoon:[10,20,4,8,1,0,8],troll:[0,10,2,4,2,0,10]},Eb:"troll",Ya:[[[350,123],[400,90],[450,123],[400,156]],[[256,300],[223,350],[190,300],[223,250]],[[400,444],[450,477],[400,510],[350,477]],[[577,250],[610,300],[577,
350],[544,300]],[[400,350],[250,450],[350,300],[250,150],[400,250],[550,150],[450,300],[550,450]],[[350,-54],[450,-54],[550,96],[400,-4],[250,96]],[[-4,123],[46,90],[96,123],[46,156]],[[46,444],[96,477],[46,510],[-4,477]],[[754,156],[704,123],[754,90],[804,123]],[[804,477],[754,510],[704,477],[754,444]],[[46,-4],[-41,55],[-4,-54],[96,-54],[196,96]],[[250,504],[400,604],[550,504],[450,654],[350,654]],[[196,150],[96,300],[196,450],[46,350],[-47,412],[-4,300],[-44,190],[46,250]],[[604,450],[704,300],
[604,150],[754,250],[847,188],[804,300],[844,410],[754,350]],[[196,504],[96,654],[-4,654],[-41,545],[46,604]],[[604,96],[704,-54],[804,-54],[841,55],[754,-4]],[[754,604],[841,545],[804,654],[704,654],[604,504]]],Df:[[[355,123],[400,93],[445,123],[400,153]],[[253,300],[223,345],[193,300],[223,255]],[[400,447],[445,477],[400,507],[355,477]],[[577,255],[607,300],[577,345],[547,300]],[[400,345],[265,435],[355,300],[265,165],[400,255],[535,165],[445,300],[535,435]],[[355,-47],[445,-47],[535,88],[400,-2],
[265,88]],[[1,123],[46,93],[91,123],[46,153]],[[46,447],[91,477],[46,507],[1,477]],[[754,153],[709,123],[754,93],[799,123]],[[799,477],[754,507],[709,477],[754,447]],[[47,-3],[-31,50],[2,-48],[92,-48],[182,87]],[[265,512],[400,602],[535,512],[445,647],[355,647]],[[182,165],[92,300],[182,435],[47,345],[-36,401],[2,300],[-34,201],[47,255]],[[618,435],[708,300],[618,165],[753,255],[836,199],[798,300],[834,399],[753,345]],[[182,513],[92,648],[2,648],[-31,550],[47,603]],[[618,87],[708,-48],[798,-48],[831,
50],[753,-3]],[[753,603],[831,550],[798,648],[708,648],[618,513]]],Oa:[[222,652],[-120,123],[-120,477],[920,123],[920,477],[222,-52],[578,652],[578,-52]],Ka:[[223,58],[223,543],[577,58],[577,543]],$a:1,sa:{easy:[2E5,4E5,9E5],normal:[3E5,6E5,175E4]},vb:{x:400,y:400},cb:{tank:1,spear:1,harpoon:1,troll:2},oe:{spear:1,troll:2}},"HIVE 3-6":{r:{stunner:[0,8,0,8,2,2,15],tank:[6,15,3,6,1,1,10],mote:[0,10,2,4,1,1,15],fighter:[7,20,4,8,1,1,10],troll:[0,10,0,10,2,2,10]},ec:{stunner:[3,10,0,10,2,1,15],tank:[6,
20,4,8,1,0,10],mote:[0,13,2.5,6,1,0,15],fighter:[14,20,3,8,1,0,10],troll:[0,12,2.5,4,1,0,10]},Eb:"troll",Ka:[[100,100]],Ya:[[[287,118],[332,136],[351,91],[398,109],[392,122],[281,169],[267,164]],[[209,302],[223,308],[269,420],[264,433],[218,413],[236,368],[191,349]],[[591,298],[577,292],[531,180],[536,167],[582,187],[564,232],[609,251]],[[513,482],[468,464],[449,509],[402,491],[408,478],[519,431],[533,436]],[[531,313],[525,325],[479,305],[498,259],[359,202],[340,248],[294,229],[300,216],[411,170],
[486,201]],[[269,287],[275,275],[321,295],[302,341],[441,398],[460,352],[506,371],[500,384],[389,430],[314,399]],[[828,504],[826,846],[-76,645],[-33,148],[136,218],[118,264],[163,284],[145,329],[99,310],[41,449],[178,506],[198,460],[245,479],[226,525],[364,582],[383,536],[430,556],[410,601],[606,520],[560,501],[579,455],[625,475],[645,428]],[[-28,96],[-26,-246],[876,-45],[833,452],[664,382],[682,336],[637,316],[655,271],[701,290],[759,151],[622,94],[602,140],[555,121],[574,75],[436,18],[417,64],[370,
44],[390,-1],[194,80],[240,99],[221,145],[175,125],[155,172]]],Df:[[[513,482],[468,464],[449,509],[402,491],[408,478],[519,431],[533,436]],[[591,298],[577,292],[531,180],[536,167],[582,187],[564,232],[609,251]],[[209,302],[223,308],[269,420],[264,433],[218,413],[236,368],[191,349]],[[287,118],[332,136],[351,91],[398,109],[392,122],[281,169],[267,164]],[[269,287],[316,307],[302,341],[441,398],[454,365],[500,384],[389,430],[314,399]],[[531,313],[484,293],[498,259],[359,202],[345,235],[300,216],[411,
170],[486,201]],[[-26,81],[-26,-246],[876,-45],[839,439],[669,369],[682,336],[659,327],[678,281],[701,290],[759,151],[622,94],[612,119],[565,99],[574,75],[436,18],[426,42],[380,23],[390,-1],[194,80],[217,88],[198,135],[175,125],[162,159]],[[826,519],[826,846],[-76,645],[-40,160],[132,231],[118,264],[141,273],[122,319],[99,310],[41,449],[178,506],[188,481],[235,501],[226,525],[364,582],[374,558],[420,577],[410,601],[606,520],[583,512],[602,465],[625,475],[638,441]]],Oa:[[-103,88],[923,515]],Ka:[[318,
106],[482,495],[214,222],[586,379],[202,383],[598,218]],$a:1,sa:{easy:[2E5,4E5,8E5],normal:[4E5,75E4,15E5]},cb:{troll:2,stunner:2,mote:2},oe:{troll:1,mote:1},vb:{x:400,y:300}},"HIVE 3-7":{r:{stunner:[4,30,0,30,2,1,10],spear:[20,30,0,30,4,2,10],tank:[8,30,0,30,2,2,8],mote:[10,30,0,30,2,2,10],goo:[18,30,0,30,1,0,1],harpoon:[2,30,0,30,4,4,6],fighter:[16,30,0,30,2,1,6],disabler:[12,30,0,30,1,0,1],troll:[0,30,0,30,4,2,10]},Eb:"troll",Ya:[[[373,606],[439,691],[-20,688],[-20,-44],[211,-23],[206,-2],[17,
459]],[[427,-6],[361,-91],[820,-88],[820,644],[589,623],[594,602],[783,141]],[[309,78],[200,340],[144,363],[285,22],[626,163],[569,187]],[[600,260],[656,237],[515,578],[175,436],[230,413],[492,521]],[[468,364],[448,318],[467,272],[422,254],[402,207],[513,253]],[[332,236],[352,282],[333,328],[378,346],[398,393],[287,347]]],Oa:[[163,-99],[284,-112],[516,712],[638,699]],Ka:[[171,492],[105,319],[629,109],[695,282]],$a:1.5,sa:{normal:[4E5,8E5,2E6]},cb:{troll:4},wh:!0,vb:{x:400,y:300}},"BOSS 3":{r:{"third boss":[0,
1,0,1,1,0,1],stunner:[0,6,0,6,0,0,15],spear:[0,10,0,10,0,0,10],tank:[0,12,0,12,0,0,10],troll:[0,8,0,8,0,0,10],goo:[0,12,0,12,0,0,2],mote:[0,8,0,8,0,0,10],disabler:[0,10,0,10,0,0,2],harpoon:[0,15,0,15,0,0,10]},Eb:"third boss",Ya:[[[-25,-25],[400,-25],[400,25],[25,25],[25,300],[-25,300]],[[-25,300],[25,300],[25,575],[400,575],[400,625],[-25,625]],[[825,300],[775,300],[775,25],[400,25],[400,-25],[825,-25]],[[825,625],[400,625],[400,575],[775,575],[775,300],[825,300]]],Oa:[[60,62],[60,539],[740,62],[740,
539]],$a:1,vb:{x:400,y:500},Ot:60,cb:{"third boss":1}},"HIVE 4-1":{r:{spear:[4,16,0,16,2,2,10],troll:[8,16,0,16,2,1,10],tank:[12,16,0,16,2,1,10],harpoon:[16,16,0,16,2,1,10],slingshot:[0,8,0,8,2,1,20]},ec:{spear:[10,28,0,28,2,1,10],troll:[17,28,0,28,2,1,10],tank:[24,28,0,28,2,1,10],harpoon:[31,28,0,28,2,1,10],slingshot:[0,8,1,4,1,0,20]},Eb:"slingshot",Ya:[[[-7,472],[61,471],[96,527],[61,581],[-7,581],[-41,526]],[[93,299],[59,354],[-9,354],[-44,300],[-9,244],[59,245]],[[329,74],[363,19],[431,19],[466,
73],[431,129],[363,128]],[[621,466],[553,467],[518,411],[553,357],[621,357],[655,412]],[[841,526],[807,581],[739,581],[704,527],[739,471],[807,472]],[[179,135],[247,134],[282,190],[247,244],[179,244],[145,189]],[[145,412],[179,357],[247,357],[282,411],[247,467],[179,466]],[[741,245],[809,244],[844,300],[809,354],[741,354],[707,299]],[[744,20],[812,19],[847,75],[812,129],[744,129],[710,74]],[[330,303],[364,248],[432,248],[467,302],[432,358],[364,357]],[[363,473],[431,472],[466,528],[431,582],[363,
582],[329,527]],[[655,189],[621,244],[553,244],[518,190],[553,134],[621,135]],[[90,74],[56,129],[-12,129],[-47,75],[-12,19],[56,20]]],$a:.5,sa:{easy:[25E4,6E5,15E5],normal:[5E5,125E4,3E6]},cb:{slingshot:2},oe:{slingshot:1},vb:{x:400,y:415},Ka:[[210,75],[590,75],[210,525],[590,525]],Oa:[[-75,180],[-75,420],[215,650],[585,650],[215,-50],[585,-50],[875,180],[875,420]],wh:!0},"HIVE 4-2":{ec:{stunner:[6,6,1.2,2.4,1,0,15],mote:[6,12,2,4,1,0,10],fighter:[0,25,4,9,1,0,8],slingshot:[0,10,1.5,6,1,0,15],goo:[1,
15,0,15,1,0,1]},r:{stunner:[0,6,0,6,2,1,15],mote:[0,8,1.5,3,1,0,10],fighter:[0,15,3,6,1,0,8],slingshot:[0,5,.75,3,1,0,15],goo:[1,15,0,15,1,0,1]},Eb:"slingshot",Ya:[[[282,254],[311,254],[311,280],[338,280],[338,319],[312,319],[312,347],[282,347]],[[354,418],[354,389],[380,389],[380,362],[419,362],[419,388],[447,388],[447,418]],[[447,182],[447,212],[419,212],[419,238],[380,238],[380,211],[354,211],[354,182]],[[820,619],[605,619],[605,542],[642,542],[642,505],[820,505]],[[282,619],[282,542],[354,542],
[354,505],[447,505],[446,542],[518,542],[518,619]],[[820,418],[642,418],[642,346],[605,346],[605,253],[642,254],[642,182],[820,182]],[[-20,505],[158,505],[158,542],[195,542],[195,619],[-20,619]],[[-20,-19],[195,-19],[195,58],[158,58],[158,95],[-20,95]],[[820,95],[642,95],[642,58],[605,58],[605,-19],[820,-19]],[[518,347],[488,347],[488,319],[462,319],[462,280],[489,280],[489,254],[518,254]],[[-20,182],[158,182],[158,254],[195,253],[195,346],[158,346],[158,418],[-20,418]],[[518,-19],[518,58],[446,58],
[447,95],[354,95],[354,58],[282,58],[282,-19]]],Df:[[[345,447],[345,412],[376,412],[376,379],[423,379],[423,411],[456,411],[456,447]],[[-94,536],[120,536],[120,580],[164,580],[164,673],[-94,673]],[[547,356],[511,356],[511,323],[479,323],[479,276],[512,276],[512,245],[547,245]],[[456,153],[456,189],[423,189],[423,221],[376,221],[376,188],[345,188],[345,153]],[[253,245],[288,245],[288,276],[321,276],[321,323],[289,323],[289,356],[253,356]],[[-94,-73],[164,-73],[164,20],[120,20],[120,64],[-94,64]],[[894,
673],[636,673],[636,580],[680,580],[680,536],[894,536]],[[894,64],[680,64],[680,20],[636,20],[636,-73],[894,-73]],[[904,447],[680,447],[680,355],[636,355],[636,244],[680,245],[680,153],[904,153]],[[-104,153],[120,153],[120,245],[164,245],[164,356],[120,355],[120,447],[-104,447]],[[253,673],[253,580],[345,580],[344,536],[455,536],[455,580],[547,580],[547,673]],[[547,-73],[547,20],[455,20],[455,64],[344,64],[345,20],[253,20],[253,-73]]],Oa:[[-100,450],[-100,150],[900,450],[900,150],[240,-100],[560,
-100],[240,700],[560,700]],Ka:[[114,150],[114,451],[686,150],[686,451],[561,41],[561,560],[239,41],[239,560]],Mz:[[61,107],[61,493],[739,107],[739,493]],$a:1,sa:{normal:[5E5,15E5,3E6]},cb:{stunner:2,mote:2,slingshot:2,fighter:1},oe:{slingshot:1,fighter:1},wh:!0,vb:{x:400,y:300}},"HIVE 4-3":{ec:{stunner:[12,10,2,4,1,0,15],spear:[20,20,4,8,1,0,10],tank:[17,20,4,8,1,0,15],mote:[14,20,4,8,1,0,10],harpoon:[17,25,5,10,1,0,10],orbiter:[0,12,1.5,6,1,0,15]},r:{stunner:[2,5,1,2,1,0,15],spear:[6,12,2.4,4.8,
1,0,10],tank:[4,12,2.4,4.8,1,0,15],mote:[2,12,2.4,4.8,1,0,10],harpoon:[4,15,3,6,1,0,10],orbiter:[0,12,0,12,2,1,15]},Eb:"orbiter",Ka:[[159,301],[641,301],[208,94],[208,507],[592,94],[592,507]],Ya:[[[309,161],[492,161],[492,249],[456,249],[456,199],[343,199],[343,249],[309,249]],[[309,351],[343,351],[343,401],[456,401],[456,351],[492,351],[492,440],[309,440]],[[230,209],[230,392],[141,392],[141,356],[191,356],[191,243],[141,243],[141,209]],[[571,391],[571,208],[659,208],[659,244],[609,244],[609,357],
[659,357],[659,391]],[[191,-49],[609,-49],[609,68],[571,68],[571,31],[230,31],[230,68],[191,68]],[[609,649],[191,649],[191,532],[230,532],[230,569],[571,569],[571,532],[609,532]],[[-40,119],[191,119],[191,158],[37,158],[37,442],[191,442],[191,480],[-40,480]],[[840,481],[609,481],[609,442],[763,442],[763,158],[609,158],[609,120],[840,120]]],Df:[[[191,-49],[609,-49],[609,68],[571,68],[571,31],[230,31],[230,68],[191,68]],[[609,649],[191,649],[191,532],[230,532],[230,569],[571,569],[571,532],[609,532]],
[[-40,120],[141,119],[141,158],[37,158],[37,442],[141,442],[141,481],[-40,481]],[[840,480],[659,481],[659,442],[763,442],[763,158],[659,158],[659,119],[840,119]],[[481,269],[447,269],[447,219],[354,219],[354,269],[318,269],[318,180],[481,180]],[[481,420],[318,420],[318,331],[354,331],[354,381],[447,381],[447,331],[481,331]],[[568,381],[568,218],[657,218],[657,254],[607,254],[607,347],[656,347],[657,381]],[[232,219],[232,382],[143,382],[143,346],[193,346],[193,253],[144,253],[143,219]]],Oa:[[-100,
-100],[-100,700],[900,700],[900,-100]],$a:1.3,sa:{normal:[4E5,12E5,25E5]},cb:{orbiter:2},oe:{orbiter:1},wh:!0,vb:{x:400,y:300}},"HIVE 4-4":{ec:{goo:[2,20,0,20,1,0,1],troll:[4,15,3,6,1,0,5],fighter:[2,25,4,9,1,0,5],slingshot:[1,15,3,6,1,0,5],orbiter:[0,15,3,6,1,0,10]},r:{goo:[2,30,0,30,1,0,1],troll:[4,15,0,15,2,1,5],fighter:[2,15,3,6,1,0,5],slingshot:[1,12,2.4,4.8,1,0,5],orbiter:[0,12,0,12,2,2,10]},Eb:"orbiter",Ya:[[[51,190],[76,190],[76,215],[51,215]],[[126,190],[151,190],[151,215],[126,215]],[[351,
190],[376,190],[376,215],[351,215]],[[426,190],[451,190],[451,215],[426,215]],[[676,215],[651,215],[651,190],[676,190]],[[751,215],[726,215],[726,190],[751,190]],[[237,115],[262,115],[262,140],[237,140]],[[488,140],[313,140],[313,115],[488,115]],[[563,140],[538,140],[538,115],[563,115]],[[-27,-30],[830,-30],[830,54],[-27,54]],[[-27,546],[830,546],[830,630],[-27,630]],[[237,460],[262,460],[262,485],[237,485]],[[488,485],[313,485],[313,460],[488,460]],[[563,485],[538,485],[538,460],[563,460]],[[751,
410],[726,410],[726,385],[751,385]],[[676,410],[651,410],[651,385],[676,385]],[[426,385],[451,385],[451,410],[426,410]],[[351,385],[376,385],[376,410],[351,410]],[[126,385],[151,385],[151,410],[126,410]],[[51,385],[76,385],[76,410],[51,410]],[[51,460],[188,460],[188,485],[51,485]],[[749,140],[612,140],[612,115],[749,115]],[[749,485],[612,485],[612,460],[749,460]],[[51,115],[188,115],[188,140],[51,140]],[[201,385],[301,385],[301,410],[201,410]],[[599,216],[499,216],[499,190],[599,191]],[[599,410],
[499,410],[499,385],[599,385]],[[201,191],[301,190],[301,216],[201,216]]],Df:[[[327,190],[364,190],[364,215],[327,215]],[[439,190],[477,190],[477,215],[439,215]],[[156,115],[193,115],[193,140],[156,140]],[[532,140],[270,140],[270,115],[532,115]],[[645,140],[607,140],[607,115],[645,115]],[[-51,-30],[847,-30],[847,54],[-51,54]],[[156,460],[193,460],[193,485],[156,485]],[[532,485],[270,485],[270,460],[532,460]],[[645,485],[607,485],[607,460],[645,460]],[[439,385],[477,385],[477,410],[439,410]],[[327,
385],[364,385],[364,410],[327,410]],[[102,385],[252,385],[252,410],[102,410]],[[699,216],[549,216],[549,190],[699,191]],[[699,410],[549,410],[549,385],[699,385]],[[102,191],[252,190],[252,216],[102,216]],[[-51,546],[847,546],[847,630],[-51,630]]],Oa:[[-100,350],[900,350],[-100,250],[900,250]],Ka:[[117,83],[117,518],[683,83],[683,518]],$a:1,sa:{normal:[5E5,1E6,2E6]},cb:{orbiter:2},wh:!0,vb:{x:400,y:300}},"HIVE 4-6":{r:{tank:[2,12,0,12,2,1,15],mote:[3,10,0,10,2,1,15],harpoon:[5,14,0,14,2,1,10],fighter:[1,
18,0,18,2,1,6],disabler:[4,16,0,16,1,0,1],deathray:[30,30,6,12,1,0,3]},ec:{tank:[4,15,3,6,1,0,15],mote:[8,12,2.5,4,1,0,15],harpoon:[6,18,3,6,1,0,10],fighter:[10,24,4,8,1,0,6],disabler:[2,16,0,16,1,0,1],deathray:[40,40,8,24,1,0,3]},Eb:"deathray",Ya:[[[-50,393],[-55,-44],[846,-44],[846,38],[650,37],[584,179],[683,394],[608,393],[509,178],[578,37],[380,37],[314,179],[413,393],[338,393],[239,178],[308,37],[110,37],[44,178],[143,393]],[[850,207],[855,644],[-46,644],[-46,562],[150,563],[216,422],[117,206],
[192,207],[291,422],[222,563],[420,563],[486,422],[387,207],[462,207],[561,422],[492,563],[690,563],[756,422],[657,207]],[[148,88],[222,87],[192,153],[116,154]],[[418,87],[492,88],[462,154],[387,154]],[[338,446],[414,446],[382,513],[308,512]],[[608,447],[684,447],[652,512],[578,512]],[[-46,447],[144,447],[112,513],[-46,513]],[[846,153],[656,153],[688,87],[846,87]]],Df:[[[151,93],[215,93],[189,149],[123,149]],[[421,93],[485,93],[459,149],[394,149]],[[379,507],[315,507],[341,451],[406,451]],[[649,507],
[585,507],[611,451],[677,451]],[[-46,562],[155,562],[208,451],[272,451],[217,563],[425,563],[478,451],[542,451],[487,563],[695,563],[761,421],[662,207],[850,207],[855,644],[-46,644]],[[182,336],[247,336],[274,394],[209,394]],[[451,335],[516,335],[543,393],[478,393]],[[846,38],[645,38],[592,149],[528,149],[583,37],[375,37],[322,149],[258,149],[313,37],[105,37],[39,179],[138,393],[-50,393],[-55,-44],[846,-44]],[[349,265],[284,265],[257,208],[322,208]],[[618,264],[553,264],[526,207],[591,207]],[[110,
508],[46,508],[72,452],[137,452]],[[690,92],[754,92],[728,148],[663,148]]],Oa:[[-100,420],[900,180],[-100,540],[900,60]],Ka:[[174,421],[626,180],[714,422],[86,179]],$a:1,sa:{normal:[5E5,1E6,25E5]},cb:{deathray:1},wh:!0,vb:{x:400,y:300}},"HIVE 4-5":{ec:{stunner:[11,8,2,3,1,0,40],spear:[15,10,2,4,1,0,20],troll:[15,20,4,8,1,0,10],slingshot:[13,20,4,8,1,0,10],orbiter:[10,15,3,6,1,0,10],deathray:[30,30,5,10,1,1,3]},r:{stunner:[2,8,0,8,2,2,40],spear:[1,10,2,4,1,1,20],troll:[5,15,3,6,1,1,10],slingshot:[3,
15,3,6,1,1,10],orbiter:[1,8,1.6,3.2,1,1,10],deathray:[30,30,6,12,1,1,3]},Eb:"deathray",Ka:[[82,69],[82,532],[718,69],[718,532]],Ya:[[[326,261],[326,339],[284,362],[284,238]],[[516,238],[516,362],[474,339],[474,261]],[[521,180],[484,216],[316,216],[279,180]],[[279,420],[316,384],[484,384],[521,420]],[[234,209],[234,391],[164,427],[164,173]],[[636,173],[636,427],[566,391],[566,209]],[[628,72],[571,130],[229,130],[172,72]],[[172,528],[229,470],[571,470],[628,528]],[[84,129],[84,471],[-20,527],[-20,73]],
[[820,73],[820,527],[716,471],[716,129]],[[685,584],[719,616],[81,616],[115,584]],[[115,16],[81,-16],[719,-16],[685,16]]],Df:[[[234,209],[234,391],[164,427],[164,173]],[[636,173],[636,427],[566,391],[566,209]],[[628,72],[571,130],[229,130],[172,72]],[[172,528],[229,470],[571,470],[628,528]],[[84,129],[84,471],[-20,527],[-20,73]],[[820,73],[820,527],[716,471],[716,129]],[[685,584],[719,616],[81,616],[115,584]],[[115,16],[81,-16],[719,-16],[685,16]]],Oa:[[-100,-100],[900,-100],[900,700],[-100,700]],
$a:.8,sa:{normal:[6E5,12E5,25E5]},cb:{deathray:1},wh:!0,vb:{x:400,y:300}},"HIVE 4-7":{ec:{stunner:[2,30,6,12,2,0,6],spear:[4,30,6,12,2,0,6],tank:[6,25,5,10,1,0,5],mote:[10,25,5,10,2,0,6],goo:[8,20,0,20,1,0,1],harpoon:[18,40,8,16,1,0,6],fighter:[12,40,8,16,1,0,4],disabler:[14,15,3,6,1,0,1],troll:[16,30,6,12,1,0,4],slingshot:[28,40,8,16,1,0,4],orbiter:[22,30,6,12,1,0,5],deathray:[45,45,9,18,1,0,3]},r:{stunner:[1,20,3,8,4,0,6],spear:[3,20,3,8,4,0,6],tank:[4,25,4,9,3,0,5],mote:[5,20,3,12,3,0,6],goo:[8,
20,0,20,1,0,1],harpoon:[10,25,5,10,1,0,6],fighter:[6,25,5,10,1,0,4],disabler:[9,15,0,15,1,0,1],troll:[8,20,3,12,2,0,4],slingshot:[2,25,5,10,1,0,4],orbiter:[2,20,3,8,2,0,5],deathray:[31,30,6,12,1,0,3]},Eb:"deathray",Ya:[[[-34,-17],[833,-17],[833,18],[-34,18]],[[-34,58],[335,58],[335,93],[-34,93]],[[834,543],[466,543],[466,508],[834,508]],[[-34,133],[245,133],[245,168],[-34,168]],[[834,468],[555,468],[555,433],[834,433]],[[-34,583],[833,583],[833,618],[-34,618]],[[-34,208],[150,208],[150,243],[-32,
243]],[[277,208],[335,208],[335,243],[277,243]],[[277,358],[335,358],[335,393],[277,393]],[[-34,508],[335,508],[335,543],[-34,543]],[[834,93],[466,93],[466,58],[834,58]],[[523,243],[466,243],[466,208],[523,208]],[[523,393],[466,393],[466,358],[523,358]],[[-32,358],[150,358],[150,393],[-34,393]],[[833,243],[651,243],[651,208],[834,208]],[[834,393],[651,393],[651,358],[833,358]],[[-34,433],[245,433],[245,468],[-34,468]],[[834,168],[555,168],[555,133],[834,133]],[[370,433],[430,433],[430,468],[370,468]],
[[430,168],[370,168],[370,133],[430,133]],[[185,283],[245,283],[245,318],[185,316]],[[-34,283],[60,283],[60,318],[-34,318]],[[834,318],[740,318],[740,283],[834,283]],[[615,316],[555,318],[555,283],[615,283]],[[430,318],[370,318],[370,283],[430,283]]],Df:[[[-34,-17],[833,-17],[833,18],[-34,18]],[[-34,58],[335,58],[335,93],[-34,93]],[[834,543],[466,543],[466,508],[834,508]],[[-34,133],[245,133],[245,168],[-34,168]],[[834,468],[555,468],[555,433],[834,433]],[[-34,583],[833,583],[833,618],[-34,618]],
[[-34,208],[150,208],[150,243],[-32,243]],[[-34,508],[335,508],[335,543],[-34,543]],[[834,93],[466,93],[466,58],[834,58]],[[-32,358],[150,358],[150,393],[-34,393]],[[833,243],[651,243],[651,208],[834,208]],[[834,393],[651,393],[651,358],[833,358]],[[-34,433],[245,433],[245,468],[-34,468]],[[834,168],[555,168],[555,133],[834,133]],[[-34,283],[60,283],[60,318],[-34,318]],[[834,318],[740,318],[740,283],[834,283]],[[430,243],[369,243],[369,208],[430,208]],[[466,283],[527,283],[527,318],[466,318]],[[334,
318],[273,318],[273,283],[334,283]],[[430,392],[369,392],[369,357],[430,357]]],Oa:[[869,37],[869,563],[-69,37],[-69,563],[-69,112],[-69,489],[869,112],[869,489],[869,190],[869,411],[-69,190],[-69,411],[-69,336],[-69,264],[869,336],[869,264]],Ka:[[314,37],[486,563],[314,563],[486,37]],$a:1,sa:{normal:[3E5,6E5,125E4],normal:[75E4,125E4,25E5]},cb:{deathray:1},wh:!0,vb:{x:400,y:370},mz:{x:400,y:300}},"BOSS 4":{r:{"fourth boss":[0,1,0,0,1,0,1],stunner:[0,0,0,0,0,0,15],spear:[0,0,0,0,0,0,15],tank:[0,0,
0,0,0,0,10],mote:[0,0,0,0,0,0,15],goo:[0,0,0,0,0,0,2],disabler:[0,0,0,0,0,0,1],troll:[0,0,0,0,0,0,12],orbiter:[0,0,0,0,0,0,10],fighter:[0,0,0,0,0,0,8],harpoon:[0,0,0,0,0,0,12],slingshot:[0,0,0,0,0,0,12],deathray:[0,0,0,0,0,0,4]},Eb:"fourth boss",Ya:[[[-25,-25],[400,-25],[400,25],[25,25],[25,300],[-25,300]],[[-25,300],[25,300],[25,575],[400,575],[400,625],[-25,625]],[[825,300],[775,300],[775,25],[400,25],[400,-25],[825,-25]],[[825,625],[400,625],[400,575],[775,575],[775,300],[825,300]]],Oa:[[60,62],
[60,539],[740,62],[740,539]],$a:1,vb:{x:400,y:500},Ot:90,cb:{"fourth boss":1}}};for(r in N)N[r].V=r,N[r].sa&&"undefined"===typeof N[r].sa.easy&&(N[r].sa.easy=N[r].sa.normal.map(function(a){return a/2})),"undefined"===typeof N[r].Xu&&("BOSS"==r.slice(0,4)?N[r].Xu=100*parseInt(r.slice(5,6)):"HIVE"==r.slice(0,4)&&(N[r].Xu=100*parseInt(r.slice(5,6)))),"undefined"===typeof N.kr&&(N[r].kr=function(a){a=this.Ya[a];for(var b=[],c=0;c<a.length;c++)b.push(new b2Vec2(a[c][0]/F,a[c][1]/F));return b});function cg(){}l=cg.prototype;l.ra=function(){};l.$=function(){};l.Ba=function(){};l.Na=function(){};l.Ag=function(){};l.ah=function(){};l.pp=function(){};l.qp=function(){};l.Ne=function(){};l.op=function(){};function dg(){}dg.prototype=new cg;dg.prototype.constructor=dg;dg.prototype.tm=function(a){var b=new Xf(a,this);bg(b);a=new Worker("js/lib/worker.js");a.postMessage({a:b.vh,b:b.kf,c:F,d:O,e:P});this.zr=0;a.onmessage=function(a){return function(d){d.data.z?a.zr=d.data.z:d.data.a&&(a.Rb=new gf(b,d.data.a,d.data.b,d.data.c,d.data.d,d.data.e,d.data.f),a.zr=1,a.yr())}}(this);return b};dg.prototype.yr=function(){};eg.prototype=new cg;l=eg.prototype;l.constructor=eg;
function eg(){this.O=new fg({fade_in:500,fade_out:250});Y(this.O,"fade_in");this.buttons=[];this.buttons.push(new Z("BACK",16,70,P/2+260,60,65,"white",w.impulse_blue,function(a){return function(){Y(a.O,"fade_out",function(){X=new Hf})}}(this),"back"));this.buttons.push(new Z("CONTINUE",16,O-70,P/2+260,60,65,"white",w.impulse_blue,function(a){return function(){for(var b=1;4>b&&qf[L]["world "+b];)b+=1;sf[L].H?Y(a.O,"fade_out",function(){X=new gg(null,null,null,null,null,!0)}):Y(a.O,"fade_out",function(){X=
new hg(b)})}}(this),"start"))}l.ra=function(a){this.O.ra(a)};
l.$=function(a,b){this.Kb||(lf.setAttribute("style",""),Eb(b,.3),this.Kb=!0);"fade_in"==this.O.ac?a.globalAlpha*=ig(this.O):"fade_out"==this.O.ac&&(a.globalAlpha*=1-ig(this.O));a.textAlign="center";a.font="32px Muli";a.fillStyle="white";a.fillText("CHALLENGE MODE",O/2,150);J(a,O/2,210,0,60,60,"ultimate_icon");a.font="18px Muli";a.fillText("CHALLENGE MODE IS A HARDER VERSION OF IMPULSE",O/2,300);a.fillText("FOR EXPERIENCED PLAYERS.",O/2,325);a.fillText("IF THIS IS YOUR FIRST TIME,",O/2,400);a.fillText("YOU MAY WANT TO TRY NORMAL MODE FIRST.",
O/2,425);for(var c=0;c<this.buttons.length;c++)this.buttons[c].$(a)};l.Ba=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ba(a,b)};l.Na=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b)};jg.prototype=new cg;l=jg.prototype;l.constructor=jg;
function jg(){this.Kb=!1;this.buttons=[];var a=this;this.buttons.push(new Z("BACK",16,O/2,P/2+260,60,65,"white",w.impulse_blue,function(){Y(a.O,"fade_out",function(){X=new Hf})},"back"));this.qu=new Image;this.qu.src="impulse_logo.png";this.buttons.push(new Z("KEVIN MACLEOD",16,O/2-250,P/2+50,150,70,"white",w.impulse_blue,function(){window.open("http://incompetech.com")},"note"));this.buttons.push(new Z("MATT MCFARLAND",16,O/2,P/2+50,150,70,"white",w.impulse_blue,function(){window.open("http://www.mattmcfarland.com")},
"note"));this.buttons.push(new Z("SUBTLE PATTERNS",16,O/2+250,P/2+50,150,70,"white",w.impulse_blue,function(){window.open("http://www.subtlepatterns.com")},"texture"));this.buttons.push(new Z("JAY SALVAT",16,O/2-150,P/2+180,150,70,"white",w.impulse_blue,function(){window.open("http://buzz.jaysalvat.com/")},"audio"));this.buttons.push(new Z("ERIN CATTO",16,O/2+150,P/2+180,150,70,"white",w.impulse_blue,function(){window.open("http://box2d.org/")},"physics_engine"));this.buttons[1].bf="MAIN MENU MUSIC";
this.buttons[2].bf="ALL OTHER MUSIC";this.buttons[3].bf="TEXTURES";this.buttons[4].bf="AUDIO API";this.buttons[5].bf="PHYSICS ENGINE";this.O=new fg({fade_in:250,fade_out:250});Y(this.O,"fade_in")}l.ra=function(a){this.O.ra(a)};
l.$=function(a,b){this.Kb||(bg_canvas.setAttribute("style",""),Eb(b,.2),this.Kb=!0);a.save();"fade_in"==this.O.ac?a.globalAlpha*=ig(this.O):"fade_out"==this.O.ac&&(a.globalAlpha*=1-ig(this.O));ob(a,O/2,150,"CREDITS");a.font="20px Muli";a.fillStyle="white";a.textAlign="center";a.shadowColor=a.fillStyle;a.globalAlpha*=1;a.globalAlpha/=1;for(var c=0;c<this.buttons.length;c++)this.buttons[c].$(a);a.restore()};l.Ba=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ba(a,b)};
l.Na=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b)};function fg(a){this.Uw=a;this.ac=null;this.kh=0}function Y(a,b,c){null==a.ac&&(a.ac=b,a.kh=a.Uw[b],a.mx=c)}fg.prototype.ra=function(a){null!=this.ac&&0<this.kh&&(this.kh-=a);null!=this.ac&&0>=this.kh&&(this.mx&&this.mx(),this.ac=null)};function ig(a){return a.ac?Math.min(1-a.kh/a.Uw[a.ac],1):0};kg.prototype=new cg;l=kg.prototype;l.constructor=kg;
function kg(a,b,c,d,f){this.i=b;this.V=this.i.V;this.buttons=[];this.s=c;this.Rb=d;this.Kb=!1;this.Da=f.Da;this.color=w["world "+this.s+" bright"];this.al=new Z("RETRY",16,O-70,P-40,60,65,this.color,this.color,function(a){return function(){var b=new lc(a.s,!1);Y(a.O,"fade_out",function(){X=new Jf(a.s,a.i,a.Rb,b,!1,!1)})}}(this),"start");this.buttons.push(this.al);this.al.keyCode=ua.jq;this.al.bf="right"==A.Vb?"R KEY":"SHIFT KEY";this.buttons.push(new Z("MENU",16,70,P/2+260,60,65,this.color,this.color,
function(a){return function(){a.s?Y(a.O,"fade_out",function(){X=new hg(a.s)}):Y(a.O,"fade_out",function(){X=new Hf})}}(this),"back"));this.H=a;this.i.pa?(this.Zc=f.Zc?f.Zc:0,this.ba=f.ba?f.ba:0):(this.sc=f.sc,this.ba=f.ba?f.ba:0,this.vt=3>this.ba?N[this.V].sa[L][this.ba]:N[this.V].sa[L][2]);tf+=this.H.pe;bc();Rf(L);this.Sg=null;if(this.i.pa)this.Sg={};else{this.Sg=N[this.V].r;this.Tc=0;for(var g in N[this.V].r)this.Tc+=1}this.Id=40;a=0;for(g in this.Sg){for(c=b=0;b<a+1&&b<this.Tc;)b+=12;c=b<=this.Tc?
12:this.Tc-(b-12);this.buttons.push(new lg(g,this.Id,O/2+(this.Id+10)*(a-(b-12)-(c-1)/2),490+this.Id*(Math.floor(a/12)-(Math.ceil(this.Tc/12)-1)/2),this.Id,this.Id,w["world "+this.s+" lite"],function(a,b){return function(){Y(b.O,"fade_out",function(){of=new mg(a,b)})}}(g,this)));a+=1}this.Md=["world "+this.s+" bright","silver","gold"];this.Tz=["GATEWAY","SILVER","GOLD"];kc();this.O=new fg({fade_in:500,fade_out:250});Y(this.O,"fade_in")}l.ra=function(a){this.O.ra(a)};
l.$=function(a,b){if(!this.Kb){this.i.w=null;bg_canvas.setAttribute("style","display:none");b.translate(Q,0);this.i.le(b);var c=xf.getContext("2d");Db(c,0,O,P,"Hive "+this.s);this.Kb=!0;b.translate(-Q,0);this.Kb=!0}a.save();a.fillStyle=w["world "+this.s+" dark"];a.fillRect(0,0,O,P);a.globalAlpha*=Uf(this.s);a.drawImage(xf,0,0,O,P,0,0,O,P);a.restore();a.save();"fade_in"==this.O.ac?a.globalAlpha*=ig(this.O):"fade_out"==this.O.ac&&(a.globalAlpha*=1-ig(this.O));if(this.i.pa)a.textAlign="center",a.shadowBlur=
0,a.save(),a.globalAlpha*=.3,Ka(a,this.s,O/2,P/2-50,100),a.restore(),a.font="24px Muli",this.i.uh?(a.fillStyle=w.gold,a.fillText("VICTORY",O/2,140)):(a.fillStyle="red",a.fillText("DEFEAT",O/2,140)),a.fillStyle=w["world "+this.s+" bright"],a.font="16px Muli",a.fillText(this.i.V,O/2,P/2-60),a.font="40px Muli",a.fillText(pa[this.s],O/2,P/2-20),a.font="24px Muli",a.fillStyle=0<this.ba?w[this.Md[this.ba-1]]:this.color,a.font="12px Muli",a.fillText("GAME TIME",O/2,355),a.font="28px Muli",a.fillText(dc(this.H.Uc),
O/2,380),this.Zc?(a.fillStyle=0<this.ba?w[this.Md[this.ba-1]]:this.color,a.font="12px Muli",a.fillText("NEW BEST TIME!",O/2,400)):3==N[this.V].Va[L].ba?(c=N[this.V].Va[L].ba,a.fillStyle=0<c?w[this.Md[c-1]]:this.color,a.font="12px Muli",a.fillText("BEST TIME",O/2,405),a.font="28px Muli",a.fillText(dc(N[this.V].Va[L].Zc),O/2,430)):(a.fillStyle=this.color,a.font="12px Muli",a.fillText("BEST TIME",O/2,405),a.font="28px Muli",a.fillText("UNDEFEATED",O/2,430));else{a.globalAlpha/=3;Ka(a,this.s,O/2,60,40,
!0);a.globalAlpha*=3;a.beginPath();a.fillStyle=this.color;a.font="30px Muli";a.textAlign="center";a.fillText(this.V,O/2,70);a.fill();a.font="20px Muli";0<this.ba&&this.Da?(a.fillStyle=w[this.Md[this.ba-1]],a.fillText(this.Tz[this.ba-1]+" SCORE ACHIEVED",O/2,110)):(a.fillStyle="red",a.fillText("GAME OVER",O/2,110));a.fillStyle=this.color;a.font="12px Muli";a.fillText("GAME TIME ",O/2,140);a.font="28px Muli";a.fillText(this.H.Wg,O/2,165);a.fillStyle=0<this.ba?w[this.Md[this.ba-1]]:this.color;a.font=
"12px Muli";a.fillText("SCORE",O/2,185);a.font="28px Muli";a.fillText(this.H.cd,O/2,210);a.font="12px Muli";a.fillStyle=3>this.ba?w[this.Md[this.ba]]:w[this.Md[2]];3>this.ba&&a.fillText("PROGRESS TO "+this.Tz[Math.max(this.ba,0)]+" SCORE",O/2,235);nb(a,O/2,250,200,Math.min(this.H.cd/this.vt,1),3>this.ba?w[this.Md[this.ba]]:w[this.Md[2]],w["world "+this.s+" lite"],!1,.6);this.sc?(a.fillStyle=0<this.ba?w[this.Md[this.ba-1]]:this.color,a.font="24px Muli",a.fillText("NEW HIGH SCORE!",O/2,425)):(c=N[this.V].Va[L].ba,
a.fillStyle=0<c?w[this.Md[c-1]]:this.color,a.font="12px Muli",a.fillText("HIGH SCORE",O/2,400),a.font="28px Muli",a.fillText(N[this.V].Va[L].sc,O/2,425));for(var c=["world "+this.s+" lite","silver","gold"],d=["GATEWAY SCORE","SILVER SCORE","GOLD SCORE"],f=0;3>f;f++)a.font="24px Muli",a.textAlign="right",a.fillStyle=w[c[f]],a.shadowColor=a.fillStyle,a.font="20px Muli",a.fillText(N[this.V].sa[L][f],O/2+160,35*f+297),a.textAlign="left",a.font="20px Muli",a.fillText(d[f],O/2-160,35*f+297)}this.i.pa||
(a.textAlign="center",a.fillStyle=w["world "+this.s+" lite"],a.font="12px Muli",a.fillText("ENEMIES",O/2,460));for(f=0;f<this.buttons.length;f++)this.buttons[f].$(a);a.restore()};l.Ba=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ba(a,b)};l.Na=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b)};l.Ne=function(a){for(var b=0;b<this.buttons.length;b++)this.buttons[b].Ne(a)};Jf.prototype=new cg;l=Jf.prototype;l.constructor=Jf;function Jf(a,b,c,d,f,g){a&&this.ma(a,b,c,g,d,f)}
l.ma=function(a,b,c,d,f,g){this.H={cd:0,Ce:1,sh:1,Uc:0,pe:0,Io:0,Wg:null,uu:!1};this.u=f;if(this.Ec=g)this.u.Wc=Math.floor(this.u.Wc),this.u.Lb=Math.floor(this.u.Lb);this.pause=!0;this.ready=!1;this.buttons=[];this.lm=null;this.cc=[];this.Cz=1E3;this.vv=30;this.$a=1;this.Kb=!1;this.Td=1<=nc();this.yt=!1;this.ba=0;this.s=a;this.Md=["world "+this.s+" lite","silver","gold"];this.Lj=0;this.qz=3E3;a=new b2Vec2(0,0);this.Ea=new b2World(a,!1);b&&(this.i=b,this.i.w=this,this.i.reset(),this.V=this.i.V,this.pa=
"BOSS"==this.V.slice(0,4),ng(this),"BOSS 4"==this.V?jc(hc,ka["Final Tessellation"]):"BOSS"==this.V.slice(0,4)?jc(hc,ka.Tessellation):jc(hc,ka["Hive "+this.s]));this.Rb=c;this.color=this.pa?w["boss "+this.s]:w["world "+this.s+" lite"];this.ni=w["world "+this.s+" dark"];this.ub=w["world "+this.s+" lite"];this.L=w["world "+this.s+" bright"];this.ng=6E3;this.je=0;og(this);c=new b2ContactListener;c.vs=this.ly;c.Ks=this.ay;c.As=this.aC;this.Ea.Iw(c);this.pause=!1;this.qA=this.ready=!0;this.gn=1;this.og=
{x:O/2,y:P/2};this.Av=1500;this.$x=750;this.ak=0;this.ye="none";this.rs={x:O,y:P};this.Tp={x:O,y:P};this.ss=.1;this.Up=1;this.zoom=.1;this.hn=!0;(this.wk=d)?pg(this,1,this.Av):pg(this,1,this.$x);this.km="in";this.om=this.Da=!1;this.Uq=this.Ex=100;this.Eu=!1;this.Hr=3E4;this.Gi=0;this.Wk=null;this.Yr=5E3;this.Ji=0;this.uv=this.tv=null;this.gp=document.createElement("canvas");this.gp.width=120;this.gp.height=160;this.dz=this.gp.getContext("2d");!b||this instanceof vc||qg(this);for(b=0;b<wa.length;b++)wa[b].color=
this.color,wa[b].tb=this.L;if(this.Yh=rf)this.eA=new rg(this),this.bn={}};l.reset=function(){this.H={cd:0,Ce:1,sh:1,Uc:0,pe:0,Io:0,Wg:null};this.Hr=1E4;this.Gi=0;this.Wk=null;var a=new b2Vec2(0,0);this.Ea=new b2World(a,!1);og(this);a=new b2ContactListener;a.vs=this.ly;a.Ks=this.ay;this.Ea.Iw(a);this.Yr=1E4;this.Ji=0;this.uv=this.tv=null;this.ba=0;this.Da=this.om=!1;this.i.reset();!this.i||this instanceof vc||qg(this);mf.translate(Q,0);this.i.le(mf);mf.translate(-Q,0);this.Lj=0;this.yt=!1};
function qg(a){for(var b in N[a.V].r){G[b].bg+=1;bc();var c=L;if(!G[b].Sf&&(1>=G[b].bg||5>=G[b].bg&&0==N[a.i.V].Va[c].ba)){sg(a);a.Wk=b;a.Gi=a.Hr;var c=a.dz,d=a.L,f=a.Wk;c.save();c.clearRect(0,0,120,160);c.beginPath();c.rect(0,0,120,160);c.strokeStyle=d;c.stroke();c.globalAlpha*=.1;c.fillStyle=d;c.fill();c.globalAlpha*=10;c.textAlign="center";c.font="10px MUli";c.fillText("NEW ENEMY",60,16);c.font="18px MUli";c.fillStyle=G[f].color;var g=f;G[f].Vj&&(g=G[f].Vj);c.fillText(g.toUpperCase(),60,40);Ea(c,
f,60,80,30);c.fillStyle=d;c.font="20px MUli";c.fillText("PAUSE",60,128);c.font="16px MUli";c.fillText("FOR INFO",60,147.2);c.restore()}}}function ng(a){if(a.i.Oi)a.n=new qc(a.Ea,a.i.Oi.x/F,a.i.Oi.y/F,a);else{var b=Tb({x:-10,y:-10},a.$a,F);a.n=new qc(a.Ea,b.x,b.y,a)}}function pg(a,b,c){var d={x:O/2,y:P/2};a.ye="in";a.ts=c;a.ak=c;a.Tp=d;a.Up=b;a.rs={x:a.og.x,y:a.og.y};a.ss=a.zoom;a.hn=!1}function tg(a,b,c,d){a.ye="out";a.ts=d;a.ak=d;a.Tp=b;a.Up=c;a.rs={x:a.og.x,y:a.og.y};a.ss=a.zoom;a.hn=!1}
function sg(a){a.Wk=null;a.Zr=null}
l.ra=function(a){if(this.ready&&(null==this.lm?this.lm=0:100==this.lm&&(this.lm=0),this.lm+=1,!this.pause)){this.Yh&&(this.eA.ra(a),this.om&&R(this.i.Rf,this.n.body.g.position)<this.i.yk&&wc(this,"moved_to_gateway"));document.webkitHidden&&(this.pause=!0,of=new ug(this.i,this.s,this.H,this,this.Rb));this.Uq-=a;0<this.Gi?this.Gi-=a:this.Wk&&sg(this);0<this.Ji?this.Ji-=a:this.Zr&&sg(this);if(this.tF)this.og={x:this.n.body.g.position.x*F,y:this.n.body.g.position.y*F};else if("none"!=this.ye)if(0>=this.ak)this.ye=
"none",this.zoom=this.Up,this.og=this.Tp,this.hn=!1;else{var b=this.ak/this.ts;this.zoom=1/(1/this.ss*b+1/this.Up*(1-b));this.og.x=this.rs.x*b+this.Tp.x*(1-b);this.og.y=this.rs.y*b+this.Tp.y*(1-b);this.ak-=a}"none"==this.ye&&1==this.zoom&&this.pa&&!this.yt&&(this.je=this.ng,4==this.s&&(this.je/=2,this.ng/=2),this.yt=!0);0<this.je&&(this.je-=a);if(this.n.Q&&0>this.n.sb||this.Vx)"none"==this.ye&&1==this.zoom?(tg(this,{x:O/2,y:P/2},.1,this.$x),this.km="out"):"none"==this.ye&&(this.ready=!1,this.ir());
else if(this.i.Gc&&this.i.Gc.Q&&0>this.i.Gc.sb)"none"==this.ye&&1==this.zoom?(pg(this,10,this.Av),this.km="out",this.Da=!0,this.i.uh=!0):"none"==this.ye&&(this.ready=!1,this.ir());else if(this.Da)"none"==this.ye&&1==this.zoom?(tg(this,{x:this.n.body.g.position.x*F,y:this.n.body.g.position.y*F},10,this.Av),this.km="out"):"none"==this.ye&&(this.ready=!1,this.ir(!0));else{this.pa||(b=Math.min(this.H.cd/this.i.sa[3>this.ba?this.ba:2],1),this.Lj>b?this.Lj=Math.max(this.Lj-a/this.qz,b):this.Lj<b&&(this.Lj=
Math.min(this.Lj+a/this.qz,b)));this.qA&&1>this.gn?this.gn=Math.min(1,this.gn+a/1E3):!this.qA&&0<this.gn&&(this.gn=Math.max(0,this.gn-a/1E3));this.n.ra(a);this.H.Ce=this.H.sh+Math.floor(this.H.Uc/10);this.H.Io+=a;this.i.ra(a);for(b=this.cc.length-1;0<=b;b--)this.cc[b].duration-=a,0>=this.cc[b].duration&&this.cc.splice(b,1);this.Ea.Wi(1/60,1,10);this.Oc(a)}}};l.Oc=function(){};
function Kf(a,b){if("in"==a.km){var c=Yb(.1,.5,a.ak/a.ts);b.globalAlpha=Math.min(1-c,1)}else"out"==a.km&&(c=Yb(.1,.5,a.ak/a.ts),b.globalAlpha=Math.max(c,0))}
l.$=function(a,b){if(this.ready&&!this.pause){this.Ae(a,b);a.save();a.translate(Q,0);"none"!=this.ye&&(a.rect(0,0,O,P),a.clip());a.fillStyle=this.ni;a.scale(this.zoom,this.zoom);a.translate((O/2-this.og.x*this.zoom)/this.zoom,(P/2-this.og.y*this.zoom)/this.zoom);a.beginPath();"none"!=this.ye&&(a.rect(2,2,O-4,P-4),a.clip());Kf(this,a);"none"!=this.ye&&a.drawImage(bg_canvas,Q,0,O,P,0,0,O,P);this.i.gh(a,F);this.n.gh(a);this.i.$(a,F);1!=this.zoom&&this.Da?(a.save(),a.translate(this.n.body.g.position.x*
F,this.n.body.g.position.y*F),a.scale(1/this.zoom,1/this.zoom),a.translate(-this.n.body.g.position.x*F,-this.n.body.g.position.y*F),this.n.$(a),a.restore()):this.n.$(a);if(this.Eu){var c=this.i;c.tj=c.gy;c.sj=!0;this.Eu=!1}a.beginPath();"none"==this.ye&&(a.rect(2,2,O-4,P-4),a.clip());0<this.je&&this.je<this.ng&&this.Ec&&1==this.zoom&&4>=this.s&&this.wk&&(a.globalAlpha=Math.min(1,(1-2*Math.abs(this.je/this.ng-.5))/.5),a.beginPath(),a.fillStyle=w["boss "+this.s],a.textAlign="center",a.font="42px Muli",
a.fillText(this.u.zt,O/2,P/2-150),a.fill());0<this.je&&this.je<this.ng&&this.Ec&&1==this.zoom&&1==this.s&&"easy"==L&&3>N[this.V].Va[L].ba&&(a.save(),c=0,this.wk&&0<this.je&&this.je<this.ng/2?c=this.je/(this.ng/2):!this.wk&&this.je>this.ng/2&&this.je<this.ng&&(c=(this.je-this.ng/2)/(this.ng/2)),a.globalAlpha=Math.min(1,(1-2*Math.abs(c-.5))/.5),a.beginPath(),a.moveTo(this.i.Gc.body.g.position.x*F,(this.i.Gc.body.g.position.y-this.i.Gc.N)*F-5),a.lineTo(this.i.Gc.body.g.position.x*F,2*F+15),a.strokeStyle=
w.impulse_blue,a.lineWidth=10,a.stroke(),a.beginPath(),a.arc(this.i.Gc.body.g.position.x*F,this.i.Gc.body.g.position.y*F,this.i.Gc.N*F,0,2*Math.PI,!1),a.stroke(),a.beginPath(),a.moveTo(this.i.Gc.body.g.position.x*F+30*Math.cos(3*Math.PI/2),2*F+30*Math.sin(3*Math.PI/2)),a.lineTo(this.i.Gc.body.g.position.x*F+30*Math.cos(1*Math.PI/6),2*F+30*Math.sin(1*Math.PI/6)),a.lineTo(this.i.Gc.body.g.position.x*F+30*Math.cos(5*Math.PI/6),2*F+30*Math.sin(5*Math.PI/6)),a.fillStyle=w.impulse_blue,a.fill(),a.restore());
if(!this.pa)for(c=0;c<this.cc.length;c++){a.save();a.beginPath();a.font=this.cc[c].size+"px Muli";var d=this.cc[c].duration/this.cc[c].OC;a.globalAlpha*=d;a.fillStyle=this.cc[c].color;this.cc[c].mC?(J(a,this.cc[c].x*F+20,this.cc[c].y*F-(1-d)*this.vv-7,0,.8*this.cc[c].size,.8*this.cc[c].size,"spark"),a.fillText(this.cc[c].text,this.cc[c].x*F-25,this.cc[c].y*F-(1-d)*this.vv)):(a.textAlign="center",a.fillText(this.cc[c].text,this.cc[c].x*F,this.cc[c].y*F-(1-d)*this.vv));a.restore()}this.Yh&&this.eA.$(a);
a.restore();a.clearRect(0,0,Q,Lc);a.clearRect(Kc-Q,0,Q,Lc);1==this.zoom&&"none"==this.ye?0>this.Uq&&(vg(this,b),this.Uq=this.Ex):vg(this,a);null!=this.Wk&&(a.save(),Kf(this,a),500>this.Gi?a.globalAlpha*=Math.max(0,this.Gi/500):this.Gi>this.Hr-500&&(a.globalAlpha*=Math.max(0,(this.Hr-this.Gi)/500)),a.drawImage(this.gp,0,0,120,160,Q/2-60,Lc/2,120,160),a.restore());null!=this.Zr&&(a.save(),Kf(this,a),500>this.Ji?a.globalAlpha*=Math.max(0,this.Ji/500):this.Ji>this.Yr-500&&(a.globalAlpha*=Math.max(0,(this.Yr-
this.Ji)/500)),a.drawImage(this.gp,0,0,120,160,Q/2-60,Lc/2-30,120,160),a.restore());a.save();Kf(this,a);mb(a,Kc-Q/2,Lc/2-15,3*Lc/4-30,this.Lj,this.color);this.pa?this.i.Gc?mb(a,Kc-Q/2,Lc/2-15,3*Lc/4-30,Vc(this.i.Gc),this.i.Gc.color):mb(a,Kc-Q/2,Lc/2-15,3*Lc/4-30,1,w["boss "+this.s]):(a.textAlign="center",a.font="72px Muli",a.fillStyle=this.du(this.H.Ce),a.fillText("x"+this.H.Ce,Kc-Q/2,Lc/2));a.restore();for(c=0;c<this.buttons.length;c++)this.buttons[c].$(a);this.hn||(1==this.zoom&&"none"==this.ye?
bg_canvas.setAttribute("style",""):bg_canvas.setAttribute("style","display: none"),this.hn=!0)}};l.Ae=function(){};
function vg(a,b){b.save();b.globalAlpha=1;b.beginPath();b.fillStyle="black";b.clearRect(0,0,Q,Lc);b.clearRect(Kc-Q,0,Q,Lc);Kf(a,b);b.fillStyle=a.color;b.textAlign="center";a instanceof vc||(b.font="14px Muli",b.save(),b.globalAlpha*=1,b.fillText("normal"==L?"CHALLENGE MODE":"STANDARD MODE",Q/2,15),b.restore());b.font="64px Muli";type=a.V.split(" ")[0];"HOW"!=type?b.fillText(type,Q/2,70):(b.font="40px Muli",b.fillText("HOW TO",Q/2,70));b.font="80px Muli";"BOSS"==type?b.fillText(a.s,Q/2,140):"HOW"==
type?(b.font="60px Muli",b.fillText("PLAY",Q/2,130)):b.fillText(a.V.slice(5,a.V.length),Q/2,140);b.fillStyle=a.color;b.font="32px Muli";a.H.Uc=Math.round(a.H.Io/1E3);var c=a.H.Uc%60;a.H.Wg=Math.floor(a.H.Uc/60)+":"+(10>c?"0"+c:c);b.fillText(a.H.Wg,Q/2,Lc/2-80);a.pa?(b.fillStyle=w["boss "+a.s],b.font="36px Muli",b.fillText("DISTANCE",Kc-Q/2,Lc-55),b.fillText("LEFT",Kc-Q/2,Lc-20)):(b.font="40px Muli",b.fillText(a.H.cd,Kc-Q/2,46),3>a.ba&&(b.fillStyle=w[a.Md[a.ba]],b.font="21px Muli",b.fillText("GOAL",
Kc-Q/2,Lc-15),b.font="42px Muli",b.fillText(a.i.sa[a.ba],Kc-Q/2,Lc-40)));qb(b,a.u.Lb,a.u.Wc,a.u.gd,Q/2,Lc-60,24,{labels:!0,mh:a.Td});b.restore();b.restore()}l.du=function(){return"white"};function wg(a,b){return{x:(b.x-(O/2-a.og.x*a.zoom))/a.zoom,y:(b.y-(P/2-a.og.y*a.zoom))/a.zoom}}l.Ba=function(a,b){if(this.ready){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ba(a,b);this.pause||(this.n.Yu=wg(this,{x:a-Q,y:b}))}};
l.Ag=function(){if(!this.pause){var a=this.n;a.Bu=(new Date).getTime();a.ip=!0}};l.pp=function(){if(!this.pause){var a=this.n;a.Cy=(new Date).getTime();a.ov=!0}};l.ah=function(){this.pause||(this.n.ip=!1)};l.qp=function(){this.pause||(this.n.ov=!1)};function xg(a){a.pause=!a.pause;a.pause?(rc(a.n,ua.Vi),a.n.ip=!1,of=new ug(a.i,a.s,a.H,a,a.Rb)):of=null}
l.Ne=function(a){this.ready&&(a==ua.Vi||a==ua.fk?xg(this):a==ua.bq&&this.om&&R(this.i.Rf,this.n.body.g.position)<this.i.yk?(this.Da=!0,this.pa&&(this.i.uh=!0)):rc(this.n,a))};
l.op=function(a){if(this.ready){var b=this.n;switch(a){case ua.hq:b.left=!1;break;case ua.kq:b.right=!1;break;case ua.Yp:b.xo=!1;break;case ua.mq:b.Op=!1;break;case ua.qw:b.Ch=null;break;case ua.sw:b.Eh=null;break;case ua.rw:b.Dh=null;break;case ua.pw:b.Bh=null;break;case ua.Ow:b.pr=null;break;case ua.Vi:case ua.fk:b.Op=!1,b.xo=!1,b.left=!1,b.right=!1,b.Ch=null,b.Dh=null,b.Eh=null,b.Bh=null,b.pr=null}}};
function og(a){var b,c;b=[{x:O/F/2,y:2},{x:O/F/2,y:2},{x:2,y:P/F/2},{x:2,y:P/F/2}];c=[{x:O/F/2,y:-2},{x:O/F/2,y:P/F+2},{x:-2,y:P/F/2},{x:O/F+2,y:P/F/2}];for(var d=0;4>d;d++){var f=new b2FixtureDef;f.filter.uf=1;f.filter.Cf=2;var g=new b2BodyDef;g.type=b2Body.tf;f.shape=new b2PolygonShape;f.shape.Fw(b[d].x,b[d].y);g.position.R(c[d].x,c[d].y);a.Ea.ln(g).Xp(f)}}l.ly=function(a){var b=a.kc.Jf();a=a.lc.Jf();b&&a&&(b.owner.Ye(a.owner,b.body,a.body),a.owner.Ye(b.owner,a.body,b.body))};
l.aC=function(a){var b=a.kc.Jf();a=a.lc.Jf();b&&a&&"tank"==b.owner.type&&"tank"==a.owner.type&&(b.owner.Ye(a.owner,b.body,a.body),a.owner.Ye(b.owner,a.body,b.body))};
l.ay=function(a){var b=a.kc.Jf(),c=a.lc.Jf();if(null!=b&&null!=c){var d=b.self,f=c.self;if(null!=d&&null!=f){var b=[d,f],g=[f,d],h;for(h in b)if(d=b[h],"harpoonhead"==d.type&&"inactive"!=d.si.jb){f=g[h];if(f!=d.si&&"harpoonhead"!=f.type&&!f.Sf&&!c.owner.Sf){if(("boss four spawner"==f.type||"boss four attacker"==f.type)&&!f.nb)continue;R(d.body.g.position,f.body.g.position)<d.N+f.N&&(f.yy&&f.open(3E3),d=d.si,"engaged"!=d.jb&&!d.Q&&0>=d.q[1]&&f.id!==d.ju&&(gc("hhit"),d.jb="engaged",d.Jc=f,d.Jc==d.n&&
Tc(d.w)))}a.RA()}}}};function Qc(a,b,c,d,f,g,h,k){a.cc.push({text:b,color:c,x:d,y:f,duration:h?h:a.Cz,OC:h?h:a.Cz,size:g,mC:k})}
function yg(a,b,c,d){sg(a);a.Zr=b;a.Ji=a.Yr;a.tv=c;a.uv=d;b=a.dz;c=a.Zr;d=a.tv;var f=a.uv;a=a.s;b.save();b.clearRect(0,0,120,160);b.shadowBlur=0;b.beginPath();b.rect(0,0,120,160);b.lineWidth=4;b.strokeStyle=d;b.stroke();b.globalAlpha*=.1;b.fillStyle=d;b.fill();b.globalAlpha*=10;b.save();b.globalAlpha*=.4;0==a&&(b.globalAlpha*=.5);"GATEWAY UNLOCKED"==c&&Ka(b,a,60,80,50);"SILVER SCORE"==c&&J(b,60,80,0,50,50,"silver_trophy");"GOLD SCORE"==c&&J(b,60,80,0,50,50,"gold_trophy");b.restore();b.textAlign="center";
b.font=f+"px Muli";b.fillStyle=d;b.shadowColor=d;b.fillText(c.split(" ")[0].toUpperCase(),60,65);b.fillText(c.split(" ")[1].toUpperCase(),60,95);b.restore()}
function Sc(a){if(a.H.cd>=a.i.sa[a.ba])for(;a.H.cd>=a.i.sa[a.ba];)a.ba+=1,1==a.ba?(a.om=!0,a.Eu=!0,yg(a,"GATEWAY UNLOCKED",w["world "+a.s+" bright"],18)):2==a.ba?(a.Ec&&(a.u.Lb+=1,Qc(a,"1UP",w.silver,a.n.body.g.position.x,a.n.body.g.position.y-1,24,3E3)),yg(a,"SILVER SCORE",w.silver,24)):3==a.ba&&(a.Ec&&(5>a.u.Lb?(Qc(a,5-a.u.Lb+"UP",w.gold,a.n.body.g.position.x,a.n.body.g.position.y-1,24,3E3),a.u.Lb=5):(a.u.Lb+=1,Qc(a,"1UP",w.gold,a.n.body.g.position.x,a.n.body.g.position.y-1,24,3E3))),yg(a,"GOLD SCORE",
w.gold,24)),0<a.ba&&(a instanceof vc&&a.sj(),a.Yh&&wc(a,"gateway_opened"))}function Rc(a){a.H.sh+=1;a.H.Ce=a.H.sh+Math.floor(a.H.Uc/10)}function Tc(a){a.n.nh||(a.H.sh=1,a.H.Ce=a.H.sh+Math.floor(a.H.Uc/10))}l.ir=function(){X=this.Ec?new zg(this.s,this.i,this.Da||this.i.uh,this.H,this.Rb,this.u):new Ag(this.u,this.Ec,{H:this.H,i:this.i,s:this.s,Rb:this.Rb,Da:this.Da})};function wc(a,b){a.Yh&&(a.bn[b]=!0)};Bg.prototype=new dg;l=Bg.prototype;l.constructor=Bg;
function Bg(a,b){this.V=a;this.buttons=[];this.s=b;this.Kb=!1;this.color=w["world "+this.s+" lite"];this.L=w["world "+this.s+" bright"];this.pa="BOSS"==this.V.slice(0,4);this.buttons.push(new Z("BACK",16,70,P/2+260,60,65,this.L,this.L,function(a){return function(){mf.fillStyle=w["world "+a.s+" dark"];mf.translate(Q,0);mf.fillRect(0,0,O,P);mf.globalAlpha*=Uf(0);Db(mf,0,O,P,"Hive "+a.s);mf.translate(-Q,0);lf.setAttribute("style","");var b=xf.getContext("2d");b.fillStyle="black";b.fillRect(0,0,O,P);
Db(b,0,O,P,"Hive 0");Y(a.O,"fade_out_to_main",function(){X=a.s?new hg(a.s):new Hf})}}(this),"back"));this.Md=["bronze","silver","gold"];this.ba=N[this.V].Va[L].sc.ba;this.Sg=null;if(this.pa)this.Sg={};else{this.Sg=N[this.V].r;this.Tc=0;for(var c in N[this.V].r)this.Tc+=1}this.Id=40;this.i=this.tm(N[this.V]);var d=0;for(c in this.Sg){for(var f=0,g=0;f<d+1&&f<this.Tc;)f+=12;g=f<=this.Tc?12:this.Tc-(f-12);this.buttons.push(new lg(c,this.Id,O/2+(this.Id+10)*(d-(f-12)-(g-1)/2),490+this.Id*(Math.floor(d/
12)-(Math.ceil(this.Tc/12)-1)/2),this.Id,this.Id,w["world "+this.s+" lite"],function(a,b){return function(){Y(b.O,"fade_out",function(){of=new mg(a,b)})}}(c,this)));d+=1}this.O=new fg({fade_in:500,fade_out:250,fade_out_to_main:250});Y(this.O,"fade_in")}l.ra=function(a){this.O.ra(a)};
l.$=function(a,b){if(!this.Kb){var c=xf.getContext("2d");c.clearRect(0,0,O,P);Db(c,0,O,P,"Hive "+this.s);b.translate(Q,0);this.i.le(b);this.Kb=!0;b.translate(-Q,0);bg_canvas.setAttribute("style","display:none")}"fade_out_to_main"!=this.O.ac?(a.save(),a.fillStyle=w["world "+this.s+" dark"],a.fillRect(0,0,O,P),a.globalAlpha*=Uf(this.s)):(a.save(),a.globalAlpha*=ig(this.O),a.fillStyle="black",a.fillRect(0,0,O,P),a.globalAlpha*=Uf(0));a.drawImage(xf,0,0,O,P,0,0,O,P);a.restore();a.save();if("fade_in"==
this.O.ac)a.globalAlpha*=ig(this.O);else if("fade_out"==this.O.ac||"fade_out_to_main"==this.O.ac)a.globalAlpha*=1-ig(this.O);if(this.pa)for(a.fillStyle=w["world "+this.s+" bright"],a.textAlign="center",a.font="42px Muli",a.shadowBlur=0,a.save(),a.globalAlpha*=.3,Ka(a,this.s,O/2,P/2-50,100),a.restore(),a.font="16px Muli",a.fillText(this.i.V,O/2,P/2-60),a.font="40px Muli",a.fillText(pa[this.s],O/2,P/2-20),a.font="24px Muli",3==N[this.V].Va[L].ba?(a.font="12px Muli",a.fillText("BEST TIME",O/2,390),a.font=
"28px Muli",a.fillText(dc(N[this.V].Va[L].Zc),O/2,415)):(a.fillStyle=w["boss "+this.s],a.fillText("UNDEFEATED",O/2,400)),c=0;c<this.buttons.length;c++)this.buttons[c].$(a);else{a.globalAlpha/=3;Ka(a,this.s,O/2,60,40,!0);a.globalAlpha*=3;a.beginPath();a.fillStyle=w["world "+this.s+" bright"];a.font="30px Muli";a.textAlign="center";a.fillText(this.V,O/2,70);a.fill();for(c=0;c<this.buttons.length;c++)this.buttons[c].$(a);rb(a,this.V,O/2,175,200,150,w["world "+this.s+" lite"]);a.beginPath();a.rect(O/
2-100,100,200,150);a.strokeStyle="rgba(0, 0, 0, .3)";a.stroke();if(1>this.zr){a.textAlign="center";var c=this.zr,d=O-70,f=P-53;a.save();db(a,d,f,"gray");a.beginPath();a.arc(d,f,15,3*Math.PI/2,3*Math.PI/2+1.999*Math.PI*c);a.lineWidth=2;a.strokeStyle="gray";a.stroke();a.restore();a.font="16px Muli";a.fillStyle="gray";a.fillText("LOADING",O-70,P-19)}if("HOW TO PLAY"!=this.V.slice(0,11)){d=["world "+this.s+" lite","silver","gold"];f=["GATEWAY SCORE","SILVER SCORE","GOLD SCORE"];if(!this.pa)for(c=0;3>
c;c++)a.font="24px Muli",a.textAlign="right",a.fillStyle=w[d[c]],a.shadowColor=a.fillStyle,a.font="20px Muli",a.fillText(N[this.V].sa[L][c],O/2+160,35*c+297),a.textAlign="left",a.font="20px Muli",a.fillText(f[c],O/2-160,35*c+297);for(score_color=0;N[this.V].Va[L].sc>N[this.V].sa[L][score_color];)score_color+=1;a.fillStyle=0<score_color?w[this.Md[score_color-1]]:this.L;a.textAlign="center";a.font="12px Muli";a.fillText("HIGH SCORE",O/2,400);a.font="28px Muli";a.fillText(N[this.V].Va[L].sc,O/2,425);
a.fillStyle=w["world "+this.s+" lite"];a.font="12px Muli";a.fillText("ENEMIES",O/2,460)}}a.restore()};l.Ba=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ba(a,b)};l.Na=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b)};l.yr=function(){var a=new lc(this.s,!1);this.buttons.push(new Z("START",16,O-70,P/2+260,100,65,this.L,this.L,function(b){return function(){Y(b.O,"fade_out",function(){X=new Jf(b.s,b.i,b.Rb,a,!1,!0)})}}(this),"start"))};gg.prototype=new cg;l=gg.prototype;l.constructor=gg;l.iD={F:0,D:10,"D+":11,"C-":13,C:14,"C+":15,"B-":16,B:17,"B+":18,"A-":20,A:21,"A+":22,S:24,"S+":25};l.Qv=["half","basic","silver","gold"];
function gg(a,b,c,d,f,g,h){this.Au=h;this.Ap=g;this.buttons=[];this.Kb=!1;this.u=c;this.i=d;this.Rb=f;this.s=a;this.Da=b;this.Td=1<=nc();g&&(this.u=lc.prototype.clone(sf[L]),pc(this.u),bc(),this.s=this.u.Ea,this.Da=null);this.Aa=this.ae=250;this.ob="in";this.buttons=[];this.oh="half";this.color=w["world "+this.s];this.ub=w["world "+this.s+" lite"];this.L=w["world "+this.s+" bright"];this.ni=w["world "+this.s+" dark"];if(b){Cg(this);this.pE="HIVE "+this.u.zt+" DEFEATED";a=3;for(d in c.H)c.H[d].ba<
a&&(a=c.H[d].ba);c.Of||(this.oh=this.Qv[a],this.u.oh=this.oh);(d=qf[L]["world "+this.s])&&d.rank&&Qf(Pf(d.rank));if(!d||this.Qv.indexOf(this.oh)>this.Qv.indexOf(d.victory_type)||this.oh==d.victory_type&&("half"==this.oh&&c.Of<d.continues||"gold"==this.oh&&this.Zz<d.deaths))qf[L]["world "+this.s]={victory_type:this.oh,continues:c.Of,deaths:this.Zz,first_victory:void 0===d},bc();c=new Z("",16,490,205,20,20,this.ub,this.L,function(){},"help_icon");this.buttons.push(c);Dg(c,new Eg("rank_explanation",
this.L,this.s))}this.Ap&&!this.Au&&(this.bl=new Z("RESUME",16,730,P/2+260,100,65,this.ub,this.L,function(a){return function(){sf[L]={};bc();a.u.ev=0;X=new zg(a.s,null,null,null,null,a.u,!0,!0)}}(this),"start"),this.bl.Tm=!1,this.buttons.push(this.bl),this.$l=new Z("DELETE",16,O/2,P/2+260,100,65,this.ub,this.L,function(a){return function(){sf[L]={};bc();X=new hg(a.s)}}(this),"quit"),this.buttons.push(this.$l),this.$l.Tm=!1,this.mD=new Z("EXIT",16,70,P/2+260,60,65,this.ub,this.L,function(){return function(){X=
new Hf}}(this),"back"),this.buttons.push(this.mD));kc();this.Md=["bronze","silver","gold"]}function Pf(a){a=gg.prototype.iD[a];var b="half";0<a&&(b="basic");16<=a&&(b="silver");24<=a&&(b="gold");return b}function Qf(a){qf[difficulty][world]={victory_type:a,continues:"half"==a?1:0,deaths:9,first_victory:!0};bc()}function Cg(a){for(var b=0,c=0;8>c;c++){var d=7==c?"BOSS "+a.s:"HIVE "+a.s+"-"+(c+1);a.u.H[d]&&(b+=a.u.H[d].yh)}a.Zz=b}
l.$=function(a){this.Kb||(bg_canvas.setAttribute("style","display:none"),this.Kb=!0,Db(xf.getContext("2d"),0,O,P,"Hive "+this.s));a.save();this.Aa-=dt;0>this.Aa&&("in"==this.ob&&(this.ob="none"),"out"==this.ob&&(this.Da?X=new Ag(this.u,!0,{Da:!0}):this.i?(this.u.continue(),X=new zg(this.s,this.i,this.Da,null,this.Rb,this.u)):X=new Ag(this.u,!0,{Da:!1})));a.fillStyle=this.ni;a.fillRect(0,0,O,P);if("in"==this.ob){var b=this.Aa/this.ae;a.globalAlpha=1-b}else"out"==this.ob&&(b=this.Aa/this.ae,a.globalAlpha=
Math.max(0,b));a.save();a.globalAlpha*=Uf(this.s);a.drawImage(xf,0,0,O,P,0,0,O,P);a.restore();for(b=0;b<this.buttons.length;b++)this.buttons[b].$(a);a.globalAlpha*=.3;Ka(a,this.s,O/2,130,150);a.globalAlpha/=.3;a.shadowBlur=0;a.textAlign="center";a.font="20px Muli";this.Da?(a.fillStyle=this.L,a.font="40px Muli",a.fillText(this.pE,O/2,130)):(this.Ap?(a.fillStyle=w.impulse_blue,a.fillText("GAME SAVED",O/2,90),a.fillStyle=this.L):(a.fillStyle="red",a.fillText("GAME OVER",O/2,80),a.fillStyle=this.L,0<
this.u.Of&&(a.font="18px Muli",a.fillText("CONTINUES: "+this.u.Of,O/2,175))),a.font="40px Muli",a.fillText(this.u.pu,O/2,130));this.Da&&this.u.Of&&(a.fillStyle=this.L,a.font="18px Muli",a.fillText("CONTINUES: "+this.u.Of,O/2,250));this.Da?(a.fillStyle=this.L,a.font="18px Muli",a.fillText("RANK",O/2,167),Gb(a,O/2,200,this.s,this.oh,1.2)):this.Ap&&(qb(a,this.u.Lb,this.u.Wc,this.u.gd,O/2,170,24,{labels:!0,mh:this.Td}),a.font="16px Muli",this.u.Of&&(a.fillStyle="red",a.fillText("CONTINUES: "+Math.floor(this.u.Of),
O/2,240)));a.shadowBlur=0;a.font="18px Muli";a.textAlign="center";a.fillStyle=this.ub;a.fillText("LEVEL",150,290);a.fillText("SCORE",270,290);a.fillText("TIME",390,290);a.fillText("COMBO",510,290);a.fillText("DEATHS",630,290);for(b=0;8>b;b++){var c=7==b?"BOSS "+this.s:"HIVE "+this.s+"-"+(b+1),d=c;7==b&&(d=this.u.zt);c=this.u.H[c]?this.u.H[c]:{};a.fillStyle=c.nA?this.ub:"#333";var f=320+27*b;a.fillText(d,150,f);void 0!=c.cd?(0<c.ba&&(a.fillStyle=w[this.Md[c.ba-1]]),a.fillText(c.cd,270,f)):a.fillText("---",
270,f);a.fillStyle=c.nA?this.ub:"#333";void 0!=c.Wg?a.fillText(c.Wg,390,f):a.fillText("---",390,f);void 0!=c.Ce?a.fillText(c.Ce,510,f):a.fillText("---",510,f);void 0!=c.yh?a.fillText(c.yh,630,f):a.fillText("---",630,f)}a.font="16px Muli";a.fillStyle=this.ub;this.Ap?this.Au&&a.fillText("PRESS ANY KEY FOR MAIN MENU",O/2,P-30):this.Da?a.fillText("PRESS ANY KEY FOR MAIN MENU",O/2,P-30):this.i?a.fillText("PRESS ANY KEY TO CONTINUE",O/2,P-30):a.fillText("PRESS ANY KEY FOR MAIN MENU",O/2,P-30);for(b=0;b<
this.buttons.length;b++)this.buttons[b].$(a);for(b=0;b<this.buttons.length;b++)Fg(this.buttons[b],a);a.restore()};l.Ba=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ba(a,b)};l.Na=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b)};l.Ne=function(){"none"!=this.ob||this.Ap&&!this.Au||(this.ob="out",this.Aa=this.ae)};l.op=function(){};l.ra=function(){};zg.prototype=new dg;l=zg.prototype;l.constructor=zg;
function zg(a,b,c,d,f,g,h,k){this.u=g;this.Da=c;this.H=d;this.by=!1;this.VB=k;this.$j=3700;this.Ie=2200;this.Tf=4E3;this.Ja=null;this.sc=!1;this.zj=!0;this.Td=1<=nc();this.s=a;this.color=w["world "+a];this.ub=w["world "+a+" lite"];this.L=w["world "+a+" bright"];this.ni=w["world "+a+" dark"];this.Rb=f;this.buttons=[];this.Kb=!1;this.Md=["bronze","silver","gold"];this.sx=this.wk=!1;if(b)if(this.H){this.Ja=b;this.Da?(this.state="last_level_summary",this.Aa=this.Tf):(this.state=A.Cp?"last_level_summary":
"level_intro",this.Aa=A.Cp?this.Tf:this.Ie);a=0;if(!this.Ja.pa)for(;this.H.cd>N[this.Ja.V].sa[L][a];)a+=1;this.ba=a;this.Ja.pa||(this.vt=3>this.ba?N[this.Ja.V].sa[L][this.ba]:N[this.Ja.V].sa[L][2]);if(this.Da){this.Ja.pa?(a=cc(this.Ja.V,this.H.Uc),this.Zc=a.Zc):(a=$b(this.Ja.V,this.H.cd),this.sc=a.sc);this.ba=a.ba;this.u.H.hasOwnProperty(this.Ja.V)||(this.u.H[this.Ja.V]={},this.u.H[this.Ja.V].yh=0);if(this.Ja.pa)this.u.H[this.Ja.V].cd="WIN",this.u.H[this.Ja.V].ba=3,this.u.H[this.Ja.V].Wg=this.H.Wg;
else{for(var m in this.H)this.u.H[this.Ja.V][m]=this.H[m];for(a=0;this.H.cd>=N[this.Ja.V].sa[L][a];)a+=1;this.u.H[this.Ja.V].ba=a;void 0===typeof this.u.H[this.Ja.V].yh&&(this.u.H[this.Ja.V].yh=0)}this.Mp=Math.floor(this.H.Uc/5);this.ro=Math.floor(this.H.Ce/2);this.ms=this.u.Wc+this.Mp+this.ro;for(this.Jv=this.u.Lb;100<=this.ms;)this.ms-=100,this.Jv+=1}this.Da?this.u.vr=this.u.gd:(this.Tf*=.66,this.Aa*=.66,this.Ie*=.66,this.u.Lb-=1,this.u.ur=this.u.Wc,this.u.tr=this.u.Lb,this.u.gd=this.u.vr)}else this.state=
"level_intro",this.i=this.Ja=b,this.Aa=this.Ie/=2,this.sx=!0;else this.state="world_intro",this.u=h?g:new lc(a,!0),this.Aa=this.$j;if(!this.sx){if(this.Da||!this.Ja){if(this.Ja&&this.Ja.pa)return;this.zj=!1;h?h=this.tm(N[this.u.wx]):(h=this.Ja,h=this.tm(N[h?7>h.Ey?"HIVE "+this.s+"-"+(h.Ey+1):"BOSS "+this.s:"HIVE "+this.s+"-1"]));this.i=h;this.wk=!N[this.i.V].Va[L].bg;N[this.i.V].Va[L].bg=!0;bc();this.u.H.hasOwnProperty(this.i.V)||(this.u.H[this.i.V]={},this.u.H[this.i.V].nA=!0,this.u.H[this.i.V].yh=
0);this.u.wx=this.i.V}else this.u.H.hasOwnProperty(this.Ja.V)||(this.u.H[this.Ja.V]={}),void 0===typeof this.u.H[this.Ja.V].yh&&(this.u.H[this.Ja.V].yh=0),this.u.H[this.Ja.V].yh+=1,this.i=this.Ja,this.i.w=null,mf.translate(Q,0),this.i.le(mf),this.Kb=!0,mf.translate(-Q,0);this.i.pa&&(this.Ie=this.Da?1E3:500)}this.Ja&&this.Ja.pa||jc(hc,ka["Hive "+this.s])}
l.ra=function(a){this.by=!0;if(0>this.u.Lb)X=new gg(this.s,!1,this.u,this.i,this.Rb);else if(this.Ja&&this.Ja.pa&&this.Ja.uh)X=new gg(this.s,!0,this.u);else if(this.Ja&&this.Ja.pa&&!this.Ja.uh)X=new Jf(this.s,this.i,this.Rb,this.u,!0,null===this.Da?!0:this.Da);else{var b=this.Aa/this.Tf;"last_level_summary"==this.state&&this.Da&&.3<b&&.7>b?(this.u.Wc+=a/(.4*this.Tf)*(this.Mp+this.ro),100<=this.u.Wc&&(this.u.Wc-=100,this.u.Lb+=1)):"last_level_summary"==this.state&&this.Da&&.3>b&&(this.u.Wc=Math.floor(this.ms),
this.u.Lb=Math.floor(this.Jv),this.u.ur=this.u.Wc,this.u.tr=this.u.Lb);if(this.zj||"world_intro"==this.state&&this.Aa>=this.$j/2||"last_level_summary"==this.state&&this.Aa>=this.Tf/2||"level_intro"==this.state&&this.Aa>=this.Ie/2)this.Aa-=a;0>this.Aa&&("world_intro"==this.state&&this.zj?(this.state="level_intro",this.Aa=this.Ie):"last_level_summary"==this.state&&this.zj?(this.Da&&this.i.pa&&kc(),this.state="level_intro",this.Aa=this.Ie):"level_intro"==this.state&&(X=new Jf(this.s,this.i,this.Rb,this.u,
!0,null===this.Da?!0:this.Da)))}};
l.$=function(a,b){!this.Kb&&this.i&&(b.translate(Q,0),this.i.le(b),this.Kb=!0,b.translate(-Q,0),bg_canvas.setAttribute("style","display:none"),Db(xf.getContext("2d"),0,O,P,"Hive "+this.s));a.fillStyle=w["world "+this.s+" dark"];a.fillRect(0,0,O,P);a.save();a.globalAlpha*=Uf(this.s);if("world_intro"!=this.state||this.VB)"level_intro"==this.state?(c=this.Aa/this.Ie,.5>c&&(a.globalAlpha*=Math.min(1,(1-2*Math.abs(c-.5))/.5))):"last_level_summary"==this.state&&(c=this.Aa/this.Tf,.5<c&&(a.globalAlpha*=
Math.min(1,(1-2*Math.abs(c-.5))/.5)));else{var c=this.Aa/this.$j;.5<c&&(a.globalAlpha*=Math.min(1,(1-2*Math.abs(c-.5))/.5))}a.drawImage(xf,0,0,O,P,0,0,O,P);a.restore();this.by&&("world_intro"==this.state?(c=this.Aa/this.$j,a.save(),a.globalAlpha=Math.min(1,(1-2*Math.abs(c-.5))/.5),a.textAlign="center",a.shadowBlur=0,a.font="54px Muli",a.fillStyle=this.L,a.shadowColor="black",a.save(),a.globalAlpha*=.6,Ka(a,this.s,O/2,P/2,130),a.restore(),a.fillText(this.u.pu,O/2,P/2+25),a.shadowBlur=0,a.fillStyle=
this.ub,a.shadowColor=a.fillStyle,a.font="12px Muli",this.zj?a.fillText("PRESS ANY KEY TO SKIP",O/2,P/2+270):a.fillText("LOADING LEVEL",O/2,P/2+270),a.restore()):"level_intro"==this.state?this.i.pa||(a.save(),c=this.Aa/this.Ie,a.globalAlpha=Math.min(1,(1-2*Math.abs(c-.5))/.5),a.fillStyle=this.L,a.textAlign="center",a.font="42px Muli",a.shadowBlur=0,a.shadowColor="black",a.save(),a.globalAlpha*=.6,Ka(a,this.s,O/2,P/2-100,100),a.restore(),a.fillText(this.u.pu,O/2,P/2-100),a.font="32px Muli",a.fillText(this.i.V,
O/2,P/2-50),qb(a,Math.floor(this.u.Lb),Math.floor(this.u.Wc),this.u.gd,O/2,P/2+180,24,{labels:!0,mh:this.Td}),a.shadowBlur=0,a.fillStyle=this.ub,a.shadowColor=a.fillStyle,a.font="12px Muli",a.fillText("PRESS ANY KEY TO SKIP",O/2,P/2+270),a.restore()):"last_level_summary"==this.state&&(c=this.Aa/this.Tf,a.globalAlpha=Math.min(1,(1-2*Math.abs(c-.5))/.5),a.shadowBlur=0,a.textAlign="center",a.font="30px Muli",this.Da?(a.fillStyle=w.impulse_blue,a.shadowColor=a.fillStyle,a.fillText("LEVEL CONQUERED",O/
2,100)):(a.fillStyle="red",a.shadowColor=a.fillStyle,a.fillText("LEVEL FAILED",O/2,100)),a.fillStyle=this.L,a.shadowColor=a.fillStyle,a.font="40px Muli",a.fillText(this.Ja.V,O/2,150),a.font="18px Muli",a.fillStyle=this.L,a.shadowColor=a.fillStyle,this.Ja.pa?a.fillText("LEVEL TIME",O/2,190):(a.fillText("FINAL COMBO",O/2+100,190),a.fillText("LEVEL TIME",O/2-100,190)),a.font="54px Muli",this.Ja.pa?a.fillText(this.H.Wg,O/2,240):(a.fillText(this.H.Ce,O/2+100,240),a.fillText(this.H.Wg,O/2-100,240)),a.fillStyle=
w.impulse_blue,a.shadowColor=a.fillStyle,a.font="24px Muli",this.Da&&(a.textAlign="left",10>this.ro?(a.fillText(" + "+this.ro,O/2+85,275),J(a,O/2+75,267,0,20,20,"spark")):(a.fillText(" + "+this.ro,O/2+79,275),J(a,O/2+69,267,0,20,20,"spark")),10>this.Mp?(a.fillText(" + "+this.Mp,O/2-108,275),J(a,O/2-118,267,0,20,20,"spark")):(a.fillText(" + "+this.Mp,O/2-114,275),J(a,O/2-124,267,0,20,20,"spark"))),a.textAlign="center",this.Ja.pa||(a.fillStyle=this.L,a.shadowColor=a.fillStyle,a.font="24px Muli",a.fillText("SCORE",
O/2,320),a.font="72px Muli",a.fillText(this.H.cd,O/2,390),c=this.L,nb(a,O/2,420,300,Math.min(this.H.cd/this.vt,1),c,c),this.sc&&(a.font="18px Muli",a.fillStyle=this.L,a.shadowColor=a.fillStyle,a.fillText("HIGH SCORE",O/2,455))),qb(a,Math.floor(this.u.Lb),Math.floor(this.u.Wc),this.u.gd,O/2,P/2+200,24,{labels:!0,mh:this.Td}),a.shadowBlur=0,a.fillStyle=this.ub,a.font="12px Muli",a.fillText("PRESS ANY KEY TO SKIP",O/2,P/2+270)))};l.Ne=function(){this.zj&&(this.$j/=4,this.Ie/=4,this.Tf/=4,this.Aa/=4)};
l.Na=function(){this.zj&&(this.$j/=4,this.Ie/=4,this.Tf/=4,this.Aa/=4)};l.yr=function(){this.zj=!0};l.du=function(a){return 100>a?(a/=100,"rgb("+Math.round(190*(1-a)+0*a)+","+Math.round(190*(1-a)+128*a)+","+Math.round(190*(1-a)+255*a)+")"):this.du(Math.abs(400-this.H.Io%800)/400*99.99)};Gg.prototype=new cg;l=Gg.prototype;l.constructor=Gg;
function Gg(){this.Gt=mc();this.It=nc();this.Ht=oc();this.Td=1<=nc();this.O=new fg({fade_in:500,fade_out:250});Y(this.O,"fade_in");this.buttons=[];this.buttons.push(new Z("BACK",16,70,P/2+260,60,65,"white",w.impulse_blue,function(a){return function(){Y(a.O,"fade_out",function(){X=new Hf})}}(this),"back"));this.buttons.push(new Hg("beat_hive1",O/2-225,150,50));this.buttons.push(new Hg("beat_hive2",O/2-75,150,50));this.buttons.push(new Hg("beat_hive3",O/2+75,150,50));this.buttons.push(new Hg("beat_hive4",
O/2+225,150,50));this.buttons.push(new Hg("first_gold",O/2-300,300,50));this.buttons.push(new Hg("combo",O/2-150,300,50));this.buttons.push(new Hg("fast_time",O/2+0,300,50));this.buttons.push(new Hg("survivor",O/2+150,300,50));this.buttons.push(new Hg("pacifist",O/2+300,300,50));this.buttons.push(new Hg("0star",O/2-225,450,50));this.buttons.push(new Hg("1star",O/2-75,450,50));this.buttons.push(new Hg("2star",O/2+75,450,50));this.buttons.push(new Hg("3star",O/2+225,450,50))}l.ra=function(a){this.O.ra(a)};
l.$=function(a,b){this.Kb||(lf.setAttribute("style",""),Eb(b,.3),this.Kb=!0);"fade_in"==this.O.ac?a.globalAlpha*=ig(this.O):"fade_out"==this.O.ac&&(a.globalAlpha*=1-ig(this.O));a.textAlign="center";a.font="24px Muli";a.fillStyle="white";a.fillText("QUESTS",O/2,50);a.font="12px Muli";a.fillText("MOUSE OVER TO VIEW",O/2,75);qb(a,this.Gt,this.Ht,this.It,O/2,P-50,15,{labels:!0,mh:this.Td,Uz:!0});for(var c=0;c<this.buttons.length;c++)this.buttons[c].$(a);for(c=0;c<this.buttons.length;c++)Fg(this.buttons[c],
a)};l.Ba=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ba(a,b)};l.Na=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b)};Ag.prototype=new cg;l=Ag.prototype;l.constructor=Ag;
function Ag(a,b,c){this.u=a;this.Ec=b;this.Ad=c;this.za=[];this.ke=-1;this.Aa=this.ae=250;this.ob="in";this.Da=c.Da;this.Kb=!1;this.Kt=mc();this.Lt=oc();this.Qq=nc();this.ba=0;var d=this;this.Xk=new Z("NORMAL MODE",20,O/2-150,300,250,125,"white",w.impulse_blue,function(){d.Ul("easy")},"easy_mode");this.Kq=new Z("CHALLENGE MODE",20,O/2+150,300,250,125,"white",w.impulse_blue,function(){d.Ul("normal")},"normal_mode");this.ns=500;this.debug();Ig(this);Jg(this);0<this.za.length&&kc()}
l.Ul=function(a){"none"==this.ob&&(L=a,bc(),this.Xk.border="easy"==L,this.Kq.border="normal"==L,this.ob="out",this.Aa=4*this.ae)};
function Kg(a,b,c){var d=parseInt(b.substring(5,6));3!=c.ba&&3!=a.ba||"BOSS"==b.substring(0,4)||Lg(a,"first_gold");1==d&&150<=c.Ce&&Lg(a,"combo");3==d&&150<=c.Uc&&Lg(a,"survivor");2==d&&30>=c.Uc&&Lg(a,"fast_time");0==c.uu&&Lg(a,"pacifist");if("normal"==L){b=3;c=["half","basic","silver","gold"];for(d=1;4>=d;d++)if(qf.normal["world "+d]){var f=qf.normal["world "+d].oh;c.indexOf(f)<b&&(b=c.indexOf(f))}else b=-1;0<=b&&Lg(a,"0star");1<=b&&Lg(a,"1star");2<=b&&Lg(a,"2star");3==b&&Lg(a,"3star")}}
function Lg(a,b){if(-1==uf.indexOf(b)){uf.push(b);bc();a.za.push({type:"quest",data:{type:b}});for(var c=0;c<Hb[b].za.length;c++){var d=Hb[b].za[c];"life"==d&&(a.Kt+=1,a.za.push({type:"lives",data:{Qf:1,av:a.Kt}}));"ult"==d&&(a.Qq+=1,a.za.push({type:"ult",data:{Qf:1,cv:a.Qq}}),1==a.Qq&&(a.Yz=!0));"spark"==d&&(a.Lt+=1,a.za.push({type:"spark_val",data:{Qf:1,bv:a.Lt}}))}}}
l.$=function(a){if(0!=this.za.length){var b=this.za[this.ke];if(!this.Kb){bg_canvas.setAttribute("style","display:none");var c=xf.getContext("2d");"world_victory"==b.type?Db(c,0,O,P,"Hive "+(b.data+1)):Db(c,0,O,P,"Hive 0");this.Kb=!0}a.save();a.globalAlpha="world_victory"==b.type?a.globalAlpha*Uf(b.data+1):a.globalAlpha*Uf(0);a.drawImage(xf,0,0,O,P,0,0,O,P);a.restore();a.save();"in"==this.ob?(c=this.Aa/this.ae,a.globalAlpha=1-c,"share"==b.type&&(document.getElementById("addthis-inline").style.opacity=
a.globalAlpha)):"out"==this.ob&&(c=this.Aa/this.ae,a.globalAlpha=Math.max(0,c),document.getElementById("addthis-inline").style.opacity=a.globalAlpha);if("quest"!=b.type&&"ult_tutorial"!=b.type&&"select_difficulty"!=b.type&&"share"!=b.type){var d="world_victory"==b.type?b.data+1:0;a.save();a.globalAlpha*=.2;Ka(a,d,O/2,250,100);a.restore()}var f=c="",g=32;"world_victory"==b.type&&(a.fillStyle=w["world "+(b.data+1)+" bright"],g=24,c="NEW HIVE UNLOCKED",f="easy"==L?"STANDARD MODE":"CHALLENGE MODE",a.textAlign=
"center",a.font="48px Muli",a.fillText("HIVE "+pa[b.data+1],O/2,270));"final_victory"==b.type&&(g=32,final_message="easy"==L?"STANDARD MODE COMPLETED":"CHALLENGE MODE COMPLETED",final_message_teaser="easy"==L?"WELL DONE":"WICKED SICK",a.textAlign="center",a.fillStyle=w.impulse_blue,a.font="32px Muli",a.fillText(final_message,O/2,240),a.font="20px Muli",a.fillStyle="white",a.fillText(final_message_teaser,O/2,280),a.font="16px Muli",a.fillStyle="white","easy"==L?a.fillText("BUT CAN YOU BEAT CHALLENGE MODE?",
O/2,400):a.fillText("THANKS FOR PLAYING IMPULSE",O/2,450));"share"==b.type&&(a.textAlign="center",a.font="24px Muli",a.fillStyle="white",ob(a,O/2,200,""),a.fillStyle=w.impulse_blue,a.font="20px Muli",a.fillStyle="white",a.fillText("IF YOU'RE ENJOYING THE GAME",O/2,300),a.fillText("PLEASE HELP SPREAD THE WORD",O/2,340));"rating"==b.type&&(c="YOUR SKILL RATING WENT UP",f="CONGRATULATIONS!",g=32,a.textAlign="center",a.fillStyle="white",a.font="60px Muli",a.fillText("+"+b.data.Qf,O/2,270),a.textAlign=
"center",a.font="12px Muli",a.fillStyle="white",a.fillText("NEW SKILL RATING",O/2,405),a.font="48px Muli",a.fillText(b.data.VC,O/2,455));"lives"==b.type&&(f="YOU HAVE EARNED AN UPGRADE!",c="EXTRA LIFE",a.textAlign="center",a.fillStyle="white",a.font="60px Muli",a.fillText("+"+b.data.Qf,O/2-25,270),J(a,O/2+35,250,0,40,40,"lives_icon"),a.font="72px Muli",a.font="12px Muli",a.fillStyle="white",d=50,a.fillText("LIVES",O/2-d,400),J(a,O/2-d,422,0,30,30,"lives_icon"),a.fillText("LIVES",O/2+d,400),J(a,O/
2+d,422,0,30,30,"lives_icon"),a.font="36px Muli",a.fillText(b.data.av-b.data.Qf,O/2-d,470),Sa(a,O/2,430,20,"right","white",!1),a.fillText(b.data.av,O/2+d,470));"ult"==b.type&&(a.textAlign="center",f="YOU HAVE EARNED AN UPGRADE!",c="EXTRA ULTIMATE",a.fillStyle="white",a.font="60px Muli",a.fillText("+"+b.data.Qf,O/2-25,270),J(a,O/2+35,250,0,40,40,"ultimate_icon"),a.font="72px Muli",a.font="12px Muli",a.fillStyle="white",d=50,a.fillText("ULT",O/2-d,400),J(a,O/2-d,422,0,30,30,"ultimate_icon"),a.fillText("ULT",
O/2+d,400),J(a,O/2+d,422,0,30,30,"ultimate_icon"),a.font="36px Muli",a.fillText(b.data.cv-b.data.Qf,O/2-d,470),Sa(a,O/2,430,20,"right","white",!1),a.fillText(b.data.cv,O/2+d,470));if("quest"==b.type)for(d=0,a.save(),Ka(a,d,O/2,250,150),a.restore(),a.textAlign="center",a.fillStyle=w.impulse_blue,a.font="32px Muli",a.fillText("QUEST COMPLETE!",O/2,120),draw_quest_button(a,O/2,250,60,b.data.type),a.font="24px Muli",a.fillStyle="white",d=0;d<Hb[b.data.type].text.length;d++)a.fillText(Hb[b.data.type].text[d],
O/2,400+36*d);"spark_val"==b.type&&(f="YOU HAVE EARNED AN UPGRADE!",c="SPARK VALUE INCREASED",a.textAlign="center",a.fillStyle="white",a.font="60px Muli",a.fillText("+"+b.data.Qf,O/2-25,270),J(a,O/2+35,250,0,40,40,"sparks_icon"),a.font="72px Muli",a.font="12px Muli",a.fillStyle="white",d=50,a.fillStyle="white",a.fillText("SPARK",O/2-d,390),a.fillText("VALUE",O/2-d,405),J(a,O/2-d,424,0,22,22,"sparks_icon"),a.fillText("SPARK",O/2+d,390),a.fillText("VALUE",O/2+d,405),J(a,O/2+d,424,0,22,22,"sparks_icon"),
a.font="36px Muli",a.fillText(b.data.bv-b.data.Qf,O/2-d,470),Sa(a,O/2,430,20,"right","white",!1),a.fillText(b.data.bv,O/2+d,470));"first_time_tutorial"==b.type&&(c="INTRO TUTORIAL COMPLETE",g=30,Za(a,O/2,250,30,"white"),a.font="16px Muli",a.textAlign="center",a.fillStyle="white",a.fillText("ARE YOU READY?",O/2,150));"select_difficulty"==b.type&&(f="LET'S DO THIS",g=36,c="SELECT DIFFICULTY",this.Xk.$(a),this.Kq.$(a));c&&(a.fillStyle="white",a.textAlign="center",a.font="16px Muli",a.fillText(f,O/2,
70),a.font=g+"px Muli",a.fillStyle="world_victory"==b.type?w["world "+(b.data+1)+" bright"]:w.impulse_blue,a.fillText(c,O/2,120));"select_difficulty"!=b.type?(a.textAlign="center",a.fillStyle="world_victory"==b.type?w["world "+(b.data+1)+" bright"]:"white",a.font="16px Muli","ult"!=b.type?a.fillText("PRESS ANY KEY TO CONTINUE",O/2,P-30):a.fillText("PRESS ANY KEY FOR ULT TUTORIAL",O/2,P-30)):(a.font="16px Muli",a.textAlign="center",a.fillStyle=w.impulse_blue,a.fillText("YOU CAN SWITCH DIFFICULTY ON THE TITLE SCREEN OPTIONS MENU",
O/2,P-75));a.restore()}};l.debug=function(){};l.ra=function(a){0==this.za.length&&Mg(this);this.Aa-=a;0>this.Aa&&("in"==this.ob&&(this.ob="none"),"out"==this.ob&&(Jg(this),this.ke>=this.za.length?Mg(this):(this.ob="in",this.Aa=this.ae,this.Kb=!1)))};
function Jg(a){0<=a.ke&&a.ke<a.za.length&&"share"==a.za[a.ke].type&&(document.getElementById("addthis-inline").style.display="none");a.ke+=1;a.ke<a.za.length&&"share"==a.za[a.ke].type&&(document.getElementById("addthis-inline").style.display="block")}
function Mg(a){X=a.Yz?new vc("ult_tutorial"):a.Ec?a.Da&&1<=a.u.Ea&&3>=a.u.Ea?new zg(a.u.Ea+1,null,null,null,null):new Hf:a.Ad.or?"ult_tutorial"==a.Ad.fA?new zg(2,null,null,null,null):new Hf:new kg(a.Ad.H,a.Ad.i,a.Ad.s,a.Ad.Rb,{Zc:a.Zc,sc:a.sc,ba:a.ba,Da:a.Da})}
function Ig(a){if(a.Ad.or)"first_time_tutorial"==a.Ad.fA&&a.za.push({type:"first_time_tutorial"});else{if(!a.Ec)if(a.Ad.i.pa)a.Ad.i.uh&&(a.Da?(b=cc(a.Ad.i.V,a.Ad.H.Uc),a.Zc=b.Zc,a.ba=b.ba):(a.Zc=!1,a.ba=0));else if(a.Da){var b=$b(a.Ad.i.V,a.Ad.H.cd);a.sc=b.sc;a.ba=b.ba}else a.ba=ac(a.Ad.i.V,a.Ad.H.cd,L),a.sc=!1;0>a.u.ev&&a.za.push({type:"rating",data:{Qf:0-a.u.ev,VC:0}});if(qf[L]["world "+a.u.Ea]&&qf[L]["world "+a.u.Ea].first_victory){4>a.u.Ea&&(Lg(a,"beat_hive"+a.u.Ea),a.za.push({type:"world_victory",
data:a.u.Ea}));4==a.u.Ea&&(Lg(a,"beat_hive"+a.u.Ea),a.za.push({type:"final_victory"}));if(a.Da&&!a.Ad.or)if(a.Ec)for(var c in a.u.H)Kg(a,c,a.u.H[c]);else Kg(a,a.Ad.i.V,a.Ad.H);qf[L]["world "+a.u.Ea].first_victory=!1}mc()<mc()&&(b=mc()-mc(),a.za.push({type:"lives",data:{Qf:b,av:mc()}}));nc()<nc()&&(b=nc()-nc(),c=nc(),a.za.push({type:"ult",data:{Qf:b,cv:c}}),1==c&&(a.Yz=!0));oc()<oc()&&(b=oc()-oc(),a.za.push({type:"spark_val",data:{Qf:b,bv:oc()}}))}}
l.Ne=function(){0!=this.za.length&&"none"==this.ob&&"select_difficulty"!=this.za[this.ke].type&&(this.ob="out",this.Aa=this.ae)};l.Na=function(a,b){0==this.za.length||0<=this.ke&&this.ke<this.za.length&&"share"==this.za[this.ke].type||this.ke>=this.za.length||("select_difficulty"==this.za[this.ke].type&&(this.Xk.Na(a,b),this.Kq.Na(a,b)),"none"==this.ob&&"select_difficulty"!=this.za[this.ke].type&&(this.ob="out",this.Aa=this.ae))};
l.Ba=function(a,b){0!=this.za.length&&"select_difficulty"==this.za[this.ke].type&&(this.Xk.Ba(a,b),this.Kq.Ba(a,b))};Hf.prototype=new cg;l=Hf.prototype;l.constructor=Hf;function Hf(){this.buttons={menu:[],enter:[],options:[]};this.qu=new Image;this.Kb=!1;this.visibility=0;this.state="menu";this.qu.src="impulse_logo.png";Ng(this);jc(hc,ka.Menu);this.O=new fg({fade_in:500,fade_out:250});Y(this.O,"fade_in");Lf()}l.ra=function(a){this.O.ra(a)};
l.$=function(a,b){this.Kb||(lf.setAttribute("style",""),Eb(b,.3),this.Kb=!0);a.save();"fade_in"==this.O.ac?a.globalAlpha*=ig(this.O):"fade_out"==this.O.ac&&(a.globalAlpha*=1-ig(this.O));a.shadowColor=w.impulse_blue;a.shadowBlur=0;ob(a,O/2,150,"MARK ZHANG");for(var c=0;c<this.buttons[this.state].length;c++)this.buttons[this.state][c].$(a);for(c=0;c<this.buttons[this.state].length;c++)Fg(this.buttons[this.state][c],a);a.restore()};
l.Ba=function(a,b){for(var c=0;c<this.buttons[this.state].length;c++)this.buttons[this.state][c].Ba(a,b)};l.Na=function(a,b){for(var c=0;c<this.buttons[this.state].length;c++)this.buttons[this.state][c].Na(a,b)};
function Ng(a){c=a;a.buttons.menu=[];var b=P/2+50,c=a;a.buttons.menu.push(new Z("START GAME",20,O/2-130,b,210,100,"white",w.impulse_blue,function(){Mf();L="easy";bc();if(sf[L].H)Y(c.O,"fade_out",function(){X=new gg(null,null,null,null,null,!0)});else{for(var a=1;4>a&&qf[L]["world "+a];)a+=1;Y(c.O,"fade_out",function(){X=new hg(a)})}},"player"));a.buttons.menu.push(new Z("CHALLENGE",20,O/2+130,b,210,100,"white",w.impulse_blue,function(){Mf();L="normal";bc();if(sf[L].H)Y(c.O,"fade_out",function(){X=
new gg(null,null,null,null,null,!0)});else if(N["HIVE 1-1"].Va.normal.sc){for(var a=1;4>a&&qf[L]["world "+a];)a+=1;Y(c.O,"fade_out",function(){X=new hg(a)})}else Y(c.O,"fade_out",function(){X=new eg})},"normal_mode"));a.buttons.menu.push(new Z("OPTIONS",16,O/2-240,b+130,100,70,"white",w.impulse_blue,function(){Y(c.O,"fade_out",function(){of=new Og(c)})},"gear"));rf||a.buttons.menu.push(new Z("TUTORIAL",16,O/2-80,b+130,100,70,"white",w.impulse_blue,function(){Y(c.O,"fade_out",function(){X=new vc("normal_tutorial")})},
"tutorial"));a.buttons.menu.push(new Z("QUESTS",16,rf?O/2:O/2+80,b+130,100,70,"white",w.impulse_blue,function(){Y(c.O,"fade_out",function(){X=new Gg})},"quest"));a.buttons.menu.push(new Z("CREDITS",16,O/2+240,b+130,100,70,"white",w.impulse_blue,function(){Y(c.O,"fade_out",function(){X=new jg})},"credit"));a.buttons.enter.push(new Pg("CLICK TO BEGIN",20,O/2,P/2+150,200,50,"white","blue",function(){setTimeout(function(){c.state="menu"},20)}));a.Qx=new Pg("NORMAL MODE",20,O/2-100,P/2+120,200,50,"white",
"blue",function(){c.Ul("easy")});a.buttons.options.push(a.Qx);a.Xk=new Pg("CHALLENGE MODE",20,O/2+100,P/2+120,200,50,"white","blue",function(){c.Ul("normal")});a.buttons.options.push(a.Xk);Qg(a);a.CB=new Pg("CLEAR DATA",20,O/2,P/2+170,200,50,"white","blue",function(){Rg()});a.buttons.options.push(a.CB);a.buttons.options.push(new Pg("BACK",20,O/2,P/2+220,200,50,"white","blue",function(){setTimeout(function(){c.state="menu"},50)}))}l.Ul=function(a){L=a;bc();Qg(this);Rf(L)};
function Qg(a){a.Qx.Nv="easy"==L;a.Xk.Nv="normal"==L};hg.prototype=new cg;l=hg.prototype;l.constructor=hg;
function hg(a){this.Kb=!1;this.color="white";this.Gt=mc();this.It=nc();this.Ht=oc();this.Td=1<=nc();this.s=a;this.fz=null;this.buttons=[];var b=this;this.buttons.push(new Z("BACK",16,70,P/2+260,60,65,this.color,w.impulse_blue,function(){Y(b.O,"fade_out",function(){X=new Hf})},"back"));this.de={};this.yg=[];this.Gf={};this.XC=4;this.vz={2:"DEFEAT "+pa[1]+" TO UNLOCK",3:"DEFEAT "+pa[2]+" TO UNLOCK",4:"DEFEAT "+pa[3]+" TO UNLOCK"};this.hz={1:23,2:18,3:20,4:20};Sg(this,1,!0);Sg(this,2,qf[L]["world 1"]);
Sg(this,3,qf[L]["world 2"]);Sg(this,4,qf[L]["world 3"]);Tg(this);Ug(this);jc(hc,ka.Menu);this.Yx=500;this.Zx=250;this.qi=this.jm=null;Tf();this.O=new fg({fade_in:250,fade_across:250,fade_out:250});Y(this.O,"fade_in");this.xk=[];this.nm=this.jr=1E3;this.ey=2E3;this.Rf={x:O/2/F,y:(P/2-125)/F};this.yk=5;this.fy=8}
function Tg(a){for(var b=O/2-37.5*(a.XC-1),c=1;4>=c;c++){var d=a;a.yg.push(new Z("",16,b+75*(c-1),P/2+250,60,60,w["world "+c+" bright"],w.impulse_blue,function(a){return function(){d.s!=a&&(Y(d.O,"fade_across",function(){d.s=a}),d.fz=a)}}(c),"world"+c));1<c&&!qf[L]["world "+(c-1)]&&(a.yg[c-1].Nc=!1,a.yg[c-1].color="gray")}}
function Ug(a){for(var b=0;4>b;b++){a.Gf[b+1]=[];for(var c=["world "+(b+1)+" bright","world "+(b+1)+" bright","silver","gold"],d=0;8>d;d++){var f="HIVE "+(b+1)+"-"+(d+1);7==d&&(f="BOSS "+(b+1));var g=a,h=w[c[N[f].Va[L].ba]],h=new Z(7==d?"BOSS":d+1,20,O/2+85*(-3.5+d),P/2+130,50,50,h,h,function(a,b){return function(){g.jm=g.Zx;g.qi=g.jm;g.Zt=w["world "+(b+1)+" dark"];var c=xf.getContext("2d");Db(c,0,O,P,"Hive "+g.s);setTimeout(function(){X=new Bg(a,b+1)},g.Zx)}}(f,b),"practice"+(b+1));h.iA=!1;h.V=f;
a.Gf[b+1].push(h);h.Nc=N[f].Va[L].bg||0==d||!1;h.Nc||(h.color="gray")}}}function Sg(a,b,c){var d=O/2,f=P/2-125;c?a.de[b]=new Pg("START",32,d,f,150,100,w["world "+b+" bright"],w["world "+b+" bright"],function(){a.jm=a.Yx;a.qi=a.jm;a.Zt=w["world "+b+" dark"];var c=xf.getContext("2d");Db(c,0,O,P,"Hive "+a.s);setTimeout(function(){X=new zg(b,null,null,null,null,null,!1,!0)},a.Yx)}):(a.de[b]=new Pg(a.vz[b],16,d,f,200,200,w["boss "+b],w["boss "+b],function(){}),a.de[b].Nc=!1)}
l.$=function(a,b){this.Zt&&(a.save(),a.globalAlpha=1-this.qi/this.jm,a.fillStyle=this.Zt,a.fillRect(0,0,O,P),a.globalAlpha*=Uf(this.s),a.drawImage(xf,0,0,O,P,0,0,O,P),a.restore());a.save();null!=this.qi&&(a.globalAlpha*=Math.max(this.qi/this.jm,0));"fade_in"==this.O.ac?a.globalAlpha*=ig(this.O):"fade_out"==this.O.ac&&(a.globalAlpha*=1-ig(this.O));this.Kb||(bg_canvas.setAttribute("style",""),Eb(b,.3),this.Kb=!0);"fade_across"==this.O.ac?(a.save(),a.globalAlpha*=1-ig(this.O),Vg(this,a,this.s),a.restore(),
a.save(),a.globalAlpha*=ig(this.O),Vg(this,a,this.fz),a.restore()):Vg(this,a,this.s);for(var c=0;c<this.yg.length;c++)this.yg[c].$(a),this.yg[c].Uk&&(a.textAlign="center",a.font="15px Muli",this.yg[c].Nc?(a.fillStyle=w["world "+(c+1)+" bright"],a.fillText("HIVE "+pa[c+1],O/2,P-8)):this.yg[c-1].Nc?(a.fillStyle="gray",a.fillText(this.vz[c+1],O/2,P-8)):(a.fillStyle="gray",a.fillText("???",O/2,P-8)));for(c=0;c<this.buttons.length;c++)this.buttons[c].$(a);this.Tq(a,F);a.font="13px Muli";a.fillStyle="white";
a.fillText("SELECT HIVE",O/2,P/2+215);qb(a,this.Gt,this.Ht,this.It,O/2,P/2,15,{labels:!0,Uz:!0,mh:this.Td});a.font="15px Muli";a.textAlign="center";a.fillStyle="white";a.fillText("normal"==L?"CHALLENGE MODE":"STANDARD MODE",O/2,30);a.restore()};
function Vg(a,b,c){b.save();b.globalAlpha=a.de[c].wa?3==c?.5*b.globalAlpha:.7*b.globalAlpha:3==c?.3*b.globalAlpha:.4*b.globalAlpha;1<c&&!qf[L]["world "+(c-1)]?Oa(b,c,a.de[c].x,a.de[c].y-10,100):Ka(b,c,a.de[c].x,a.de[c].y-10,100,a.de[c].wa);b.restore();a.de[c].$(b);if(qf[L].hasOwnProperty("world "+c)){b.save();b.textAlign="center";b.fillStyle=w["world "+c+" bright"];b.font="12px Muli";b.fillText("RANK",a.de[c].x,a.de[c].y+30);b.font="36px Muli";b.shadowColor=b.fillStyle;b.shadowBlur=100;b.save();var d=
qf[L]["world "+c].victory_type;Gb(b,a.de[c].x,a.de[c].y+50,c,d,1);b.restore();"half"==d&&(b.font="11px Muli",b.fillText("CONTINUES USED: "+qf[L]["world "+c].continues,a.de[c].x,a.de[c].y+80));b.restore()}b.save();b.globalAlpha*=.3;for(d=0;d<a.Gf[c].length;d++)a.Gf[c][d].Nc&&0<d&&(b.beginPath(),b.moveTo(a.Gf[c][d-1].x+a.hz[c],a.Gf[c][d-1].y),b.lineTo(a.Gf[c][d].x-a.hz[c],a.Gf[c][d].y),b.lineWidth=6,b.strokeStyle=w["boss "+c],b.stroke());b.restore();for(d=0;d<a.Gf[c].length;d++)a.Gf[c][d].$(b);b.textAlign=
"center";b.font="16px Muli";b.fillStyle=w["world "+c+" bright"];b.fillText("PRACTICE",O/2,P/2+80);b.font="10px Muli";b.fillText("SELECT A LEVEL",O/2,P/2+95);b.save();b.fillStyle=w["world "+c+" bright"];b.font="30px Muli";b.textAlign="center";b.fillText("HIVE "+pa[c],O/2,70);b.restore()}l.ra=function(a){null!=this.qi&&(this.qi-=a);this.Nr(a);this.O.ra(a)};
l.Ba=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ba(a,b);this.de[this.s].Ba(a,b);for(c=0;c<this.yg.length;c++)this.yg[c].Ba(a,b);for(c=0;c<this.Gf[this.s].length;c++)this.Gf[this.s][c].Ba(a,b)};l.Na=function(a,b){if(null==this.qi){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b);this.de[this.s].Na(a,b);for(c=0;c<this.yg.length;c++)this.yg[c].Na(a,b);for(c=0;c<this.Gf[this.s].length;c++)this.Gf[this.s][c].Na(a,b)}};l.Nr=Xf.prototype.Nr;l.cu=Xf.prototype.cu;
l.Tq=Xf.prototype.Tq;vc.prototype=new Jf;l=vc.prototype;l.constructor=vc;function vc(a){this.ma(0,null,null,!0,this.u,!1);this.mode=a;this.ready=!1;this.i=this.tm(N["HOW TO PLAY"]);this.i.Fm=!0;this.u=new lc(0,!1);this.Qd=!1;this.lg=0;this.Zl=100;this.Xz=3E3;this.Aa=this.ae=500;this.ob="in"}l.tm=dg.prototype.tm;
l.yr=function(){this.ready=!0;this.i.w=this;this.i.reset();this.V=this.i.V;this.pa=!1;ng(this);lf.setAttribute("style","display:none");mf.translate(Q,0);this.i.le(mf);mf.translate(-Q,0);jc(hc,ka.Interlude);this.color=this.pa?w["boss "+this.s]:w["world "+this.s+" lite"];this.ni=w["world "+this.s+" dark"];this.ub=w["world "+this.s+" lite"];this.L=w["world "+this.s+" bright"];this.Kd=12;"normal_tutorial"==this.mode?this.ca=0:"first_time_tutorial"==this.mode?(this.ca=-1,this.lg=this.Xz,this.Qd=!0):"ult_tutorial"==
this.mode&&(this.ca=0,this.lg=.5*this.Xz,this.Qd=!0);this.Zm=null;this.vp=document.createElement("canvas");this.vp.width=150;this.vp.height=150;this.Qb=this.vp.getContext("2d");this.Bp=document.createElement("canvas");this.Bp.width=150;this.Bp.height=150;this.td=this.Bp.getContext("2d");this.HD=["white","silver","gold"];this.ID=["GATEWAY SCORE","SILVER SCORE","GOLD SCORE"];this.JD=["(UNLOCKS NEXT LEVEL)","(+1 LIFE)","(5 LIVES OR +1 LIFE)"];this.Md=["white","silver","gold"];var a=this;this.uk=new Z("EXIT TUTORIAL",
20,400,440,125,85,this.ub,"white",function(){a.Vx=!0},"quit");this.ml=(this.Td=1<=nc())?2:0;this.Kd+=this.ml;this.Td&&(this.u.gd=99)};l.Ul=function(a){L=a;bc()};l.Oc=function(a){this.pause||1!=this.zoom||(sc(this.n,1E3),this.Qd&&(0>=this.lg?(this.Qd=!1,this.ob="out",this.Aa=this.ae):this.lg-=a),this.Aa-=a,0>this.Aa&&"none"!=this.ob&&1==this.zoom&&("in"==this.ob?this.ob="none":"out"==this.ob&&(Wg(this,this.ca+1),2==this.ca&&"ult_tutorial"==this.mode&&(this.uk.y=550),this.ob="in",this.Aa=this.ae)))};
l.Ae=function(a){if(1==this.zoom){a.save();a.translate(Q,0);if("in"==this.ob){var b=this.Aa/this.ae;a.globalAlpha=1-b}else"out"==this.ob&&(b=this.Aa/this.ae,a.globalAlpha=Math.max(0,b));if("first_time_tutorial"==this.mode)if(a.font="24px Muli",a.textAlign="center",a.fillStyle="white",-1==this.ca&&(ob(a,400,380,"MARK ZHANG"),a.font="24px Muli",a.fillText("INTRO TUTORIAL",400,500),a.font="18px Muli",a.fillStyle=w.impulse_blue,a.fillText("PRESS Q TO PAUSE AND QUIT",400,535)),0==this.ca&&("right"==A.Vb&&
Qa(a,400,430,60,"white",["W","A","S","D"]),"left"==A.Vb&&"mouse"==A.Hc&&Qa(a,400,430,60,"white"),a.fillText("MOVE",400,500)),1==this.ca&&("mouse"==A.Hc?Ua(a,400,400,83,125,"white"):Qa(a,400,430,60,"white"),a.fillText("IMPULSE",400,500),a.save(),a.globalAlpha*=.5,a.font="12px Muli",a.fillText("HOLD MOUSE TO CONTINUOUSLY IMPULSE",400,550),a.restore()),2==this.ca&&Xg(this,a),3==this.ca&&Yg(this,a),4==this.ca&&Zg(a),5==this.ca&&$g(a),6==this.ca&&ah(a),7==this.ca&&bh(this,a),8==this.ca&&Zg(a),9==this.ca&&
ch(this,a),-1!=[2,5,6,7].indexOf(this.ca))a.save(),a.fillStyle=w.impulse_blue,a.globalAlpha*=Math.min(1,1.5*dh()),a.font="16px Muli",a.fillText("PRESS SPACEBAR TO CONTINUE",400,580),a.restore();else if(0==this.ca)a.save(),a.fillStyle=w.impulse_blue,a.globalAlpha*=Math.min(1,1.5*dh()),a.font="16px Muli",a.fillText("TRY MOVING NOW",400,580),a.restore();else if(1==this.ca)a.save(),a.fillStyle=w.impulse_blue,a.globalAlpha*=Math.min(1,1.5*dh()),a.font="16px Muli",a.fillText("TRY IMPULSING NOW",400,580),
a.restore();else if(3==this.ca)a.save(),a.fillStyle=w.impulse_blue,a.globalAlpha*=Math.min(1,1.5*dh()),a.font="16px Muli",a.fillText("TRY KILLING AN ENEMY NOW",400,580),a.restore();else if(4==this.ca||8==this.ca)a.save(),a.fillStyle=w.impulse_blue,a.globalAlpha*=Math.min(1,1.5*dh()),a.font="16px Muli",a.fillText("GET THE GATEWAY SCORE",400,580),a.restore();if("normal_tutorial"==this.mode){a.font="20px Muli";a.textAlign="center";a.fillStyle="white";0==this.ca&&(ob(a,400,380,"MARK ZHANG"),a.font="24px Muli",
a.fillStyle="white",a.fillText("TUTORIAL",400,500));1==this.ca&&("right"==A.Vb&&Qa(a,400,430,60,"white",["W","A","S","D"]),"left"==A.Vb&&"mouse"==A.Hc&&Qa(a,400,430,60,"white"),a.fillText("MOVE",400,500),a.globalAlpha*=.5,a.font="12px Muli",a.fillStyle="white",a.fillText("ALTERNATE CONTROLS AVAILABLE IN PAUSE MENU",400,550));2==this.ca&&(a.font="20px Muli","mouse"==A.Hc?Ua(a,400,400,83,125,"white"):Qa(a,400,430,60,"white"),a.fillText("USE IMPULSE",400,500),a.globalAlpha*=.5,a.font="12px Muli",a.fillText("HOLD MOUSE TO CONTINUOUSLY IMPULSE",
400,550));3==this.ca&&Xg(this,a);4==this.ca&&Yg(this,a);if(5==this.ca){for(b=0;3>b;b++)a.font="24px Muli",a.textAlign="right",a.fillStyle=w[this.HD[b]],a.shadowColor=a.fillStyle,a.font="25px Muli",a.fillText(N["HOW TO PLAY"].sa[L][b],600,40*b+337),a.textAlign="left",a.font="20px Muli",a.fillText(this.ID[b],200,330+40*b),a.font="12px Muli",a.fillText(this.JD[b],200,40*b+345);a.beginPath();a.rect(190,308,420,45);a.strokeStyle="red";a.lineWidth=8;a.stroke();a.beginPath();a.rect(825,515,150,80);a.strokeStyle=
"red";a.lineWidth=6;a.stroke();a.font="20px Muli";a.textAlign="center";a.fillStyle="white";a.fillText("GET THE GATEWAY SCORE...",400,500);a.shadowColor="red";a.fillStyle="red"}6==this.ca&&ch(this,a);this.ca==7+this.ml&&$g(a);this.ca==8+this.ml&&ah(a);this.ca==9+this.ml&&bh(this,a);this.Td&&(a.fillStyle="white",a.textAlign="center",7==this.ca&&eh(a),8==this.ca&&fh(this,a));this.ca==10+this.ml&&(a.font="20px Muli",a.fillStyle="white","right"==A.Vb?(Ra(a,250,406,55,55,10,"white"),a.fillText("Q",250,
412)):"left"==A.Vb&&(Ra(a,250,406,125,55,10,"white"),a.fillText("ENTER",250,412)),Ra(a,400,406,55,55,10,"white"),a.fillText("X",400,412),Ra(a,550,406,55,55,10,"white"),a.fillText("C",550,412),a.font="16px Muli",a.fillText("PAUSE",250,462),a.fillText("MUTE MUSIC",400,462),a.fillText("FULLSCREEN",550,462),a.font="12px Muli",a.fillText("ENEMY INFO AND GAME OPTIONS IN THE PAUSE MENU",400,530));this.ca==11+this.ml&&(this.uk.$(a),a.fillStyle=w.impulse_blue,a.font="16px Muli",a.fillText("THANKS FOR PLAYING IMPULSE!",
400,335),a.font="12px Muli",a.fillText("- MARK -",400,360));a.globalAlpha=1;0<this.ca&&(Sa(a,100,420,20,"left","white"),a.font="10px Muli",a.fillStyle="white",a.fillText("BACK",98,450));this.ca<this.Kd-1&&(Sa(a,700,420,20,"right","white"),a.font="10px Muli",a.fillStyle="white",a.fillText("NEXT",702,450));for(b=0;b<this.Kd;b++){var c=(this.Kd-1)/2-b;a.beginPath();a.arc(400-25*c,580,4,0,2*Math.PI,!0);a.fillStyle="white";this.ca==b?(a.fillStyle="white",a.shadowColor=a.fillStyle,a.fill()):(a.globalAlpha/=
5,a.shadowColor=a.fillStyle,a.fill(),a.globalAlpha*=5)}}"ult_tutorial"==this.mode&&(a.fillStyle="white",a.textAlign="center",0==this.ca&&(ob(a,400,380,"MARK ZHANG"),a.font="24px Muli",a.fillText("ULT TUTORIAL",400,500)),1==this.ca&&eh(a),2==this.ca&&fh(this,a));a.restore()}};
function Zg(a){a.beginPath();a.rect(825,515,150,80);a.strokeStyle="red";a.lineWidth=6;a.stroke();a.font="24px Muli";a.textAlign="center";a.fillStyle="white";a.fillText("GET THE GATEWAY SCORE TO BEAT THE LEVEL",400,420);a.save();a.globalAlpha*=dh();gh(a,735,555,50,"red");a.restore()}
function gh(a,b,c,d,f,g){a.save();g&&(a.translate(b,c),"left"==g&&a.rotate(Math.PI),"up"==g&&a.rotate(3*Math.PI/2),"down"==g&&a.rotate(Math.PI/2),a.translate(-b,-c));a.beginPath();a.moveTo(b-d/2,c);a.lineTo(b+.355*d,c);a.lineWidth=d/5;a.strokeStyle=f;a.stroke();Sa(a,b+d/2,c,.6*d,"right",f,!1);a.restore()}
function $g(a){a.font="24px Muli";a.fillStyle="white";a.fillText("YOUR MULTIPLIER INCREASES THE POINTS",400,340);a.fillText("YOU GET FROM KILLING ENEMIES",400,375);a.fillStyle=w.impulse_blue;a.font="48px Muli";a.fillText("100",250,450);a.fillStyle="white";a.font="12px Muli";a.fillText("BASE POINT VALUE",250,480);a.fillText("OF ENEMY",250,500);gh(a,325,435,30,"white");a.fillStyle=w.impulse_blue;a.font="48px Muli";a.textAlign="center";a.fillText("x5",400,450);a.fillStyle="white";a.font="12px Muli";
a.fillText("YOUR CURRENT",400,480);a.fillText("MULTIPLIER",400,500);gh(a,475,435,30,"white");a.fillStyle=w.impulse_blue;a.font="48px Muli";a.fillText("+500",565,450);a.fillStyle="white";a.font="12px Muli";a.fillText("TOTAL POINTS",565,480);a.fillText("GAINED",565,500);a.beginPath();a.rect(825,225,150,100);a.strokeStyle="red";a.lineWidth=6;a.stroke();a.save();a.globalAlpha*=dh();gh(a,735,280,50,"red");a.restore()}
function ah(a){a.fillStyle="white";a.font="16px Muli";a.fillText("KILLING ENEMIES",250,360);a.fillStyle=w.impulse_blue;a.font="36px Muli";a.fillText("INCREASES",250,400);a.fillStyle="white";a.font="16px Muli";a.fillText("YOUR MULTIPLIER",250,430);a.fillText("TOUCHING ENEMIES",550,360);a.fillStyle="red";a.font="36px Muli";a.fillText("RESETS",550,400);a.fillStyle="white";a.font="16px Muli";a.fillText("YOUR MULTIPLIER",550,430);a.fillStyle="white";a.save();a.globalAlpha*=.5;a.font="12px Muli";a.fillText("MULTIPLIER PERMANENTLY +1 EVERY 10 SECONDS",
400,500);a.restore()}
function bh(a,b){b.beginPath();b.arc(a.i.xe.x,a.i.xe.y,25,0,2*Math.PI);b.lineWidth=4;b.strokeStyle="red";b.stroke();b.beginPath();b.arc(a.i.te.x,a.i.te.y,25,0,2*Math.PI);b.stroke();J(b,300,440,void 0,25,25,"spark");b.font="16px Muli";b.fillStyle=w.impulse_blue;b.fillText("+10 SPARKS",300,475);J(b,500,440,void 0,25,25,"multi");b.font="16px Muli";b.fillStyle="white";b.fillText("+5 MULTIPLIER",500,475);b.font="24px Muli";b.fillText("POWERUPS",400,350);b.font="12px Muli";b.fillStyle=w.impulse_blue;b.fillText("100 SPARKS = EXTRA LIFE",
300,495);b.beginPath();b.rect(-160,Lc-140,120,80);b.strokeStyle="red";b.lineWidth=4;b.stroke()}function eh(a){"mouse"==A.Hc?(Va(a,400,400,83,125,"white"),a.font="20px Muli",a.fillText("USE ULTIMATE",400,500)):(Ra(a,400,400,55,55,10,"white"),a.font="20px Muli",a.fillText("E",400,406),a.fillText("USE ULTIMATE",400,470))}
function fh(a,b){J(b,400,330,0,60,60,"ultimate");b.font="16px Muli";b.textAlign="center";b.fillStyle="white";b.shadowBlur=0;b.fillText("YOU GET NO POINTS FOR KILLING ENEMIES WITH YOUR ULTIMATE",400,430);b.fillText("WHILE USING YOUR ULTIMATE, YOU ARE INVINCIBLE",400,480);"ult_tutorial"==a.mode&&a.uk.$(b)}function dh(){return Math.abs(((new Date).getTime()%2E3-1E3)/1E3)}
function Yg(a,b){b.drawImage(a.vp,0,0,150,150,225,300,150,150);b.drawImage(a.Bp,0,0,150,150,425,300,150,150);b.save();b.beginPath();b.rect(225,300,150,150);b.rect(425,300,150,150);b.strokeStyle="white";b.lineWidth=2;b.stroke();b.restore();b.shadowBlur=0;b.beginPath();b.moveTo(385,375);b.lineTo(400,375);b.lineWidth=8;b.strokeStyle="white";b.stroke();Sa(b,408,375,20,"right","white",!1);b.font="20px Muli";b.fillStyle="white";b.textAlign="center";b.fillText("IMPULSE ENEMIES INTO THE VOID TO KILL THEM",
400,500);0<a.i.r.length&&(b.save(),b.globalAlpha*=dh(),b.beginPath(),b.arc(a.i.r[0].body.g.position.x*F,a.i.r[0].body.g.position.y*F,25,0,2*Math.PI),b.lineWidth=6,b.strokeStyle=w.impulse_blue,b.stroke(),b.beginPath(),b.moveTo(a.i.r[0].body.g.position.x*F,a.i.r[0].body.g.position.y*F-25),b.lineTo(a.i.r[0].body.g.position.x*F,66),b.lineWidth=6,b.stroke(),Sa(b,a.i.r[0].body.g.position.x*F,60,25,"up",w.impulse_blue,!1),b.restore())}
function Xg(a,b){b.drawImage(a.vp,0,0,150,150,225,300,150,150);b.drawImage(a.Bp,0,0,150,150,425,300,150,150);b.save();b.beginPath();b.rect(225,300,150,150);b.rect(425,300,150,150);b.strokeStyle="white";b.lineWidth=2;b.stroke();b.shadowBlur=0;gh(b,400,375,25,"white");b.shadowBlur=0;b.font="20px Muli";b.fillText("TOUCHING THE BLACK VOID WILL KILL YOU",400,500);for(var c=0;6>c;c++)gh(b,150+100*c,220,35,"red","down"),gh(b,150+100*c,120,35,"red","up");b.restore()}
function ch(a,b){Sa(b,355,170,25,"right","red",!1);Sa(b,445,170,25,"left","red",!1);Sa(b,400,125,25,"down","red",!1);Sa(b,400,215,25,"up","red",!1);b.beginPath();b.arc(400,170,50,0,2*Math.PI);b.lineWidth=8;b.shadowBlur=0;b.strokeStyle="red";b.stroke();"first_time_tutorial"==a.mode&&(b.font="20px Muli",b.textAlign="center",b.fillStyle="white",b.shadowBlur=0,b.fillText("MOVE ONTO THE UNLOCKED GATEWAY",400,360),b.shadowBlur=0,b.fillText("AND PRESS",400,400),b.fillText("TO ADVANCE TO THE NEXT LEVEL",
400,510),b.font="20px Muli",b.shadowColor="red",b.fillStyle="red");"normal_tutorial"==a.mode&&(b.font="20px Muli",b.textAlign="center",b.fillStyle="white",b.shadowBlur=0,b.fillText("...THEN MOVE ONTO THE UNLOCKED GATEWAY",400,360),b.shadowBlur=0,b.fillText("AND PRESS",400,400),b.fillText("TO ADVANCE TO THE NEXT LEVEL",400,510),b.font="20px Muli",b.shadowColor="red",b.fillStyle="red");b.fillStyle="white";"right"==A.Vb&&(Ra(b,400,445,300,50,10,"white"),b.fillText("SPACEBAR",400,451));"left"==A.Vb&&
(Ra(b,400,445,120,50,10,"white"),b.fillText("SHIFT",400,451))}function hh(a,b){b.save();b.beginPath();b.rect(0,0,150,75);b.fillStyle=a.ni;b.fill();Db(b,75,150,150,"Hive 0");b.beginPath();b.moveTo(0,75);b.lineTo(150,75);b.lineWidth=6;b.strokeStyle=w["world 0 lite"];b.stroke();b.restore()}l.Ba=function(a,b){!this.pause&&this.ready&&1==this.zoom&&("normal_tutorial"==this.mode&&this.ca==this.Kd-1&&this.uk.Ba(a-Q,b),this.n.Yu=wg(this,{x:a-Q,y:b}),"ult_tutorial"==this.mode&&2==this.ca&&this.uk.Ba(a-Q,b))};
l.Ne=function(a){this.ready&&1==this.zoom&&(a==ua.Vi||a==ua.fk?(this.pause=!this.pause)&&(of=new ug(this.i,this.s,this.H,this,this.Rb)):a==ua.bq&&this.u&&this.om&&R(this.i.Rf,this.n.body.g.position)<this.i.yk?"first_time_tutorial"==this.mode&&9>this.ca||(this.Da=!0):rc(this.n,a),32==a&&-1!=[2,5,6,7].indexOf(this.ca)&&"first_time_tutorial"==this.mode&&0==this.Qd&&"none"==this.ob&&(this.lg=0,this.Qd=!0))};
function Wg(a,b){if("normal_tutorial"==a.mode&&4<=b||"first_time_tutorial"==a.mode&&3==b)a.i.Fm=!1;"first_time_tutorial"==a.mode&&4==b&&(a.i.Fm=!1);"ult_tutorial"==a.mode&&1==b&&(a.i.Fm=!1,a.i.Cx=!0);"first_time_tutorial"==a.mode&&5==b&&(a.i.Fm=!0);if("first_time_tutorial"==a.mode&&8==b&&(a.i.Fm=!1,a.i.Cx=!0,a.om)){Wg(a,b+1);return}if("normal_tutorial"==a.mode&&3==b&&3!=a.ca||"first_time_tutorial"==a.mode&&2==b)a.Zm=new ag("player",{x:75/F,y:73/F},{x:0,y:0},!1),a.Zm.ra(300);if("normal_tutorial"==
a.mode&&4==b&&4!=a.ca||"first_time_tutorial"==a.mode&&3==b)a.Zm=new ag("stunner",{x:75/F,y:60/F},{x:0,y:-5},!1),a.Zm.ra(100);a.ca=b;if("normal_tutorial"==a.mode&&3==a.ca||"first_time_tutorial"==a.mode&&2==a.ca)a.Qb.clearRect(0,0,150,150),a.td.clearRect(0,0,150,150),hh(a,a.Qb),hh(a,a.td),gh(a.Qb,30,110,35,"red","up"),gh(a.Qb,120,110,35,"red","up"),gh(a.td,30,110,35,"red","up"),gh(a.td,120,110,35,"red","up"),J(a.Qb,75,75,0,30,30,"player_normal"),a.Qb.beginPath(),a.Qb.moveTo(75,55),a.Qb.lineTo(75,40),
a.Qb.lineWidth=4,a.Qb.strokeStyle=w.impulse_blue,a.Qb.stroke(),Sa(a.Qb,75,40,13,"up",w.impulse_blue,!1),a.Zm.$(a.td);if("normal_tutorial"==a.mode&&4==a.ca||"first_time_tutorial"==a.mode&&3==a.ca)a.Qb.clearRect(0,0,150,150),a.td.clearRect(0,0,150,150),hh(a,a.Qb),hh(a,a.td),J(a.Qb,75,120,0,30,30,"player_normal"),a.Qb.beginPath(),a.Qb.shadowOffsetX=0,a.Qb.shadowOffsetY=0,a.Qb.lineWidth=5,a.Qb.strokeStyle=w.impulse_blue,a.Qb.arc(75,120,40,7*Math.PI/6,11*Math.PI/6),a.Qb.shadowBlur=0,a.Qb.stroke(),Ia(a.Qb,
"stunner",75,77,1,Math.PI/2),a.Qb.beginPath(),a.Qb.moveTo(75,58),a.Qb.lineTo(75,43),a.Qb.lineWidth=4,a.Qb.strokeStyle="cyan",a.Qb.stroke(),Sa(a.Qb,75,40,13,"up","cyan",!1),J(a.td,75,120,0,30,30,"player_normal"),a.td.globalAlpha=.5,a.td.globalAlpha=1,a.td.beginPath(),a.td.shadowOffsetX=0,a.td.shadowOffsetY=0,a.td.lineWidth=5,a.td.strokeStyle=a.td.shadowColor,a.td.arc(75,120,50,7*Math.PI/6,11*Math.PI/6),a.td.shadowBlur=0,a.td.stroke(),a.Zm.$(a.td)}
l.Ag=function(a,b){if(!(null!=this.Wk&&120>Math.abs(a-Q/2)&&160>Math.abs(b-(Lc/2+60)))){if(!this.pause&&this.ready&&1==this.zoom)if("normal_tutorial"==this.mode&&a>Q&&(a<Kc-Q&&400<b||this.ca==10+this.ml&&350<b)){if(this.ca==this.Kd-1&&this.uk.Na(a-Q,b),400>a&&0<this.ca&&Wg(this,this.ca-1),800<a&&this.ca<this.Kd-1&&Wg(this,this.ca+1),565<b&&595>b){var c=Math.round((this.Kd-1)/2-(600-a)/25);0<=c&&c<this.Kd&&Wg(this,c)}}else c=this.n,c.Bu=(new Date).getTime(),c.ip=!0;"ult_tutorial"==this.mode&&2==this.ca&&
this.uk.Na(a-Q,b)}};l.ir=function(){"first_time_tutorial"==this.mode&&this.Da||this.Vx?X=new Ag(this.u,this.Ec,{H:this.H,i:this.i,s:this.s,Rb:this.Rb,or:!0,fA:this.mode}):(this.ss=.1,this.Up=1,this.zoom=.1,this.hn=!0,pg(this,1,1E3),this.km="in",this.ready=!0,this.u=new lc(this.s,!1),this.i.reset(),this.reset(),ng(this),this.i.Ec=!1)};l.sj=function(){8==this.ca&&"first_time_tutorial"==this.mode&&0==this.Qd&&"none"==this.ob&&(this.lg=this.Zl,this.Qd=!0)};function ih(a,b,c,d,f,g,h){f&&this.ma(a,b,c,d,f,g,h)}l=ih.prototype;l.ma=function(a,b,c,d,f,g,h){this.x=a;this.y=b;this.M=c;this.p=d;this.action=f;this.Nc=!0;this.border=g;this.color=h;this.wa=!1;this.tb=null;this.ne};l.$=function(a){a.save();this.border&&(a.beginPath(),a.strokeStyle=this.Nc?this.wa&&this.tb?this.tb:this.color:"gray",a.rect(this.x-this.M/2,this.y-this.p/2,this.M,this.p),a.lineWidth=4,a.stroke());this.Ae(a);a.restore()};function Fg(a,b){a.ne&&a.ne.$(b)}l.Ae=function(){};
l.Ba=function(a,b){a>=this.x-this.M/2&&a<=this.x+this.M/2&&b>=this.y-this.p/2&&b<=this.y+this.p/2?(this.Nc&&(this.wa=!0),this.Uk=!0):this.Uk=this.wa=!1;this.ne&&(this.ne.visible=this.Uk,jh(this.ne,a,b))};l.Na=function(a,b){return this.Nc&&a>=this.x-this.M/2&&a<=this.x+this.M/2&&b>=this.y-this.p/2&&b<=this.y+this.p/2?(this.action(),!0):!1};l.Ne=function(a){(this.Nc&&this.keyCode&&this.keyCode==a||this.xz&&this.xz==a)&&this.action()};function Dg(a,b){a.ne=b}l.Ag=function(){};l.ah=function(){};kh.prototype=new ih;kh.prototype.constructor=kh;function kh(a,b,c,d,f,g,h,k){this.text=a;this.ma(b,c,d,f,null,!1,g);this.qo=new lh(this.x+this.M/2-20,this.y,20,20,this.color);this.qo.checked=k();this.action=function(){h(this.qo.checked);this.qo.checked=!this.qo.checked}}kh.prototype.Ae=function(a){a.save();this.Uk||(a.globalAlpha*=.5);a.textAlign="left";a.font="18px Muli";a.fillStyle=this.color;a.fillText(this.text,this.x-this.M/2+10,this.y+7);this.qo.$(a);a.restore()};function mh(){}l=mh.prototype;l.ma=function(a,b){this.M=a;this.p=b;this.x=Kc/2;this.y=Lc/2;this.buttons=[];this.Vm=!0;this.O=new fg({fade_in:500,fade_out:250})};l.ra=function(a){this.O.ra(a)};
l.$=function(a){a.save();a.fillStyle=w["world "+this.s+" dark"];a.fillRect(Q,0,O,P);a.globalAlpha*=Uf(this.s?this.s:0);a.drawImage(xf,0,0,O,P,Q,0,O,P);a.restore();a.save();"fade_in"==this.O.ac?a.globalAlpha*=ig(this.O):"fade_out"==this.O.ac&&(a.globalAlpha*=1-ig(this.O));this.Vm&&(a.beginPath(),a.rect(this.x-this.M/2,this.y-this.p/2,this.M,this.p),a.fillStyle="white",a.fill(),a.lineWidth=2,a.strokeStyle="black",a.stroke());this.Ae(a);a.restore()};l.le=function(){};l.Ae=function(){};l.Ba=function(){};
l.Ag=function(){};l.ah=function(){};l.Na=function(){};l.pp=function(){};l.qp=function(){};l.Ne=function(){};l.op=function(){};ug.prototype=new mh;l=ug.prototype;l.constructor=ug;
function ug(a,b,c,d,f){this.i=a;this.H=c;this.Ma=d;this.s=b;this.V=this.i.V;this.pa="BOSS"==this.V.slice(0,4);this.Rb=f;this.ma(800,600);this.Vm=!1;this.We="black";this.L=w["world "+this.s+" bright"];this.color=w["world "+this.s];this.ub=this.Ma.ub;this.Sg=null;if(this.pa)this.Sg={},this.Tc=0;else{this.Sg=N[this.V].r;this.Tc=0;for(var g in N[this.V].r)this.Tc+=1}this.Id=40;nh(this);this.le()}l.le=function(){var a=xf.getContext("2d");Db(a,0,O,P,"Hive "+this.s);xf.setAttribute("style","")};
function nh(a){a.buttons=[];var b=0;"HOW TO PLAY"!=a.V.slice(0,11)?(b=a.x,a.i.Ec?(5>a.H.Uc?a.Xr=new Z("SAVE & QUIT",16,a.x-170,a.y-a.p/2+530,120,65,a.L,a.L,function(a){return function(){a.Ma.u.Wc=a.Ma.u.ur;a.Ma.u.Lb=a.Ma.u.tr;a.Ma.u.gd=a.Ma.u.vr;sf[L]=a.Ma.u;bc();X=new gg(a.Ma.s,!1,a.Ma.u,null,null,!0,!0);of=null}}(a),"save"):(a.Xr=new Z("SAVE & QUIT",16,a.x-170,a.y-a.p/2+530,120,65,"gray","gray",function(){return function(){}}(a),"save"),a.Xr.bf="ONLY BEFORE 0:05"),a.buttons.push(a.Xr),a.Qr=new Z("QUIT",
16,a.x+170,a.y-a.p/2+530,60,65,a.L,a.L,function(a){return function(){X=new gg(a.Ma.s,!1,a.Ma.u,null,null);of=null}}(a),"quit")):(a.al=new Z("RETRY",16,a.x-173,a.y-a.p/2+530,60,65,a.L,a.L,function(a){return function(){mf.translate(Q,0);a.i.w=null;a.i.le(mf);mf.translate(-Q,0);var b=new lc(a.Ma.s,!1);X=new Jf(a.Ma.s,a.i,a.Rb,b,!1,!1);of=null}}(a),"retry"),a.buttons.push(a.al),a.al.keyCode=ua.jq,a.al.bf="right"==A.Vb?"R KEY":"SHIFT KEY",a.Qr=new Z("QUIT",16,a.x+180,a.y-a.p/2+530,60,65,a.L,a.L,function(a){return function(){X=
new Ag(a.Ma.u,a.Ma.Ec,{H:a.Ma.H,i:a.Ma.i,s:a.Ma.s,Rb:a.Ma.Rb,Da:!1});of=null}}(a),"quit")),a.buttons.push(a.Qr)):(a.Qr=new Z("QUIT",16,a.x+157,a.y-a.p/2+530,60,65,a.L,a.L,function(a){return function(){X=new Ag(a.Ma.u,a.Ma.Ec,{H:a.Ma.H,i:a.Ma.i,s:a.Ma.s,Rb:a.Ma.Rb,or:!0,sF:a.Ma.mode});of=null}}(a),"quit"),a.buttons.push(a.Qr),b=a.x-157);a.bl=new Z("RESUME",16,b,a.y-a.p/2+530,100,65,a.L,a.L,function(a){return function(){xg(a.Ma)}}(a),"start");a.bl.keyCode=ua.Vi;a.bl.xz=ua.fk;a.bl.bf="right"==A.Vb?"Q KEY":
"ENTER KEY";a.buttons.push(a.bl);a.iz=new Z("OPTIONS",16,a.x,a.y-a.p/2+460,100,65,a.L,a.L,function(a){return function(){Y(a.O,"fade_out",function(){of=new Og(a)})}}(a),"options");a.iz.We=a.We;a.buttons.push(a.iz);var b=0,c;for(c in a.Sg){for(var d=0,f=0;d<b+1&&d<a.Tc;)d+=12;f=d<=a.Tc?12:a.Tc-(d-12);a.buttons.push(new lg(c,a.Id,a.x+(a.Id+10)*(b-(d-12)-(f-1)/2),a.y-a.p/2+250+a.Id*(Math.floor(b/12)-(Math.ceil(a.Tc/12)-1)/2),a.Id,a.Id,a.i.ub,function(a,b){return function(){Y(b.O,"fade_out",function(){of=
new mg(a,b)})}}(c,a)));b+=1}}
l.Ae=function(a){a.save();a.beginPath();a.textAlign="center";this.i.Ec&&0<this.Ma.u.Of&&(a.font="14px Muli",a.fillStyle="red",a.shadowBlur=10,a.shadowColor=a.fillStyle,a.fillText("CONTINUES: "+this.Ma.u.Of,this.x,this.y-this.p/2+70));a.font="32px Muli";a.shadowBlur=0;a.shadowColor=this.L;a.fillStyle=this.L;a.fillText("PAUSED",this.x,this.y-this.p/2+50);rb(a,this.V,this.x,this.y-this.p/2+150,150,112,this.i.ub);var b=this.Ma.n,c=this.Ma.i,d=this.x,f=this.y-this.p/2+150,g=this.i.ub;a.save();a.beginPath();
a.rect(d-75,f-56,150,112);a.clip();for(var h=0;h<c.r.length;h++){var k=c.r[h].body.g.position;a.beginPath();a.arc(d-75+k.x*F/O*150-1,f-56+k.y*F/P*112-1,2,0,2*Math.PI,!0);a.fillStyle=c.r[h].color;a.shadowBlur=2;a.shadowColor=a.fillStyle;a.fill()}a.beginPath();b=b.body.g.position;a.arc(d-75+b.x*F/O*150-1,f-56+b.y*F/P*112-1,2,0,2*Math.PI,!0);a.fillStyle=w.impulse_blue;a.shadowBlur=2;a.shadowColor=a.fillStyle;a.fill();a.beginPath();a.arc(d-75+b.x*F/O*150-1,f-56+b.y*F/P*112-1,4,0,2*Math.PI,!0);a.strokeStyle=
w.impulse_blue;a.lineWidth=1;a.stroke();a.restore();a.save();a.beginPath();a.rect(d-75,f-56,150,112);a.lineWidth=2;a.strokeStyle=g;a.stroke();a.restore();0<this.Tc&&(a.font="12px Muli",a.fillText("CLICK FOR INFO",this.x,this.y-this.p/2+290));d=[this.ub,"silver","gold"];f=["GATEWAY SCORE","SILVER SCORE","GOLD SCORE"];g=["(UNLOCKS NEXT LEVEL)","(+1 LIFE)","(5 LIVES OR +1 LIFE)"];if(!this.pa)for(b=0;3>b;b++)a.font="24px Muli",a.textAlign="right",a.fillStyle=w[d[b]],a.shadowColor=a.fillStyle,a.font="25px Muli",
a.fillText(N[this.V].sa[L][b],this.x+200,this.y-this.p/2+330+40*b+7),a.textAlign="left",a.font="20px Muli",a.fillText(f[b],this.x-200,this.y-this.p/2+330+40*b),a.font="12px Muli",a.fillText(g[b],this.x-200,this.y-this.p/2+330+40*b+15);a.textAlign="center";for(b=a.shadowBlur=0;b<this.buttons.length;b++)this.buttons[b].$(a);a.restore()};l.Ba=function(a,b){for(var c=0;c<this.buttons.length;c++)5<=this.H.Uc&&this.buttons[c]==this.Xr||this.buttons[c].Ba(a,b)};
l.Na=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b)};l.Ne=function(a){for(var b=0;b<this.buttons.length;b++)this.buttons[b].Ne(a)};Og.prototype=new mh;l=Og.prototype;l.constructor=Og;
function Og(a){this.ma(800,600);this.Ma=a.Ma;this.Vm=!1;this.s=a.s;this.Ph=133;this.Yb=a;this.Yb instanceof ug?(this.We=this.Yb.We,this.color=this.Yb.color,this.ub=this.Yb.ub,this.L=this.Yb.L):(this.We=w["world 0 dark"],this.color=w["world 0"],this.ub=w["world 0 lite"],this.L=w["world 0 bright"],this.le());this.li=new Z("BACK",16,this.x,this.y-this.p/2+560,60,65,this.L,this.L,function(a){return function(){Y(a.O,"fade_out",function(){a.Yb instanceof ug?(nh(a.Yb),of=a.Yb,Y(a.Yb.O,"fade_in")):(a.Yb instanceof
Hf&&Y(a.Yb.O,"fade_in"),of=null)})}}(this),"back");a=this.x;this.Yb instanceof Hf&&(this.$l=new Z("DELETE GAME DATA",20,this.x+150,this.y+120,200,80,this.L,"red",function(a){return function(){Y(a.O,"fade_out",function(){of=new oh(a)})}}(this),"quit"),this.buttons.push(this.$l),a=this.x-150);this.buttons.push(this.li);this.FB=new Z("CHANGE CONTROLS",20,a,this.y+120,200,100,this.L,this.L,function(a){return function(){Y(a.O,"fade_out",function(){of=new ph(a)})}}(this),"controls");this.buttons.push(this.FB);
this.Jt="";a=new qh("GAME MUSIC",this.x,this.y-this.p/2+this.Ph,300,30,this.L,function(a){var c=hc;A.fo=Math.ceil(100*Math.pow(a,2));c.Pc&&!c.$u&&c.Vc[c.Pc].Ki(A.fo);bc()},Math.pow(A.fo/100,.5));Dg(a,new Eg("option_game_music",this.L,this.s));this.buttons.push(a);a=new qh("SOUND EFFECTS",this.x,this.y-this.p/2+this.Ph+30,300,30,this.L,function(a){a=Math.ceil(100*Math.pow(a,3));window.console.log("CHANGING TO "+a);A.$q=a;bc()},Math.pow(A.$q/100,.333));Dg(a,new Eg("option_sound_effects",this.L,this.s));
this.buttons.push(a);a=new kh("FULLSCREEN",this.x,this.y-this.p/2+this.Ph+60,300,30,this.L,function(){var a=document.documentElement;Nf()?document.exitFullscreen?document.exitFullscreen():document.SC?document.SC():document.webkitExitFullscreen&&document.webkitExitFullscreen():a.requestFullscreen?a.requestFullscreen():a.TC?a.TC():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},function(){return Nf()});Dg(a,new Eg("option_fullscreen",this.L,this.s));this.buttons.push(a);a=new kh("PARTICLE EFFECTS",
this.x,this.y-this.p/2+this.Ph+90,300,30,this.L,function(){A.dr=!A.dr},function(){return A.dr});Dg(a,new Eg("option_particle_effects",this.L,this.s));this.buttons.push(a);a=new kh("SCORE LABELS",this.x,this.y-this.p/2+this.Ph+120,300,30,this.L,function(){A.cc=!A.cc},function(){return A.cc});Dg(a,new Eg("option_score_labels",this.L,this.s));this.buttons.push(a);a=new kh("MULTIPLIER DISPLAY",this.x,this.y-this.p/2+this.Ph+150,300,30,this.L,function(){A.Gr=!A.Gr},function(){return A.Gr});Dg(a,new Eg("option_multiplier_display",
this.L,this.s));this.buttons.push(a);a=new kh("IMPULSE SHADOW",this.x,this.y-this.p/2+this.Ph+180,300,30,this.L,function(){A.nr=!A.nr},function(){return A.nr});Dg(a,new Eg("option_impulse_shadow",this.L,this.s));this.buttons.push(a);this.Ma instanceof Jf&&this.Ma.i.Ec&&(a=new kh("SHOW DEFEAT SCREENS",this.x,this.y-this.p/2+this.Ph+210,300,30,this.L,function(){A.Cp=!A.Cp},function(){return A.Cp}),Dg(a,new Eg("option_defeat_screens",this.L,this.s)),this.buttons.push(a));Y(this.O,"fade_in")}
l.le=function(){var a=xf.getContext("2d");Db(a,0,O,P,"Hive 0")};
l.Ae=function(a){a.save();a.textAlign="center";a.font="32px Muli";a.shadowBlur=0;a.shadowColor=this.L;a.fillStyle=this.L;a.fillText("OPTIONS",this.x,this.y-this.p/2+100);for(var b=a.shadowBlur=0;b<this.buttons.length;b++)this.buttons[b].$(a);for(b=0;b<this.buttons.length;b++)Fg(this.buttons[b],a);a.textAlign="center";this.Jt&&(a.font="14px Muli",this.Ma instanceof Jf&&this.Ma.i.Ec?a.fillText(this.Jt,this.x,this.y-this.p/2+this.Ph+180):a.fillText(this.Jt,this.x,this.y-this.p/2+this.Ph+150));a.restore()};
l.Ba=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ba(a,b)};l.Na=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b)};l.Ne=function(){};l.Ag=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ag(a,b)};l.ah=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].ah(a,b)};ph.prototype=new mh;l=ph.prototype;l.constructor=ph;
function ph(a){this.ma(800,600);this.Ma=a.Ma;this.Vm=!1;this.Yb=a;this.We=this.Yb.We;this.ub=this.Yb.ub;this.L=this.Yb.L;this.color=this.Yb.color;this.s=a.s;this.li=new Z("BACK",16,this.x,this.y-this.p/2+560,60,65,this.L,this.L,function(a){return function(){Y(a.O,"fade_out",function(){of=a.Yb;Y(a.Yb.O,"fade_in")})}}(this),"back");this.Ze={};this.Ze["left mouse"]=new Z("LEFT-HAND MOUSE",16,this.x-200,this.y-this.p/2+135,200,100,this.L,this.L,function(){return function(){A.Vb="left";A.Hc="mouse";bc();
ya()}}(this),"left_mouse");this.Ze["right keyboard"]=new Z("KEYBOARD-ONLY",16,this.x,this.y-this.p/2+135,200,100,this.L,this.L,function(){return function(){A.Vb="right";A.Hc="keyboard";bc();ya()}}(this),"keyboard");this.Ze["right mouse"]=new Z("RIGHT-HAND MOUSE",16,this.x+200,this.y-this.p/2+135,200,100,this.L,this.L,function(){return function(){A.Vb="right";A.Hc="mouse";bc();ya()}}(this),"right_mouse");this.buttons.push(this.Ze["left mouse"]);this.buttons.push(this.Ze["right mouse"]);this.buttons.push(this.Ze["right keyboard"]);
this.Td=1<=nc();this.buttons.push(this.li);rh(this);Y(this.O,"fade_in")}l.Ba=function(a,b){this.Pq=null;for(var c in this.Ze)this.Ze[c].Ba(a,b),this.Ze[c].Uk&&(this.Pq=c);this.li.Ba(a,b);rh(this)};l.Na=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b)};function rh(a){for(var b in a.Ze)a.Ze[b].color=a.L,a.Ze[b].border=!1;a.Pq?a.Ze[a.Pq].color=a.L:a.Ze[A.Vb+" "+A.Hc].color=a.L;a.Ze[A.Vb+" "+A.Hc].border=!0}
l.Ae=function(a){a.save();a.textAlign="center";a.font="32px Muli";a.shadowColor=this.L;a.fillStyle=this.L;a.fillText("CONTROLS",this.x,this.y-this.p/2+50);a.font="18px Muli";a.fillText("SELECT SCHEME",this.x,this.y-this.p/2+75);for(var b=a.shadowBlur=0;b<this.buttons.length;b++)this.buttons[b].$(a);b=this.Pq;null==b&&("right"==A.Vb&&"mouse"==A.Hc&&(b="right mouse"),"left"==A.Vb&&"mouse"==A.Hc&&(b="left mouse"),"right"==A.Vb&&"keyboard"==A.Hc&&(b="right keyboard"));a.globalAlpha*=.6;"right mouse"==
b&&(Qa(a,this.x-200,this.y-this.p/2+300,50,this.L,["W","A","S","D"]),a.fillText("MOVE",this.x-200,this.y-this.p/2+360),this.Td?(Ua(a,this.x,this.y-this.p/2+270,75,100,this.L),a.fillText("IMPULSE",this.x,this.y-this.p/2+360),Va(a,this.x+200,this.y-this.p/2+270,75,100,this.L),a.fillText("ULTIMATE",this.x+200,this.y-this.p/2+360)):(Ua(a,this.x+200,this.y-this.p/2+270,75,100,this.L),a.fillText("IMPULSE",this.x+200,this.y-this.p/2+360)),Ra(a,this.x,this.y-this.p/2+430,300,40,10,this.L),a.fillText("SPACEBAR",
this.x,this.y-this.p/2+436),a.shadowBlur=0,a.fillText("ENTER GATEWAY",this.x,this.y-this.p/2+490));"left mouse"==b&&(this.Td?(Ua(a,this.x-200,this.y-this.p/2+270,75,100,this.L),a.fillText("IMPULSE",this.x-200,this.y-this.p/2+360),Va(a,this.x,this.y-this.p/2+270,75,100,this.L),a.fillText("ULTIMATE",this.x,this.y-this.p/2+360)):(Ua(a,this.x-200,this.y-this.p/2+270,75,100,this.L),a.fillText("IMPULSE",this.x-200,this.y-this.p/2+360)),Qa(a,this.x+200,this.y-this.p/2+300,50,this.L),a.fillText("MOVE",this.x+
200,this.y-this.p/2+360),Ra(a,this.x,this.y-this.p/2+430,120,40,10,this.L),a.fillText("SHIFT",this.x,this.y-this.p/2+436),a.shadowBlur=0,a.fillText("ENTER GATEWAY",this.x,this.y-this.p/2+490));"right keyboard"==b&&(Qa(a,this.x-200,this.y-this.p/2+300,50,this.L,["W","A","S","D"]),a.fillText("IMPULSE",this.x-200,this.y-this.p/2+360),this.Td&&(Ra(a,this.x,this.y-this.p/2+280,45,45,10,this.L),a.font="18px Muli",a.fillText("F",this.x,this.y-this.p/2+286),a.fillText("ULTIMATE",this.x,this.y-this.p/2+360)),
Qa(a,this.x+200,this.y-this.p/2+300,50,this.L),a.fillText("MOVE",this.x+200,this.y-this.p/2+360),Ra(a,this.x,this.y-this.p/2+430,300,40,10,this.L),a.fillText("SPACEBAR",this.x,this.y-this.p/2+436),a.shadowBlur=0,a.fillText("ENTER GATEWAY",this.x,this.y-this.p/2+490));a.restore()};l.Ne=function(){};mg.prototype=new mh;l=mg.prototype;l.constructor=mg;
function mg(a,b){this.ma(800,600);this.Vm=!1;b instanceof mh?(this.Ma=b.Ma,this.We=b.We,this.color=b.color,this.ub=b.ub,this.L=b.L,this.s=this.Ma.s):b instanceof cg&&(this.We="black",this.ub=w["world "+b.s+" lite"],this.L=w["world "+b.s+" bright"],this.color=w["world "+b.s],this.s=b.s);this.Yb=b;this.Vj=this.lj=a;G[this.lj].Vj&&(this.Vj=G[this.lj].Vj);this.Bg=this.Hg=null;this.bg=G[this.lj].bg;this.M=600;this.li=new Z("BACK",16,this.x,this.y-this.p/2+560,60,65,this.L,this.L,function(a){return function(){Y(a.O,
"fade_out",function(){a.Yb instanceof mh?(of=a.Yb,Y(a.Yb.O,"fade_in")):a.Yb instanceof cg&&(of=null,Y(a.Yb.O,"fade_in"))})}}(this),"back");this.buttons.push(this.li);this.color=w["world "+this.s];this.ns=500;this.af=G[this.lj].af;this.Wl=null;this.Kd=this.af.length;this.ca=0;Y(this.O,"fade_in")}
l.Ae=function(a){a.save();if(null==this.Wl){var b;b=this.ns;var c=this.af[this.ca].toUpperCase().split(" "),d=[],f=c[0],g=0;if(1==c.length)b=c;else{a.font="20px Muli";for(var h=1;h<c.length;h++){var k=c[h],g=a.measureText(f+k).width;g<b&&"#"!=k?f+=" "+k:(d.push(f),f="#"!=k?k:"");if(h===c.length-1){d.push(f);break}}b=d}this.Wl=b}a.beginPath();a.textAlign="center";a.fillStyle=this.L;a.font="12px Muli";a.fillText("ENEMY INFO",this.x,this.y-this.p/2+70);a.font="30px Muli";a.fillText(this.Vj.toUpperCase(),
this.x,this.y-this.p/2+120);a.globalAlpha/=3;Ka(a,this.s,this.x,this.y-this.p/2+215,80);a.globalAlpha*=3;Ia(a,this.lj,this.x,this.y-this.p/2+215,1.5);a.font="12px Muli";a.fillText("BASE POINTS",this.x,this.y-this.p/2+310);a.font="24px Muli";a.fillText(G[this.lj].Lc,this.x,this.y-this.p/2+335);a.font="20px Muli";for(b=0;b<this.Wl.length;b++)c=b-(this.Wl.length-1)/2,a.fillText(this.Wl[b],this.x,this.y-this.p/2+427+25*c);if(1<this.Kd)for(Sa(a,this.x-300,this.y-this.p/2+420,20,"left",this.L,!1),a.font=
"10px Muli",a.fillStyle=this.L,a.fillText("NEXT",this.x+302,this.y-this.p/2+450),a.fillText("PREV",this.x-302,this.y-this.p/2+450),Sa(a,this.x+300,this.y-this.p/2+420,20,"right",this.L,!1),b=0;b<this.Kd;b++)c=(this.Kd-1)/2-b,a.beginPath(),a.shadowBlur=5,a.arc(this.x-25*c,this.y-this.p/2+515,4,0,2*Math.PI,!0),a.fillStyle=this.color,this.ca==b?(a.fillStyle=this.ub,a.shadowColor=a.fillStyle,a.fill()):(a.globalAlpha/=2,a.shadowColor=a.fillStyle,a.fill(),a.globalAlpha*=2);for(b=a.shadowBlur=0;b<this.buttons.length;b++)this.buttons[b].$(a);
a.restore()};l.Ba=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ba(a,b)};l.Na=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b);a<this.x-this.ns/2?sh(this,this.ca-1):a>this.x+this.ns/2&&sh(this,this.ca+1);500<b&&530>b&&(c=Math.round((this.Kd-1)/2-(this.x-a)/25),0<=c&&c<this.Kd&&sh(this,c))};function sh(a,b){a.ca=b;0>a.ca&&(a.ca+=a.Kd);a.ca>=a.Kd&&(a.ca-=a.Kd);a.Wl=null}l.Ne=function(){};oh.prototype=new mh;l=oh.prototype;l.constructor=oh;
function oh(a){this.ma(800,600);this.Yb=a;this.Vm=!1;this.ub=a.ub;this.L=a.L;this.yx=!1;this.buttons=[];this.$l=new Z("DELETE GAME DATA",20,this.x,this.y,200,80,"red","red",function(a){return function(){Rg();a.yx=!0}}(this),"quit");this.buttons.push(this.$l);this.li=new Z("BACK",16,this.x,this.y-this.p/2+560,60,65,"red","red",function(a){return function(){Y(a.O,"fade_out",function(){of=a.Yb;a.Yb.le();Y(a.Yb.O,"fade_in")})}}(this),"back");this.buttons.push(this.li);this.le();Y(this.O,"fade_in")}
l.le=function(){var a=xf.getContext("2d");Db(a,0,O,P,"Hive 4")};l.Ae=function(a){if(this.yx)a.fillStyle="red",a.textAlign="center",a.font="32px Muli",a.fillText("ALL GAME DATA HAS BEEN DELETED",this.x,120),this.li.$(a);else{a.fillStyle="red";a.textAlign="center";a.font="40px Muli";a.fillText("ARE YOU SURE",this.x,100);a.font="24px Muli";a.fillText(" YOU WANT TO DELETE ALL YOUR GAME DATA?",this.x,140);a.font="16px Muli";a.fillText("THIS ACTION CANNOT BE UNDONE.",this.x,200);for(var b=0;b<this.buttons.length;b++)this.buttons[b].$(a)}};
l.Ba=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Ba(a,b)};l.Na=function(a,b){for(var c=0;c<this.buttons.length;c++)this.buttons[c].Na(a,b)};function Rg(){localStorage.removeItem(pf);var a=A;Ff();A=a;rf=!1;bc()};new ih;function ag(a,b,c,d){this.ma(a,b,c,d)}
ag.prototype.ma=function(a,b,c,d){this.KD=d?!0:!1;this.zf=[];if("spark"==a||"multi"==a)c={x:0,y:0};d=Math.min(1,10/Math.sqrt(Math.sqrt(c.x*c.x+c.y*c.y+.01)));c={x:c.x*d,y:c.y*d};this.wr=this.Gy=1E3;this.color="black";"boss"==a.slice(a.length-4,a.length)?(this.shape=G[a].Xb[0],this.color=G[a].color,this.Qh=.5,this.zg=10,this.no=5):"player"==a?(this.shape={type:"circle",x:0,y:0,Z:qc.prototype.hh},this.color=w.player_color,this.Qh=.5,this.zg=6,this.no=1):"harpoon"==a||"harpoonhead"==a?(this.shape=G[a].Xb[0],
this.color=G[a].color,this.Qh=.3,this.zg=2,this.no=1):"spark"==a||"multi"==a?(this.zg=3,this.no=10,this.Qh=1,this.shape=a):(this.shape=G[a].Xb[0],this.color=G[a].color,"tanker"==a&&(this.color="red"),this.Qh=.3,this.zg=2,this.no=1);this.Jq=this.no*Math.max(3,Math.sqrt(Math.sqrt(c.x*c.x+c.y*c.y)));this.Pp=.5;this.Be={x:b.x,y:b.y};this.hj={x:this.Qh*c.x,y:this.Qh*c.y};for(a=0;a<this.zg;a++)dir=2*Math.PI/this.zg*Math.random(),new_v={x:this.Qh*c.x+Math.cos(dir+2*Math.PI/this.zg*a)*this.Jq,y:this.Qh*c.y+
Math.sin(dir+2*Math.PI/this.zg*a)*this.Jq},this.zf.push(new th(this.shape,F/3,{x:b.x*F,y:b.y*F},{x:new_v.x*F,y:new_v.y*F},this.color));for(a=0;a<this.zg;a++)dir=2*Math.PI/this.zg*Math.random(),new_v={x:this.Qh*c.x+2*Math.cos(dir+2*Math.PI/this.zg*a)*this.Jq,y:this.Qh*c.y+2*Math.sin(dir+2*Math.PI/this.zg*a)*this.Jq},this.zf.push(new th(this.shape,F/3,{x:b.x*F,y:b.y*F},{x:new_v.x*F,y:new_v.y*F},this.color))};
ag.prototype.ra=function(a){this.wr-=a;this.Be.x+=this.hj.x*a/1E3;this.Be.y+=this.hj.y*a/1E3;this.hj.x-=this.Pp*this.hj.x*a/1E3;this.hj.y-=this.Pp*this.hj.y*a/1E3;for(var b=0;b<this.zf.length;b++)this.zf[b].ra(a)};ag.prototype.$=function(a){this.KD&&(a.shadowColor=this.color,a.shadowBlur=15);for(var b=0;b<this.zf.length;b++)this.zf[b].$(a,this.wr/this.Gy);a.shadowBlur=0};function th(a,b,c,d,f){this.ma(a,b,c,d,f)}
th.prototype.ma=function(a,b,c,d,f){this.Je=c;this.shape=a;this.size=b;this.fg=d;this.color=f;this.Pp=.5};th.prototype.ra=function(a){this.Je.x+=this.fg.x*a/1E3;this.Je.y+=this.fg.y*a/1E3;this.fg.x-=this.Pp*this.fg.x*a/1E3;this.fg.y-=this.Pp*this.fg.y*a/1E3};
th.prototype.$=function(a,b){if("spark"==this.shape||"multi"==this.shape){a.save();a.globalAlpha*=b;var c=S({x:0,y:0},this.fg);"spark"==this.shape?J(a,this.Je.x/F,this.Je.y/F,c,12,12,"spark"):"multi"==this.shape&&J(a,this.Je.x/F,this.Je.y/F,c,12,12,"multi")}else a.save(),c=S({x:0,y:0},this.fg),Ha(a,this.Je.x,this.Je.y,this.shape,this.size,this.color,b,c);a.restore()};function Eg(a,b,c,d){b&&this.ma(a,b,c,d)}
Eg.prototype.ma=function(a,b,c,d){this.type=a;this.color=b;this.EB=d;this.y=this.x=0;this.visible=!1;"rank_explanation"==this.type?(this.M=360,this.p=140):"beat_hive"==this.type.substring(0,9)?(this.M=150,this.p=120):"first_gold"==this.type?(this.M=200,this.p=150):"combo"==this.type||"pacifist"==this.type||"survivor"==this.type?(this.M=250,this.p=150):"fast_time"==this.type?(this.M=220,this.p=150):"0star"==this.type?(this.M=250,this.p=120):"1star"==this.type||"2star"==this.type||"3star"==this.type?
(this.M=250,this.p=150):"option_game_music"==this.type?(this.M=300,this.p=40):"option_sound_effects"==this.type?(this.M=250,this.p=40):"option_fullscreen"==this.type?(this.M=150,this.p=40):"option_particle_effects"==this.type?(this.M=250,this.p=40):"option_score_labels"==this.type?(this.M=350,this.p=40):"option_multiplier_display"==this.type?(this.M=300,this.p=40):"option_impulse_shadow"==this.type?(this.M=350,this.p=40):"option_defeat_screens"==this.type?(this.M=300,this.p=40):"tutorial_move"==this.type?
(this.M=220,this.p=40):"tutorial_impulse"==this.type?(this.M=220,this.p=40):"tutorial_pause"==this.type?(this.M=220,this.p=40):"tutorial_score_points"==this.type?(this.M=380,this.p=40):"tutorial_enter_gateway"==this.type&&(this.M=300,this.p=40);this.opacity=0;this.s=c};
Eg.prototype.$=function(a){if(this.visible){a.save();a.globalAlpha*=.9;a.beginPath();a.strokeStyle=this.color;a.fillStyle="black";a.shadowBlur=0;a.lineWidth=2;a.rect(this.x-this.M/2,this.y-this.p/2,this.M,this.p);a.fill();a.stroke();"option_game_music"==this.type&&(this.Jj="BACKGROUND MUSIC VOLUME");"option_sound_effects"==this.type&&(this.Jj="SOUND EFFECTS VOLUME");"option_fullscreen"==this.type&&(this.Jj="GO FULLSCREEN");"option_particle_effects"==this.type&&(this.Jj="SHOW PARTICLE EFFECTS");"option_score_labels"==
this.type&&(this.Jj="SHOW SCORE VALUE WHEN ENEMIES DIE");"option_multiplier_display"==this.type&&(this.Jj="SHOW MULTIPLIER BELOW PLAYER");"option_impulse_shadow"==this.type&&(this.Jj="SHOW AIMING SHADOW FOR IMPULSE");"option_defeat_screens"==this.type&&(this.Jj="SHOW DEFEAT SCREEN ON DEATH");"tutorial_move"==this.type&&("right"==A.Vb&&(this.Wj="WASD TO MOVE"),"left"==A.Vb&&"mouse"==A.Hc&&(this.Wj="ARROW KEYS TO MOVE"));"tutorial_impulse"==this.type&&(this.Wj="mouse"==A.Hc?"CLICK TO IMPULSE":"ARROW KEYS TO IMPULSE");
"tutorial_pause"==this.type&&("right"==A.Vb?this.Wj="ESC TO PAUSE":"left"==A.Vb&&(this.Wj="ENTER TO PAUSE"));"tutorial_score_points"==this.type&&(this.Wj="SCORE POINTS TO OPEN LEVEL GATEWAY");"tutorial_enter_gateway"==this.type&&("right"==A.Vb&&(this.Wj="SPACEBAR TO ENTER GATEWAY"),"left"==A.Vb&&(this.Wj="SHIFT TO ENTER GATEWAY"));if("tutorial"==this.type.substring(0,8))a.textAlign="center",a.font="16px Muli",a.fillStyle=this.color,a.fillText(this.Wj,this.x,this.y-this.p/2+25);else if("rank_explanation"==
this.type){var b=this.y-this.p/2,c=this.x+this.M/2-10;Gb(a,this.x-this.M/2+50,b-7+30,this.s,"half",.8);Gb(a,this.x-this.M/2+50,b-7+60,this.s,"basic",.8);Gb(a,this.x-this.M/2+50,b-7+90,this.s,"silver",.8);Gb(a,this.x-this.M/2+50,b-7+120,this.s,"gold",.8);a.textAlign="right";a.font="16px Muli";a.fillStyle="white";a.fillText("ONE OR MORE CONTINUES",c-10,b+30);a.fillText("NO CONTINUES USED",c-10,b+30+30);a.fillText("SILVER SCORE ON EVERY LEVEL",c-10,b+30+60);a.fillText("GOLD SCORE ON EVERY LEVEL",c-10,
b+30+90)}else if("option"==this.type.substring(0,6))a.textAlign="center",a.font="16px Muli",a.fillStyle=this.color,a.fillText(this.Jj,this.x,this.y-this.p/2+25);else{a.textAlign="center";a.font="16px Muli";a.fillStyle="white";for(b=0;b<Hb[this.type].text.length;b++)a.fillText(Hb[this.type].text[b],this.x,this.y-this.p/2+40+24*b);a.font="12px Muli";b=this.y+this.p/2-20;a.beginPath();a.moveTo(this.x-this.M/2+10,b-40);a.lineTo(this.x+this.M/2-10,b-40);a.strokeStyle="white";a.lineWidth=1;a.stroke();this.EB?
a.fillText("COMPLETED",this.x,b-20):a.fillText("REWARD",this.x,b-20);c=Hb[this.type].za;if(0<c.length)for(var d=0;d<c.length;d++){reward=c[d];var f=a,g=this.x-45*((c.length-1)/2-d),h=b,k=reward;f.font="15px Muli";f.fillStyle="white";f.textAlign="center";f.fillText("+1",g-9,h+5);"spark"==k&&J(f,g+9,h,0,14.4,14.4,"sparks_icon");"life"==k&&J(f,g+9,h,0,18,18,"lives_icon");"ult"==k&&J(f,g+9,h,0,18,18,"ultimate_icon")}else a.font="12px Muli",a.fillStyle=w.impulse_blue,a.textAlign="center",a.fillText("NEW UPCOMING GAME MODE",
this.x,b)}a.restore()}};function jh(a,b,c){a.x=b;a.y=c+a.p/2;"option"==a.type.substring(0,6)&&(a.y+=20);"tutorial"==a.type.substring(0,8)&&(a.x=b,a.y=c-a.p/2-50)};Z.prototype=new ih;Z.prototype.constructor=Z;function Z(a,b,c,d,f,g,h,k,m,q){this.text=a;this.size=b;this.ma(c,d,f,g,m,!1,h);this.tb=k;this.Tm=!1;this.icon=q;this.Nc=!0;this.We=null;this.iA=!0}
Z.prototype.Ae=function(a){a.save();if(this.icon){a.save();a.shadowBlur=0;if("player"==this.icon)this.wa?J(a,this.x,this.y-this.p/8,0,40,40,"player_normal"):J(a,this.x,this.y-this.p/8,0,40,40,"player_white");else if("gear"==this.icon)this.wa?Xa(a,this.x,this.y-this.p/8,w.impulse_blue,"#080808",!1):Xa(a,this.x,this.y-this.p/8,"white","#080808",!1);else if("credit"==this.icon)this.wa?Ya(a,this.x,this.y-this.p/8,w.impulse_blue):Ya(a,this.x,this.y-this.p/8,"white");else if("tutorial"==this.icon)this.wa?
Za(a,this.x,this.y-this.p/8,13,w.impulse_blue):Za(a,this.x,this.y-this.p/8,13,"white");else if("note"==this.icon)this.wa?kb(a,this.x,this.y-this.p/6,w.impulse_blue):kb(a,this.x,this.y-this.p/6,"white");else if("texture"==this.icon)this.wa?ib(a,this.x,this.y-this.p/4,w.impulse_blue):ib(a,this.x,this.y-this.p/4,"white");else if("physics_engine"==this.icon)this.wa?jb(a,this.x,this.y-this.p/6,w.impulse_blue):jb(a,this.x,this.y-this.p/6,"white");else if("audio"==this.icon)this.wa?lb(a,this.x,this.y-this.p/
6,20,w.impulse_blue,!1,!1):lb(a,this.x,this.y-this.p/6,20,"white",!1,!1);else if("back"==this.icon)this.wa?bb(a,this.x,this.y-this.p/8,this.tb):bb(a,this.x,this.y-this.p/8,this.color);else if("start"==this.icon)this.wa?cb(a,this.x,this.y-this.p/8,this.tb):cb(a,this.x,this.y-this.p/8,this.color);else if("retry"==this.icon)this.wa?ab(a,this.x,this.y-this.p/8,this.tb):ab(a,this.x,this.y-this.p/8,this.color);else if("options"==this.icon)this.wa?Xa(a,this.x,this.y-this.p/8,this.tb,this.We):Xa(a,this.x,
this.y-this.p/8,this.color,this.We);else if("fb"==this.icon)this.wa?Wa(a,this.x,this.y-this.p/8,this.tb):Wa(a,this.x,this.y-this.p/8,this.color);else if("save"==this.icon)this.wa?eb(a,this.x,this.y-this.p/8,this.tb):eb(a,this.x,this.y-this.p/8,this.color);else if("quest"==this.icon)this.wa?fb(a,this.x,this.y-this.p/8,this.tb):fb(a,this.x,this.y-this.p/8,this.color);else if("quit"==this.icon)this.wa?gb(a,this.x,this.y-this.p/6,this.tb):gb(a,this.x,this.y-this.p/6,this.color);else if("mute_in_game"==
this.icon)lb(a,this.x,this.y,15,this.wa?this.tb:this.color,!0,A.UC);else if("pause_in_game"==this.icon){var b=this.x,c=this.y,d=this.wa?this.tb:this.color;a.save();a.clearRect(b-15,c-15,45,45);a.beginPath();a.rect(b-5.625,c-7.5,3.75,15);a.rect(b+1.875,c-7.5,3.75,15);a.fillStyle=d;a.fill();a.font="10px Muli";a.textAlign="center";"left"==A.Vb?a.fillText("ENTER",b+15,c+15):a.fillText("Q",b+15,c+15);a.restore()}else"fullscreen_in_game"==this.icon?(b=this.x,c=this.y,d=this.wa?this.tb:this.color,a.save(),
a.clearRect(b-15,c-15,45,45),a.beginPath(),a.globalAlpha/=2,a.rect(b-11.25,c-11.25,22.5,22.5),a.strokeStyle=d,a.fillStyle=d,a.lineWidth=2,a.stroke(),a.globalAlpha*=2,a.beginPath(),a.moveTo(b-7.5,c-7.5),a.lineTo(b-0,c-7.5),a.lineTo(b-7.5,c-0),a.closePath(),a.fill(),a.beginPath(),a.moveTo(b+7.5,c+7.5),a.lineTo(b+0,c+7.5),a.lineTo(b+7.5,c+0),a.closePath(),a.fill(),a.beginPath(),a.moveTo(b-7.5,c-7.5),a.lineTo(b+7.5,c+7.5),a.stroke(),a.font="10px Muli",a.textAlign="center",a.fillText("C",b+15,c+15),a.restore()):
"easy_mode"==this.icon?Ea(a,"goo",this.x,this.y-this.p/8,30,Math.PI/2,this.wa?"ulted":"white",this.wa?w.impulse_blue:"white"):"normal_mode"==this.icon?J(a,this.x,this.y-this.p/8,0,40,40,this.wa?"ultimate_icon_blue":"ultimate_icon"):"left_mouse"==this.icon?(Ta(a,this.x-.23*this.M,this.y-.1*this.p,.17*this.M,.4*this.p,this.wa?this.tb:this.color),Qa(a,this.x+.17*this.M,this.y,.2*this.p,this.wa?this.tb:this.color)):"keyboard"==this.icon?(Qa(a,this.x-.23*this.M,this.y,.2*this.p,this.wa?this.tb:this.color),
Qa(a,this.x+.23*this.M,this.y,.2*this.p,this.wa?this.tb:this.color)):"right_mouse"==this.icon?(Qa(a,this.x-.17*this.M,this.y,.2*this.p,this.wa?this.tb:this.color),Ta(a,this.x+.23*this.M,this.y-.1*this.p,.17*this.M,.4*this.p,this.wa?this.tb:this.color)):"help_icon"==this.icon?(a.beginPath(),a.arc(this.x,this.y,this.M/2,-.5*Math.PI,-.5*Math.PI+1.999*Math.PI,!1),a.strokeStyle=this.wa?this.tb:this.color,a.lineWidth=2,a.fillStyle="black",a.stroke(),a.fill(),a.beginPath(),a.arc(this.x,this.y-this.M/8,this.M/
8,-Math.PI,0,!1),a.lineTo(this.x,this.y+this.M/8),a.stroke(),a.beginPath(),a.arc(this.x,this.y+this.M/2-4,1,0,2*Math.PI),a.fillStyle=this.wa?this.tb:this.color,a.fill()):"controls"==this.icon?(a.shadowBlur=0,"right"==A.Vb&&"mouse"==A.Hc&&(Qa(a,this.x-.15*this.M,this.y,.2*this.p,this.wa?this.tb:this.color),Ta(a,this.x+.2*this.M,this.y-.1*this.p,.15*this.M,.4*this.p,this.wa?this.tb:this.color)),"left"==A.Vb&&"mouse"==A.Hc&&(Ta(a,this.x-.2*this.M,this.y-.1*this.p,.15*this.M,.4*this.p,this.wa?this.tb:
this.color),Qa(a,this.x+.15*this.M,this.y,.2*this.p,this.wa?this.tb:this.color)),"right"==A.Vb&&"keyboard"==A.Hc&&(Qa(a,this.x-.2*this.M,this.y,.2*this.p,this.wa?this.tb:this.color),Qa(a,this.x+.2*this.M,this.y,.2*this.p,this.wa?this.tb:this.color))):"world"==this.icon.slice(0,5)?(b=parseInt(this.icon.slice(5)),a.save(),a.globalAlpha=this.wa&&this.Nc?.5*a.globalAlpha:this.Nc?.3*a.globalAlpha:.15*a.globalAlpha,this.Nc?Ka(a,b,this.x,this.y,2*this.size,this.wa):Oa(a,b,this.x,this.y,2*this.size),a.restore(),
a.save(),this.Nc||(a.globalAlpha*=.3),a.textAlign="center",a.font="32px Muli",a.fillStyle=this.color,a.fillText(["I","II","III","IV"][b-1],this.x,this.y+10),a.restore()):"practice"==this.icon.slice(0,8)&&(b=parseInt(this.icon.slice(8)),this.Nc?(a.globalAlpha=this.wa?3==b?.6*a.globalAlpha:.7*a.globalAlpha:.3*a.globalAlpha,Ka(a,b,this.x,this.y,1.4*this.size)):(a.globalAlpha*=.3,Oa(a,b,this.x,this.y,1.4*this.size)));a.restore()}a.beginPath();a.textAlign="center";a.font=this.size+"px Muli";this.wa&&this.iA&&
(a.beginPath(),b=a.measureText(this.text).width,a.moveTo(this.x-b/2,this.y+.4*this.p),a.lineTo(this.x+b/2,this.y+.4*this.p),a.strokeStyle=this.tb?this.tb:this.color,a.lineWidth=2,a.stroke());this.Nc||"practice"!=this.icon.slice(0,8)||(a.globalAlpha*=.4);a.fillStyle=this.wa?this.tb:this.color;this.Tm?(a.shadowBlur=5,a.shadowColor=a.fillStyle):a.shadowBlur=0;"practice"==this.icon.slice(0,8)?a.fillText(this.text,this.x,this.y+this.p/6):a.fillText(this.text,this.x,this.y+this.p/3);this.bf&&(a.font=this.TB?
this.TB:.7*this.size+"px Muli",a.fillText(this.bf,this.x,this.y+this.p/3+1*this.size));a.fill();a.restore()};new ih;Hg.prototype=new ih;Hg.prototype.constructor=Hg;
function Hg(a,b,c,d){this.type=a;this.x=b;this.y=c;this.Z=d;this.M=2*d;this.p=2*d;this.kp=document.createElement("canvas");this.kp.width=this.M;this.kp.height=this.p;b=this.kp.getContext("2d");draw_quest_button(b,this.Z,this.Z,this.Z,this.type);b=this.kp;b=b.getContext("2d").getImageData(0,0,b.width,b.height);for(c=0;c<b.height;c++)for(d=0;d<b.width;d++){var f=4*c*b.width+4*d,g=(b.data[f]+b.data[f+1]+b.data[f+2])/3;b.data[f]=g;b.data[f+1]=g;b.data[f+2]=g;b.data[f+3]=b.data[f+3]?255:0}c=document.createElement("canvas");
c.width=b.width;c.height=b.height;c.getContext("2d").putImageData(b,0,0,0,0,b.width,b.height);this.$B=c;this.uz=-1!=uf.indexOf(a);this.ne=new Eg(this.type,"white",0,this.uz)}
Hg.prototype.$=function(a){this.uz?a.drawImage(this.kp,0,0,this.M,this.p,this.x-this.Z,this.y-this.Z,this.M,this.p):(a.save(),a.globalAlpha*=.4,a.drawImage(this.$B,0,0,this.M,this.p,this.x-this.Z,this.y-this.Z,this.M,this.p),a.restore());this.Uk&&(a.save(),a.globalAlpha*=.2,a.beginPath(),a.arc(this.x,this.y,this.Z,0,2*Math.PI,!1),a.fillStyle="#fff",a.fill(),a.beginPath(),a.restore())};Hg.prototype.ra=function(){};function uh(a,b,c,d,f){this.x=a;this.y=b;this.M=c;this.p=d;this.color=f;this.Nc=!0;this.value=0;this.Uj=20}l=uh.prototype;l.$=function(a){a.beginPath();a.strokeStyle=this.color;a.fillStyle=this.color;a.rect(this.x-this.M/2,this.y-this.p/2,this.M,this.p);a.lineWidth=1;a.save();a.globalAlpha*=.75;a.fill();a.restore();a.stroke();a.beginPath();a.rect(this.x-this.M/2+this.M*this.value-this.Uj/2,this.y-this.Uj/2,this.Uj,this.Uj);a.fill()};
l.Ag=function(a,b){a>this.x-this.M/2-this.Uj/2&&a<this.x+this.M/2+this.Uj/2&&b>this.y-this.p/2-this.Uj/2&&b<this.y+this.p/2+this.Uj/2&&(vh(this,(a-(this.x-this.M/2))/this.M),this.Dx=!0)};function vh(a,b){a.value=b;0>a.value&&(a.value=0);1<a.value&&(a.value=1)}l.ah=function(){this.onselect(this.value);this.Dx=!1};l.onselect=function(){};l.Ba=function(a){this.Dx&&vh(this,(a-(this.x-this.M/2))/this.M)};
function lh(a,b,c,d,f,g,h){this.x=a;this.y=b;this.M=c;this.p=d;this.color=f;this.Nc=!0;this.checked=h?h:!1;this.iE=g}lh.prototype.$=function(a){a.beginPath();a.rect(this.x-this.M/2,this.y-this.p/2,this.M,this.p);this.checked&&(a.moveTo(this.x-this.M/2,this.y-this.p/2),a.lineTo(this.x+this.M/2,this.y+this.p/2),a.moveTo(this.x-this.M/2,this.y+this.p/2),a.lineTo(this.x+this.M/2,this.y-this.p/2));a.strokeStyle=this.color;a.lineWidth=1;a.stroke()};
lh.prototype.Na=function(a,b){a>this.x-this.M/2&&a<this.x+this.M/2&&b>this.y-this.p/2&&b<this.y+this.p/2&&(this.checked=!this.checked,this.iE(this.checked))};qh.prototype=new ih;l=qh.prototype;l.constructor=qh;function qh(a,b,c,d,f,g,h,k){this.text=a;this.ma(b,c,d,f,function(){},!1,g);this.Um=new uh(this.x+this.M/2-20,this.y,100,5,this.color);this.Um.value=k;this.Um.onselect=h}l.Ae=function(a){a.save();this.Uk||(a.globalAlpha*=.5);a.textAlign="left";a.font="18px Muli";a.fillStyle=this.color;a.fillText(this.text,this.x-this.M/2+10,this.y+7);this.Um.$(a);a.restore()};l.Ag=function(a,b){this.Um.Ag(a,b)};l.ah=function(a,b){this.Um.ah(a,b)};l.aD=ih.prototype.Ba;
l.Ba=function(a,b){this.aD(a,b);this.Um.Ba(a,b)};Pg.prototype=new ih;Pg.prototype.constructor=Pg;function Pg(a,b,c,d,f,g,h,k,m){this.text=a;this.size=b;this.ma(c,d,f,g,m,!1,h);this.tb=k;this.Nv=!1;this.os=null;this.bf="";this.Tm=!1;this.shadowColor=this.color;this.Ax=!1}
Pg.prototype.Ae=function(a){a.save();a.beginPath();a.textAlign="center";a.font=this.size+"px Muli";a.fillStyle=this.wa?this.tb:this.color;this.Tm?(a.shadowBlur=5,a.shadowColor=this.shadowColor):a.shadowBlur=0;a.fillText(this.text,this.x,this.y);a.fill();if(!this.wa&&!this.Nv)if(null!=this.os&&this.os<this.text.length){a.globalAlpha*=.5;a.beginPath();var b=a.measureText(this.text.slice(0,this.os)).width,c=a.measureText(this.text.slice(0,this.os+1)).width,d=a.measureText(this.text).width;a.moveTo(this.x-
d/2+b,this.y+this.size/4);a.lineTo(this.x-d/2+c,this.y+this.size/4);a.strokeStyle=this.color;a.lineWidth=1;a.stroke();a.globalAlpha/=.5;""!=this.bf&&(a.globalAlpha*=.5,this.Ax&&(a.globalAlpha*=.5),a.font=this.size/2+"px Muli",a.fillText(this.bf,this.x-d/2+(b+c)/2,this.y+3*this.size/4))}else""!=this.bf&&(a.globalAlpha*=.5,this.Ax&&(a.globalAlpha*=.5),a.font=this.size/2+"px Muli",a.fillText(this.bf,this.x,this.y+3*this.size/4));a.restore();a.shadowBlur=0};lg.prototype=new ih;lg.prototype.constructor=lg;function lg(a,b,c,d,f,g,h,k){this.state=null;this.lj=a;this.size=b;this.ma(c,d,f,g,k,!0,h);this.Id=30}lg.prototype.Ae=function(a){a.save();this.wa&&(a.save(),a.beginPath(),a.rect(this.x-this.M/2,this.y-this.p/2,this.M,this.p),a.globalAlpha*=.5,a.fillStyle=this.color,a.fill(),a.restore());Ea(a,this.lj,this.x,this.y,this.Id);a.restore()};function rg(a){this.Ef=[];this.w=a;this.Ef.push(new wh(this.w));this.Ef.push(new xh(this.w));this.Ef.push(new yh(this.w));this.Ef.push(new zh(this.w));this.Ef.push(new Ah(this.w));this.yu=3E3}rg.prototype.$=function(a){if(0!=this.Ef.length){var b=this.Ef[0];a.save();"fade_in"==b.O.ac?a.globalAlpha*=ig(b.O):"fade_out"==b.O.ac?a.globalAlpha*=1-ig(b.O):b.yv||(a.globalAlpha=0);a.globalAlpha*=.8;b.ne&&b.ne.$(a);b.$(a);a.restore()}};
rg.prototype.ra=function(a){if(0<this.yu)this.yu-=a;else if(0!=this.Ef.length&&(Bh(this.Ef[0],a),this.Ef[0].Xt))for(this.Ef.shift();0<this.Ef.length&&Ch(this.Ef[0]);)this.Ef.shift()};function Dh(){}l=Dh.prototype;l.ma=function(a){this.w=a;this.O=new fg({fade_in:1E3,fade_out:1E3});this.Xt=!1;this.duration=null;this.yv=!1};l.zu=function(){return!0};l.$=function(){};
function Bh(a,b){if(a.zu()){a.yv||(Ch(a)?a.Xt=!0:(a.yv=!0,Y(a.O,"fade_in"),a.ne&&(a.ne.visible=!0)));0<a.duration&&(a.duration-=b);if(a.ne){var c=a.w.n.body.g.position;jh(a.ne,c.x*F,c.y*F)}a.O.ra(b);a.ra(b);Ch(a)&&Y(a.O,"fade_out",function(){a.Xt=!0})}}l.Wr=function(){return!1};function Ch(a){return a.Wr()||0>a.duration}l.ra=function(){};wh.prototype=new Dh;wh.prototype.constructor=wh;function wh(a){this.ma(a);this.ne=new Eg("tutorial_move",a.L,a.s)}wh.prototype.$=function(){};wh.prototype.ra=function(){};
wh.prototype.Wr=function(){return this.w.bn.player_moved};xh.prototype=new Dh;xh.prototype.constructor=xh;function xh(a){this.ma(a);this.ne=new Eg("tutorial_impulse",a.L,a.s)}xh.prototype.$=function(){};xh.prototype.ra=function(){};xh.prototype.Wr=function(){return this.w.bn.player_impulsed};yh.prototype=new Dh;yh.prototype.constructor=yh;function yh(a){this.ma(a);this.duration=3E3;this.ne=new Eg("tutorial_pause",a.L,a.s)}yh.prototype.zu=function(){return this.w.bn.enemy_killed};yh.prototype.$=function(){};
yh.prototype.ra=function(){};zh.prototype=new Dh;l=zh.prototype;l.constructor=zh;function zh(a){this.ma(a)}l.$=function(a){var b=this.w.i.Rf.x*F,c=this.w.i.Rf.y*F,d=window.performance.now()%1500/1500,f=0,f=d>2/3?3*(1-d):1.5*d;a.beginPath();a.moveTo(b,c-75-20*f);a.lineTo(b,c-55-20*f);a.lineWidth=8;a.strokeStyle="white";a.stroke();Sa(a,b,c-50-20*f,25,"down","white",!1)};l.ra=function(){};l.zu=function(){return this.w.bn.gateway_opened};l.Wr=function(){return this.w.bn.moved_to_gateway};
Ah.prototype=new Dh;Ah.prototype.constructor=Ah;function Ah(a){this.ma(a);this.duration=3E3;this.ne=new Eg("tutorial_enter_gateway",a.L,a.s)}Ah.prototype.$=function(){};Ah.prototype.ra=function(){rf&&(rf=!1,bc())};new ih;